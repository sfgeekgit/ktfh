<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Choice Before Us - About</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap" rel="stylesheet">

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-5Z851V6HKD"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-5Z851V6HKD');
    </script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #1a1d23;
            color: #aaa;
            font-family: "Roboto Mono", monospace;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container {
            max-width: 640px;
            width: 100%;
            background-color: #232830;
            border: 2px solid #334155;
            border-radius: 8px;
            padding: 40px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        h1 {
            color: #aaa;
            font-size: 28px;
            margin-bottom: 10px;
            text-align: center;
        }

        .subtitle {
            font-size: 14px;
            text-align: center;
            margin-bottom: 30px;
            color: #aaa;
        }

        .subtitle a {
            color: #2196F3;
            text-decoration: none;
            font-weight: bold;
        }

        .subtitle a:hover {
            text-decoration: underline;
        }

        .win-condition {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }

        p {
            margin-bottom: 15px;
            font-size: 15px;
        }

        hr {
            margin: 25px 0;
            border: none;
            border-top: 1px solid #2196F3;
            opacity: 0.3;
        }

        a {
            color: #2196F3;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        strong {
            color: #aaa;
        }

        .prize {
            font-weight: bold;
        }

        .start-button {
            display: block;
            width: 100%;
            max-width: 300px;
            margin: 30px auto 0;
            padding: 15px 30px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            text-align: center;
            text-decoration: none;
            transition: background 0.2s;
        }

        .start-button:hover {
            background: #45a049;
            text-decoration: none;
        }

        @media (max-width: 640px) {
            .container {
                padding: 25px;
            }

            h1 {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>The Choice Before Us</h1>
        <p class="subtitle">A game by <a href="https://nickshapiro.com" target="_blank">Nick Shapiro</a></p>

        <p>
            Race to build world changing AI before your rivals. But if anyone, including you, builds an unaligned AGI, humanity loses. As your company grows, the world comes to depend on your gifts, but also your restraint. Can you navigate the narrow path? As your creation gains strength you may notice the game misbehaving. Don't be alarmed. This is normal. Probably.
        </p>

        <hr>

        <p>
            This game was created for the <a href="https://keepthefuturehuman.ai/" target="_blank">Keep The Future Human</a> Creative Contest and won the Grand Prize. The contest challenged creators to explore ideas from Anthony Aguirre's essay on AI risks and the importance of maintaining human agency in an increasingly AI-driven world.
        </p>

        <a href="/" class="start-button">PLAY</a>
    </div>

    <script>
        // Track about page load with referrer and UTM parameters
        (function() {
            try {
                // Capture referrer
                const referrer = document.referrer || '(direct)';

                // Capture UTM parameters from URL
                const params = new URLSearchParams(window.location.search);
                const eventParams = {
                    referrer: referrer,
                    page_location: window.location.href,
                    page_title: document.title
                };

                // Add UTM parameters if present
                const utmParams = ['utm_source', 'utm_medium', 'utm_campaign', 'utm_term', 'utm_content'];
                utmParams.forEach(function(param) {
                    const value = params.get(param);
                    if (value) {
                        eventParams[param] = value;
                    }
                });

                // Send to Google Analytics
                if (typeof gtag === 'function') {
                    gtag('event', 'about_page', eventParams);
                }

                // Send to custom logging endpoint (mirrors to Caddy logs)
                const queryParts = ['event=about_page'];

                // Add referrer
                if (referrer && referrer !== '(direct)') {
                    queryParts.push('referrer=' + encodeURIComponent(referrer));
                }

                // Add UTM params to custom log
                utmParams.forEach(function(param) {
                    const value = params.get(param);
                    if (value) {
                        queryParts.push(param + '=' + encodeURIComponent(value));
                    }
                });

                const logUrl = '/api/log?' + queryParts.join('&');

                if (typeof navigator !== 'undefined' && typeof navigator.sendBeacon === 'function') {
                    navigator.sendBeacon(logUrl);
                } else if (typeof fetch === 'function') {
                    fetch(logUrl, { method: 'GET', keepalive: true }).catch(function() {});
                }
            } catch (e) {
                // Silently fail - don't let tracking break the page
            }
        })();
    </script>
</body>
</html>
