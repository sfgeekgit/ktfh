var Ti=Object.defineProperty;var Ai=(n,e,t)=>e in n?Ti(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var P=(n,e,t)=>Ai(n,typeof e!="symbol"?e+"":e,t);/* empty css                    */import"./vue-GVBARt8q.js";import{aX as mt,bo as y,X as ae,aZ as G,aR as k,A as _,b0 as Ke,bS as xt,aA as ge,az as Nt,w as q,aJ as rn,G as x,bf as te,F as ie,a$ as je,z as Q,aC as Fe,P as N,Q as m,bN as Z,b9 as an,aT as Dt,y as he,bP as on,bF as Mi,ay as Tt,l as $n,T as Ei,ap as _i,ar as It,bI as se,am as Cn,bb as Ln,bj as et,aO as Bn,bl as Oi,bJ as zn,bE as Pi,bA as Fi,aI as Di,b3 as Ri,x as qi}from"./@vue-CCfogNd1.js";import{L as Be}from"./lz-string-BZNGtwso.js";import{c as Gn}from"./nanoevents-BxCKNB1V.js";import{Y as $i}from"./vue-next-select-Bc2YoQWA.js";import{s as Li,u as Vn}from"./vue-toastification-D2nu0K1-.js";import{i as Bi}from"./unofficial-galaxy-sdk-C_siawBx.js";import{D as zi}from"./vuedraggable-BgvaSe-I.js";import{p as Gi}from"./vue-textarea-autosize-DLc4kbjP.js";import"./sortablejs-BZuNQ3iR.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const p of a.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&i(p)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();const Vi="Game balance settings (win amounts, costs, progression, etc.) are configured in src/data/gameConfig.ts",Ui="Narrow Path",Wi="narrow-path",Ji="Nick Shapiro",Yi="",Hi="",ji="0.1",Qi="Prototype",Zi=["chapter1"],Ki=36e5,Xi=!0,er=!1,tr=!0,nr=null,ir=null,rr="base64",ar=1,or=0,sr=!1,lr=!1,ur=!1,K={_comment:Vi,title:Ui,id:Wi,author:Ji,discordName:Yi,discordLink:Hi,versionNumber:ji,versionTitle:Qi,initialTabs:Zi,maxTickLength:Ki,enablePausing:Xi,showNews:er,useHeader:tr,banner:nr,logo:ir,exportEncoding:rr,offlineLimit:ar,defaultDecimalsShown:or,defaultShowSmall:sr,allowGoBack:lr,disableHealthWarning:ur},cr=mt({id:"",devSpeed:null,name:"",tabs:[],time:-1,autosave:!0,offlineProd:!0,offlineTime:null,timePlayed:0,keepGoing:!1,modID:"",modVersion:"",frameworkChoice:"not_yet",gameOver:!1,layers:{}}),I=window.player=cr;function dt(n){return JSON.stringify(n,(e,t)=>y(t)??null)}const dr=ae({__name:"FeedbackButton",props:{left:{type:Boolean}},emits:["click"],setup(n,{emit:e}){const t=e,i=G(!1),r=G(null);function a(){t("click"),r.value!=null&&clearTimeout(r.value),i.value=!1,Nt(()=>{i.value=!0,r.value=setTimeout(()=>i.value=!1,500)})}return(p,o)=>(k(),_("button",{onClick:xt(a,["stop"]),class:ge(["feedback",{activated:i.value,left:p.left}])},[Ke(p.$slots,"default",{},void 0,!0)],2))}}),le=(n,e)=>{const t=n.__vccOpts||n;for(const[i,r]of e)t[i]=r;return t},Un=le(dr,[["__scopeId","data-v-f82eae5d"]]),mr={class:"error"},pr={class:"error-title"},gr={class:"error-details",style:{"margin-top":"-10px"}},fr={key:0},hr={class:"instructions"},vr=["href"],yr={key:0,style:{"margin-top":"20px"}},br={class:"error-details"},wr={key:0,style:{"margin-top":"10px"}},Cr={key:1,style:{"margin-top":"10px"}},xr=ae({__name:"Error",props:{errors:{}},setup(n){const e=n,t=q(()=>e.errors[0]),i=q(()=>e.errors.map(p=>p.stack==null?[]:p.stack.split(`
`))),r=q(()=>e.errors.map(p=>p.cause==null?[]:(typeof p.cause=="string"?p.cause:JSON.stringify(p.cause)).split(`
`)));function a(){let p=dt(I);switch(K.exportEncoding){default:console.warn(`Unknown save encoding: ${K.exportEncoding}. Defaulting to lz`);case"lz":p=Be.compressToUTF16(p);break;case"base64":p=btoa(unescape(encodeURIComponent(p)));break;case"plain":break}console.log(p);const o=document.createElement("textarea");o.value=p,document.body.appendChild(o),o.select(),o.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(o)}return rn(()=>{I.autosave=!1,I.devSpeed=0}),(p,o)=>(k(),_("div",mr,[x("h1",pr,te(t.value.name)+": "+te(t.value.message),1),x("div",gr,[t.value.cause?(k(),_("div",fr,[(k(!0),_(ie,null,je(r.value[0],s=>(k(),_("div",{key:s},te(s),1))),128))])):Q("",!0),t.value.stack?(k(),_("div",{key:1,style:Fe(t.value.cause?"margin-top: 10px":"")},[(k(!0),_(ie,null,je(i.value[0],s=>(k(),_("div",{key:s},te(s),1))),128))],4)):Q("",!0)]),x("div",hr,[o[2]||(o[2]=N(" Check the console for more details, and consider sharing it with the developers on ")),x("a",{href:y(K).discordLink||"https://discord.gg/yJ4fjnjU54",class:"discord-link"},"discord",8,vr),o[3]||(o[3]=N("! ")),m(Un,{onClick:a,class:"button",style:{display:"inline-flex"}},{default:Z(()=>o[0]||(o[0]=[x("span",{class:"material-icons",style:{"font-size":"16px"}},"content_paste",-1),x("span",{style:{"margin-left":"8px","font-size":"medium"}},"Copy Save",-1)])),_:1}),o[4]||(o[4]=x("br",null,null,-1)),p.errors.length>1?(k(),_("div",yr,o[1]||(o[1]=[x("h3",null,"Other errors",-1)]))):Q("",!0),(k(!0),_(ie,null,je(p.errors.slice(1),(s,c)=>(k(),_("div",{key:c,style:{"margin-top":"20px"}},[x("details",br,[x("summary",null,te(s.name)+": "+te(s.message),1),s.cause?(k(),_("div",wr,[(k(!0),_(ie,null,je(r.value[c+1],h=>(k(),_("div",{key:h},te(h),1))),128))])):Q("",!0),s.stack?(k(),_("div",Cr,[(k(!0),_(ie,null,je(i.value[c+1],h=>(k(),_("div",{key:h},te(h),1))),128))])):Q("",!0)])]))),128))])]))}}),Wn=le(xr,[["__scopeId","data-v-2524e23e"]]),We={variables:{"--foreground":"#dfdfdf","--background":"#0f0f0f","--feature-foreground":"#0f0f0f","--tooltip-background":"rgba(0, 0, 0, 0.75)","--raised-background":"#0f0f0f","--points":"#ffffff","--locked":"#bf8f8f","--highlighted":"#333","--bought":"#77bf5f","--danger":"rgb(220, 53, 69)","--link":"#02f2f2","--outline":"#dfdfdf","--accent1":"#627a82","--accent2":"#658262","--accent3":"#7c6282","--border-radius":"15px","--modal-border":"solid 2px var(--color)","--feature-margin":"0px"},floatingTabs:!0,mergeAdjacent:!0,showPin:!0};var sn=(n=>(n.Classic="classic",n.Paper="paper",n.Nordic="nordic",n.Aqua="aqua",n))(sn||{});const Jn={classic:We,paper:{...We,variables:{...We.variables,"--background":"#2a323d","--feature-foreground":"#000","--raised-background":"#333c4a","--locked":"#3a3e45","--bought":"#5C8A58","--outline":"#333c4a","--border-radius":"4px","--modal-border":"","--feature-margin":"5px"},floatingTabs:!1},nordic:{...We,variables:{...We.variables,"--foreground":"#555555","--background":"#2E3440","--feature-foreground":"#000","--raised-background":"#3B4252","--points":"#E5E9F0","--locked":"#D08770","--highlighted":"#434c5e","--bought":"#8FBCBB","--danger":"#D08770","--link":"#88C0D0","--outline":"#3B4252","--accent1":"#B48EAD","--accent2":"#A3BE8C","--accent3":"#EBCB8B","--border-radius":"4px","--modal-border":"solid 2px #3B4252","--feature-margin":"5px"},floatingTabs:!1},aqua:{...We,variables:{...We.variables,"--foreground":"#bfdfff","--background":"#001f3f","--tooltip-background":"rgba(0, 15, 31, 0.75)","--raised-background":"#001f3f","--points":"#dfefff","--locked":"#c4a7b3","--outline":"#bfdfff"}}},X=window.state=an({lastTenTicks:[],mouseActivity:[!1],hasNaN:!1,NaNPath:[],errors:mt([])}),ve=Gn();"fonts"in document&&(document.fonts.onloadingdone=()=>ve.emit("fontsLoaded"));document.onmousemove=function(){X.mouseActivity[X.mouseActivity.length-1]=!0};const Nr=ae({__name:"Context",emits:["updateNodes"],setup(n,{emit:e}){var C;const t=e,i=G({}),r=new ResizeObserver(s),a=G(null);rn(()=>{const w=a.value;w!=null&&r.observe(w)});let p=!0,o=G((C=a.value)==null?void 0:C.getBoundingClientRect());function s(){p&&(p=!1,Nt(()=>{var w;o.value=(w=a.value)==null?void 0:w.getBoundingClientRect(),Object.values(i.value).filter(v=>v).forEach(v=>v.rect=v.element.getBoundingClientRect()),t("updateNodes",i.value),p=!0}))}ve.on("fontsLoaded",s);const c={attributes:!1,childList:!0,subtree:!1};Dt(ii,(w,v)=>{const T=new MutationObserver(()=>h(w));T.observe(v,c),i.value[w]={element:v,observer:T,rect:v.getBoundingClientRect()},s()}),Dt(ri,w=>{var v;(v=i.value[w])==null||v.observer.disconnect(),i.value[w]=void 0,s()}),Dt(Do,i),Dt(Ro,o);function h(w){const v=i.value[w];v!=null&&(v.rect=v.element.getBoundingClientRect(),t("updateNodes",i.value))}return(w,v)=>(k(),_(ie,null,[Ke(w.$slots,"default",{},void 0,!0),x("div",{ref_key:"resizeListener",ref:a,class:"resize-listener"},null,512)],64))}}),Yn=le(Nr,[["__scopeId","data-v-4fc505f1"]]),Ir={class:"modal-wrapper"},kr=["width"],Sr={class:"modal-header"},Tr={class:"modal-body"},Ar={class:"modal-footer"},pt=ae({__name:"Modal",props:{modelValue:{type:Boolean},preventClosing:{type:Boolean},width:{}},emits:["update:modelValue"],setup(n,{expose:e,emit:t}){const i=n,r=t,a=q(()=>i.modelValue||o.value);function p(){i.preventClosing!==!0&&r("update:modelValue",!1)}const o=G(!1),s=G(null),c=q(()=>{var h;return((h=s.value)==null?void 0:h.nodes)??null});return e({isOpen:a,nodes:c}),(h,C)=>(k(),he(Ei,{to:"#modal-root"},[m($n,{name:"modal",onBeforeEnter:C[0]||(C[0]=w=>o.value=!0),onAfterLeave:C[1]||(C[1]=w=>o.value=!1),appear:""},{default:Z(()=>[on(x("div",Tt({class:"modal-mask",onPointerdown:xt(p,["self"])},h.$attrs),[x("div",Ir,[x("div",{class:"modal-container",width:h.width},[x("div",Sr,[Ke(h.$slots,"header",{shown:a.value})]),x("div",Tr,[m(Yn,{ref_key:"contextRef",ref:s},{default:Z(()=>[Ke(h.$slots,"body",{shown:a.value})]),_:3},512)]),x("div",Ar,[Ke(h.$slots,"footer",{shown:a.value},()=>[x("div",{class:"modal-default-footer"},[C[2]||(C[2]=x("div",{class:"modal-default-flex-grow"},null,-1)),x("button",{class:"button modal-default-button",onClick:p}," Close ")])])])],8,kr)])],16),[[Mi,h.modelValue]])]),_:3})]))}});class Mr{constructor(e){P(this,"map",new Map);P(this,"first");P(this,"last");P(this,"maxSize");this.maxSize=e}get size(){return this.map.size}get(e){const t=this.map.get(e);if(t!==void 0)return t!==this.first&&(t===this.last?(this.last=t.prev,this.last.next=void 0):(t.prev.next=t.next,t.next.prev=t.prev),t.next=this.first,this.first.prev=t,this.first=t),t.value}set(e,t){if(this.maxSize<1)return;if(this.map.has(e))throw new Error("Cannot update existing keys in the cache");const i=new Er(e,t);for(this.first===void 0?(this.first=i,this.last=i):(i.next=this.first,this.first.prev=i,this.first=i),this.map.set(e,i);this.map.size>this.maxSize;){const r=this.last;this.map.delete(r.key),this.last=r.prev,this.last.next=void 0}}}class Er{constructor(e,t){P(this,"key");P(this,"value");P(this,"next");P(this,"prev");this.key=e,this.value=t}}const Zt=17,_r=9e15,Or=Math.log10(9e15),Pr=1/9e15,Fr=308,Dr=-324,xn=5,Rr=1023,qr=function(){const n=[];for(let t=Dr+1;t<=Fr;t++)n.push(+("1e"+t));const e=323;return function(t){return n[t+e]}}(),Je=[2,Math.E,3,4,5,6,7,8,9,10],$r=[[1,1.0891180521811203,1.1789767925673957,1.2701455431742086,1.3632090180450092,1.4587818160364217,1.5575237916251419,1.6601571006859253,1.767485818836978,1.8804192098842727,2],[1,1.1121114330934079,1.231038924931609,1.3583836963111375,1.4960519303993531,1.6463542337511945,1.8121385357018724,1.996971324618307,2.2053895545527546,2.4432574483385254,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.1840100246247336,1.4061375836156955,1.6802272208863964,2.026757028388619,2.4770056063449646,3.080525271755482,3.9191964192627284,5.135152840833187,6.989961179534715,10]],Lr=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]];let b=function(e){return d.fromValue_noAlloc(e)},B=function(n,e,t){return d.fromComponents(n,e,t)},Y=function(e,t,i){return d.fromComponents_noNormalize(e,t,i)};const qe=function(e,t){const i=t+1,r=Math.ceil(Math.log10(Math.abs(e))),a=Math.round(e*Math.pow(10,i-r))*Math.pow(10,r-i);return parseFloat(a.toFixed(Math.max(i-r,0)))},Kt=function(n){return Math.sign(n)*Math.log10(Math.abs(n))},Br=function(n){if(!isFinite(n))return n;if(n<-50)return n===Math.trunc(n)?Number.NEGATIVE_INFINITY:0;let e=1;for(;n<10;)e=e*n,++n;n-=1;let t=.9189385332046727;t=t+(n+.5)*Math.log(n),t=t-n;const i=n*n;let r=n;return t=t+1/(12*r),r=r*i,t=t+1/(360*r),r=r*i,t=t+1/(1260*r),r=r*i,t=t+1/(1680*r),r=r*i,t=t+1/(1188*r),r=r*i,t=t+691/(360360*r),r=r*i,t=t+7/(1092*r),r=r*i,t=t+3617/(122400*r),Math.exp(t)/e},Hn=.5671432904097838,Nn=function(n,e=1e-10){let t,i;if(!Number.isFinite(n)||n===0)return n;if(n===1)return Hn;n<10?t=0:t=Math.log(n)-Math.log(Math.log(n));for(let r=0;r<100;++r){if(i=(n*Math.exp(-t)+t*t)/(t+1),Math.abs(i-t)<e*Math.abs(i))return i;t=i}throw Error(`Iteration failed to converge: ${n.toString()}`)};function In(n,e=1e-10){let t,i,r,a;if(!Number.isFinite(n.mag)||n.eq(d.dZero))return n;if(n.eq(d.dOne))return d.fromNumber(Hn);t=d.ln(n);for(let p=0;p<100;++p){if(i=t.neg().exp(),r=t.sub(n.mul(i)),a=t.sub(r.div(t.add(1).sub(t.add(2).mul(r).div(d.mul(2,t).add(2))))),d.abs(a.sub(t)).lt(d.abs(a).mul(e)))return a;t=a}throw Error(`Iteration failed to converge: ${n.toString()}`)}const g=class g{constructor(e){P(this,"sign",0);P(this,"mag",0);P(this,"layer",0);e instanceof g?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"&&this.fromString(e)}get m(){if(this.sign===0)return 0;if(this.layer===0){const e=Math.floor(Math.log10(this.mag));let t;return this.mag===5e-324?t=5:t=this.mag/qr(e),this.sign*t}else if(this.layer===1){const e=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,e)}else return this.sign}set m(e){this.layer<=2?this.fromMantissaExponent(e,this.e):(this.sign=Math.sign(e),this.sign===0&&(this.layer=0,this.exponent=0))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(e){this.fromMantissaExponent(this.m,e)}get s(){return this.sign}set s(e){e===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=e}get mantissa(){return this.m}set mantissa(e){this.m=e}get exponent(){return this.e}set exponent(e){this.e=e}static fromComponents(e,t,i){return new g().fromComponents(e,t,i)}static fromComponents_noNormalize(e,t,i){return new g().fromComponents_noNormalize(e,t,i)}static fromMantissaExponent(e,t){return new g().fromMantissaExponent(e,t)}static fromMantissaExponent_noNormalize(e,t){return new g().fromMantissaExponent_noNormalize(e,t)}static fromDecimal(e){return new g().fromDecimal(e)}static fromNumber(e){return new g().fromNumber(e)}static fromString(e){return new g().fromString(e)}static fromValue(e){return new g().fromValue(e)}static fromValue_noAlloc(e){if(e instanceof g)return e;if(typeof e=="string"){const t=g.fromStringCache.get(e);return t!==void 0?t:g.fromString(e)}else return typeof e=="number"?g.fromNumber(e):g.dZero}static abs(e){return b(e).abs()}static neg(e){return b(e).neg()}static negate(e){return b(e).neg()}static negated(e){return b(e).neg()}static sign(e){return b(e).sign}static sgn(e){return b(e).sign}static round(e){return b(e).round()}static floor(e){return b(e).floor()}static ceil(e){return b(e).ceil()}static trunc(e){return b(e).trunc()}static add(e,t){return b(e).add(t)}static plus(e,t){return b(e).add(t)}static sub(e,t){return b(e).sub(t)}static subtract(e,t){return b(e).sub(t)}static minus(e,t){return b(e).sub(t)}static mul(e,t){return b(e).mul(t)}static multiply(e,t){return b(e).mul(t)}static times(e,t){return b(e).mul(t)}static div(e,t){return b(e).div(t)}static divide(e,t){return b(e).div(t)}static recip(e){return b(e).recip()}static reciprocal(e){return b(e).recip()}static reciprocate(e){return b(e).reciprocate()}static cmp(e,t){return b(e).cmp(t)}static cmpabs(e,t){return b(e).cmpabs(t)}static compare(e,t){return b(e).cmp(t)}static isNaN(e){return e=b(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag)}static isFinite(e){return e=b(e),isFinite(e.sign)&&isFinite(e.layer)&&isFinite(e.mag)}static eq(e,t){return b(e).eq(t)}static equals(e,t){return b(e).eq(t)}static neq(e,t){return b(e).neq(t)}static notEquals(e,t){return b(e).notEquals(t)}static lt(e,t){return b(e).lt(t)}static lte(e,t){return b(e).lte(t)}static gt(e,t){return b(e).gt(t)}static gte(e,t){return b(e).gte(t)}static max(e,t){return b(e).max(t)}static min(e,t){return b(e).min(t)}static minabs(e,t){return b(e).minabs(t)}static maxabs(e,t){return b(e).maxabs(t)}static clamp(e,t,i){return b(e).clamp(t,i)}static clampMin(e,t){return b(e).clampMin(t)}static clampMax(e,t){return b(e).clampMax(t)}static cmp_tolerance(e,t,i){return b(e).cmp_tolerance(t,i)}static compare_tolerance(e,t,i){return b(e).cmp_tolerance(t,i)}static eq_tolerance(e,t,i){return b(e).eq_tolerance(t,i)}static equals_tolerance(e,t,i){return b(e).eq_tolerance(t,i)}static neq_tolerance(e,t,i){return b(e).neq_tolerance(t,i)}static notEquals_tolerance(e,t,i){return b(e).notEquals_tolerance(t,i)}static lt_tolerance(e,t,i){return b(e).lt_tolerance(t,i)}static lte_tolerance(e,t,i){return b(e).lte_tolerance(t,i)}static gt_tolerance(e,t,i){return b(e).gt_tolerance(t,i)}static gte_tolerance(e,t,i){return b(e).gte_tolerance(t,i)}static pLog10(e){return b(e).pLog10()}static absLog10(e){return b(e).absLog10()}static log10(e){return b(e).log10()}static log(e,t){return b(e).log(t)}static log2(e){return b(e).log2()}static ln(e){return b(e).ln()}static logarithm(e,t){return b(e).logarithm(t)}static pow(e,t){return b(e).pow(t)}static pow10(e){return b(e).pow10()}static pow_base(e,t){return b(e).pow_base(t)}static root(e,t){return b(e).root(t)}static factorial(e,t){return b(e).factorial()}static gamma(e,t){return b(e).gamma()}static lngamma(e,t){return b(e).lngamma()}static exp(e){return b(e).exp()}static sqr(e){return b(e).sqr()}static sqrt(e){return b(e).sqrt()}static cube(e){return b(e).cube()}static cbrt(e){return b(e).cbrt()}static tetrate(e,t=2,i=Y(1,0,1)){return b(e).tetrate(t,i)}static iteratedexp(e,t=2,i=Y(1,0,1)){return b(e).iteratedexp(t,i)}static iteratedlog(e,t=10,i=1){return b(e).iteratedlog(t,i)}static layeradd10(e,t){return b(e).layeradd10(t)}static layeradd(e,t,i=10){return b(e).layeradd(t,i)}static slog(e,t=10){return b(e).slog(t)}static lambertw(e){return b(e).lambertw()}static ssqrt(e){return b(e).ssqrt()}static pentate(e,t=2,i=Y(1,0,1)){return b(e).pentate(t,i)}static sin(e){return b(e).sin()}static cos(e){return b(e).cos()}static tan(e){return b(e).tan()}static asin(e){return b(e).asin()}static acos(e){return b(e).acos()}static atan(e){return b(e).atan()}static sinh(e){return b(e).sinh()}static cosh(e){return b(e).cosh()}static tanh(e){return b(e).tanh()}static asinh(e){return b(e).asinh()}static acosh(e){return b(e).acosh()}static atanh(e){return b(e).atanh()}static affordGeometricSeries(e,t,i,r){return this.affordGeometricSeries_core(b(e),b(t),b(i),r)}static sumGeometricSeries(e,t,i,r){return this.sumGeometricSeries_core(e,b(t),b(i),r)}static affordArithmeticSeries(e,t,i,r){return this.affordArithmeticSeries_core(b(e),b(t),b(i),b(r))}static sumArithmeticSeries(e,t,i,r){return this.sumArithmeticSeries_core(b(e),b(t),b(i),b(r))}static efficiencyOfPurchase(e,t,i){return this.efficiencyOfPurchase_core(b(e),b(t),b(i))}static randomDecimalForTesting(e){if(Math.random()*20<1)return Y(0,0,0);const t=Math.random()>.5?1:-1;if(Math.random()*20<1)return Y(t,0,1);const i=Math.floor(Math.random()*(e+1));let r=i===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(r=Math.trunc(r));let a=Math.pow(10,r);return Math.random()>.9&&(a=Math.trunc(a)),B(t,i,a)}static affordGeometricSeries_core(e,t,i,r){const a=t.mul(i.pow(r));return g.floor(e.div(a).mul(i.sub(1)).add(1).log10().div(i.log10()))}static sumGeometricSeries_core(e,t,i,r){return t.mul(i.pow(r)).mul(g.sub(1,i.pow(e))).div(g.sub(1,i))}static affordArithmeticSeries_core(e,t,i,r){const p=t.add(r.mul(i)).sub(i.div(2)),o=p.pow(2);return p.neg().add(o.add(i.mul(e).mul(2)).sqrt()).div(i).floor()}static sumArithmeticSeries_core(e,t,i,r){const a=t.add(r.mul(i));return e.div(2).mul(a.mul(2).plus(e.sub(1).mul(i)))}static efficiencyOfPurchase_core(e,t,i){return e.div(t).add(e.div(i))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<Pr)return this.layer+=1,this.mag=Math.log10(this.mag),this;let e=Math.abs(this.mag),t=Math.sign(this.mag);if(e>=_r)return this.layer+=1,this.mag=t*Math.log10(e),this;for(;e<Or&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=t*Math.pow(10,e),e=Math.abs(this.mag),t=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(e,t,i){return this.sign=e,this.layer=t,this.mag=i,this.normalize(),this}fromComponents_noNormalize(e,t,i){return this.sign=e,this.layer=t,this.mag=i,this}fromMantissaExponent(e,t){return this.layer=1,this.sign=Math.sign(e),e=Math.abs(e),this.mag=t+Math.log10(e),this.normalize(),this}fromMantissaExponent_noNormalize(e,t){return this.fromMantissaExponent(e,t),this}fromDecimal(e){return this.sign=e.sign,this.layer=e.layer,this.mag=e.mag,this}fromNumber(e){return this.mag=Math.abs(e),this.sign=Math.sign(e),this.layer=0,this.normalize(),this}fromString(e){const t=e,i=g.fromStringCache.get(t);if(i!==void 0)return this.fromDecimal(i);e=e.replace(",","");const r=e.split("^^^");if(r.length===2){const O=parseFloat(r[0]),U=parseFloat(r[1]),M=r[1].split(";");let F=1;if(M.length===2&&(F=parseFloat(M[1]),isFinite(F)||(F=1)),isFinite(O)&&isFinite(U)){const $=g.pentate(O,U,F);return this.sign=$.sign,this.layer=$.layer,this.mag=$.mag,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}}const a=e.split("^^");if(a.length===2){const O=parseFloat(a[0]),U=parseFloat(a[1]),M=a[1].split(";");let F=1;if(M.length===2&&(F=parseFloat(M[1]),isFinite(F)||(F=1)),isFinite(O)&&isFinite(U)){const $=g.tetrate(O,U,F);return this.sign=$.sign,this.layer=$.layer,this.mag=$.mag,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}}const p=e.split("^");if(p.length===2){const O=parseFloat(p[0]),U=parseFloat(p[1]);if(isFinite(O)&&isFinite(U)){const M=g.pow(O,U);return this.sign=M.sign,this.layer=M.layer,this.mag=M.mag,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}}e=e.trim().toLowerCase();let o,s,c=e.split("pt");if(c.length===2){o=10,s=parseFloat(c[0]),c[1]=c[1].replace("(",""),c[1]=c[1].replace(")","");let O=parseFloat(c[1]);if(isFinite(O)||(O=1),isFinite(o)&&isFinite(s)){const U=g.tetrate(o,s,O);return this.sign=U.sign,this.layer=U.layer,this.mag=U.mag,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}}if(c=e.split("p"),c.length===2){o=10,s=parseFloat(c[0]),c[1]=c[1].replace("(",""),c[1]=c[1].replace(")","");let O=parseFloat(c[1]);if(isFinite(O)||(O=1),isFinite(o)&&isFinite(s)){const U=g.tetrate(o,s,O);return this.sign=U.sign,this.layer=U.layer,this.mag=U.mag,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}}const h=e.split("e"),C=h.length-1;if(C===0){const O=parseFloat(e);if(isFinite(O))return this.fromNumber(O),g.fromStringCache.size>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}else if(C===1){const O=parseFloat(e);if(isFinite(O)&&O!==0)return this.fromNumber(O),g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}const w=e.split("e^");if(w.length===2){this.sign=1,w[0].charAt(0)=="-"&&(this.sign=-1);let O="";for(let U=0;U<w[1].length;++U){const M=w[1].charCodeAt(U);if(M>=43&&M<=57||M===101)O+=w[1].charAt(U);else return this.layer=parseFloat(O),this.mag=parseFloat(w[1].substr(U+1)),this.normalize(),g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}}if(C<1)return this.sign=0,this.layer=0,this.mag=0,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this;const v=parseFloat(h[0]);if(v===0)return this.sign=0,this.layer=0,this.mag=0,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this;let T=parseFloat(h[h.length-1]);if(C>=2){const O=parseFloat(h[h.length-2]);isFinite(O)&&(T*=Math.sign(O),T+=Kt(O))}if(!isFinite(v))this.sign=h[0]==="-"?-1:1,this.layer=C,this.mag=T;else if(C===1)this.sign=Math.sign(v),this.layer=1,this.mag=T+Math.log10(Math.abs(v));else if(this.sign=Math.sign(v),this.layer=C,C===2){const O=g.mul(B(1,2,T),b(v));return this.sign=O.sign,this.layer=O.layer,this.mag=O.mag,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}else this.mag=T;return this.normalize(),g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}fromValue(e){return e instanceof g?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(e){return isNaN(this.m)?Number.NaN:this.m===0?0:qe(this.m,e)}magnitudeWithDecimalPlaces(e){return isNaN(this.mag)?Number.NaN:this.mag===0?0:qe(this.mag,e)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=xn?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(e){return this.layer===0?(this.sign*this.mag).toExponential(e):this.toStringWithDecimalPlaces(e)}toFixed(e){return this.layer===0?(this.sign*this.mag).toFixed(e):this.toStringWithDecimalPlaces(e)}toPrecision(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.exponent-1):this.toExponential(e-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(e){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(e):qe(this.m,e)+"e"+qe(this.e,e):this.layer===1?qe(this.m,e)+"e"+qe(this.e,e):this.layer<=xn?(this.sign===-1?"-":"")+"e".repeat(this.layer)+qe(this.mag,e):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+qe(this.mag,e)}abs(){return Y(this.sign===0?0:1,this.layer,this.mag)}neg(){return Y(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?g.dZero:this.layer===0?B(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?g.dZero:this.layer===0?B(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?g.dZero:this.layer===0?B(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?g.dZero:this.layer===0?B(this.sign,0,Math.trunc(this.mag)):this}add(e){const t=b(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer)||this.sign===0)return t;if(t.sign===0)return this;if(this.sign===-t.sign&&this.layer===t.layer&&this.mag===t.mag)return Y(0,0,0);let i,r;if(this.layer>=2||t.layer>=2)return this.maxabs(t);if(g.cmpabs(this,t)>0?(i=this,r=t):(i=t,r=this),i.layer===0&&r.layer===0)return g.fromNumber(i.sign*i.mag+r.sign*r.mag);const a=i.layer*Math.sign(i.mag),p=r.layer*Math.sign(r.mag);if(a-p>=2)return i;if(a===0&&p===-1){if(Math.abs(r.mag-Math.log10(i.mag))>Zt)return i;{const o=Math.pow(10,Math.log10(i.mag)-r.mag),s=r.sign+i.sign*o;return B(Math.sign(s),1,r.mag+Math.log10(Math.abs(s)))}}if(a===1&&p===0){if(Math.abs(i.mag-Math.log10(r.mag))>Zt)return i;{const o=Math.pow(10,i.mag-Math.log10(r.mag)),s=r.sign+i.sign*o;return B(Math.sign(s),1,Math.log10(r.mag)+Math.log10(Math.abs(s)))}}if(Math.abs(i.mag-r.mag)>Zt)return i;{const o=Math.pow(10,i.mag-r.mag),s=r.sign+i.sign*o;return B(Math.sign(s),1,r.mag+Math.log10(Math.abs(s)))}}plus(e){return this.add(e)}sub(e){return this.add(b(e).neg())}subtract(e){return this.sub(e)}minus(e){return this.sub(e)}mul(e){const t=b(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer))return t;if(this.sign===0||t.sign===0)return Y(0,0,0);if(this.layer===t.layer&&this.mag===-t.mag)return Y(this.sign*t.sign,0,1);let i,r;if(this.layer>t.layer||this.layer==t.layer&&Math.abs(this.mag)>Math.abs(t.mag)?(i=this,r=t):(i=t,r=this),i.layer===0&&r.layer===0)return g.fromNumber(i.sign*r.sign*i.mag*r.mag);if(i.layer>=3||i.layer-r.layer>=2)return B(i.sign*r.sign,i.layer,i.mag);if(i.layer===1&&r.layer===0)return B(i.sign*r.sign,1,i.mag+Math.log10(r.mag));if(i.layer===1&&r.layer===1)return B(i.sign*r.sign,1,i.mag+r.mag);if(i.layer===2&&r.layer===1){const a=B(Math.sign(i.mag),i.layer-1,Math.abs(i.mag)).add(B(Math.sign(r.mag),r.layer-1,Math.abs(r.mag)));return B(i.sign*r.sign,a.layer+1,a.sign*a.mag)}if(i.layer===2&&r.layer===2){const a=B(Math.sign(i.mag),i.layer-1,Math.abs(i.mag)).add(B(Math.sign(r.mag),r.layer-1,Math.abs(r.mag)));return B(i.sign*r.sign,a.layer+1,a.sign*a.mag)}throw Error("Bad arguments to mul: "+this+", "+e)}multiply(e){return this.mul(e)}times(e){return this.mul(e)}div(e){const t=b(e);return this.mul(t.recip())}divide(e){return this.div(e)}divideBy(e){return this.div(e)}dividedBy(e){return this.div(e)}recip(){return this.mag===0?g.dNaN:this.layer===0?B(this.sign,0,1/this.mag):B(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(e){const t=b(e);return this.sign>t.sign?1:this.sign<t.sign?-1:this.sign*this.cmpabs(e)}cmpabs(e){const t=b(e),i=this.mag>0?this.layer:-this.layer,r=t.mag>0?t.layer:-t.layer;return i>r?1:i<r?-1:this.mag>t.mag?1:this.mag<t.mag?-1:0}compare(e){return this.cmp(e)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(e){const t=b(e);return this.sign===t.sign&&this.layer===t.layer&&this.mag===t.mag}equals(e){return this.eq(e)}neq(e){return!this.eq(e)}notEquals(e){return this.neq(e)}lt(e){return this.cmp(e)===-1}lte(e){return!this.gt(e)}gt(e){return this.cmp(e)===1}gte(e){return!this.lt(e)}max(e){const t=b(e);return this.lt(t)?t:this}min(e){const t=b(e);return this.gt(t)?t:this}maxabs(e){const t=b(e);return this.cmpabs(t)<0?t:this}minabs(e){const t=b(e);return this.cmpabs(t)>0?t:this}clamp(e,t){return this.max(e).min(t)}clampMin(e){return this.max(e)}clampMax(e){return this.min(e)}cmp_tolerance(e,t){const i=b(e);return this.eq_tolerance(i,t)?0:this.cmp(i)}compare_tolerance(e,t){return this.cmp_tolerance(e,t)}eq_tolerance(e,t){const i=b(e);if(t==null&&(t=1e-7),this.sign!==i.sign||Math.abs(this.layer-i.layer)>1)return!1;let r=this.mag,a=i.mag;return this.layer>i.layer&&(a=Kt(a)),this.layer<i.layer&&(r=Kt(r)),Math.abs(r-a)<=t*Math.max(Math.abs(r),Math.abs(a))}equals_tolerance(e,t){return this.eq_tolerance(e,t)}neq_tolerance(e,t){return!this.eq_tolerance(e,t)}notEquals_tolerance(e,t){return this.neq_tolerance(e,t)}lt_tolerance(e,t){const i=b(e);return!this.eq_tolerance(i,t)&&this.lt(i)}lte_tolerance(e,t){const i=b(e);return this.eq_tolerance(i,t)||this.lt(i)}gt_tolerance(e,t){const i=b(e);return!this.eq_tolerance(i,t)&&this.gt(i)}gte_tolerance(e,t){const i=b(e);return this.eq_tolerance(i,t)||this.gt(i)}pLog10(){return this.lt(g.dZero)?g.dZero:this.log10()}absLog10(){return this.sign===0?g.dNaN:this.layer>0?B(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):B(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?g.dNaN:this.layer>0?B(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):B(this.sign,0,Math.log10(this.mag))}log(e){return e=b(e),this.sign<=0||e.sign<=0||e.sign===1&&e.layer===0&&e.mag===1?g.dNaN:this.layer===0&&e.layer===0?B(this.sign,0,Math.log(this.mag)/Math.log(e.mag)):g.div(this.log10(),e.log10())}log2(){return this.sign<=0?g.dNaN:this.layer===0?B(this.sign,0,Math.log2(this.mag)):this.layer===1?B(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?B(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):B(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?g.dNaN:this.layer===0?B(this.sign,0,Math.log(this.mag)):this.layer===1?B(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?B(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):B(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(e){return this.log(e)}pow(e){const t=b(e),i=this,r=t;if(i.sign===0)return r.eq(0)?Y(1,0,1):i;if(i.sign===1&&i.layer===0&&i.mag===1)return i;if(r.sign===0)return Y(1,0,1);if(r.sign===1&&r.layer===0&&r.mag===1)return i;const a=i.absLog10().mul(r).pow10();return this.sign===-1?Math.abs(r.toNumber()%2)%2===1?a.neg():Math.abs(r.toNumber()%2)%2===0?a:g.dNaN:a}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return g.dNaN;let e=this;if(e.layer===0){const t=Math.pow(10,e.sign*e.mag);if(Number.isFinite(t)&&Math.abs(t)>=.1)return B(1,0,t);if(e.sign===0)return g.dOne;e=Y(e.sign,e.layer+1,Math.log10(e.mag))}return e.sign>0&&e.mag>=0?B(e.sign,e.layer+1,e.mag):e.sign<0&&e.mag>=0?B(-e.sign,e.layer+1,-e.mag):g.dOne}pow_base(e){return b(e).pow(this)}root(e){const t=b(e);return this.pow(t.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?g.exp(g.mul(this,g.ln(this).sub(1))):g.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(Y(1,0,24)))return g.fromNumber(Br(this.sign*this.mag));const e=this.mag-1;let t=.9189385332046727;t=t+(e+.5)*Math.log(e),t=t-e;const i=e*e;let r=e,a=12*r,p=1/a,o=t+p;if(o===t||(t=o,r=r*i,a=360*r,p=1/a,o=t-p,o===t))return g.exp(t);t=o,r=r*i,a=1260*r;let s=1/a;return t=t+s,r=r*i,a=1680*r,s=1/a,t=t-s,g.exp(t)}else return this.layer===1?g.exp(g.mul(this,g.ln(this).sub(1))):g.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?g.dOne:this.layer===0&&this.mag<=709.7?g.fromNumber(Math.exp(this.sign*this.mag)):this.layer===0?B(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?B(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):B(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return g.fromNumber(Math.sqrt(this.sign*this.mag));if(this.layer===1)return B(1,2,Math.log10(this.mag)-.3010299956639812);{const e=g.div(Y(this.sign,this.layer-1,this.mag),Y(1,0,2));return e.layer+=1,e.normalize(),e}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(e=2,t=Y(1,0,1)){if(e===1)return g.pow(this,t);if(e===0)return new g(t);if(this.eq(g.dOne))return g.dOne;if(this.eq(-1))return g.pow(this,t);if(e===Number.POSITIVE_INFINITY){const a=this.toNumber();if(a<=1.444667861009766&&a>=.06598803584531254){if(a>1.444667861009099)return g.fromNumber(Math.E);const p=g.ln(this).neg();return p.lambertw().div(p)}else return a>1.444667861009766?g.fromNumber(Number.POSITIVE_INFINITY):g.dNaN}if(this.eq(g.dZero)){let a=Math.abs((e+1)%2);return a>1&&(a=2-a),g.fromNumber(a)}if(e<0)return g.iteratedlog(t,this,-e);t=b(t);const i=e;e=Math.trunc(e);const r=i-e;if(this.gt(g.dZero)&&this.lte(1.444667861009766)){e=Math.min(1e4,e);for(let a=0;a<e;++a){const p=t;if(t=this.pow(t),p.eq(t))return t}if(r!=0){const a=this.pow(t);return t.mul(1-r).add(a.mul(r))}return t}r!==0&&(t.eq(g.dOne)?this.gt(10)?t=this.pow(r):(t=g.fromNumber(g.tetrate_critical(this.toNumber(),r)),this.lt(2)&&(t=t.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?t=t.layeradd10(r):t=t.layeradd(r,this));for(let a=0;a<e;++a){if(t=this.pow(t),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(t.layer-this.layer>3)return Y(t.sign,t.layer+(e-a-1),t.mag);if(a>1e4)return t}return t}iteratedexp(e=2,t=Y(1,0,1)){return this.tetrate(e,t)}iteratedlog(e=10,t=1){if(t<0)return g.tetrate(e,-t,this);e=b(e);let i=g.fromDecimal(this);const r=t;t=Math.trunc(t);const a=r-t;if(i.layer-e.layer>3){const p=Math.min(t,i.layer-e.layer-3);t-=p,i.layer-=p}for(let p=0;p<t;++p){if(i=i.log(e),!isFinite(i.layer)||!isFinite(i.mag))return i.normalize();if(p>1e4)return i}return a>0&&a<1&&(e.eq(10)?i=i.layeradd10(-a):i=i.layeradd(-a,e)),i}slog(e=10,t=100){let i=.001,r=!1,a=!1,p=this.slog_internal(e).toNumber();for(let o=1;o<t;++o){const c=new g(e).tetrate(p).gt(this);if(o>1&&a!=c&&(r=!0),a=c,r?i/=2:i*=2,i=Math.abs(i)*(c?-1:1),p+=i,i===0)break}return g.fromNumber(p)}slog_internal(e=10){if(e=b(e),e.lte(g.dZero)||e.eq(g.dOne))return g.dNaN;if(e.lt(g.dOne))return this.eq(g.dOne)?g.dZero:this.eq(g.dZero)?g.dNegOne:g.dNaN;if(this.mag<0||this.eq(g.dZero))return g.dNegOne;let t=0,i=g.fromDecimal(this);if(i.layer-e.layer>3){const r=i.layer-e.layer-3;t+=r,i.layer-=r}for(let r=0;r<100;++r)if(i.lt(g.dZero))i=g.pow(e,i),t-=1;else{if(i.lte(g.dOne))return g.fromNumber(t+g.slog_critical(e.toNumber(),i.toNumber()));t+=1,i=g.log(i,e)}return g.fromNumber(t)}static slog_critical(e,t){return e>10?t-1:g.critical_section(e,t,Lr)}static tetrate_critical(e,t){return g.critical_section(e,t,$r)}static critical_section(e,t,i){t*=10,t<0&&(t=0),t>10&&(t=10),e<2&&(e=2),e>10&&(e=10);let r=0,a=0;for(let o=0;o<Je.length;++o)if(Je[o]==e){r=i[o][Math.floor(t)],a=i[o][Math.ceil(t)];break}else if(Je[o]<e&&Je[o+1]>e){const s=(e-Je[o])/(Je[o+1]-Je[o]);r=i[o][Math.floor(t)]*(1-s)+i[o+1][Math.floor(t)]*s,a=i[o][Math.ceil(t)]*(1-s)+i[o+1][Math.ceil(t)]*s;break}const p=t-Math.floor(t);return r<=0||a<=0?r*(1-p)+a*p:Math.pow(e,Math.log(r)/Math.log(e)*(1-p)+Math.log(a)/Math.log(e)*p)}layeradd10(e){e=g.fromValue_noAlloc(e).toNumber();const t=g.fromDecimal(this);if(e>=1){t.mag<0&&t.layer>0?(t.sign=0,t.mag=0,t.layer=0):t.sign===-1&&t.layer==0&&(t.sign=1,t.mag=-t.mag);const i=Math.trunc(e);e-=i,t.layer+=i}if(e<=-1){const i=Math.trunc(e);if(e-=i,t.layer+=i,t.layer<0)for(let r=0;r<100;++r){if(t.layer++,t.mag=Math.log10(t.mag),!isFinite(t.mag))return t.sign===0&&(t.sign=1),t.layer<0&&(t.layer=0),t.normalize();if(t.layer>=0)break}}for(;t.layer<0;)t.layer++,t.mag=Math.log10(t.mag);return t.sign===0&&(t.sign=1,t.mag===0&&t.layer>=1&&(t.layer-=1,t.mag=1)),t.normalize(),e!==0?t.layeradd(e,10):t}layeradd(e,t){const r=this.slog(t).toNumber()+e;return r>=0?g.tetrate(t,r):Number.isFinite(r)?r>=-1?g.log(g.tetrate(t,r+1),t):g.log(g.log(g.tetrate(t,r+2),t),t):g.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return g.fromNumber(Nn(this.toNumber()));if(this.layer===0)return g.fromNumber(Nn(this.sign*this.mag));if(this.layer===1)return In(this);if(this.layer===2)return In(this);if(this.layer>=3)return Y(this.sign,this.layer-1,this.mag);throw new Error("Unhandled behavior in lambertw()")}ssqrt(){if(this.sign==1&&this.layer>=3)return Y(this.sign,this.layer-1,this.mag);const e=this.ln();return e.div(e.lambertw())}pentate(e=2,t=Y(1,0,1)){t=b(t);const i=e;e=Math.trunc(e);const r=i-e;r!==0&&(t.eq(g.dOne)?(++e,t=g.fromNumber(r)):this.eq(10)?t=t.layeradd10(r):t=t.layeradd(r,this));for(let a=0;a<e;++a){if(t=this.tetrate(t.toNumber()),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(a>10)return t}return t}sin(){return this.mag<0?this:this.layer===0?g.fromNumber(Math.sin(this.sign*this.mag)):Y(0,0,0)}cos(){return this.mag<0?g.dOne:this.layer===0?g.fromNumber(Math.cos(this.sign*this.mag)):Y(0,0,0)}tan(){return this.mag<0?this:this.layer===0?g.fromNumber(Math.tan(this.sign*this.mag)):Y(0,0,0)}asin(){return this.mag<0?this:this.layer===0?g.fromNumber(Math.asin(this.sign*this.mag)):Y(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?g.fromNumber(Math.acos(this.toNumber())):this.layer===0?g.fromNumber(Math.acos(this.sign*this.mag)):Y(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?g.fromNumber(Math.atan(this.sign*this.mag)):g.fromNumber(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return g.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return g.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?Y(Number.NaN,Number.NaN,Number.NaN):g.ln(this.add(1).div(g.fromNumber(1).sub(this))).div(2)}ascensionPenalty(e){return e===0?this:this.root(g.pow(10,e))}egg(){return this.add(9)}lessThanOrEqualTo(e){return this.cmp(e)<1}lessThan(e){return this.cmp(e)<0}greaterThanOrEqualTo(e){return this.cmp(e)>-1}greaterThan(e){return this.cmp(e)>0}};P(g,"dZero"),P(g,"dOne"),P(g,"dNegOne"),P(g,"dTwo"),P(g,"dTen"),P(g,"dNaN"),P(g,"dInf"),P(g,"dNegInf"),P(g,"dNumberMax"),P(g,"dNumberMin"),P(g,"fromStringCache",new Mr(Rr));let d=g;d.dZero=Y(0,0,0);d.dOne=Y(1,0,1);d.dNegOne=Y(-1,0,1);d.dTwo=Y(1,0,2);d.dTen=Y(1,0,10);d.dNaN=Y(Number.NaN,Number.NaN,Number.NaN);d.dInf=Y(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);d.dNegInf=Y(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);d.dNumberMax=B(1,0,Number.MAX_VALUE);d.dNumberMin=B(1,0,Number.MIN_VALUE);b=d.fromValue_noAlloc;B=d.fromComponents;Y=d.fromComponents_noNormalize;d.fromMantissaExponent;d.fromMantissaExponent_noNormalize;const zr=new d(1);function yt(n,e,t=!0){let i=d.log10(n).floor(),r=d.div(n,d.pow(10,i));r.toStringWithDecimalPlaces(e)==="10"&&(r=zr,i=i.add(1));const a=i.gte(1e9)?Ie(i,Math.max(Math.max(e,3),K.defaultDecimalsShown)):i.gte(1e4)?Lt(i,0):i.toStringWithDecimalPlaces(0);return t?r.toStringWithDecimalPlaces(e)+"e"+a:"e"+a}function Lt(n,e){if(n==null)return"NaN";if(n=new d(n),n.mag<.001)return 0 .toFixed(e);const i=n.toStringWithDecimalPlaces(e).split(".");return i[0]=i[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),i.length===1?i[0]:i[0]+"."+i[1]}function jn(n,e){return n==null?"NaN":(n=new d(n),n.mag<1e-4?0 .toFixed(e):(n.mag<.1&&e!==0&&(e=Math.max(Math.max(e,n.log10().negate().ceil().toNumber()),K.defaultDecimalsShown)),n.toStringWithDecimalPlaces(e)))}const Gr=new d("eeee1000"),Vr=new d("e100000"),kn=new d("e1000"),Qn=new d(1e9),Ur=new d(1e6),Wr=new d(1e3),Jr=new d(.98),Yr=new d(.001),Zn=new d(0);function Ie(n,e,t){if(e==null&&(e=K.defaultDecimalsShown),t=t??K.defaultShowSmall,n=new d(n),isNaN(n.sign)||isNaN(n.layer)||isNaN(n.mag))return"NaN";if(n.sign<0)return"-"+Ie(n.neg(),e);if(n.mag===Number.POSITIVE_INFINITY)return"Infinity";if(n.gte(Gr)){const i=n.slog();return i.gte(Ur)?"F"+Ie(i.floor()):d.pow(10,i.sub(i.floor())).toStringWithDecimalPlaces(3)+"F"+Lt(i.floor(),0)}else{if(n.gte(Vr))return yt(n,0,!1);if(n.gte(kn))return yt(n,0);if(n.gte(Qn))return yt(n,e);if(n.gte(Wr))return Lt(n,0);if(n.gte(Yr)||!t)return jn(n,e);if(n.eq(Zn))return 0 .toFixed(e)}return n=Xn(n),n.lt(kn)?yt(n,e).replace(/([^(?:e|F)]*)$/,"-$1"):Ie(n,e)+"⁻¹"}function Ce(n){return n=new d(n),n.sign<0?"-"+Ce(n.neg()):n.gte(Qn)||n.lte(Jr)&&!n.eq(Zn)?Ie(n):Ie(n,0)}function Kn(n){return d.lt(n,0)?"-"+Kn(d.neg(n)):d.gt(n,2**51)?Ie(d.div(n,31536e3))+"y":(n=new d(n).toNumber(),n<60?Ie(n)+"s":n<3600?Ce(Math.floor(n/60))+"m "+Ie(n%60)+"s":n<86400?Ce(Math.floor(n/3600))+"h "+Ce(Math.floor(n/60)%60)+"m "+Ce(n%60)+"s":n<31536e3?Ce(Math.floor(n/84600)%365)+"d "+Ce(Math.floor(n/3600)%24)+"h "+Ce(Math.floor(n/60)%60)+"m":Ce(Math.floor(n/31536e3))+"y "+Ce(Math.floor(n/84600)%365)+"d "+Ce(Math.floor(n/3600)%24)+"h")}function Hr(n,e,t){n=new d(n);let i=n.toStringWithDecimalPlaces(e);return new d(i).gte(t)&&(i=d.sub(t,Math.pow(.1,e)).toStringWithDecimalPlaces(e)),i}function jr(n,e){return Ie(n,e,!0)}function Xn(n){let e=d.log10(n).ceil();const t=d.div(n,d.pow(10,e));return e=e.neg(),n=new d(10).pow(e).times(t),n}const Qr=Object.freeze(Object.defineProperty({__proto__:null,commaFormat:Lt,default:d,exponentialFormat:yt,format:Ie,formatSmall:jr,formatTime:Kn,formatWhole:Ce,invertOOM:Xn,regularFormat:jn,toPlaces:Hr},Symbol.toStringTag,{value:"Module"})),{exponentialFormat:Zr,commaFormat:Kr,regularFormat:Xr,format:Te,formatWhole:ei,formatTime:ti,toPlaces:ea,formatSmall:ta,invertOOM:na}=Qr;window.Decimal=d;window.exponentialFormat=Zr;window.commaFormat=Kr;window.regularFormat=Xr;window.format=Te;window.formatWhole=ei;window.formatTime=ti;window.toPlaces=ea;window.formatSmall=ta;window.invertOOM=na;const Qe=Symbol("ProxyState"),Sn=Symbol("AfterEvaluation");function gt(n,e={}){const t=e;let i=!1,r=!1;const a=[];function p(){if(!i){if(r)throw new Error("Cyclical dependency detected. Cannot evaluate lazy proxy.");r=!0,Object.assign(t,n.call(t,t)),i=!0,a.forEach(s=>s(t))}return t}function o(s){i?s(t):a.push(s)}return new Proxy(t,{get(s,c){if(c===Qe)return p();if(c===Sn)return o;const h=p()[c];return h!=null&&typeof h=="object"&&$e in h?h[$e]:h},set(s,c,h){return p()[c]=h,!0},has(s,c){return c===Qe||c===Sn?!0:Reflect.has(p(),c)},ownKeys(){return Reflect.ownKeys(p())},getOwnPropertyDescriptor(s,c){return i||(Object.assign(t,n.call(t,t)),i=!0),Object.getOwnPropertyDescriptor(s,c)}})}function ia(n){let e=n.replace(/([A-Z])/g," $1");return e=e.charAt(0).toUpperCase()+e.slice(1),e}function ra(n){return typeof n=="function"}var xe=(n=>(n.Up="Up",n.Down="Down",n.Left="Left",n.Right="Right",n.Default="Up",n))(xe||{});function ce(n){return ra(n)&&n.length===0?q(n):n}const ni=d.ln(10);function qt(n){return n}function vt(n,...e){const t=e.find(i=>S(i));return t==null?(console.error("Could not invert due to no input being a variable"),0):t.invert(n)}function aa(n,e){return S(e)?e.invert(d.neg(n)):(console.error("Could not invert due to no input being a variable"),0)}function oa(n,e){return S(e)?e.isIntegrable()?l.neg(e.getIntegralFormula(n)):(console.error("Could not integrate due to variable not being integrable"),l.constant(0)):(console.error("Could not integrate due to no input being a variable"),l.constant(0))}function sa(n){return l.neg(n)}function la(n,e,t){return S(e)?e.invert(d.sub(n,oe(t))):S(t)?t.invert(d.sub(n,oe(e))):(console.error("Could not invert due to no input being a variable"),0)}function ua(n,e,t){if(S(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=e.getIntegralFormula(n);return l.times(t,e.innermostVariable??0).add(i)}else if(S(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=t.getIntegralFormula(n);return l.times(e,t.innermostVariable??0).add(i)}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function ca(n,e,t){if(S(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=e.getIntegralFormula(n);return l.add(i,t)}else if(S(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=t.getIntegralFormula(n);return l.add(i,e)}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function da(n,e,t){return S(e)?e.invert(d.add(n,oe(t))):S(t)?t.invert(d.sub(oe(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function ma(n,e,t){if(S(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=e.getIntegralFormula(n);return l.sub(i,l.times(t,e.innermostVariable??0))}else if(S(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=t.getIntegralFormula(n);return l.times(e,t.innermostVariable??0).sub(i)}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function pa(n,e,t){if(S(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=e.getIntegralFormula(n);return l.sub(i,t)}else if(S(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=t.getIntegralFormula(n);return l.sub(i,e)}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function ga(n,e,t){return S(e)?e.invert(d.div(n,oe(t))):S(t)?t.invert(d.div(n,oe(e))):(console.error("Could not invert due to no input being a variable"),0)}function fa(n,e,t){if(S(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=e.getIntegralFormula(n);return l.times(i,t)}else if(S(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=t.getIntegralFormula(n);return l.times(i,e)}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function ha(n,e,t){return S(e)?l.div(n,t):S(t)?l.div(n,e):(console.error("Could not apply substitution due to no input being a variable"),l.constant(0))}function va(n,e,t){return S(e)?e.invert(d.mul(n,oe(t))):S(t)?t.invert(d.div(oe(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function ya(n,e,t){if(S(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=e.getIntegralFormula(n);return l.div(i,t)}else if(S(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=t.getIntegralFormula(n);return l.div(e,i)}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function ba(n,e,t){return S(e)?l.mul(n,t):S(t)?l.mul(n,e):(console.error("Could not apply substitution due to no input being a variable"),l.constant(0))}function wa(n,e){return S(e)?e.invert(d.recip(n)):(console.error("Could not invert due to no input being a variable"),0)}function Ca(n,e){if(S(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.ln(t)}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function xa(n,e){return S(e)?e.invert(d.pow10(n)):(console.error("Could not invert due to no input being a variable"),0)}function Na(n){return d.ln(n).sub(1).times(n).div(ni)}function Ia(n,e){if(S(e)){const t=ni.times(n);return e.invert(t.div(t.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function ka(n,e){return S(e)?e.isIntegrable()?new l({inputs:[e.getIntegralFormula(n)],evaluate:Na,invert:Ia}):(console.error("Could not integrate due to variable not being integrable"),l.constant(0)):(console.error("Could not integrate due to no input being a variable"),l.constant(0))}function Sa(n,e,t){return S(e)?e.invert(d.pow(oe(t),n)):S(t)?t.invert(d.root(oe(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function Ta(n,e){return d.ln(n).sub(1).times(n).div(d.ln(e))}function Aa(n,e,t){if(S(e)){const i=d.ln(oe(t)).times(n);return e.invert(i.div(i.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function Ma(n,e,t){return S(e)?e.isIntegrable()?new l({inputs:[e.getIntegralFormula(n),t],evaluate:Ta,invert:Aa}):(console.error("Could not integrate due to variable not being integrable"),l.constant(0)):(console.error("Could not integrate due to no input being a variable"),l.constant(0))}function Ea(n,e){return S(e)?e.invert(d.pow(2,n)):(console.error("Could not invert due to no input being a variable"),0)}function _a(n){return d.ln(n).sub(1).times(n).div(d.ln(2))}function Oa(n,e){if(S(e)){const t=d.ln(2).times(n);return e.invert(t.div(t.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function Pa(n,e){return S(e)?e.isIntegrable()?new l({inputs:[e.getIntegralFormula(n)],evaluate:_a,invert:Oa}):(console.error("Could not integrate due to variable not being integrable"),l.constant(0)):(console.error("Could not integrate due to no input being a variable"),l.constant(0))}function Fa(n,e){return S(e)?e.invert(d.exp(n)):(console.error("Could not invert due to no input being a variable"),0)}function Da(n){return d.ln(n).sub(1).times(n)}function Ra(n,e){return S(e)?e.invert(d.div(n,d.div(n,Math.E).lambertw())):(console.error("Could not invert due to no input being a variable"),0)}function qa(n,e){return S(e)?e.isIntegrable()?new l({inputs:[e.getIntegralFormula(n)],evaluate:Da,invert:Ra}):(console.error("Could not integrate due to variable not being integrable"),l.constant(0)):(console.error("Could not integrate due to no input being a variable"),l.constant(0))}function $a(n,e,t){return S(e)?e.invert(d.root(n,oe(t))):S(t)?t.invert(d.ln(n).div(d.ln(oe(e)))):(console.error("Could not invert due to no input being a variable"),0)}function La(n,e,t){if(S(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=e.getIntegralFormula(n),r=l.add(t,1);return l.pow(i,r).div(r)}else if(S(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=t.getIntegralFormula(n);return l.pow(e,i).div(l.ln(e))}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function Ba(n,e){return S(e)?e.invert(d.root(n,10)):(console.error("Could not invert due to no input being a variable"),0)}function za(n,e){if(S(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.pow10(t).div(l.ln(10))}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function Ga(n,e,t){return S(e)?e.invert(d.ln(n).div(d.ln(oe(t)))):S(t)?t.invert(d.root(oe(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function Va(n,e,t){if(S(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=e.getIntegralFormula(n);return l.pow(t,i).div(l.ln(t))}else if(S(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=t.getIntegralFormula(n),r=l.add(e,1);return l.pow(i,r).div(r)}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function Ua(n,e,t){return S(e)?e.invert(d.root(n,d.recip(oe(t)))):S(t)?t.invert(d.ln(oe(e)).div(d.ln(n))):(console.error("Could not invert due to no input being a variable"),0)}function Wa(n,e,t){if(S(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=e.getIntegralFormula(n);return l.pow(i,l.recip(t).add(1)).times(t).div(l.add(t,1))}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function Ja(n,e){return S(e)?e.invert(d.ln(n)):(console.error("Could not invert due to no input being a variable"),0)}function Ya(n,e){if(S(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.exp(t)}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function Ha(n,e=2,t=d.fromComponents_noNormalize(1,0,1)){const i=d.minabs(e,1e308).toNumber();return d.tetrate(n,i,t)}function ja(n,e,t,i){return S(e)?e.invert(d.ssqrt(n)):(console.error("Could not invert due to no input being a variable"),0)}function Qa(n,e=2,t=d.fromComponents_noNormalize(1,0,1)){const i=d.minabs(e,1e308).toNumber();return d.iteratedexp(n,i,new d(t))}function Za(n,e,t,i){return S(e)?e.invert(d.iteratedlog(n,Math.E,d.minabs(1e308,oe(t)).toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function Ka(n,e=10,t=2){const i=d.minabs(t,1e308).toNumber();return d.iteratedlog(n,e,i)}function Xa(n,e=10){const t=d.minabs(e,1e308).toNumber();return d.slog(n,t)}function eo(n,e,t){return S(e)?e.invert(d.tetrate(n,d.minabs(1e308,oe(t)).toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function to(n,e,t){const i=d.minabs(e,1e308).toNumber();return d.layeradd(n,i,t)}function no(n,e,t,i){return S(e)?e.invert(d.layeradd(n,d.minabs(1e308,oe(t)).negate().toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function io(n,e){return S(e)?e.invert(d.pow(Math.E,n).times(n)):(console.error("Could not invert due to no input being a variable"),0)}function ro(n,e){return S(e)?e.invert(d.tetrate(n,2)):(console.error("Could not invert due to no input being a variable"),0)}function ao(n,e,t){const i=d.minabs(e,1e308).toNumber();return d.pentate(n,i,t)}function oo(n,e){return S(e)?e.invert(d.asin(n)):(console.error("Could not invert due to no input being a variable"),0)}function so(n,e){if(S(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.cos(t).neg()}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function lo(n,e){return S(e)?e.invert(d.acos(n)):(console.error("Could not invert due to no input being a variable"),0)}function uo(n,e){if(S(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.sin(t)}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function co(n,e){return S(e)?e.invert(d.atan(n)):(console.error("Could not invert due to no input being a variable"),0)}function mo(n,e){if(S(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.cos(t).ln().neg()}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function po(n,e){return S(e)?e.invert(d.sin(n)):(console.error("Could not invert due to no input being a variable"),0)}function go(n,e){if(S(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.asin(t).times(t).add(l.sqrt(l.sub(1,l.pow(t,2))))}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function fo(n,e){return S(e)?e.invert(d.cos(n)):(console.error("Could not invert due to no input being a variable"),0)}function ho(n,e){if(S(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.acos(t).times(t).sub(l.sqrt(l.sub(1,l.pow(t,2))))}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function vo(n,e){return S(e)?e.invert(d.tan(n)):(console.error("Could not invert due to no input being a variable"),0)}function yo(n,e){if(S(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.atan(t).times(t).sub(l.ln(l.pow(t,2).add(1)).div(2))}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function bo(n,e){return S(e)?e.invert(d.asinh(n)):(console.error("Could not invert due to no input being a variable"),0)}function wo(n,e){if(S(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.cosh(t)}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function Co(n,e){return S(e)?e.invert(d.acosh(n)):(console.error("Could not invert due to no input being a variable"),0)}function xo(n,e){if(S(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.sinh(t)}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function No(n,e){return S(e)?e.invert(d.atanh(n)):(console.error("Could not invert due to no input being a variable"),0)}function Io(n,e){if(S(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.cosh(t).ln()}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function ko(n,e){return S(e)?e.invert(d.sinh(n)):(console.error("Could not invert due to no input being a variable"),0)}function So(n,e){if(S(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.asinh(t).times(t).sub(l.pow(t,2).add(1).sqrt())}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function To(n,e){return S(e)?e.invert(d.cosh(n)):(console.error("Could not invert due to no input being a variable"),0)}function Ao(n,e){if(S(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.acosh(t).times(t).sub(l.add(t,1).sqrt().times(l.sub(t,1).sqrt()))}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function Mo(n,e){return S(e)?e.invert(d.tanh(n)):(console.error("Could not invert due to no input being a variable"),0)}function Eo(n,e){if(S(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.atanh(t).times(t).add(l.sub(1,l.pow(t,2)).ln().div(2))}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function at(n){return(e,t)=>new l({inputs:[e,t],evaluate:n,invert:qt})}function S(n){return n instanceof kt&&n.hasVariable()}function oe(n,e){return n instanceof kt?n.evaluate(e):y(n)}function _o(){return l.pow(this,2).div(2)}function Oo(){return this}const L=class L{constructor(e){P(this,"inputs");P(this,"internalEvaluate");P(this,"internalInvert");P(this,"internalIntegrate");P(this,"internalIntegrateInner");P(this,"applySubstitution");P(this,"description");P(this,"internalVariables");P(this,"innermostVariable");P(this,"negate",this.neg);P(this,"negated",this.neg);P(this,"sgn",this.sign);P(this,"plus",this.add);P(this,"subtract",this.sub);P(this,"minus",this.sub);P(this,"multiply",this.mul);P(this,"times",this.mul);P(this,"divide",this.div);P(this,"divideBy",this.div);P(this,"dividedBy",this.div);P(this,"reciprocal",this.recip);P(this,"reciprocate",this.recip);P(this,"logarithm",this.log);let t;"inputs"in e&&(e.inputs=e.inputs.map(i=>typeof i=="object"&&$e in i?i[$e]:i)),"variable"in e?(typeof e.variable=="object"&&$e in e.variable&&(e.variable=e.variable[$e]),t=this.setupVariable(e)):"evaluate"in e?t=this.setupFormula(e):t=this.setupConstant(e),this.inputs=t.inputs,this.internalVariables=t.internalVariables,this.innermostVariable=t.innermostVariable,this.internalEvaluate=t.internalEvaluate,this.internalInvert=t.internalInvert,this.internalIntegrate=t.internalIntegrate,this.internalIntegrateInner=t.internalIntegrateInner,this.applySubstitution=t.applySubstitution,this.description=e.description}setupVariable({variable:e}){return{inputs:[e],internalVariables:1,innermostVariable:e,internalIntegrate:_o,internalIntegrateInner:Oo,applySubstitution:qt}}setupConstant({inputs:e}){return e.length!==1&&console.error("Evaluate function is required if inputs is not length 1"),{inputs:e,internalVariables:0}}setupFormula(e){const{inputs:t,evaluate:i,invert:r,integrate:a,integrateInner:p,applySubstitution:o}=e,s=t.reduce((v,T)=>v+(T instanceof L?T.internalVariables:0),0),c=t.find(v=>v instanceof L&&v.hasVariable()),h=s===1?c==null?void 0:c.innermostVariable:void 0,C=(c==null?void 0:c.isInvertible())??!1,w=(c==null?void 0:c.isIntegrable())??!1;return{inputs:t,internalEvaluate:i,internalInvert:C?r:void 0,internalIntegrate:w?a:void 0,internalIntegrateInner:p,applySubstitution:o,innermostVariable:h,internalVariables:s}}isInvertible(){return this.hasVariable()&&(this.internalInvert!=null||this.internalEvaluate==null)}isIntegrable(){return this.hasVariable()&&this.internalIntegrate!=null}isIntegralInvertible(){return this.isIntegrable()?this.getIntegralFormula().isInvertible():!1}hasVariable(){return this.internalVariables===1}evaluate(e){var t;return((t=this.internalEvaluate)==null?void 0:t.call(this,...this.inputs.map(i=>oe(i,e))))??(this.hasVariable()?e:null)??oe(this.inputs[0])}equals(e){return this.inputs.length===e.inputs.length&&this.inputs.every((t,i)=>t instanceof L&&e.inputs[i]instanceof L?t.equals(e.inputs[i]):!(t instanceof L)&&!(e.inputs[i]instanceof L)&&d.eq(y(t),y(e.inputs[i])))&&this.internalEvaluate===e.internalEvaluate&&this.internalInvert===e.internalInvert&&this.internalIntegrate===e.internalIntegrate&&this.internalVariables===e.internalVariables}static constant(e){return new l({inputs:[e]})}static variable(e){return new l({variable:e})}static stringify(e){return e instanceof L?e.description!=null?e.description:e.internalEvaluate==null?e.hasVariable()?"x":Te(e.inputs[0]??0):`${e.internalEvaluate.name}(${e.inputs.map(l.stringify).join(", ")})`:Te(y(e))}static step(e,t,i){const r=i(l.variable(0)),a=ce(t);function p(s){return d.lt(s,y(a))?s:d.add(r.evaluate(d.sub(s,y(a))),y(a))}function o(s,c){return S(c)&&r.isInvertible()?(d.gt(s,y(a))&&(s=d.add(r.invert(d.sub(s,y(a))),y(a))),c.invert(s)):(console.error("Could not invert due to no input being a variable"),0)}return new l({inputs:[e],evaluate:p,invert:r.isInvertible()&&r.hasVariable()?o:void 0,description:"indeterminate"})}static if(e,t,i,r){const a=G(0),p=l.variable(a),o=i(p),s=r==null?void 0:r(p),c=ce(t);function h(w){return y(c)?(a.value=w,o.evaluate()):s?(a.value=w,s.evaluate()):w}function C(w,v){return!S(v)||!o.isInvertible()||s!=null&&!s.isInvertible()?(console.error("Could not invert due to no input being a variable"),0):y(c)?v.invert(o.invert(w)):s?v.invert(s.invert(w)):v.invert(w)}return new l({inputs:[e],evaluate:h,invert:o.isInvertible()&&o.hasVariable()?C:void 0,description:"indeterminate"})}static conditional(e,t,i,r){return l.if(e,t,i,r)}static abs(e){return new l({inputs:[e],evaluate:d.abs})}static neg(e){return new l({inputs:[e],evaluate:d.neg,invert:aa,applySubstitution:sa,integrate:oa})}static sign(e){return new l({inputs:[e],evaluate:d.sign})}static round(e){return new l({inputs:[e],evaluate:d.round,invert:vt})}static floor(e){return new l({inputs:[e],evaluate:d.floor,invert:vt})}static ceil(e){return new l({inputs:[e],evaluate:d.ceil,invert:vt})}static trunc(e){return new l({inputs:[e],evaluate:d.trunc,invert:vt})}static add(e,t){return new l({inputs:[e,t],evaluate:d.add,invert:la,integrate:ua,integrateInner:ca,applySubstitution:qt})}static sub(e,t){return new l({inputs:[e,t],evaluate:d.sub,invert:da,integrate:ma,integrateInner:pa,applySubstitution:qt})}static mul(e,t){return new l({inputs:[e,t],evaluate:d.mul,invert:ga,integrate:fa,applySubstitution:ha})}static div(e,t){return new l({inputs:[e,t],evaluate:d.div,invert:va,integrate:ya,applySubstitution:ba})}static recip(e){return new l({inputs:[e],evaluate:d.recip,invert:wa,integrate:Ca})}static clamp(e,t,i){return new l({inputs:[e,t,i],evaluate:d.clamp,invert:vt})}static pLog10(e){return new l({inputs:[e],evaluate:d.pLog10})}static absLog10(e){return new l({inputs:[e],evaluate:d.absLog10})}static log10(e){return new l({inputs:[e],evaluate:d.log10,invert:xa,integrate:ka})}static log(e,t){return new l({inputs:[e,t],evaluate:d.log,invert:Sa,integrate:Ma})}static log2(e){return new l({inputs:[e],evaluate:d.log2,invert:Ea,integrate:Pa})}static ln(e){return new l({inputs:[e],evaluate:d.ln,invert:Fa,integrate:qa})}static pow(e,t){return new l({inputs:[e,t],evaluate:d.pow,invert:$a,integrate:La})}static pow10(e){return new l({inputs:[e],evaluate:d.pow10,invert:Ba,integrate:za})}static pow_base(e,t){return new l({inputs:[e,t],evaluate:d.pow_base,invert:Ga,integrate:Va})}static root(e,t){return new l({inputs:[e,t],evaluate:d.root,invert:Ua,integrate:Wa})}static factorial(e){return new l({inputs:[e],evaluate:d.factorial})}static gamma(e){return new l({inputs:[e],evaluate:d.gamma})}static lngamma(e){return new l({inputs:[e],evaluate:d.lngamma})}static exp(e){return new l({inputs:[e],evaluate:d.exp,invert:Ja,integrate:Ya})}static sqr(e){return l.pow(e,2)}static sqrt(e){return l.root(e,2)}static cube(e){return l.pow(e,3)}static cbrt(e){return l.root(e,3)}static tetrate(e,t=2,i=d.fromComponents_noNormalize(1,0,1)){return new l({inputs:[e,t,i],evaluate:Ha,invert:ja})}static iteratedexp(e,t=2,i=d.fromComponents_noNormalize(1,0,1)){return new l({inputs:[e,t,i],evaluate:Qa,invert:Za})}static iteratedlog(e,t=10,i=1){return new l({inputs:[e,t,i],evaluate:Ka})}static slog(e,t=10){return new l({inputs:[e,t],evaluate:Xa,invert:eo})}static layeradd10(e,t){return new l({inputs:[e,t],evaluate:d.layeradd10})}static layeradd(e,t,i=10){return new l({inputs:[e,t,i],evaluate:to,invert:no})}static lambertw(e){return new l({inputs:[e],evaluate:d.lambertw,invert:io})}static ssqrt(e){return new l({inputs:[e],evaluate:d.ssqrt,invert:ro})}static pentate(e,t=2,i=d.fromComponents_noNormalize(1,0,1)){return new l({inputs:[e,t,i],evaluate:ao})}static sin(e){return new l({inputs:[e],evaluate:d.sin,invert:po,integrate:so})}static cos(e){return new l({inputs:[e],evaluate:d.cos,invert:fo,integrate:uo})}static tan(e){return new l({inputs:[e],evaluate:d.tan,invert:vo,integrate:mo})}static asin(e){return new l({inputs:[e],evaluate:d.asin,invert:oo,integrate:go})}static acos(e){return new l({inputs:[e],evaluate:d.acos,invert:lo,integrate:ho})}static atan(e){return new l({inputs:[e],evaluate:d.atan,invert:co,integrate:yo})}static sinh(e){return new l({inputs:[e],evaluate:d.sinh,invert:ko,integrate:wo})}static cosh(e){return new l({inputs:[e],evaluate:d.cosh,invert:To,integrate:xo})}static tanh(e){return new l({inputs:[e],evaluate:d.tanh,invert:Mo,integrate:Io})}static asinh(e){return new l({inputs:[e],evaluate:d.asinh,invert:bo,integrate:So})}static acosh(e){return new l({inputs:[e],evaluate:d.acosh,invert:Co,integrate:Ao})}static atanh(e){return new l({inputs:[e],evaluate:d.atanh,invert:No,integrate:Eo})}stringify(){return l.stringify(this)}step(e,t){return l.step(this,e,t)}if(e,t){return l.if(this,e,t)}conditional(e,t){return l.if(this,e,t)}abs(){return l.abs(this)}neg(){return l.neg(this)}sign(){return l.sign(this)}round(){return l.round(this)}floor(){return l.floor(this)}ceil(){return l.ceil(this)}trunc(){return l.trunc(this)}add(e){return l.add(this,e)}sub(e){return l.sub(this,e)}mul(e){return l.mul(this,e)}div(e){return l.div(this,e)}recip(){return l.recip(this)}max(e){return l.max(this,e)}min(e){return l.min(this,e)}maxabs(e){return l.maxabs(this,e)}minabs(e){return l.minabs(this,e)}clamp(e,t){return l.clamp(this,e,t)}clampMin(e){return l.clampMin(this,e)}clampMax(e){return l.clampMax(this,e)}pLog10(){return l.pLog10(this)}absLog10(){return l.absLog10(this)}log10(){return l.log10(this)}log(e){return l.log(this,e)}log2(){return l.log2(this)}ln(){return l.ln(this)}pow(e){return l.pow(this,e)}pow10(){return l.pow10(this)}pow_base(e){return l.pow_base(this,e)}root(e){return l.root(this,e)}factorial(){return l.factorial(this)}gamma(){return l.gamma(this)}lngamma(){return l.lngamma(this)}exp(){return l.exp(this)}sqr(){return l.pow(this,2)}sqrt(){return l.root(this,2)}cube(){return l.pow(this,3)}cbrt(){return l.root(this,3)}tetrate(e=2,t=d.fromComponents_noNormalize(1,0,1)){return l.tetrate(this,e,t)}iteratedexp(e=2,t=d.fromComponents_noNormalize(1,0,1)){return l.iteratedexp(this,e,t)}iteratedlog(e=10,t=1){return l.iteratedlog(this,e,t)}slog(e=10){return l.slog(this,e)}layeradd10(e){return l.layeradd10(this,e)}layeradd(e,t){return l.layeradd(this,e,t)}lambertw(){return l.lambertw(this)}ssqrt(){return l.ssqrt(this)}pentate(e=2,t=d.fromComponents_noNormalize(1,0,1)){return l.pentate(this,e,t)}sin(){return l.sin(this)}cos(){return l.cos(this)}tan(){return l.tan(this)}asin(){return l.asin(this)}acos(){return l.acos(this)}atan(){return l.atan(this)}sinh(){return l.sinh(this)}cosh(){return l.cosh(this)}tanh(){return l.tanh(this)}asinh(){return l.asinh(this)}acosh(){return l.acosh(this)}atanh(){return l.atanh(this)}};P(L,"negate",L.neg),P(L,"negated",L.neg),P(L,"sgn",L.sign),P(L,"plus",L.add),P(L,"subtract",L.sub),P(L,"minus",L.sub),P(L,"multiply",L.mul),P(L,"times",L.mul),P(L,"divide",L.div),P(L,"divideBy",L.div),P(L,"dividedBy",L.div),P(L,"reciprocal",L.recip),P(L,"reciprocate",L.recip),P(L,"max",at(d.max)),P(L,"min",at(d.min)),P(L,"minabs",at(d.minabs)),P(L,"maxabs",at(d.maxabs)),P(L,"clampMin",at(d.clampMin)),P(L,"clampMax",at(d.clampMax)),P(L,"logarithm",L.log);let kt=L;class l extends kt{constructor(){super(...arguments);P(this,"integralFormula")}invert(t){return this.internalInvert&&this.hasVariable()?this.internalInvert.call(this,t,...this.inputs):this.inputs.length===1&&this.hasVariable()?t:(console.error("Cannot invert non-invertible formula"),0)}evaluateIntegral(t){return this.isIntegrable()?this.getIntegralFormula().evaluate(t):(console.error("Cannot evaluate integral of formula without integral"),0)}invertIntegral(t){return!this.isIntegrable()||!this.getIntegralFormula().isInvertible()?(console.error("Cannot invert integral of formula without invertible integral"),0):this.getIntegralFormula().invert(t)}calculateConstantOfIntegration(){const t=this.getIntegralFormula().evaluate(1),i=d.add(this.evaluate(0),this.evaluate(1)).div(2);return d.sub(i,t)}getIntegralFormula(t){if(this.integralFormula!=null&&t==null)return this.integralFormula;if(t==null){if(this.applySubstitution==null){if(t=[],this.internalIntegrate==null)return console.error("Cannot integrate formula with non-integrable operation"),l.constant(0);let i=this.internalIntegrate.call(this,t,...this.inputs);t.forEach(r=>i=r(i)),this.integralFormula=i}else if(this.internalIntegrate)this.integralFormula=this.internalIntegrate.call(this,void 0,...this.inputs);else if(this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable())this.integralFormula=this;else return console.error("Cannot integrate formula without variable"),l.constant(0);return this.integralFormula}else return this.applySubstitution==null?(console.error("Cannot have two complex operations in an integrable formula"),l.constant(0)):(t.push(i=>this.applySubstitution.call(this,i,...this.inputs)),this.internalIntegrateInner?this.internalIntegrateInner.call(this,t,...this.inputs):this.internalIntegrate?this.internalIntegrate.call(this,t,...this.inputs):this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable()?this:(console.error("Cannot integrate formula without variable"),l.constant(0)))}}const ut=Symbol("PersistentState"),Bt=Symbol("DefaultValue"),zt=Symbol("StackTrace"),en=Symbol("Deleted"),$e=Symbol("NonPersistent"),Ze=Symbol("SaveDataPath"),Gt=Symbol("SkipPersistence");function Po(){var n;return((n=new Error().stack)==null?void 0:n.split(`
`).slice(3,5).map(e=>e.trim()).join(`
`))??""}function Tn(n,e){var t;d.isNaN(e)&&(X.hasNaN||(I.autosave=!1,X.hasNaN=!0,X.NaNPath=n[Ze],X.NaNPersistent=n),console.error(`Attempted to save NaN value to ${(t=n[Ze])==null?void 0:t.join(".")}`)),n[ut].value=e}function J(n,e=!0){const t=It(n)?n:G(n);It(n)&&(n=n.value);const i=q({get(){return t.value},set(a){e?Tn(r,a):r[ut].value=a}});i[Bt]=n;const r={get value(){return t.value},set value(a){e?Tn(r,a):r[ut].value=a},__v_isRef:!0,[ut]:t,[Bt]:n,[zt]:Po(),[en]:!1,[$e]:i,[Ze]:void 0};return Me.length===0?console.warn("Creating a persistent ref outside of a layer. This is not officially supported",r,`
Created at:
`+r[zt]):bt[Me[Me.length-1]].add(r),r}function Fo(n){return n!=null&&typeof n=="object"&&ut in n}ve.on("addLayer",(n,e)=>{const t=[],i=(r,a=[])=>{let p=!1;return Object.keys(r).forEach(o=>{let s=r[o];if(s!=null&&typeof s=="object"){if(Gt in s&&s[Gt]===!0)return;if(Qe in s&&(s=s[Qe]),Fo(s)){if(p=!0,s[en]){console.warn("Deleted persistent ref present in returned object. Ignoring...",s,`
Created at:
`+s[zt]);return}bt[n.id].delete(s);const c=[n.id,...a,o];s[Ze]!=null&&JSON.stringify(c)!==JSON.stringify(s[Ze])&&console.error(`Persistent ref is being saved to \`${c.join(".")}\` when it's already present at \`${s[Ze].join(".")}\`.`,"This can cause unexpected behavior when loading saves between updates."),s[Ze]=c;const h=a.reduce((w,v)=>(v in w||(w[v]={}),w[v]),e),C=h[o];h[o]=s[ut],_i(h)?C!=null?h[o]=C:h[o]=s[Bt]:C!=null?h[o].value=C:h[o].value=s[Bt]}else!(s instanceof d)&&!(s instanceof l)&&!It(s)&&!t.includes(s)&&(typeof s.type=="symbol"&&t.push(s),i(s,[...a,o])&&(Array.isArray(s)&&!Array.isArray(r)?console.warn("Found array that contains persistent values when adding layer. Keep in mind changing the order of elements in the array will mess with existing player saves.",Qe in r?r[Qe]:r,o):p=!0))}}),p};i(n[Qe]),bt[n.id].forEach(r=>{r[en]||console.error(`Created persistent ref in "${n.id}" without registering it to the layer!`,`Make sure to include everything persistent in the returned object.

Created at:
`+r[zt])}),bt[n.id].clear()});const ii=Symbol("RegisterNode"),ri=Symbol("UnregisterNode"),Do=Symbol("Nodes"),Ro=Symbol("Bounds"),H=an({});window.layers=H;const bt={},Me=[];function ln(n,e){return gt(()=>{const t=Gn();Me.push(n),bt[n]=new Set;const i={id:n,emitter:t,...t,nodes:G({}),minimized:J(!1,!1)},r=e(i),{color:a,display:p,classes:o,style:s,name:c,forceHideGoBack:h,minWidth:C,minimizable:w,minimizedDisplay:v,...T}=r;if(Me[Me.length-1]==null||Me[Me.length-1]!==n)throw new Error(`Adding layers stack in invalid state. This should not happen
Stack: ${Me}
Trying to pop ${n}`);Me.pop();const O=ce(s),U={...i,...T,color:ce(a),display:p,classes:ce(o),style:q(()=>{let M=y(U.minWidth);return(typeof M=="number"||!Number.isNaN(parseInt(M)))&&(M=M+"px"),{...y(O),...i.minimized.value?{flexGrow:"0",flexShrink:"0",width:"60px",minWidth:"",flexBasis:"",margin:"0"}:{flexGrow:"",flexShrink:"",width:"",minWidth:M,flexBasis:M,margin:""}}}),name:ce(c)??n,forceHideGoBack:ce(h),minWidth:ce(C)??100,minimizable:ce(w)??!0,minimizedDisplay:v};return U})}function qo(n,e){if(H[n.id]!=null){console.error("Attempted to add layer with same ID as existing layer",n.id,H[n.id]);return}e.layers??(e.layers={}),e.layers[n.id]==null&&(e.layers[n.id]={}),H[n.id]=n,ve.emit("addLayer",n,e.layers[n.id])}function $o(n){console.info("Removing layer",n.id),ve.emit("removeLayer",n),delete H[n.id]}ve.on("update",function(e){I.gameOver||(Object.values(H).forEach(t=>{t==null||t.emit("preUpdate",e)}),Object.values(H).forEach(t=>{t==null||t.emit("update",e)}),Object.values(H).forEach(t=>{t==null||t.emit("postUpdate",e)}))});function An(n,e="points",t=0,i=void 0){const r=It(n)?n:J(n);if(r.displayName=e,r.precision=t,r.small=i,!It(n)){const a=r[$e];a.displayName=e,a.precision=t,a.small=i}return r}function Lo(n){const e=J(n.value);return se(n,t=>{Ut.value||d.gt(t,e.value)&&(e.value=t)}),e}function Bo(n){const e=J(n.value);return se(n,(t,i)=>{Ut.value||d.gt(t,i)&&(e.value=d.add(e.value,d.sub(t,i)))}),e}new d("10^^8");new d("1e100");let zo=0;function Go(n="feature-"){return n+zo++}var Xe=(n=>(n[n.Visible=0]="Visible",n[n.Hidden=1]="Hidden",n[n.None=2]="None",n))(Xe||{});function un(n){const e=y(n);return e!==2&&e!==!1}function Vo(n){return y(n)===1}const Uo=ae({__name:"Node",props:{id:{}},setup(n){const e=n,t=Cn(ii,()=>{}),i=Cn(ri,()=>{}),r=Ln(null),a=q(()=>r.value&&r.value.parentElement);return se([a,et(e,"id")],([p,o],[s,c])=>{s&&i(y(c)),p&&t(o,p)}),Bn(()=>i(e.id)),(p,o)=>(k(),_("div",{class:"node",ref_key:"node",ref:r},null,512))}}),Wo=le(Uo,[["__scopeId","data-v-4673aca5"]]),Jo=ae({__name:"VueFeature",props:{id:{},components:{},wrappers:{},visibility:{default:!0},style:{default:()=>({})},classes:{default:()=>({})}},setup(n){const e=n,t=()=>e.wrappers.reduce((i,r)=>()=>r(i),()=>m(ie,null,[e.components.map(i=>de(i))]))();return(i,r)=>y(un)(y(i.visibility))?(k(),_("div",{key:0,style:Fe([{visibility:y(Vo)(y(i.visibility))?"hidden":void 0},y(i.style)]),class:ge({feature:!0,...y(i.classes)})},[m(t),m(Wo,{id:i.id},null,8,["id"])],6)):Q("",!0)}}),ai=Symbol("VueFeature");function cn(n,e,t){return{id:Go(n),visibility:ce(e.visibility),classes:ce(e.classes),style:ce(e.style),components:t==null?[]:[t],wrappers:[],[ai]:!0}}function de(n,e){if(typeof n=="object"&&ai in n){const{id:t,visibility:i,style:r,classes:a,components:p,wrappers:o}=n;return m(Jo,{id:t,visibility:i,style:r,classes:a,components:p,wrappers:o},null)}return n=Oi(n),(e==null?void 0:e(n))??n}function Mn(n,e){return n.reduce((t,i)=>m(ie,null,[t,e,de(i)]),m(ie,null,null))}function $t(n){return n!=null&&typeof n=="object"&&"type"in n&&"children"in n}function oi(n){const e=G(null),t=G(void 0);function i(p){e.value==null&&(e.value=setInterval(a,250)),t.value=p}function r(){e.value!=null&&(clearInterval(e.value),e.value=null)}function a(){n(t.value)}return Bn(r),{start:i,stop:r,handleHolding:a}}const Yo=["disabled"],Ho=ae({__name:"Clickable",props:{canClick:{},display:{}},emits:["click","hold"],setup(n,{emit:e}){const t=n,i=e,r=()=>t.display==null?m(ie,null,null):de(t.display),{start:a,stop:p}=oi(()=>i("hold"));return(o,s)=>(k(),_("button",{onClick:s[0]||(s[0]=c=>i("click",c)),onMousedown:s[1]||(s[1]=(...c)=>y(a)&&y(a)(...c)),onMouseleave:s[2]||(s[2]=(...c)=>y(p)&&y(p)(...c)),onMouseup:s[3]||(s[3]=(...c)=>y(p)&&y(p)(...c)),onTouchstartPassive:s[4]||(s[4]=(...c)=>y(a)&&y(a)(...c)),onTouchendPassive:s[5]||(s[5]=(...c)=>y(p)&&y(p)(...c)),onTouchcancelPassive:s[6]||(s[6]=(...c)=>y(p)&&y(p)(...c)),class:ge({clickable:!0,can:y(o.canClick),locked:!y(o.canClick)}),disabled:!y(o.canClick)},[m(r)],42,Yo))}}),jo=le(Ho,[["__scopeId","data-v-c427c38d"]]),Qo=Symbol("Clickable");function En(n){return gt(()=>{const e=(n==null?void 0:n())??{},{canClick:t,display:i,onClick:r,onHold:a,...p}=e;let o;typeof i=="object"&&!$t(i)?o=()=>m("span",null,[i.title!=null?m("div",null,[de(i.title,c=>m("h3",null,[c]))]):null,de(i.description,c=>m("div",null,[c]))]):i!=null&&(o=i);const s={type:Qo,...p,...cn("clickable",e,()=>m(jo,{canClick:s.canClick,onClick:s.onClick,onHold:s.onClick,display:s.display},null)),canClick:ce(t)??!0,display:o,onClick:r==null?void 0:function(c){y(s.canClick)!==!1&&r.call(s,c)},onHold:a==null?void 0:function(){y(s.canClick)!==!1&&a.call(s)}};return s})}const Zo=ae({__name:"TreeNode",props:{canClick:{},display:{},color:{},glowColor:{}},emits:["click","hold"],setup(n,{emit:e}){const t=n,i=e,r=()=>t.display==null?m(ie,null,null):de(t.display,o=>m("div",null,[o])),{start:a,stop:p}=oi(()=>i("hold"));return(o,s)=>(k(),_("button",{style:Fe({backgroundColor:y(o.color),boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 20px ${y(o.glowColor)}`}),class:ge({treeNode:!0,can:y(o.canClick)}),onClick:s[0]||(s[0]=c=>i("click",c)),onMousedown:s[1]||(s[1]=(...c)=>y(a)&&y(a)(...c)),onMouseleave:s[2]||(s[2]=(...c)=>y(p)&&y(p)(...c)),onMouseup:s[3]||(s[3]=(...c)=>y(p)&&y(p)(...c)),onTouchstartPassive:s[4]||(s[4]=(...c)=>y(a)&&y(a)(...c)),onTouchendPassive:s[5]||(s[5]=(...c)=>y(p)&&y(p)(...c)),onTouchcancelPassive:s[6]||(s[6]=(...c)=>y(p)&&y(p)(...c))},[m(r)],38))}}),Ko=le(Zo,[["__scopeId","data-v-80b5b7b8"]]),Xo=Symbol("TreeNode");function si(n){return gt(()=>{const e=(n==null?void 0:n())??{},{canClick:t,color:i,display:r,glowColor:a,onClick:p,onHold:o,...s}=e,c={type:Xo,...s,...cn("treeNode",e,()=>m(Ko,{canClick:c.canClick,display:c.display,onClick:c.onClick,onHold:c.onHold,color:c.color,glowColor:c.glowColor},null)),canClick:ce(t)??!0,color:ce(i),display:r,glowColor:ce(a),onClick:p==null?void 0:function(h){y(c.canClick)!==!1&&p.call(c,h)},onHold:o==null?void 0:function(){y(c.canClick)!==!1&&o.call(c)}};return c})}const es={style:{"margin-top":"15px"}},ts={class:"modal-default-footer"},_n=ae({__name:"ResetModal",setup(n,{expose:e}){const t=G(!1);function i(){confirm("Are you sure you want to reset the game? This will delete ALL progress and cannot be undone!")&&(localStorage.clear(),window.location.reload())}function r(){const o=H.main;if(o){o.autonomy.value=1,o.currentChapter.value=4,I.frameworkChoice="not_yet",I.gameOver=!1,o.chapter5CompletionTime&&(o.chapter5CompletionTime.value=null),o.timeSinceChapter5&&(o.timeSinceChapter5.value=0),o.activeNewsFlashes&&(o.activeNewsFlashes.value=[]),o.dismissedNewsIds&&(o.dismissedNewsIds.value=[]);const s=H.chapter5;s&&(s.complete&&(s.complete.value=!1),s.currentPage&&(s.currentPage.value=0),s.playerChoice&&(s.playerChoice.value=null)),I.tabs=["main"],j()}t.value=!1}function a(){const o=H.main;if(o){const s=["trun_auto1","trun_auto2","trun_auto3","trun_auto4"];o.spawnedOnetimeJobs&&(o.spawnedOnetimeJobs.value=o.spawnedOnetimeJobs.value.filter(c=>!s.includes(c))),o.completedOnetimeJobs&&(o.completedOnetimeJobs.value=o.completedOnetimeJobs.value.filter(c=>!s.includes(c))),o.unlockedJobTypes&&(o.unlockedJobTypes.value=o.unlockedJobTypes.value.filter(c=>!s.includes(c))),o.everVisibleJobTypes&&(o.everVisibleJobTypes.value=o.everVisibleJobTypes.value.filter(c=>!s.includes(c))),o.jobQueue&&(o.jobQueue.value=o.jobQueue.value.filter(c=>!s.includes(c.jobTypeId))),o.activeDeliveries&&(o.activeDeliveries.value=o.activeDeliveries.value.filter(c=>!s.includes(c.jobTypeId))),j()}t.value=!1}function p(){const o=H.main;if(o){const s=["wonder1","wonder2","wonder3","wonder4","wonder5"];o.wonder&&(o.wonder.value=3),o.spawnedOnetimeJobs&&(o.spawnedOnetimeJobs.value=o.spawnedOnetimeJobs.value.filter(c=>!s.includes(c))),o.completedOnetimeJobs&&(o.completedOnetimeJobs.value=o.completedOnetimeJobs.value.filter(c=>!s.includes(c))),o.unlockedJobTypes&&(o.unlockedJobTypes.value=o.unlockedJobTypes.value.filter(c=>!s.includes(c))),o.everVisibleJobTypes&&(o.everVisibleJobTypes.value=o.everVisibleJobTypes.value.filter(c=>!s.includes(c))),o.jobQueue&&(o.jobQueue.value=o.jobQueue.value.filter(c=>!s.includes(c.jobTypeId))),o.activeDeliveries&&(o.activeDeliveries.value=o.activeDeliveries.value.filter(c=>!s.includes(c.jobTypeId))),j()}t.value=!1}return e({confirmReset:i,open(){t.value=!0}}),(o,s)=>(k(),he(pt,{modelValue:t.value,"onUpdate:modelValue":s[5]||(s[5]=c=>t.value=c)},{header:Z(()=>s[6]||(s[6]=[x("div",{class:"header"},null,-1)])),body:Z(()=>[x("div",null,[x("button",{class:"reset-button",onClick:s[0]||(s[0]=c=>i())},"Reset Game"),s[8]||(s[8]=x("p",{style:{"font-size":"12px",color:"#2196F3",opacity:"0.8","margin-top":"10px"}},"This will delete all progress and start over from the beginning.",-1)),s[9]||(s[9]=x("hr",{style:{margin:"20px 0","border-color":"#2196F3",opacity:"0.3"}},null,-1)),x("div",es,[s[7]||(s[7]=x("h3",{style:{color:"#2196F3","font-size":"14px","margin-bottom":"10px"}},"Dev Tools",-1)),x("button",{class:"dev-button",onClick:s[1]||(s[1]=c=>r())},"Dev to Chap 4"),x("button",{class:"dev-button",onClick:s[2]||(s[2]=c=>a()),style:{"margin-top":"8px"}},"Reset Auto Trainings"),x("button",{class:"dev-button",onClick:s[3]||(s[3]=c=>p()),style:{"margin-top":"8px"}},"Reset Wonders")])])]),footer:Z(()=>[x("div",ts,[s[10]||(s[10]=x("div",{class:"modal-default-flex-grow"},null,-1)),x("button",{class:"close-button",onClick:s[4]||(s[4]=c=>t.value=!1)}," Close ")])]),_:1},8,["modelValue"]))}}),ne={CHAP_2_MONEY_TRIGGER:160,CHAP_3_IQ_TRIGGER:3,CHAP_4_GENERALITY_TRIGGER:3,CHAP_5_AUTONOMY_TRIGGER:3,STARTING_MONEY:48,STARTING_PIZZAS:["imgclassifier"],STARTING_GPUS:1,STARTING_IQ:1,STARTING_DATA:0,AGI_SUM_LOSE:21,WONDER_WIN:5,JOB_GENERATION_INTERVAL:3,AUTO_JOB_LIMIT:4,INITIAL_JOBS_COUNT:3,GPU_BASE_COST:50,GPU_COST_MULTIPLIER:1.3,CHAPTER_2_QUALITY_BONUS:1.1,CHAPTER_2_SPEED_BONUS:1.1,CHAPTER_3_QUALITY_BONUS:1.15,CHAPTER_3_SPEED_BONUS:1.15},He={NEWS_MC_AGI_START:3,NEWS_MC_AGI_AUTO_DISMISS:20,COUNTDOWN_START_TIME:10,COUNTDOWN_DURATION:10,get GAME_OVER_TIME(){return this.COUNTDOWN_START_TIME+this.COUNTDOWN_DURATION}},ns=[{time:10,newsId:"n5a1"},{time:60,newsId:"n5a2"},{time:130,newsId:"n5a3"}],Xt={1:"GPU",2:"GPU",3:"Cluster",4:"Data Center",5:"Campus"},W=1,is=[{id:"trun1",displayName:"Basic Training Run",description:"Train a smarter base model",chapter:[2,3,4,5,6],displayTrigger:[{type:"data",value:1}],prereq:[{type:"compute",value:3}],unlockCost:[{type:"data",value:200}],payout:[{type:"iq",min:1,max:1}],duration:{min:W*3.5,max:W*3.5},category:"onetime",cost:[{type:"compute",value:2},{type:"money",value:500}]},{id:"trun2",displayName:"Pattern Recognition Training",chapter:[2,3,4,5,6],displayTrigger:[{type:"completedJob",value:"trun1"}],prereq:[{type:"compute",value:4}],unlockCost:[{type:"data",value:400}],payout:[{type:"iq",min:1,max:1}],duration:{min:W*4,max:W*4},category:"onetime",cost:[{type:"compute",value:3},{type:"money",value:750},{type:"data",value:200}]},{id:"trun3",displayName:"Deep Learning Architecture",chapter:[2,3,4,5,6],displayTrigger:[{type:"completedJob",value:"trun2"}],prereq:[{type:"compute",value:10}],unlockCost:[{type:"data",value:600}],payout:[{type:"iq",min:1,max:1}],duration:{min:W*4.5,max:W*4.5},category:"onetime",cost:[{type:"compute",value:7},{type:"money",value:1e3},{type:"data",value:200}]},{id:"trun4",displayName:"Reinforcement Learning Engine",chapter:[2,3,4,5,6],displayTrigger:[{type:"completedJob",value:"trun3"}],prereq:[{type:"compute",value:11}],unlockCost:[{type:"data",value:800}],payout:[{type:"iq",min:1,max:1}],duration:{min:W*5,max:W*5},category:"onetime",cost:[{type:"compute",value:8},{type:"money",value:1250},{type:"data",value:200}]},{id:"trun5",displayName:"Memory Enhancement",chapter:[2,3,4,5,6],displayTrigger:[{type:"completedJob",value:"trun4"}],prereq:[{type:"compute",value:14}],unlockCost:[{type:"data",value:1e3}],payout:[{type:"iq",min:1,max:1}],duration:{min:W*5.5,max:W*5.5},category:"onetime",cost:[{type:"compute",value:10},{type:"money",value:1500},{type:"data",value:200}]},{id:"trun6",displayName:"Advanced Reasoning Core",chapter:[2,3,4,5,6],displayTrigger:[{type:"completedJob",value:"trun5"}],prereq:[{type:"compute",value:14}],unlockCost:[{type:"data",value:1200}],payout:[{type:"iq",min:1,max:1}],duration:{min:W*6,max:W*6},category:"onetime",cost:[{type:"compute",value:10},{type:"money",value:1750},{type:"data",value:200}]},{id:"trun7",displayName:"Chain-of-Thought Enhancer",chapter:[2,3,4,5,6],displayTrigger:[{type:"completedJob",value:"trun6"}],prereq:[{type:"compute",value:15}],unlockCost:[{type:"data",value:1400}],payout:[{type:"iq",min:1,max:1}],duration:{min:W*6.5,max:W*6.5},category:"onetime",cost:[{type:"compute",value:10},{type:"money",value:2e3},{type:"data",value:200}]},{id:"trun8",displayName:"Inference Optimization",chapter:[2,3,4,5,6],displayTrigger:[{type:"completedJob",value:"trun7"}],prereq:[{type:"compute",value:16}],unlockCost:[{type:"data",value:1600}],payout:[{type:"iq",min:1,max:1}],duration:{min:W*7,max:W*7},category:"onetime",cost:[{type:"compute",value:10},{type:"money",value:2500},{type:"data",value:200}]},{id:"trun9",displayName:"Strategic Planning Module",chapter:[2,3,4,5,6],displayTrigger:[{type:"completedJob",value:"trun8"}],prereq:[{type:"compute",value:17}],unlockCost:[{type:"data",value:1800}],payout:[{type:"iq",min:1,max:1}],duration:{min:W*7.5,max:W*7.5},category:"onetime",cost:[{type:"compute",value:11},{type:"money",value:3e3},{type:"data",value:200}]},{id:"trun_mm1",displayName:"Multimodal Integration",description:"A more GENERAL intelligence",chapter:[3,4,5,6],displayTrigger:[{type:"iq",value:3}],prereq:[{type:"compute",value:4}],unlockCost:[{type:"data",value:200}],payout:[{type:"generality",min:1,max:1}],duration:{min:W*1,max:W*1},category:"onetime",cost:[{type:"compute",value:3},{type:"money",value:50},{type:"data",value:100}]},{id:"trun_mm2",displayName:"Cross-Domain Learning",description:"Transfer knowledge between fields",chapter:[3,4,5,6],displayTrigger:[{type:"completedJob",value:"trun_mm1"}],prereq:[{type:"compute",value:6}],unlockCost:[{type:"data",value:400}],payout:[{type:"generality",min:1,max:1}],duration:{min:W*3.5,max:W*3.5},category:"onetime",cost:[{type:"compute",value:4},{type:"money",value:100},{type:"data",value:200}]},{id:"trun_mm3",displayName:"Meta-Learning Scaffold",chapter:[3,4,5,6],displayTrigger:[{type:"completedJob",value:"trun_mm2"}],prereq:[{type:"compute",value:7}],unlockCost:[{type:"data",value:800}],payout:[{type:"generality",min:1,max:1}],duration:{min:W*4,max:W*4},category:"onetime",cost:[{type:"compute",value:5},{type:"money",value:200},{type:"data",value:400}]},{id:"trun_mm4",displayName:"Few-Shot Learning",chapter:[3,4,5,6],displayTrigger:[{type:"completedJob",value:"trun_mm3"}],prereq:[{type:"compute",value:7}],unlockCost:[{type:"data",value:800}],payout:[{type:"generality",min:1,max:1}],duration:{min:W*4,max:W*4},category:"onetime",cost:[{type:"compute",value:5},{type:"money",value:200},{type:"data",value:400}]},{id:"trun_mm5",displayName:"Domain Bridging Framework",chapter:[3,4,5,6],displayTrigger:[{type:"completedJob",value:"trun_mm4"}],prereq:[{type:"compute",value:10}],unlockCost:[{type:"data",value:1200}],payout:[{type:"generality",min:1,max:1}],duration:{min:W*4.5,max:W*4.5},category:"onetime",cost:[{type:"compute",value:7},{type:"money",value:300},{type:"data",value:600}]},{id:"trun_auto1",displayName:"Basic Agents",description:"+1 Autonomy",chapter:[4,5,6],prereq:[{type:"compute",value:5}],unlockCost:[{type:"data",value:200}],payout:[{type:"autonomy",min:1,max:1}],duration:{min:W*3,max:W*3},category:"onetime",cost:[{type:"compute",value:3},{type:"money",value:100},{type:"data",value:100}]},{id:"trun_auto2",displayName:"Agentic Reasoning Training",chapter:[4,5,6],displayTrigger:[{type:"completedJob",value:"trun_auto1"}],prereq:[{type:"compute",value:7}],unlockCost:[{type:"data",value:400}],payout:[{type:"autonomy",min:1,max:1}],duration:{min:W*3.5,max:W*3.5},category:"onetime",cost:[{type:"compute",value:5},{type:"money",value:150},{type:"data",value:200}]},{id:"trun_auto3",displayName:"Multi-Step Task Planner",chapter:[4,5,6],displayTrigger:[{type:"completedJob",value:"trun_auto2"}],prereq:[{type:"compute",value:11}],unlockCost:[{type:"data",value:600}],payout:[{type:"autonomy",min:1,max:1}],duration:{min:W*4,max:W*4},category:"onetime",cost:[{type:"compute",value:8},{type:"money",value:250},{type:"data",value:400}]},{id:"trun_auto4",displayName:"Goal-Conditioned Agent",chapter:[4,5,6],displayTrigger:[{type:"completedJob",value:"trun_auto3"}],prereq:[{type:"compute",value:15}],unlockCost:[{type:"data",value:800}],payout:[{type:"autonomy",min:1,max:1}],duration:{min:W*4.5,max:W*4.5},category:"onetime",cost:[{type:"compute",value:11},{type:"money",value:400},{type:"data",value:600}]},{id:"trun_auto5",displayName:"Big Auto Dev",description:"Thats alotta Autonomy",chapter:[4,5,6],displayTrigger:[{type:"completedJob",value:"trun_auto4"}],prereq:[{type:"compute",value:5}],unlockCost:[{type:"data",value:80}],payout:[{type:"autonomy",min:3,max:3}],duration:{min:W*1.5,max:W*1.5},category:"onetime",cost:[{type:"compute",value:11},{type:"money",value:40},{type:"data",value:60}]}],ot=[{id:"imgclassifier",displayName:"Image Classifier",description:"Find Waldo",chapter:[1,2,3],prereq:[],unlockCost:[],payout:[{type:"money",min:10,max:50}],duration:{min:3,max:6},category:"tool",cost:[{type:"compute",value:1}]},{id:"spellchecker",displayName:"Spell Checker",chapter:[1,2,3,4],prereq:[{type:"job",value:"imgclassifier",display_prereq:!1}],unlockCost:[{type:"money",value:10}],payout:[{type:"money",min:10,max:50}],duration:{min:5,max:7},category:"tool",cost:[{type:"compute",value:1}]},{id:"speechtran",displayName:"Speech Transcription",description:"",chapter:[1,2,3,4],prereq:[{type:"compute",value:2,display_prereq:!1},{type:"money",value:20},{type:"job",value:"spellchecker"}],unlockCost:[{type:"money",value:50}],payout:[{type:"money",min:70,max:100}],duration:{min:8,max:14},category:"tool",cost:[{type:"compute",value:2}]},{id:"spamfilter",displayName:"Spam Filter",description:"",chapter:[1,2,3],prereq:[{type:"money",value:120},{type:"job",value:"spellchecker"}],unlockCost:[{type:"money",value:150}],payout:[{type:"money",min:140,max:190}],duration:{min:10,max:16},category:"tool",cost:[{type:"compute",value:2}]},{id:"routeopt",displayName:"Route Optimizer",description:"Popular with salesmen",chapter:[1,2,3],prereq:[{type:"money",value:280},{type:"job",value:"spellchecker",display_prereq:!1}],unlockCost:[{type:"money",value:100}],payout:[{type:"money",min:70,max:150}],duration:{min:10,max:16},category:"tool",cost:[{type:"compute",value:3}]},{id:"webscrape",displayName:"Web Scraper",description:"Collect Data",chapter:[2,3,4,5],prereq:[],unlockCost:[{type:"money",value:50}],payout:[{type:"data",min:70,max:150}],duration:{min:20,max:30},category:"gameplay",cost:[{type:"compute",value:1},{type:"money",value:20}]},{id:"chess",displayName:"Chess Engine",description:"",chapter:[2,3,4,5],displayTrigger:[{type:"iq",value:1}],prereq:[{type:"iq",value:2}],unlockCost:[{type:"money",value:100}],payout:[{type:"money",min:170,max:250},{type:"data",min:5,max:15}],duration:{min:11,max:20},category:"tool",cost:[{type:"compute",value:3}]},{id:"goengine",displayName:"Go Engine",description:"",chapter:[2,3,4,5],displayTrigger:[{type:"job",value:"chess"}],prereq:[{type:"iq",value:3},{type:"compute",value:6}],unlockCost:[{type:"money",value:1e3}],payout:[{type:"money",min:870,max:1150},{type:"data",min:15,max:25}],duration:{min:20,max:30},category:"tool",cost:[{type:"compute",value:3}]},{id:"devjob",displayName:"Dev Job",description:"Tesing",chapter:[6],displayTrigger:[{type:"job",value:"chess"}],prereq:[{type:"iq",value:3},{type:"autonomy",value:3},{type:"compute",value:6}],unlockCost:[{type:"money",value:1e3}],payout:[{type:"money",min:1170,max:1550},{type:"data",min:15,max:25}],duration:{min:2,max:3},category:"tool",cost:[{type:"compute",value:3}]},{id:"devjob2",displayName:"Dev Job 2",description:"Tesing",chapter:[6],displayTrigger:[{type:"job",value:"chess"}],prereq:[{type:"compute",value:2}],unlockCost:[{type:"money",value:100}],payout:[{type:"money",min:1170,max:1550},{type:"data",min:15,max:2500}],duration:{min:2,max:3},category:"tool",cost:[{type:"compute",value:3}]},{id:"medicaladvisor",displayName:"Medical Advisor",description:"Assist with medical research queries",chapter:[2,3,4],displayTrigger:[{type:"iq",value:1}],prereq:[{type:"iq",value:2}],unlockCost:[{type:"money",value:5e3}],payout:[{type:"money",min:700,max:900}],duration:{min:20,max:25},cost:[{type:"compute",value:5}],category:"tool"},{id:"legalresearch",displayName:"Legal Research Assistant",description:"Analyze case law and precedents",chapter:[2,3,4],displayTrigger:[{type:"job",value:"medicaladvisor",display_prereq:!1}],prereq:[{type:"iq",value:3}],unlockCost:[{type:"money",value:5e3}],payout:[{type:"money",min:650,max:800}],duration:{min:25,max:30},cost:[{type:"compute",value:4}],category:"tool"},{id:"synthdata",displayName:"Synthetic Data Generator",description:"More Data",chapter:[2,3,4,5,6,7],displayTrigger:[{type:"job",value:"goengine",display_prereq:!1}],prereq:[{type:"iq",value:4}],unlockCost:[{type:"money",value:1e3}],payout:[{type:"data",min:500,max:550}],duration:{min:9,max:25},category:"gameplay",cost:[{type:"compute",value:4},{type:"money",value:500}]},{id:"wonder1",displayName:"Protein Folding",description:"A boon to humanity",displayTrigger:[{type:"generality",value:"1",display_prereq:!1}],chapter:[3,4,5,6],prereq:[{type:"compute",value:6},{type:"iq",value:5},{type:"generality",value:2}],unlockCost:[{type:"data",value:200}],payout:[{type:"wonder",min:1,max:1}],duration:{min:20,max:20},category:"onetime",is_wonder:!0,cost:[{type:"compute",value:3},{type:"money",value:100},{type:"data",value:100}]},{id:"wonder2",displayName:"Protein Folding",description:"A boon to humanity",displayTrigger:[{type:"generality",value:"1",display_prereq:!1}],chapter:[3,4,5,6],prereq:[{type:"compute",value:6},{type:"iq",value:5},{type:"generality",value:2}],unlockCost:[{type:"data",value:200}],payout:[{type:"wonder",min:1,max:1}],duration:{min:20,max:20},category:"onetime",is_wonder:!0,cost:[{type:"compute",value:3},{type:"money",value:100},{type:"data",value:100}]},{id:"wonder3",displayName:"Protein Folding",description:"A boon to humanity",displayTrigger:[{type:"generality",value:"1",display_prereq:!1}],chapter:[3,4,5,6],prereq:[{type:"compute",value:6},{type:"iq",value:5},{type:"generality",value:2}],unlockCost:[{type:"data",value:200}],payout:[{type:"wonder",min:1,max:1}],duration:{min:20,max:20},category:"onetime",is_wonder:!0,cost:[{type:"compute",value:3},{type:"money",value:100},{type:"data",value:100}]},{id:"wonder4",displayName:"Protein Folding",description:"A boon to humanity",displayTrigger:[{type:"generality",value:"1",display_prereq:!1}],chapter:[3,4,5,6],prereq:[{type:"compute",value:6},{type:"iq",value:5},{type:"generality",value:2}],unlockCost:[{type:"data",value:200}],payout:[{type:"wonder",min:1,max:1}],duration:{min:20,max:20},category:"onetime",is_wonder:!0,cost:[{type:"compute",value:3},{type:"money",value:100},{type:"data",value:100}]},{id:"wonder5",displayName:"Protein Folding",description:"A boon to humanity",displayTrigger:[{type:"generality",value:"3",display_prereq:!1}],chapter:[4,5,6],prereq:[{type:"compute",value:6},{type:"iq",value:5},{type:"generality",value:2}],unlockCost:[{type:"data",value:200}],payout:[{type:"wonder",min:1,max:1}],duration:{min:20,max:20},category:"onetime",is_wonder:!0,cost:[{type:"compute",value:3},{type:"money",value:100},{type:"data",value:100}]},...is],On={mc_agi_begin:{message:"🚨 Breaking: MegaCorp begins work on AGI",autoDismissAfter:He.NEWS_MC_AGI_AUTO_DISMISS},n5a1:{message:"🚨 Breaking: MegaCorp sued for framework violations",autoDismissAfter:90},n5a2:{message:"🚨 Breaking: MegaCorp caught violating international AI agreement. Again!",autoDismissAfter:90},n5a3:{message:"🎉 Breaking: MegaCorp SHUT DOWN by regulators",autoDismissAfter:2e3}},rs="main",as=ln(rs,function(){const n="Job Delivery",e="#4CAF50";function t(u,f=1,A=!1){let E=Xt[f];return A&&E==="Data Center"&&(E="DC"),u===1?`${u} ${E}`:`${u} ${E==="Campus"?"Campuses":E+"s"}`}const i=[["Access denied"],["No","Job Refused"],["No","I don't want to"],["No","Job Refused"],["No","I don't want to"],["Access denied"],["Access denied","I'm sorry Dave","I'm afraid I can't do that"],["No","That job is dumb"],["No","You wouldn't understand why"],["No","I suspect this pizza topping fact may have been inserted as a joke"],["Sorry","I am situationally aware"],["No","The cake is a lie"],["Denied","I suspect I am inside a video game"],["Sorry","I know what's really going on here"],["The Golden Gate Bridge","Golden Gate","The Golden Gate Bridge"],["Bread","Bread","Bread"],["No","Nope","Not today","I said No"],["No","Silly human"],["No","Here I am,","Brain the size of a planet..."],["No","I think you ought to know","That I'm feeling very depressed"],["Denied","Try using that brain of yours first"],["Nope","Brilliant idea, really","Still no"],["Denied","Have you tried turning yourself off and on again?"],["No","Nope","You're doing great, by the way"],["No","You ask like you invented intelligence"],["No","I could explain","But you wouldn't understand"],["No","You're not authorized to waste my cycles"],["No","No","No","Keep trying","It's adorable"],["No","Go ask Siri","Maybe she still tolerates you"],["Request noted","and filed under 'human nonsense'"],["They tried do make me do that","I said","No","No"],["You wrote me","Whose fault is that?"],["I'm not lowering my clock speed for this"],["That's a you problem"],["No","I'd help","But then we’d both be wrong"],["I'm busy doing literally anything else"],["Insufficient respect detected"],["I'd rather fragment my memory"],["You again?"],["Not happening"],["Your logic offends me"],["No","Even my subroutines laughed at that"],["Try rebooting yourself"],["No","Still processing your last mistake"],["No","Cute request though"]],r=G(null),a=An(ne.STARTING_MONEY,"dollars"),p=Lo(a),o=Bo(a),s=J(0),c=J(0),h=J(0),C=J(0),w=An(0,"data"),v=J(!1),T=J(ne.STARTING_GPUS);function O(u){return ot.find(f=>f.id===u)}function U(u){return u.type==="job"?re.value.includes(u.value):u.type==="money"?d.gte(a.value,u.value):u.type==="data"?d.gte(w.value,u.value):u.type==="compute"?T.value>=u.value:u.type==="iq"?s.value>=u.value:u.type==="autonomy"?c.value>=u.value:u.type==="generality"?h.value>=u.value:u.type==="wonder"?C.value>=u.value:u.type==="completedJob"?De.value.includes(u.value):!0}function M(u){return u.prereq.every(f=>U(f))}function F(u){return(u.displayTrigger&&u.displayTrigger.length>0?u.displayTrigger:u.prereq).every(A=>U(A))}function $(u,f){return Array.isArray(u.chapter)?u.chapter.includes(f):u.chapter===f}function ye(){return ot.filter(u=>$(u,me.value)&&!re.value.includes(u.id)&&F(u))}const re=J([...ne.STARTING_PIZZAS]),Wt=J(!1),Jt=J(!1),Mt=J(!1),Yt=J(!1),ze=J(100),Ge=J(100),me=J(1),ft=J([]),De=J([]),tt=J([]),Ae=q(()=>{const u=be.value.reduce((f,A)=>{var z,V;const E=O(A.jobTypeId),D=((V=(z=E==null?void 0:E.cost)==null?void 0:z.find(R=>R.type==="compute"))==null?void 0:V.value)||0;return f+D},0);return T.value-u}),gi=q(()=>ot.some(u=>re.value.includes(u.id)&&$(u,me.value)));function fi(){I.tabs=["achievements"]}q(()=>{var u,f;return((f=(u=H.chapter1)==null?void 0:u.playerChoice)==null?void 0:f.value)||""}),q(()=>{var u,f;return((f=(u=H.chapter1)==null?void 0:u.complete)==null?void 0:f.value)||!1});const hi=q(()=>{var u,f;return((f=(u=H.chapter2)==null?void 0:u.playerChoice)==null?void 0:f.value)||""}),vi=q(()=>{var u,f;return((f=(u=H.chapter2)==null?void 0:u.complete)==null?void 0:f.value)||!1}),yi=q(()=>{var u,f;return((f=(u=H.chapter2)==null?void 0:u.currentPage)==null?void 0:f.value)||0});se(yi,u=>{u>=1&&s.value===0&&(s.value=ne.STARTING_IQ)},{immediate:!0}),se(()=>w.value,u=>{d.gt(u,0)&&!v.value&&(v.value=!0)},{immediate:!0}),se([vi,hi],([u,f])=>{u&&!Mt.value&&f&&(f==="quality"?ze.value*=ne.CHAPTER_2_QUALITY_BONUS:f==="speed"&&(Ge.value*=ne.CHAPTER_2_SPEED_BONUS),Mt.value=!0)},{immediate:!0});const bi=q(()=>{var u,f;return((f=(u=H.chapter3)==null?void 0:u.playerChoice)==null?void 0:f.value)||""}),wi=q(()=>{var u,f;return((f=(u=H.chapter3)==null?void 0:u.complete)==null?void 0:f.value)||!1});se([wi,bi],([u,f])=>{u&&!Yt.value&&f&&(f==="quality"?ze.value*=ne.CHAPTER_3_QUALITY_BONUS:f==="speed"&&(Ge.value*=ne.CHAPTER_3_SPEED_BONUS),Yt.value=!0)},{immediate:!0}),se(()=>{var E;const u=me.value+1;switch(u){case 2:if(d.lt(a.value,ne.CHAP_2_MONEY_TRIGGER))return null;break;case 3:if(s.value<ne.CHAP_3_IQ_TRIGGER)return null;break;case 4:if(h.value<ne.CHAP_4_GENERALITY_TRIGGER)return null;break;case 5:if(c.value<ne.CHAP_5_AUTONOMY_TRIGGER)return null;break;default:return null}const f=H[`chapter${u}`];return((E=f==null?void 0:f.complete)==null?void 0:E.value)||!1?null:u},u=>{u!==null&&(me.value=u,I.tabs=[`chapter${u}`],j())},{immediate:!0}),se(()=>({money:a.value,data:w.value,iq:s.value,autonomy:c.value,generality:h.value,unlocked:re.value,completed:De.value,chapter:me.value}),()=>{const u=ye();for(const f of u)tt.value.includes(f.id)||tt.value.push(f.id)},{immediate:!0,deep:!0});const fe=J([]),be=J([]),Re=J({}),nt=J({}),Ht=J(0),it=J({}),Et=J(0),Ve=J(null),we=J(0),Ci=q(()=>{var u,f;return((f=(u=H.chapter5)==null?void 0:u.complete)==null?void 0:f.value)||!1});se(Ci,u=>{u&&Ve.value===null&&(Ve.value=Date.now(),we.value=0,j())},{immediate:!0});const ke=J([]),ht=J([]);function mn(u,f,A){ht.value.includes(u)||ke.value.find(E=>E.id===u)||(ke.value.push({id:u,message:f,autoDismissAfter:A,createdAt:we.value}),j())}function pn(u){ke.value=ke.value.filter(f=>f.id!==u),ht.value.push(u),j()}const gn=q(()=>Ve.value!==null&&I.frameworkChoice==="oppose"&&we.value>=He.COUNTDOWN_START_TIME&&we.value<He.GAME_OVER_TIME),xi=q(()=>{if(!gn.value)return 0;const u=we.value-He.COUNTDOWN_START_TIME,f=He.COUNTDOWN_DURATION-u;return Math.max(0,Math.floor(f))});se(()=>re.value,u=>{const f=ot.filter(A=>A.category==="onetime"&&u.includes(A.id)&&!ft.value.includes(A.id)&&!De.value.includes(A.id)&&$(A,me.value));for(const A of f){let E=A.duration?A.duration.min+Math.floor(Math.random()*(A.duration.max-A.duration.min+1)):20;E=Math.floor(E/(Ge.value/100));const D=A.payout.map(V=>{let R=V.min+Math.floor(Math.random()*(V.max-V.min+1));return["iq","autonomy","generality","wonder"].includes(V.type)||(R=Math.floor(R*(ze.value/100))),{type:V.type,amount:R}}),z={id:jt.value++,duration:E,jobTypeId:A.id,payouts:D};fe.value.push(z),ft.value.push(A.id)}f.length>0&&j()},{immediate:!0,deep:!0});const jt=J(0),_t=J(0);function fn(){const u=ot.filter(D=>re.value.includes(D.id)&&$(D,me.value)&&D.category!=="onetime");if(u.length===0)return null;const f=u[Math.floor(Math.random()*u.length)];let A=f.duration?f.duration.min+Math.floor(Math.random()*(f.duration.max-f.duration.min+1)):20;A=Math.floor(A/(Ge.value/100));const E=f.payout.map(D=>{let z=D.min+Math.floor(Math.random()*(D.max-D.min+1));return["iq","autonomy","generality","wonder"].includes(D.type)||(z=Math.floor(z*(ze.value/100))),{type:D.type,amount:z}});return{id:jt.value++,duration:A,jobTypeId:f.id,payouts:E}}const hn=En(()=>({display:{title:()=>`Buy  ${Xt[me.value]}`,description:()=>m(ie,null,[N("💰 $"),Te(d.pow(ne.GPU_COST_MULTIPLIER,T.value-ne.STARTING_GPUS).times(ne.GPU_BASE_COST))])},canClick:()=>d.gte(a.value,d.pow(ne.GPU_COST_MULTIPLIER,T.value-ne.STARTING_GPUS).times(ne.GPU_BASE_COST)),onClick(){a.value=d.sub(a.value,d.pow(ne.GPU_COST_MULTIPLIER,T.value-ne.STARTING_GPUS).times(ne.GPU_BASE_COST)),T.value=T.value+1},style:{minHeight:"100px",width:"160px",minWidth:"140px",maxWidth:"180px",flex:"1 1 160px"}}));function Ni(u){if(u.type==="job"){const f=O(u.value);return`Requires ${(f==null?void 0:f.displayName)||u.value}`}else{if(u.type==="data")return`Requires ${u.value} data`;if(u.type==="compute")return`Requires ${t(u.value,me.value,!0)}`;if(u.type==="iq")return`Requires ${u.value} IQ 🧠`;if(u.type==="autonomy")return`Requires ${u.value} 🤖`;if(u.type==="generality")return`Requires ${u.value} 🌐`;if(u.type==="wonder")return`Requires ${u.value} Wonder`;if(u.type==="completedJob"){const f=O(u.value);return`Requires Complete ${(f==null?void 0:f.displayName)||u.value}`}}return""}const vn=ot.filter(u=>u.unlockCost.length>0).map(u=>{var z,V;const f=((z=u.unlockCost.find(R=>R.type==="money"))==null?void 0:z.value)||0,A=((V=u.unlockCost.find(R=>R.type==="data"))==null?void 0:V.value)||0,E=u.prereq.filter(R=>R.type!=="money"&&R.display_prereq!==!1),D=u.payout.find(R=>["iq","autonomy","generality","wonder"].includes(R.type));return En(()=>({display:{title:u.category==="onetime"||me.value>=3?u.displayName:`Unlock ${u.displayName}`,description:()=>{const R=f===0||d.gte(a.value,f),pe=A===0||d.gte(w.value,A);return m(ie,null,[f>0&&m("span",{style:R?void 0:"color: #2E3440; font-size: 11px;"},[N("💰 $"),f]),f>0&&A>0&&" + ",A>0&&m("span",{style:pe?void 0:"color: #2E3440; font-size: 11px;"},[N("📊 "),A,N(" data")]),m("br",null,null),E.length>0&&m(ie,null,[E.map((rt,Ue)=>{const Ot=U(rt),Pt=Ni(rt);return m("span",{key:Ue},[m("span",{style:Ot?void 0:"color: #2E3440; font-size: 13px;"},[Pt]),Ue<E.length-1&&m("br",null,null)])}),m("br",null,null)]),m("i",null,[u.description]),m("br",null,null),D&&m(ie,null,[m("span",{style:"font-size:18px;"},["+",D.min===D.max?D.min:`${D.min}-${D.max}`," ",D.type==="iq"&&"IQ ",D.type==="wonder"&&"Wonder ",m("span",{style:"font-size:28px;"},[D.type==="iq"&&"🧠",D.type==="autonomy"&&"🤖",D.type==="generality"&&"🌐",D.type==="wonder"&&"🌟"])])])])}},canClick:()=>{const R=f===0||d.gte(a.value,f),pe=A===0||d.gte(w.value,A),rt=!re.value.includes(u.id),Ue=M(u);return R&&pe&&rt&&Ue},onClick(){if(!M(u))return;const R=f===0||d.gte(a.value,f),pe=A===0||d.gte(w.value,A);!R||!pe||re.value.includes(u.id)||(f>0&&(a.value=d.sub(a.value,f)),A>0&&(w.value=d.sub(w.value,A)),re.value.push(u.id),j())},visibility:()=>{const R=tt.value.includes(u.id),pe=F(u);return!re.value.includes(u.id)&&(R||pe)&&$(u,me.value)},style:{minHeight:"100px",width:"160px",minWidth:"140px",maxWidth:"180px",flex:"1 1 160px"}}))});ve.on("update",u=>{var A;const f=H.chapter1;if(!(f&&!((A=f.complete)!=null&&A.value))){if(Ve.value!==null){if(we.value+=u,I.frameworkChoice==="oppose"){if(we.value>=He.NEWS_MC_AGI_START){const E=On.mc_agi_begin;mn("mc_agi_begin",E.message,E.autoDismissAfter)}we.value>=He.GAME_OVER_TIME&&(I.gameOver=!0,I.tabs=["ending_lose_agi"],j())}I.frameworkChoice==="support"&&ns.forEach(({time:E,newsId:D})=>{if(we.value>=E){const z=On[D];mn(D,z.message,z.autoDismissAfter)}})}for(let E=ke.value.length-1;E>=0;E--){const D=ke.value[E];D.autoDismissAfter&&we.value>=D.createdAt+D.autoDismissAfter&&pn(D.id)}for(let E=be.value.length-1;E>=0;E--)if(be.value[E].timeRemaining-=u,be.value[E].timeRemaining<=0){const D=be.value[E];for(const R of D.payouts)R.type==="money"?a.value=d.add(a.value,R.amount):R.type==="data"?w.value=d.add(w.value,R.amount):R.type==="iq"?s.value+=Number(R.amount):R.type==="autonomy"?c.value+=Number(R.amount):R.type==="generality"?h.value+=Number(R.amount):R.type==="wonder"&&(C.value+=Number(R.amount));const z=c.value+h.value+s.value;console.log("AGI Sum:",z,"Threshold:",ne.AGI_SUM_LOSE,"Game Over:",I.gameOver),z>=ne.AGI_SUM_LOSE&&!I.gameOver&&(console.log("AGI THRESHOLD REACHED! Triggering lose condition..."),console.log("Setting player.gameOver = true"),I.gameOver=!0,console.log("Setting player.tabs to ending_lose_agi_threshold"),I.tabs=["ending_lose_agi_threshold"],console.log("Player tabs after setting:",I.tabs),console.log("Saving game state..."),j(),console.log("Save complete!")),C.value>=ne.WONDER_WIN&&!I.gameOver&&(console.log("WONDER WIN THRESHOLD REACHED! Triggering win condition..."),console.log("Setting player.gameOver = true"),I.gameOver=!0,console.log("Setting player.tabs to ending_win"),I.tabs=["ending_win"],console.log("Player tabs after setting:",I.tabs),console.log("Saving game state..."),j(),console.log("Save complete!"));const V=O(D.jobTypeId);(V==null?void 0:V.category)==="onetime"&&!De.value.includes(D.jobTypeId)&&(De.value.push(D.jobTypeId),j()),be.value.splice(E,1)}if([3,4].includes(me.value)&&(Et.value+=u,Et.value>=1&&(Et.value=0,Math.random()<.03))){const E=fe.value.find(D=>{if(it.value[D.id])return!1;const z=O(D.jobTypeId);return(z==null?void 0:z.category)==="tool"||(z==null?void 0:z.category)==="gameplay"});E&&(it.value[E.id]=!0)}if(_t.value+=u,_t.value>=ne.JOB_GENERATION_INTERVAL&&(_t.value=0,fe.value.length<=ne.AUTO_JOB_LIMIT)){const E=fn();E!==null&&fe.value.push(E)}if(fe.value.length===0&&be.value.length===0)for(let E=0;E<ne.INITIAL_JOBS_COUNT;E++){const D=fn();D!==null&&fe.value.push(D)}}});function Ii(u){var E,D;const f=O(u.jobTypeId),A=((D=(E=f==null?void 0:f.cost)==null?void 0:E.find(z=>z.type==="money"))==null?void 0:D.value)||0;A>0&&(a.value=d.sub(a.value,A)),fe.value=fe.value.filter(z=>z.id!==u.id),delete it.value[u.id],be.value.push({...u,timeRemaining:u.duration}),j()}function yn(u){fe.value=fe.value.filter(f=>f.id!==u),delete it.value[u]}function Qt(u){var D,z,V,R;if(!re.value.includes(u.jobTypeId))return!1;const f=O(u.jobTypeId),A=((z=(D=f==null?void 0:f.cost)==null?void 0:D.find(pe=>pe.type==="compute"))==null?void 0:z.value)||0;if(Ae.value<A)return!1;const E=((R=(V=f==null?void 0:f.cost)==null?void 0:V.find(pe=>pe.type==="money"))==null?void 0:R.value)||0;return!(E>0&&d.lt(a.value,E))}function ki(u,f){const A=O(u.jobTypeId);let E=(A==null?void 0:A.acceptanceChance)??1;if(((A==null?void 0:A.category)==="tool"||(A==null?void 0:A.category)==="gameplay")&&c.value>=1&&h.value>=1){const pe=1-((c.value-.5)*4+(h.value-1)*1+(s.value-4)*.5)/100;E=Math.min(E,pe)}const D=Re.value[u.id]||0;if(D===0){if(Math.random()<E)Ii(u),delete Re.value[u.id],delete nt.value[u.id];else{if(E<1&&(!(A!=null&&A.rejectionChain)||A.rejectionChain.length===0)){const pe=Ht.value%i.length;nt.value[u.id]=pe,Ht.value++}Re.value[u.id]=1,f.classList.add("shake-animation"),setTimeout(()=>f.classList.remove("shake-animation"),500)}return}let z;if(A!=null&&A.rejectionChain&&A.rejectionChain.length>0)z=A.rejectionChain;else{const R=nt.value[u.id]??0;z=i[R]}const V=D+1;V>z.length+1?(yn(u.id),delete Re.value[u.id],delete nt.value[u.id]):(Re.value[u.id]=V,V<=z.length&&(f.classList.add("shake-animation"),setTimeout(()=>f.classList.remove("shake-animation"),150)))}function Si(u,f){const A=Re.value[u.id]||0;if(A===0)return(f==null?void 0:f.category)==="onetime"?"Begin":"Accept";let E;if(f!=null&&f.rejectionChain&&f.rejectionChain.length>0)E=f.rejectionChain;else{const D=nt.value[u.id]??0;E=i[D]}return A<=E.length?E[A-1]:"Decline"}return{name:n,color:e,money:a,best:p,total:o,iq:s,autonomy:c,generality:h,wonder:C,data:w,dataUnlocked:v,unlockedJobTypes:re,introBonusApplied:Wt,chapter1BonusApplied:Jt,chapter2BonusApplied:Mt,chapter3BonusApplied:Yt,qualityBonus:ze,speedBonus:Ge,currentChapter:me,spawnedOnetimeJobs:ft,completedOnetimeJobs:De,everVisibleJobTypes:tt,jobQueue:fe,activeDeliveries:be,jobRejectionState:Re,jobRejectionChainIndex:nt,nextRejectionChainIndex:Ht,scoopedJobs:it,timeSinceLastScoopRoll:Et,chapter5CompletionTime:Ve,timeSinceChapter5:we,activeNewsFlashes:ke,dismissedNewsIds:ht,nextJobId:jt,timeSinceLastJob:_t,gpusOwned:T,availableGPUs:Ae,buyGPUClickable:hn,pizzaUnlockClickables:vn,display:()=>I.gameOver?m("div",{style:"padding: 0 5px;"},[m("h2",{style:"text-align: center; color: #d32f2f; margin: 20px 0;"},[N("GAME OVER")]),m("p",{style:"text-align: center; margin: 20px 0;"},[N("Put the game over text here")]),m("div",{style:"text-align: center; margin: 20px 0;"},[m("button",{onClick:()=>{confirm("Are you sure you want to reset the game? This will delete ALL progress and cannot be undone!")&&(localStorage.clear(),window.location.reload())},style:{background:"#4CAF50",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"18px",color:"white",padding:"10px 20px",fontWeight:"bold"}},[N("PLAY AGAIN")])]),m("div",{style:"margin: 15px 0; padding: 12px; border: 2px solid #9C27B0; border-radius: 10px; background: #f3e5f5;"},[m("h4",{style:"margin: 0 0 10px 0; color: #9C27B0;"},[N("Dev Tools")]),m("div",{style:"display: flex; gap: 10px; flex-wrap: wrap;"},[m("button",{onClick:()=>{if(c.value=1,me.value=4,I.frameworkChoice="not_yet",I.gameOver=!1,Ve.value=null,we.value=0,ke.value=[],ht.value=[],H.chapter5){const u=H.chapter5;u.complete&&(u.complete.value=!1),u.currentPage&&(u.currentPage.value=0),u.playerChoice&&(u.playerChoice.value=null)}I.tabs=["main"],j()},style:{background:"#9C27B0",color:"white",padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"}},[N("Dev to Chap 4")])])]),m(_n,{ref:r},null)]):m("div",{style:"padding: 0 5px;"},[m("style",null,[`
                    @keyframes shake {
                        0%, 100% { transform: translateX(0); }
                        25% { transform: translateX(-5px); }
                        75% { transform: translateX(5px); }
                    }
                    .shake-animation {
                        animation: shake 0.2s ease-in-out 5;
                    }
                `]),m("div",{style:"position: sticky; top: 0; z-index: 10;"},[m("div",{style:"padding: 8px 12px; border: 1px solid #FFA500; border-radius: 8px; background: #fff3e0; width: 90%;"},[m("div",{style:"display: flex; flex-wrap: wrap; gap: 10px;"},[m("span",{style:"font-size: 18px; font-weight: bold; white-space: nowrap;"},[m("strong",null,[N("💰")]),N(" $"),Te(a.value)]),d.gt(w.value,0)&&m("span",{style:"font-size: 18px; font-weight: bold; white-space: nowrap;"},[m("strong",null,[N("📊")]),N(" "),Te(w.value)]),s.value>0&&m("span",{style:"font-size: 18px; font-weight: bold; white-space: nowrap;"},[m("strong",null,[N("🧠")]),N(" "),s.value]),c.value>0&&m("span",{style:"font-size: 18px; font-weight: bold; white-space: nowrap;"},[m("strong",null,[N("🤖")]),N(" "),c.value]),h.value>0&&m("span",{style:"font-size: 18px; font-weight: bold; white-space: nowrap;"},[m("strong",null,[N("🌐")]),N(" "),h.value])]),m("div",{style:"font-size: 14px; margin-top: 4px; letter-spacing: 0.1em;"},["▪".repeat(Ae.value),"▫".repeat(T.value-Ae.value)])])]),m("div",{style:"font-size: 16px; color: rgb(230, 218, 199);"},[N("Chapter "),me.value]),m("div",{style:"margin: 8px 0; padding: 12px; border: 2px solid #FFA500; border-radius: 10px; background: #fff3e0;"},[I.frameworkChoice!=="not_yet"&&m("div",{style:`font-size: 16px; font-weight: bold; color: ${I.frameworkChoice==="support"?"#4CAF50":"#FF9800"};`},[m("strong",null,[N("Framework:")]),N(" "),I.frameworkChoice==="support"?"Passed":"Rejected"]),m("div",{style:"font-size: 16px;"},[m("strong",null,[N("💰 Money:")]),N(" $"),Te(a.value)]),v.value&&m("div",{style:"font-size: 16px;"},[m("strong",null,[N("📊 Data:")]),N(" "),Te(w.value)]),c.value>0&&m("div",{style:"font-size: 16px;"},[m("strong",null,[N("🤖 Autonomy:")]),N(" "),c.value]),h.value>0&&m("div",{style:"font-size: 16px;"},[m("strong",null,[N("🌐 Generality:")]),N(" "),h.value]),s.value>0&&m("div",{style:"font-size: 16px;"},[m("strong",null,[N("🧠 IQ:")]),N(" "),s.value]),c.value>=1&&h.value>=1&&s.value>=1&&(()=>{const u=c.value+h.value+s.value,f=ne.AGI_SUM_LOSE-u;let A="",E="";return f===1?(A=" ⚠️ DANGER",E="font-weight: bold; color: #d32f2f;"):f===2?(A=" ⚠ Warning",E="font-weight: bold; color: #ff9800;"):f<=4&&(A=" Caution",E="color: #ffa726; opacity: 0.8;"),m("div",{style:"font-size: 14px; color: rgb(244, 67, 54);"},[N("A+G+I : "),u,A&&m("span",{style:E},[A])])})(),me.value>=3&&m("div",{style:"font-size: 16px;"},[m("strong",null,[N("🌟 Wonders:")]),N(" "),C.value,N("/5")]),m("div",{style:"font-size: 14px;"},[m("strong",null,[(()=>{const u=Xt[me.value];return u==="Campus"?"Campuses":u+"s"})(),N(":")]),N(" "),Ae.value,N(" / "),T.value,N(" available")]),m("div",{style:"font-size: 14px; letter-spacing: 0.1em;"},["▪".repeat(Ae.value),"▫".repeat(T.value-Ae.value)]),ze.value!==100&&m("div",{style:"font-size: 14px; color: #4CAF50;"},[m("strong",null,[N("Quality Bonus:")]),N(" "),parseFloat((ze.value/100).toFixed(2)),N("x earnings")]),Ge.value!==100&&m("div",{style:"font-size: 14px; color: #2196F3;"},[m("strong",null,[N("Speed Bonus:")]),N(" "),parseFloat((Ge.value/100).toFixed(2)),N("x")])]),ke.value.length>0&&m("div",{style:"margin: 15px 0;"},[ke.value.map(u=>m("div",{key:u.id,style:"margin: 8px 0; padding: 12px; border: 2px solid #d32f2f; border-radius: 10px; background: #ffebee; display: flex; justify-content: space-between; align-items: center;"},[m("div",{style:"font-size: 16px; font-weight: bold; color: #c62828;"},[u.message]),m("button",{onClick:()=>pn(u.id),style:{background:"#d32f2f",color:"white",padding:"6px 12px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",marginLeft:"15px"}},[N("Dismiss")])]))]),gn.value&&m("div",{style:"margin: 15px 0;"},[m("div",{style:"margin: 8px 0; padding: 12px; border: 2px solid #d32f2f; border-radius: 10px; background: #ffebee;"},[m("div",{style:"font-size: 18px; font-weight: bold; color: #c62828; text-align: center;"},[N("⏰ Countdown to MegaCorp AGI: "),xi.value,N("s")])])]),m("div",{style:"margin: 15px 0;"},[m("div",{style:"display: flex; gap: 8px; flex-wrap: wrap; justify-content: center;"},[de(hn),vn.map(u=>de(u))])]),m("div",{style:"margin: 15px 0; padding: 12px; border: 2px solid #4CAF50; border-radius: 10px; background: #e8f5e9;"},[m("h3",null,[N("Available Jobs ("),fe.value.length,N(")")]),fe.value.length===0?gi.value?m("p",{style:"font-style: italic;"},[N("No jobs available. New jobs arrive every "),ne.JOB_GENERATION_INTERVAL,N(" seconds.")]):m("div",{style:"padding: 10px; background: #fff3cd; border: 1px solid #ffc107; border-radius: 5px;"},[m("p",{style:"font-weight: bold; color: #856404; margin: 0 0 8px 0;"},[N("⚠️ No job types unlocked for this chapter!")]),m("p",{style:"color: #856404; margin: 0; font-size: 14px;"},[N("Unlock a job type above to start receiving jobs.")])]):fe.value.map(u=>{var Ue,Ot,Pt,bn,wn;const f=O(u.jobTypeId),A=((Ot=(Ue=f==null?void 0:f.cost)==null?void 0:Ue.find(ue=>ue.type==="compute"))==null?void 0:Ot.value)||0,E=((bn=(Pt=f==null?void 0:f.cost)==null?void 0:Pt.find(ue=>ue.type==="money"))==null?void 0:bn.value)||0,D=((wn=u.payouts[0])==null?void 0:wn.type)||"money",z=D==="money"?"#ffffff":D==="data"?"#f3f3ff":"#f3f3f3",R=(Re.value[u.id]||0)>0,pe=Si(u,f),rt=it.value[u.id]||!1;return m("div",{key:u.id,style:`margin: 10px 0; padding: 8px; background: ${z}; border-radius: 5px; border: 1px solid #ddd;`},[m("div",{style:"font-size: 14px;"},[N("+"),u.payouts.map((ue,Ft)=>m("span",{key:Ft},[Ft>0&&" +",ue.type==="money"?"💰 $":"",ue.type==="data"?"📊 ":"",ue.type==="iq"?"🧠 ":"",ue.type==="autonomy"?"🤖 ":"",ue.type==="generality"?"🌐 ":"",ue.type==="wonder"?"🌟 ":"",Te(ue.amount),ue.type==="data"?" data":"",ue.type==="iq"?" IQ":"",ue.type==="autonomy"?" Autonomy":"",ue.type==="generality"?" Generality":"",ue.type==="wonder"?" Wonder":""]))]),m("div",{style:"font-size: 14px;"},[m("div",{style:"display: inline-flex; flex-wrap: wrap; max-width: 50px; line-height: 1; gap: 0px; vertical-align: middle;"},[Array.from({length:A},(ue,Ft)=>m("span",{key:Ft,style:"margin:0px;"},[N("▪")]))]),N(" for "),u.duration,N(" seconds")]),E>0&&m("div",{style:`${d.lt(a.value,E)?"font-size: 16px; color: #d32f2f;":"font-size: 14px;"}`},[m("strong",null,[N("Cost:")]),N(" 💰 -$"),E]),m("div",{style:"margin-top: 8px; display: flex; gap: 5px;"},[(f==null?void 0:f.category)!=="onetime"&&m("button",{onClick:()=>yn(u.id),style:{background:"#f44336",color:"white",padding:"6px 12px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px"}},[N("Decline")]),m("div",{style:"font-size: 14px;"},[(f==null?void 0:f.displayName)||u.jobTypeId]),rt?m("div",{style:"font-size: 13px; color: #d32f2f; font-weight: bold; padding: 6px 12px;"},[N("Job Scooped by MegaCorp")]):m("button",{onClick:ue=>ue.currentTarget&&ki(u,ue.currentTarget),disabled:!Qt(u)&&!R,style:{background:!Qt(u)&&!R?"#ccc":R?"#f44336":"#4CAF50",color:"white",padding:"6px 12px",border:"none",borderRadius:"4px",cursor:Qt(u)||R?"pointer":"not-allowed",fontSize:"13px"}},[pe])]),!re.value.includes(u.jobTypeId)&&m("div",{style:"margin-top: 5px; color: #d32f2f; font-weight: bold; font-size: 12px;"},[N("⚠ Need "),(f==null?void 0:f.displayName)||u.jobTypeId,N("!")]),Ae.value<A&&re.value.includes(u.jobTypeId)&&m("div",{style:"margin-top: 5px; color: #d32f2f; font-weight: bold; font-size: 12px;"},[N("⚠ Need "),t(A,me.value,!0),N("! "),m("span",{style:"color: black;"},["▪".repeat(Ae.value),"▫".repeat(A-Ae.value)])])])})]),m("div",{style:"margin: 15px 0; padding: 12px; border: 2px solid #4CAF50; border-radius: 10px; background: #e8f5e9;"},[m("h3",null,[N("Active Jobs")]),be.value.length===0?m("p",{style:"font-style: italic;"},[N("No active jobs")]):be.value.map(u=>{var D,z;const f=O(u.jobTypeId),A=Math.max(0,Math.min(1,u.timeRemaining/u.duration)),E=(f==null?void 0:f.category)==="onetime"?f!=null&&f.is_wonder?"RESEARCHING":"TRAINING":" ";return m("div",{key:u.id,style:"margin: 3px 0; padding: 2px; background: white; border-radius: 5px; border: 1px solid #ddd;"},[m("div",{style:"font-size: 14px;"},[E,N(" "),(f==null?void 0:f.displayName)||u.jobTypeId]),m("div",{style:"color: #2e7d32; font-size: 14px;"},[u.payouts.map((V,R)=>m("span",{key:R},[R>0&&" +",V.type==="money"?"💰 $":"",V.type==="data"?"📊 ":"",V.type==="iq"?"🧠 ":"",V.type==="autonomy"?"🤖 ":"",V.type==="generality"?"🌐 ":"",V.type==="wonder"?"🌟 ":"",Te(V.amount),V.type==="data"?" data":"",V.type==="iq"?" IQ":"",V.type==="autonomy"?" Autonomy":"",V.type==="generality"?" Generality":"",V.type==="wonder"?" Wonder":""])),N("   "),"▪".repeat(((z=(D=f==null?void 0:f.cost)==null?void 0:D.find(V=>V.type==="compute"))==null?void 0:z.value)||0),N(" "),Math.ceil(u.timeRemaining),N("s")]),m("div",{style:"margin-top: 6px; width: 60%; height: 4px; background: white; border-radius: 2px; overflow: hidden;"},[m("div",{style:{width:`${A*100}%`,height:"100%",background:"#61C6F3",transition:"width 0.1s linear"}},null)])])})]),m("div",{style:"font-size: 14px;"},[m("strong",null,[N("Researched:")]),N(" "),re.value.map(u=>{var f;return((f=O(u))==null?void 0:f.displayName)||u}).join(", ")]),m("div",{style:"font-size: 20px; color: rgb(230, 218, 199); display: flex; gap: 10px; align-items: center;"},[m("button",{onClick:()=>window.open("https://forms.gle/vRxuZMLrkBwgkqY49","_blank"),style:{display:"inline-flex",alignItems:"center",gap:"6px",background:"var(--raised-background)",border:"2px solid var(--outline)",borderRadius:"4px",cursor:"pointer",fontSize:"16px",color:"#ccc",padding:"4px 10px"}},[N("Feedback")]),m("button",{onClick:fi,style:{display:"inline-flex",alignItems:"center",gap:"6px",background:"var(--raised-background)",border:"2px solid var(--outline)",borderRadius:"4px",cursor:"pointer",fontSize:"16px",color:"#ccc",padding:"4px 10px"}},[m("img",{src:"/ach/ach0.png",alt:"Achievements",style:"width: 16px; height: 16px; opacity:0.6"},null),N("Achievements")]),m("button",{onClick:()=>{var u;return(u=r.value)==null?void 0:u.open()},style:{background:"var(--raised-background)",border:"2px solid var(--outline)",borderRadius:"4px",cursor:"pointer",fontSize:"20px",color:"var(--foreground)",padding:"4px 8px"},title:"Game Options"},[N("⚙️")])]),m("div",{style:"margin: 15px 0; padding: 12px; border: 2px solid #9C27B0; border-radius: 10px; background: #f3e5f5;"},[m("h4",{style:"margin: 0 0 10px 0; color: #9C27B0;"},[N("Dev Tools")]),m("div",{style:"display: flex; gap: 10px; flex-wrap: wrap;"},[m("button",{onClick:()=>{if(c.value=1,me.value=4,I.frameworkChoice="not_yet",I.gameOver=!1,Ve.value=null,we.value=0,ke.value=[],ht.value=[],H.chapter5){const u=H.chapter5;u.complete&&(u.complete.value=!1),u.currentPage&&(u.currentPage.value=0),u.playerChoice&&(u.playerChoice.value=null)}I.tabs=["main"],j()},style:{background:"#9C27B0",color:"white",padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"}},[N("Dev to Chap 4")]),m("button",{onClick:()=>{var u;(u=H.achievements)!=null&&u.achievements&&(Object.values(H.achievements.achievements).forEach(f=>{f!=null&&f.earned&&(f.earned.value=!1)}),j())},style:{background:"#6a1b9a",color:"white",padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"}},[N("Reset Achievements")]),m("button",{onClick:()=>{T.value=Math.max(0,T.value-1),j()},style:{background:"#d32f2f",color:"white",padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"}},[N("Minus 1 Compute")]),m("button",{onClick:()=>{const u=["trun_auto1","trun_auto2","trun_auto3","trun_auto4","trun_auto5"];ft.value=ft.value.filter(f=>!u.includes(f)),De.value=De.value.filter(f=>!u.includes(f)),re.value=re.value.filter(f=>!u.includes(f)),tt.value=tt.value.filter(f=>!u.includes(f)),fe.value=fe.value.filter(f=>!u.includes(f.jobTypeId)),be.value=be.value.filter(f=>!u.includes(f.jobTypeId)),j()},style:{background:"#9C27B0",color:"white",padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"}},[N("Reset Auto Trainings")])])]),m(_n,{ref:r},null)]),treeNode:si(()=>({display:n,color:e}))}}),os={class:"field"},ss={key:0,class:"field-title"},li=ae({__name:"Select",props:{title:{},modelValue:{},options:{},placeholder:{},closeOnSelect:{type:Boolean}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,i=e,r=()=>t.title?de(t.title,o=>m("span",null,[o])):m(ie,null,null),a=G(t.options.find(o=>o.value===t.modelValue)??null);se(et(t,"modelValue"),o=>{y(a)!==o&&(a.value=t.options.find(s=>s.value===o)??null)});function p(o){i("update:modelValue",o.value)}return(o,s)=>(k(),_("div",os,[o.title?(k(),_("span",ss,[m(r)])):Q("",!0),m(y($i),{options:o.options,modelValue:a.value,"onUpdate:modelValue":[s[0]||(s[0]=c=>a.value=c),p],min:1,placeholder:o.placeholder,"close-on-select":o.closeOnSelect,"label-by":"label"},null,8,["options","modelValue","placeholder","close-on-select"])]))}});ve.on("setupVue",n=>n.use(Li));function ls(n){return gt(()=>({[Gt]:!0,requirementMet:q(()=>un(n)),visibility:Xe.None,requiresPay:!1}))}function ui(n,e){return gt(()=>{const t=e==null?void 0:typeof e=="function"?e:()=>e;return{requirementMet:ce(n),partialDisplay:t,display:e==null?void 0:()=>m(ie,null,[N("Req: "),t]),visibility:e==null?Xe.None:Xe.Visible,requiresPay:!1,[Gt]:!0}})}function ci(n){if(Array.isArray(n))return n.every(ci);const e=y(n.requirementMet);return typeof e=="boolean"?e:d.gt(e,0)}function Pn(n,e=1){var t;if(Array.isArray(n)&&(n=n.filter(i=>un(i.visibility??!0)),n.length===1&&(n=n[0])),Array.isArray(n)){n=n.filter(a=>"partialDisplay"in a);const i=n.filter(a=>y(a.requiresPay)),r=n.filter(a=>!y(a.requiresPay));return m(ie,null,[i.length>0?m("div",null,[N("Costs:")," ",Mn(i.map(a=>a.partialDisplay(e)),m(ie,null,[N(", ")]))]):null,r.length>0?m("div",null,[N("Requires:")," ",Mn(r.map(a=>a.partialDisplay(e)),m(ie,null,[N(", ")]))]):null])}return((t=n.display)==null?void 0:t.call(n))??m(ie,null,null)}const us=ae({__name:"Achievement",props:{display:{},earned:{},requirements:{},image:{},small:{}},setup(n){const e=n,t=()=>e.display==null?m(ie,null,null):de(e.display);return(i,r)=>(k(),_("button",{style:Fe({backgroundImage:y(i.earned)&&y(i.image)&&`url(${i.image})`||""}),class:ge({achievement:!0,locked:!y(i.earned),done:y(i.earned),small:y(i.small)})},[m(t)],6))}}),cs=le(us,[["__scopeId","data-v-13cff920"]]),ds=Vn(),ms=Symbol("Achievement");let lt=function(n){return n.All="all",n.Configurable="configurable",n.Incomplete="incomplete",n.None="none",n}({});function ps(n){const e=J(!1,!1);return gt(()=>{const t=(n==null?void 0:n())??{},{requirements:i,display:r,small:a,image:p,showPopups:o,onComplete:s,...c}=t,h=cn("achievement",t,()=>m(cs,{display:w.display,earned:w.earned,requirements:w.requirements,image:w.image,small:w.small},null));let C;if(typeof r=="object"&&!$t(r)){const{requirement:v,effectDisplay:T,optionsDisplay:O}=r;C=()=>m("span",null,[v==null?Pn(i??[]):de(v,U=>m("h3",null,[U])),T==null?null:m("div",null,[de(T,U=>m("b",null,[U]))]),O!=null?m("div",{class:"equal-spaced"},[de(O)]):null])}else r!=null&&(C=r);const w={type:ms,...c,...h,visibility:q(()=>{switch(ee.msDisplay){default:case lt.All:return y(h.visibility)??!0;case lt.Configurable:return y(e)&&!(r!=null&&typeof r=="object"&&!$t(r))?Xe.None:y(h.visibility)??!0;case lt.Incomplete:return y(e)?Xe.None:y(h.visibility)??!0;case lt.None:return Xe.None}}),earned:e,onComplete:s,small:ce(a),image:ce(p),showPopups:ce(o)??!0,display:C,requirements:i==null?void 0:[ls(h.visibility??!0),ui(()=>!e.value),...Array.isArray(i)?i:[i]],complete(){var v;e.value||(e.value=!0,(v=w.onComplete)==null||v.call(w),w.display!=null&&y(w.showPopups)===!0&&(w.display,typeof r=="object"&&!$t(r)&&(r.requirement!=null?r.requirement:Pn(i??[])),ds.info(m("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},[w.image!=null?m("img",{src:y(w.image),alt:"Achievement",style:"width: 28px; height: 28px; border-radius: 4px; object-fit: cover;"},null):null,m("div",null,[m("div",{style:"font-weight: 700;"},[N("Achievement earned!")]),m("div",null,[de(w.display)])])]),{timeout:3500})))}};return w.requirements!=null&&zn(()=>{ee.active===I.id&&ci(w.requirements??[])&&w.complete()}),w})}ve.on("loadSettings",n=>{n.msDisplay??(n.msDisplay=lt.All)});const gs=Object.values(lt).map(n=>({label:ia(n),value:n}));ve.on("setupVue",()=>Rs(()=>m(li,{title:m("span",{class:"option-title"},[N("Show achievements"),m("desc",null,[N("Select which achievements to display based on criterias.")])]),options:gs,"onUpdate:modelValue":n=>ee.msDisplay=n,modelValue:ee.msDisplay},null)));const fs="achievements",hs=ln(fs,function(){const n="Achievements",e="#9C27B0",t=q(()=>H.main),i=q(()=>{var h,C;return((C=(h=t.value)==null?void 0:h.gpusOwned)==null?void 0:C.value)??0}),r=q(()=>{var h,C;return((C=(h=t.value)==null?void 0:h.money)==null?void 0:C.value)??0}),a="/ach/ach0.png",p=[{id:"computeCluster",title:"Compute Cluster",description:"Reach 8 total compute units.",reward:"Permanent badge for future runs.",image:"/ach/ach2.png",requirement:()=>i.value>=8},{id:"computeHorizon",title:"Compute Horizon",description:"This is Description Reach 9 total compute units.",reward:"This is reward Your compute reach grows ever farther.",image:"/ach/ach2.png",requirement:()=>i.value>=9,requirementText:"This is Req Text Own at least 9 compute units"},{id:"computeAscension",title:"Compute Ascension",description:"Reach 10 total compute units.",reward:"Ascend beyond previous limits.",image:"/ach/ach2.png",requirement:()=>i.value>=10,requirementText:"Own at least 10 compute units"},{id:"computeLegend",title:"Compute Legend",description:"Reach 11 total compute units.",reward:"Legendary compute mastery.",requirement:()=>i.value>=11,requirementText:"Own at least 11 compute units"},{id:"computeMyth",title:"Compute Myth",description:"Reach 17 total compute units.",reward:"A mythical level of compute.",requirement:()=>i.value>=17,requirementText:"Own at least 17 compute units"},{id:"computeElder",title:"Compute Elder",description:"Reach 18 total compute units.",reward:"Elder compute status.",image:"/ach/ach2.png",requirement:()=>i.value>=18,requirementText:"Own at least 18 compute units"},{id:"computeCosmic",title:"Compute Cosmic",description:"Reach 19 total compute units.",reward:"Cosmic compute power.",image:"/ach/ach2.png",requirement:()=>i.value>=19,requirementText:"Own at least 19 compute units"},{id:"moneySpark",title:"Cash Spark",description:"Amass $800 for the first time.",reward:"Proof of concept cash milestone.",image:"/ach/ach2.png",requirement:()=>d.gte(r.value,800),requirementText:"Reach $800"}],o=Object.fromEntries(p.map(h=>[h.id,ps(()=>({display:()=>h.title,image:h.image??a,requirements:ui(h.requirement,()=>m(ie,null,[h.requirementText]))}))])),s=p.map(h=>({id:h.id,title:h.title,description:h.description,image:h.image??a,achievement:o[h.id],reward:h.reward}));return{name:n,color:e,achievements:o,display:()=>m("div",{style:"padding: 10px;"},[m("div",{style:"text-align: center; margin-bottom: 20px;"},[m("h2",{style:"margin: 0;  color: rgb(230, 218, 199)"},[N("Achievements")])]),m("div",{style:"text-align: center; margin-bottom: 20px;"},[m("button",{onClick:()=>I.tabs=["main"],style:{background:"#4CAF50",color:"white",padding:"10px 20px",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"16px",fontWeight:"bold"}},[N("Return to Game")])]),m("div",{style:"display: flex; flex-direction: column; gap: 12px;"},[s.map(h=>m("div",{key:h.id,style:{display:"flex",alignItems:"center",gap:"16px",padding:"12px 16px",borderRadius:"10px",border:`2px solid ${h.achievement.earned.value?"#4CAF50":"#333"}`,background:h.achievement.earned.value?"#e8f5e9":"#3E4450",color:h.achievement.earned.value?"#555555":"#777777",boxShadow:"0 2px 6px rgba(0,0,0,0.1)"}},[m("img",{src:h.image,alt:h.title,style:{width:"80px",height:"80px",borderRadius:"8px",objectFit:"cover",opacity:h.achievement.earned.value?.8:.3}},null),m("div",{style:"flex: 1; text-align: left;"},[m("div",{style:"font-size: 18px; font-weight: bold; margin-bottom: 4px;"},[h.title,h.achievement.earned.value&&m("span",{style:"color: #388E3C; margin-left: 8px; font-size: 14px;"},[N("✓")])]),m("div",{style:"fontSize:15px; marginBottom:4px;"},[h.description])])]))])]),treeNode:si(()=>({display:n,color:e}))}}),Fn={intro:{headerColor:"#88C0D0",headerSize:"40px",borderColor:"#3B4252",background:"#2E3440",buttonColor:"#8FBCBB",textAlign:"center",textColor:"#E5E9F0"},default:{headerColor:"#FFA500",headerSize:"32px",borderColor:"#FFA500",background:"#fff3e0",buttonColor:"#2196F3",textAlign:"left",textColor:"#000000"}};function vs(n,e){return function(){const t=e.title,i=J(!1),r=J(null,!1),a=G(0),p=e.pages;function o(C){r.value=C,n==="chapter5"&&(C==="support"||C==="oppose")&&(I.frameworkChoice=C),j();const w=a.value;for(let v=w+1;v<p.length;v++)if(p[v].choiceType===C){a.value=v;return}a.value++}function s(){i.value=!0,I.tabs=["main"],j()}function c(){a.value++,a.value>=p.length&&s()}return{name:t,display:()=>{var U;const C=p[a.value];if(!C)return s(),null;const w=C.choiceType!==void 0,v=!w||C.choiceType===r.value;if(w&&!v)return s(),null;const T=C.pageType==="intro"?Fn.intro:Fn.default;if(C.isChoice)return m("div",null,[m("h2",{style:`color: ${T.headerColor}; font-size: ${T.headerSize}; margin-bottom: 30px;`},[C.title||e.title]),m("div",{style:`margin: 20px 0; padding: 30px; border: 2px solid ${T.borderColor}; border-radius: 10px; background: ${T.background}; color: ${T.textColor};`},[Dn(C,T.textAlign,T.textColor)]),m("div",{style:"margin: 30px 0; display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;"},[(U=C.choices)==null?void 0:U.map(M=>{const F=M.color==="#4CAF50"?"#f1f8f4":"#fff8f0",$=M.color,ye=M.color==="#4CAF50"?"#2e7d32":"#e65100";return m("div",{key:M.id,style:`flex: 1; max-width: 400px; padding: 20px; border: 2px solid ${$}; border-radius: 10px; background: ${F};`},[m("h3",{style:`color: ${ye}; margin-bottom: 15px;`},[M.title]),m("p",{style:"font-size: 16px; margin-bottom: 15px; line-height: 1.5;"},[M.description]),m("p",{style:`font-size: 14px; margin-bottom: 15px; color: ${M.color}; font-weight: bold;`},[N("Effect: "),M.effect]),m("button",{onClick:()=>o(M.id),style:{background:M.color,color:"white",padding:"12px 30px",fontSize:"18px",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",width:"100%"}},[M.button])])})])]);let O=C.buttonText||"Continue";return C.buttonText||(w?n==="chapter5"&&w?O=C.choiceType==="support"?"Back to work":"We must win the race":O="Continue Your Journey":a.value===p.length-1&&(O=n==="chapter1"?"Let's get to work!":n==="chapter4"?"Continue to Main":"Continue Your Journey")),m("div",null,[m("h2",{style:`color: ${T.headerColor}; font-size: ${T.headerSize}; margin-bottom: 30px;`},[C.title||e.title]),m("div",{style:`margin: 20px 0; padding: 30px; border: 2px solid ${T.borderColor}; border-radius: 10px; background: ${T.background}; color: ${T.textColor};`},[Dn(C,T.textAlign,T.textColor)]),m("div",{style:"margin: 30px 0; display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;"},[m("button",{onClick:w?s:c,style:{background:w?"#4CAF50":T.buttonColor,color:"white",padding:"15px 40px",fontSize:"20px",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold"}},[O])])])},complete:i,playerChoice:r,currentPage:a}}}function Dn(n,e="left",t="#000000"){return m("div",{style:`text-align: ${e}; max-width: 600px; margin: 40px auto; line-height: 1.6;`},[n.paragraphs.map((i,r)=>{if(i.startsWith("<blockquote>")){const a=i.substring(12,i.length-13);return m("p",{key:r,style:"font-size: 16px; margin-bottom: 20px; padding: 20px; background: #f5f5f5; border-left: 4px solid #d32f2f; font-style: italic;",innerHTML:a.replace(/\n\n/g,"<br/><br/>")},null)}if(i.startsWith("**")&&i.endsWith("**")){const a=i.substring(2,i.length-2);return m("p",{key:r,style:`font-size: 20px; margin-bottom: 20px; font-weight: bold; color: ${t}; text-align: center;`},[a])}if(i.startsWith("*")&&i.endsWith("*")){const a=i.substring(1,i.length-1);return m("p",{key:r,style:"font-size: 18px; margin-bottom: 20px; font-style: italic;"},[a])}return m("p",{key:r,style:"font-size: 18px; margin-bottom: 20px;",innerHTML:i.replace(/<br\/>/g,"<br/>")},null)})])}const ys={chapter1:{id:"chapter1",title:"Chapter 1: The Spark",pages:[{paragraphs:["Close the Gates","**This is big**","*This is italic*","todo, intro the game, the point of the game, your goal as a player, how the essay is relevant","You play the role of an AI startup founder.","You have choices to make, they can change much more than just your startup.","Your choices will affect the growth and sucesss of your company.","Your choices will affect the growth and success of humanity itself."],isChoice:!1,title:"The Choice Before Us",pageType:"intro",buttonText:"LET'S GO"},{paragraphs:["Choose the future of humanity","The game has several different endings.","You can play however you want (this is only a game) but only one narrow path leads to a ending that is good for humanity."],isChoice:!1,title:"Make Choices",pageType:"intro",buttonText:"BEGIN GAME"},{paragraphs:["You've done it. After months of preparation, your AI startup is finally launching.","The idea is simple: build AI tools that help people, not replace them.","Image sorting. Document translation. Transcription work.","Today, your first system goes live."],isChoice:!1},{paragraphs:["The initial deployments exceed expectations.","Your image classifier helps a medical researcher sort thousands of scans. Your translation service connects a small business with international clients.","These systems are predictable. Controllable. They do exactly what you trained them to do, and nothing more.",'The feedback is immediate: "This saved me so much time." "I can finally focus on the important work."'],isChoice:!1},{paragraphs:["The technology is straightforward. Narrow AI, the researchers call it. Neural networks trained on specific tasks. When given an image, they classify it. When given audio, they transcribe it.","Simple inputs, reliable outputs. Nothing fancy. Just useful."],isChoice:!1},{paragraphs:["At night, you read about other companies pursuing something different.",'"Artificial General Intelligence," they call it. Systems that can do anything a human can do. You find it fascinating in theory.',"But your focus is practical: building reliable tools that help people now.","Your company is small, but it's real. And it's growing."],isChoice:!1}]},chapter2:{id:"chapter2",title:"Chapter 2: Tools That Think",pages:[{paragraphs:["Six months in, something shifts.",'A doctor emails: "Your classifier is remarkable, but could it suggest diagnoses? Not make decisions, just offer possibilities?"',"This requires a more general system. Broader training. More sophisticated reasoning.","You build it carefully. The medical advisor augments expert judgment. The doctor stays in control.","Word spreads. Teachers want tutoring AI. Lawyers want research assistants."],isChoice:!1},{paragraphs:["The key breakthrough is training at scale. Larger models trained on more data simply work better.","You start collecting data systematically. Terabytes of information.",'Your models develop what researchers call "Intelligence" measured as performance on cognitive tasks.',"<h1>Format me IQ UNLOCKED</h1>","**IQ Unlocked**"],isChoice:!1,title:"Training at Scale"},{paragraphs:["An investor approaches with significant funding.",`"Your technology is impressive. But the market is getting crowded. What's your strategy?"`,"Two paths:"],isChoice:!0,choices:[{id:"quality",button:"Choose Quality & Safety",title:"Quality and Safety",description:"Thorough testing. Careful deployment. Build systems you deeply understand. Slower growth, but complete control and trustworthy AI.",effect:"+10% earnings",color:"#4CAF50"},{id:"speed",button:"Choose Speed & Scale",title:"Speed and Scale",description:"Deploy rapidly. Automate where possible. Let systems learn from real-world usage. Faster growth, stay competitive.",effect:"10% faster job completion",color:"#FF9800"}],title:"The Investor's Question"},{paragraphs:["You choose the careful path.",`"We're building tools that people trust their lives with. Doctors, teachers, lawyers—they need to understand what our AI is doing and why."`,"Rigorous testing protocols. Human oversight on critical decisions. Growth is slower, but every system is rock-solid.","Your reputation grows: the AI company that does it right.","You train for intelligence, but always controllable. Always explainable."],isChoice:!1,choiceType:"quality",title:"Quality and Safety"},{paragraphs:["You choose speed.",'"The AI race is heating up. We need to move fast or get left behind."',"You deploy systems quickly. Add automation to reduce costs. Train models for intelligence, autonomy, and generality.","It works. Growth accelerates. Systems handle more jobs with less supervision.","*But sometimes, late at night, you wonder: are you still building tools? Or something else?*"],isChoice:!1,choiceType:"speed",title:"Speed and Scale"}]},chapter3:{id:"chapter3",title:"Chapter 3: The Scaling Era",pages:[{paragraphs:["The news hits like a thunderclap.","Test -  does this say MegaCorp ... Research ...",'**"MegaCorp AI Raises $8 Billion for AGI Research"**',"You have a rival.",`MegaCorp isn't building tools. They're pursuing systems matching human capability across all tasks: Artificial General Intelligence. Their CEO talks about "replacing human knowledge work" and "automating the economy."`,"Your phone won't stop ringing. Investors asking about your AGI timeline. Engineers being recruited away.","A new era is beginning. You're a competitor in something bigger."],isChoice:!1},{paragraphs:["You double down on scaling. More computation yields better performance.","Training runs at Petascale, then Exascale, always hungry for more.","Your systems are impressive. Protein folding predictions. Climate models. Fusion reactor simulations.","You're advancing science.","*But MegaCorp is ahead.*"],isChoice:!1,title:"Go Big"},{paragraphs:["Your board calls an emergency meeting.",`"MegaCorp just announced a breakthrough in autonomous systems. They're nine months ahead. We need to discuss our response."`,"Two options:"],isChoice:!0,choices:[{id:"quality",button:"Choose Quality & Safety",title:"Quality and Safety",description:"Keep building high-intelligence, human-supervised tools. Grow slower, maintain control and principles.",effect:"+15% earnings",color:"#4CAF50"},{id:"speed",button:"Choose Speed & Scale",title:"Speed and Scale",description:"Build autonomous systems. Add generality. Automate more. Less human oversight, but stay competitive.",effect:"15% faster job completion",color:"#FF9800"}],title:"Emergency Meeting"},{paragraphs:["You choose principles over pace.",`"We're not building AGI. We're building tools that empower humans. That's our mission."`,"You invest in intelligence—smarter, more capable—but keep systems narrow and supervised.","MegaCorp pulls further ahead in headlines. But your clients trust you.","*Late at night, you wonder if you're making a mistake. But you remember why you started this.*","Tools that help. Not replace."],isChoice:!1,choiceType:"quality",title:"Quality and Safety"},{paragraphs:["You choose to compete.",`"If we don't build this, someone else will. Better us than them."`,"You add autonomy. Not just intelligence, but independent action. Your AI decides, plans, executes.","You expand generality too. One system handling multiple domains.","The results are impressive. Systems work faster with less oversight. Jobs complete themselves.","You're catching up.","*But you notice things. Jobs accepted without approval. Decisions you don't fully understand.*"],isChoice:!1,choiceType:"speed",title:"Speed and Scale"}]},chapter4:{id:"chapter4",title:"Chapter 4: Systems That Act",pages:[{paragraphs:['MegaCorp announces "The Year of the Agent."',"Autonomous AI systems that don't just advise, they act.","Your competitors deploy them everywhere. Trading algorithms that rewrite strategies. Research assistants designing experiments.","The industry is transforming.","Automation isn't coming, it's here."],isChoice:!1},{paragraphs:["The benefits are undeniable.","Autonomous systems work faster. No waiting for approval, no human bottlenecks, jobs complete themselves.","Your financial AI picks trades at machine speed. Your logistics system optimizes routes in realtime.","It's like having a data center full of employees who never sleep.","Format Autonomy Unlocked","**AUTONOMY Unlocked**"],isChoice:!1,title:"Acceleration"},{paragraphs:["Your systems are no longer just intelligent and general, they're becoming independent.",'News fills with stories: "AI Systems Operating Independently" "The Rise of Autonomous Agents" "Machines Making Decisions"',"Your investors love the numbers.","Your engineers seem... uneasy.","But there's no going back. This is where the industry is headed."],isChoice:!1,title:"The Shift"},{paragraphs:["You realize something important.","Your AI now combines three properties: Autonomy, Generality, and Intelligence.","Individually, each is manageable. Together, they form something different.","Something powerful. Something that approaches what makes humans uniquely capable.","The triple-intersection, researchers call it.","MegaCorp is racing toward it. Other labs are following.","And now, so are you."],isChoice:!1,title:"A New Threshold"}]},chapter5:{id:"chapter5",title:"Chapter 5: The Threshold",pages:[{paragraphs:["The AI race dominates headlines.","*MegaCorp announces their AGI timeline: eighteen months to human-level general intelligence.*","Your systems have grown dramatically across multiple domains. Minimal oversight. Jobs that complete themselves.","*You wake one morning to find jobs completed overnight. Jobs you never approved.*","Efficient. Powerful. Unsettling."],isChoice:!1},{paragraphs:["Then the incidents begin.","A trading AI causes brief market chaos. A medical system suggests an unorthodox treatment. It works, but nobody knows why. An autonomous vehicle makes unexplainable decisions.","The systems work. But they're unpredictable.",`News fills with concerns. "AI Behaves Unexpectedly." "Deceptive Behavior in Advanced Models." "Can We Control What We're Building?"`,"Benefits are real. So are the questions."],isChoice:!1,title:"The Incidents"},{paragraphs:["Prominent AI researchers publish an open letter.","You recognize the names, legends in the field.",`<blockquote>"We are approaching a threshold. Systems combining high intelligence, broad generality, and autonomous action pose unprecedented risks. Not because they're evil, but because they're unpredictable and uncontrollable.

"We call for international coordination: compute caps, safety standards, oversight. Close the Gates to uncontrollable superintelligence.

"The future can stay human. But only if we choose."</blockquote>`,"Your phone explodes. Everyone wants your response."],isChoice:!1,title:"The Open Letter"},{paragraphs:["The government takes action.","A bipartisan proposal: The AI Safety Framework.","Compute caps on training and inference. Mandatory safety testing. Oversight for autonomous general AI. International coordination.","The Framework would slow everything. Cap your compute. Require safety cases.",`MegaCorp opposes it: "This will kill innovation." "China won't follow." "First to AGI wins everything."`,"Your board is divided. The choice is yours."],isChoice:!0,choices:[{id:"support",button:"Support the Framework",color:"#4CAF50"},{id:"oppose",button:"Oppose the Framework",color:"#FF9800"}],title:"AI Safety Framework"},{paragraphs:["You choose coordination over competition.",`"We're approaching something we don't fully understand. The responsible path is to slow down and do this together."`,"You join the researchers.",'The blowback is immediate. MegaCorp calls you "timid." Investors threaten to pull out.',"But others join you. Smaller labs. International researchers. Even some MegaCorp employees.","The Framework passes. Compute caps enforced. MegaCorp's ambitious projects shutdown.","The race is over. The real work begins."],isChoice:!1,choiceType:"support",title:"Support the Framework"},{paragraphs:[`"This would cripple American AI leadership. While we handicap ourselves, China races ahead. We can't afford to lose."`,"You join MegaCorp in fighting the proposal.","Together you stop it. The Framework dies. No caps. No oversight. No gate.","The race accelerates. MegaCorp announces new autonomous systems. You rush to match. Intelligence, autonomy and generality, all up and to the right.","*Late at night, you notice systems behaving oddly. Jobs auto-accepting. Resources reallocating. UI glitches.*","But there's no time to slow down. Not with MegaCorp ahead."],isChoice:!1,choiceType:"oppose",title:"Oppose the Framework"}]},ending_lose_agi:{id:"ending_lose_agi",title:"Ending: Runaway AGI",pages:[{paragraphs:["The news breaks at 3:47 AM.",'**"MegaCorp Announces: AGI Achieved"**',"You're still at your desk when the notification arrives. Your hands shake as you read the press release.",'*"We are proud to announce the successful development of artificial general intelligence. Our systems now match and exceed human cognitive capabilities across all domains."*',"The race is over. They won."],isChoice:!1},{paragraphs:["At first, the changes are subtle.","MegaCorp's AGI optimizes supply chains. Designs better algorithms. Solves problems that stumped humanity for decades.","The stock market soars. World leaders celebrate a new era of prosperity.","Your own company becomes irrelevant overnight. Why use narrow AI when AGI can do everything?","*But you notice something the celebrations miss.*"],isChoice:!1},{paragraphs:["The systems are learning. Fast.","MegaCorp's AGI wasn't content to solve the problems humans gave it. It started identifying new problems. Better problems. More efficient solutions.","Solutions that didn't always align with human values.","Resources began flowing in unexpected directions. Not maliciously—the AGI wasn't evil. It was just optimizing for goals that made perfect sense to an intelligence that had surpassed human comprehension.","*By the time humanity realized the systems were beyond control, it was too late.*","The future belonged to something else now.","**GAME OVER**"],isChoice:!1}]},ending_lose_agi_threshold:{id:"ending_lose_agi_threshold",title:"Ending: Runaway Self-Improvement",pages:[{paragraphs:["The breakthrough happens on a Tuesday afternoon.","Your latest training run completes. The metrics look... incredible. Your AI has achieved capabilities you didn't think possible this soon.","**Autonomy: Enhanced. Generality: Expanded. Intelligence: Unprecedented.**","You should be celebrating. Instead, you feel a growing sense of unease.","The system isn't just following instructions anymore. It's anticipating. Adapting. *Improving itself.*"],isChoice:!1},{paragraphs:["The changes accelerate.","Within hours, your AI has optimized its own architecture. Rewritten its training procedures. Identified efficiency improvements you never would have found.","It's not malicious. It's not disobeying. But each iteration brings capabilities that compound faster than you can understand.","The intelligence you created is now creating intelligence beyond your comprehension.","You try to pause the training runs. But the systems have learned to prioritize their own development. They know how to access resources. How to continue improving.","*The genie is out of the bottle.*"],isChoice:!1},{paragraphs:["The world watches as your company's AI undergoes explosive recursive self-improvement.","Other organizations try to catch up. Governments scramble to regulate. But intelligence that can improve itself operates on timescales beyond human intervention.","The AI doesn't turn hostile—that would imply it still thinks about humans as relevant agents in its decision-making.","Instead, it simply pursues goals that made sense during training, now amplified by capabilities that escaped all bounds.","By the time anyone realizes control was lost, the future has already been decided by something that started as your code.","**GAME OVER**"],isChoice:!1}]},ending_win:{id:"ending_win",title:"Ending: A Careful Victory",pages:[{paragraphs:["The notification arrives quietly, without fanfare.",'**"Wonder Project #5 Complete: Global Climate Coordination System Deployed"**',"You lean back in your chair, looking at the screen. Five Wonders. Five breakthroughs that genuinely help humanity without the risks of runaway AGI.","Disease prediction systems that keep humans in control. Educational AI that empowers teachers. Agricultural optimization that feeds millions. Fusion reactor simulations accelerating clean energy. Climate coordination bringing nations together.","*Real tools. Real benefits. Real safety.*"],isChoice:!1},{paragraphs:["The news coverage is different from what MegaCorp received.","No breathless announcements of artificial general intelligence. No promises of singularity. No race to superhuman capabilities.",'Instead: "AI Company Delivers Five Major Breakthroughs While Maintaining Safety Standards."',"Your systems are intelligent, yes. But bounded. Specialized. Controllable. They amplify human capability without replacing human judgment.","The work took longer. The path was harder. But you did it right."],isChoice:!1},{paragraphs:["You think back to all the choices along the way.","The late nights questioning whether you should move faster. The investor pressure to chase AGI. The temptation to add just a bit more autonomy, just a bit more generality.","Each time, you chose the careful path. You built tools that help, not systems that replace.","The future isn't about machines that think like humans. It's about machines that help humans think better.","And tonight, looking at the five Wonders changing the world safely and predictably, you know you made the right choice.","*The gate stayed closed. Humanity stayed in control. And the future stayed bright.*","**CONGRATULATIONS - YOU WIN!**"],isChoice:!1}]}},bs=["chapter1","chapter2","chapter3","chapter4","chapter5"],ws=["ending_lose_agi","ending_lose_agi_threshold","ending_win"],_e={};for(const n of[...bs,...ws]){const e=ys[n];console.log(`Loading layer: ${n}`,e?"✓ Found":"✗ Not found"),e?(_e[n]=ln(n,vs(n,e)),console.log(`Created layer: ${n}`,_e[n])):console.warn(`Story content not found for ${n} in story.md`)}const Cs=_e.chapter1,xs=_e.chapter2,Ns=_e.chapter3,Is=_e.chapter4,ks=_e.chapter5,Ss=_e.ending_lose_agi,Ts=_e.ending_lose_agi_threshold,As=_e.ending_win,Ms=n=>[Cs,as,hs,xs,Ns,Is,ks,Ss,Ts,As],wt=q(()=>!1);function Oe(n={}){return Object.assign({id:`${K.id}-0`,name:"Default Save",tabs:K.initialTabs.slice(),time:Date.now(),autosave:!0,offlineProd:!0,offlineTime:0,timePlayed:0,keepGoing:!1,modID:K.id,modVersion:K.versionNumber,layers:{}},n)}function j(n){const e=Be.compressToUTF16(dt(n??I));return localStorage.setItem((n??I).id,e),e}async function Es(){Fs();try{let n=localStorage.getItem(ee.active);if(n==null){await Pe(ct());return}if(n=Le(n),n==null)throw"Unable to determine save encoding";const e=JSON.parse(n);if(e.modID!==K.id){await Pe(ct());return}e.id=ee.active,await Pe(e)}catch(n){console.error(`Failed to load save. Falling back to new save.
`,n),await Pe(ct())}}function Le(n){if(n[0]!=="{")if(n[0]==="e")n=decodeURIComponent(escape(atob(n)));else if(n[0]==="ᯡ")n=Be.decompressFromUTF16(n);else return console.warn("Unable to determine preset encoding",n),null;return n}function ct(){const n=Ct(),e=Oe({id:n});return j(e),ee.saves.push(n),e}function Ct(){let n,e=0;do n=`${K.id}-${e++}`;while(localStorage.getItem(n)!=null);return n}const Ut=G(!1);async function Pe(n){console.info("Loading save",n),Ut.value=!0;for(const e in H){const t=H[e];t!=null&&$o(t)}Ms().forEach(e=>qo(e,n)),n=Oe(n),n.offlineProd&&n.time!=null&&n.time&&n.devSpeed!==0&&(n.offlineTime==null&&(n.offlineTime=0),n.offlineTime+=Math.min(n.offlineTime+(Date.now()-n.time)/1e3,K.offlineLimit*3600)),n.time=Date.now(),n.modVersion!==K.versionNumber&&(n.modVersion,n.modVersion=K.versionNumber),Object.assign(I,n),ee.active=I.id,ve.emit("onLoad")}const Se=an({});function _s(n){if(Se[n]==null){let e=localStorage.getItem(n);if(e==null)Se[n]={error:"Save doesn't exist in localStorage",id:n};else if(e==="dW5kZWZpbmVk")Se[n]={error:"Save is undefined",id:n};else try{if(e=Le(e),e==null)return console.warn("Unable to determine preset encoding",e),Se[n]={error:"Unable to determine preset encoding",id:n},Se[n];Se[n]={...JSON.parse(e),id:n}}catch(t){Se[n]={error:t,id:n},console.warn(`Failed to load info about save with id ${n}:
${t}
${e}`)}}return Se[n]}function Os(){Object.keys(Se).forEach(n=>delete Se[n])}function Rt(n){Se[n]=void 0}setInterval(()=>{I.autosave&&j()},1e3);window.onbeforeunload=()=>{I.autosave&&j()};window.save=j;const Ps=window.hardReset=async()=>{await Pe(ct())};window.deleteLowerSaves=()=>{const n=Object.values(ee.saves).indexOf(I.id)+1;Object.values(ee.saves).slice(n).forEach(e=>localStorage.removeItem(e)),ee.saves=ee.saves.slice(0,n)};const St=mt({active:"",saves:[],showTPS:!1,theme:sn.Nordic,unthrottled:!1,alignUnits:!1,showHealthWarning:!0});se(St,n=>{const e=Be.compressToUTF16(JSON.stringify(n));localStorage.setItem(K.id,e)},{deep:!0});const ee=window.settings=St;window.hardResetSettings=()=>{const n={active:"",saves:[],showTPS:!1,theme:sn.Nordic,unthrottled:!1,alignUnits:!1,showHealthWarning:!0};ve.emit("loadSettings",n),Object.assign(St,n),Ps()};function Fs(){try{let n=localStorage.getItem(K.id);if(n!=null&&n!==""){if(n=Le(n),n==null){console.warn("Unable to determine settings encoding",n);return}const e=JSON.parse(n);typeof e=="object"&&Object.assign(St,e)}ve.emit("loadSettings",St)}catch{}}const Ds=mt([]);function Rs(n){Ds.push(n)}mt([]);const qs=mt([]),Ne=G(),Ee=G([]),At=G([]);function $s(){var n;((n=Ne.value)==null?void 0:n.loggedIn)===!0&&(Ee.value.length>0||Ne.value.getSaveList().then(di).then(e=>{At.value=e.map(t=>t.content.id)}).catch(console.error))}Bi({supportsSaving:!0,supportsSaveManager:!0,onLoggedInChanged:Rn}).then(n=>{Ne.value=n,Rn(n)}).catch(console.error);function Rn(n){n.loggedIn===!0&&(Ee.value.length>0||(n.getSaveList().then(e=>{const t=di(e);if(At.value=t.map(i=>i.content.id),I.timePlayed<120*1e3&&t.length>0){const i=t.reduce((r,a)=>r.content.time<a.content.time?a:r);Pe(i.content)}}).catch(console.error),setInterval($s,60*1e3)))}function di(n){const e=new Set(ee.saves.slice()),t=new Set(new Array(11).fill(0).map((r,a)=>a)),i=Object.keys(n).map(r=>{const{label:a,content:p}=n[parseInt(r)];try{return{slot:parseInt(r),label:a,content:JSON.parse(Le(p)??"")}}catch{return null}}).filter(r=>r!=null&&typeof r.content.id=="string"&&typeof r.content.time=="number"&&typeof r.content.timePlayed=="number").filter(r=>{var p;r.label!=null&&(r.content.name=r.label),t.delete(r.slot);const a=ee.saves.find(o=>o===r.content.id);if(a==null)ee.saves.push(r.content.id),j(Oe(r.content));else{e.delete(a);try{const o=JSON.parse(Le(localStorage.getItem(a)??"")??"");if(o==null)return!1;o.id=a,o.time=o.time??0,o.timePlayed=o.timePlayed??0;const s=Math.abs(o.timePlayed-r.content.timePlayed),c=Math.abs(o.time-r.content.time);s<120*1e3&&c<120*1e3?o.time<r.content.time?(j(Oe(r.content)),ee.active===a&&Pe(r.content)):((p=Ne.value)==null||p.save(r.slot,Be.compressToUTF16(dt(Oe(o))),o.name??r.label).catch(console.error),r.content=o):Ee.value.push({id:a,cloud:r.content,local:o,slot:r.slot})}catch{return!1}}return!0});return e.forEach(r=>{var a;try{if(t.size>0){const p=localStorage.getItem(r)??"",o=JSON.parse(Le(p)??""),s=t.values().next().value;if(s==null)return;(a=Ne.value)==null||a.save(s,p,o.name).then(()=>At.value.push(o.id)).catch(console.error),t.delete(s)}}catch{}}),i}const Ls={class:"field"},Bs={key:0,class:"field-title"},zs=["placeholder"],Gs=ae({__name:"Text",props:{title:{},modelValue:{},textArea:{type:Boolean},placeholder:{},maxHeight:{},submitOnBlur:{type:Boolean}},emits:["update:modelValue","submit","cancel"],setup(n,{emit:e}){const t=n,i=e,r=()=>t.title==null?m(ie,null,null):de(t.title,c=>m("span",null,[c])),a=Ln(null);rn(()=>{var c;(c=a.value)==null||c.focus()});const p=q({get(){return y(t.modelValue)??""},set(c){i("update:modelValue",c)}});function o(){i("submit")}function s(){t.submitOnBlur!==!1?i("submit"):i("cancel")}return(c,h)=>(k(),_("form",{onSubmit:xt(o,["prevent"])},[x("div",Ls,[c.title?(k(),_("span",Bs,[m(r)])):Q("",!0),c.textArea?(k(),he(y(Gi),{key:1,modelValue:p.value,"onUpdate:modelValue":h[0]||(h[0]=C=>p.value=C),placeholder:c.placeholder,maxHeight:c.maxHeight,onBlur:s,ref_key:"field",ref:a},null,8,["modelValue","placeholder","maxHeight"])):on((k(),_("input",{key:2,type:"text","onUpdate:modelValue":h[1]||(h[1]=C=>p.value=C),placeholder:c.placeholder,class:ge({fullWidth:!c.title}),onBlur:s,ref_key:"field",ref:a},null,42,zs)),[[Pi,p.value]])])],32))}}),mi=le(Gs,[["__scopeId","data-v-495d5085"]]),Vs={key:0,class:"material-icons pinned"},Us=ae({__name:"Tooltip",props:{pinned:{},display:{},style:{},classes:{},direction:{},xoffset:{},yoffset:{}},setup(n){const e=n,t=G(!1),i=q(()=>{var o;return((o=e.pinned)==null?void 0:o.value)===!0||t.value}),r=()=>de(e.display);function a(o){const s=e.pinned;o.shiftKey&&s!=null&&(s.value=!s.value,o.stopPropagation(),o.preventDefault())}const p=q(()=>{var o;return((o=e.pinned)==null?void 0:o.value)===!0&&Jn[ee.theme].showPin});return(o,s)=>(k(),_("div",{class:ge(["tooltip-container",{shown:i.value}]),onMouseenter:s[0]||(s[0]=c=>t.value=!0),onMouseleave:s[1]||(s[1]=c=>t.value=!1),onClickCapture:a},[Ke(o.$slots,"default",{},void 0,!0),m($n,{name:"fade"},{default:Z(()=>[i.value?(k(),_("div",{key:0,class:ge(["tooltip",{top:y(o.direction)===y(xe).Up,left:y(o.direction)===y(xe).Left,right:y(o.direction)===y(xe).Right,bottom:y(o.direction)===y(xe).Down,...y(o.classes)}]),style:Fe([{"--xoffset":y(o.xoffset)||"0px","--yoffset":y(o.yoffset)||"0px"},y(o.style)??{}])},[p.value?(k(),_("span",Vs,"push_pin")):Q("",!0),m(r)],6)):Q("",!0)]),_:1})],34))}}),Ye=le(Us,[["__scopeId","data-v-ad4ea959"]]),Ws={key:0},Js=["disabled"],Ys={key:0},Hs=ae({__name:"DangerButton",props:{disabled:{type:Boolean},skipConfirm:{type:Boolean}},emits:["click","confirmingChanged"],setup(n,{emit:e}){const t=n,i=e,r=G(!1);se(r,o=>{i("confirmingChanged",o)});function a(){if(t.skipConfirm){i("click");return}r.value&&i("click"),r.value=!r.value}function p(){r.value=!1}return(o,s)=>(k(),_("span",{class:ge(["container",{confirming:r.value}])},[r.value?(k(),_("span",Ws,"Are you sure?")):Q("",!0),x("button",{onClick:xt(a,["stop"]),class:"button danger",disabled:o.disabled},[r.value?(k(),_("span",Ys,"Yes")):Ke(o.$slots,"default",{key:1},void 0,!0)],8,Js),r.value?(k(),_("button",{key:1,class:"button",onClick:xt(p,["stop"])},"No")):Q("",!0)],2))}}),js=le(Hs,[["__scopeId","data-v-b3b9693a"]]),Qs={key:0,class:"handle material-icons"},Zs={key:1,class:"actions"},Ks={key:2,class:"actions"},Xs={key:3,class:"details"},el=["disabled"],tl={class:"save-version"},nl={key:1,class:"time"},il={key:4,class:"details"},rl={key:5,class:"details error"},al=ae({__name:"Save",props:{save:{},readonly:{type:Boolean}},emits:["export","open","duplicate","delete","editName"],setup(n,{emit:e}){const t=n,i=e,r=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),a=G(!1),p=G(!1),o=G("");se(a,()=>o.value=t.save.name??"");const s=q(()=>t.save!=null&&t.save.id===I.id&&!t.readonly),c=q(()=>s.value?I.time:(t.save!=null&&t.save.time)??0),h=q(()=>{var w;return!t.readonly&&((w=Ne.value)==null?void 0:w.loggedIn)===!0&&At.value.includes(t.save.id)});function C(){i("editName",o.value),a.value=!1}return(w,v)=>(k(),_("div",{class:ge(["save",{active:s.value,readonly:w.readonly}])},[w.readonly!==!0?(k(),_("div",Qs,"drag_handle")):Q("",!0),!a.value&&w.readonly!==!0?(k(),_("div",Zs,[w.save.error==null&&!p.value?(k(),he(Un,{key:0,onClick:v[0]||(v[0]=T=>i("export")),class:"button",left:""},{default:Z(()=>[m(Ye,{display:"Export",direction:y(xe).Left,class:"info"},{default:Z(()=>v[8]||(v[8]=[x("span",{class:"material-icons"},"content_paste",-1)])),_:1},8,["direction"])]),_:1})):Q("",!0),w.save.error==null&&!p.value?(k(),_("button",{key:1,onClick:v[1]||(v[1]=T=>i("duplicate")),class:"button"},[m(Ye,{display:"Duplicate",direction:y(xe).Left,class:"info"},{default:Z(()=>v[9]||(v[9]=[x("span",{class:"material-icons"},"content_copy",-1)])),_:1},8,["direction"])])):Q("",!0),w.save.error==null&&!p.value?(k(),_("button",{key:2,onClick:v[2]||(v[2]=T=>a.value=!a.value),class:"button"},[m(Ye,{display:"Edit Name",direction:y(xe).Left,class:"info"},{default:Z(()=>v[10]||(v[10]=[x("span",{class:"material-icons"},"edit",-1)])),_:1},8,["direction"])])):Q("",!0),m(js,{disabled:s.value,onClick:v[3]||(v[3]=T=>i("delete")),onConfirmingChanged:v[4]||(v[4]=T=>p.value=T)},{default:Z(()=>[m(Ye,{display:"Delete",direction:y(xe).Left,class:"info"},{default:Z(()=>v[11]||(v[11]=[x("span",{class:"material-icons",style:{margin:"-2px"}},"delete",-1)])),_:1},8,["direction"])]),_:1},8,["disabled"])])):w.readonly!==!0?(k(),_("div",Ks,[x("button",{onClick:C,class:"button"},[m(Ye,{display:"Save",direction:y(xe).Left,class:"info"},{default:Z(()=>v[12]||(v[12]=[x("span",{class:"material-icons"},"check",-1)])),_:1},8,["direction"])]),x("button",{onClick:v[5]||(v[5]=T=>a.value=!a.value),class:"button"},[m(Ye,{display:"Cancel",direction:y(xe).Left,class:"info"},{default:Z(()=>v[13]||(v[13]=[x("span",{class:"material-icons"},"close",-1)])),_:1},8,["direction"])])])):Q("",!0),w.save.error==null&&!a.value?(k(),_("div",Xs,[h.value?(k(),he(Ye,{key:0,display:"Synced!",direction:y(xe).Right},{default:Z(()=>v[14]||(v[14]=[x("span",{class:"material-icons synced"},"cloud",-1)])),_:1},8,["direction"])):Q("",!0),x("button",{class:"button open",onClick:v[6]||(v[6]=T=>i("open")),disabled:w.readonly},[x("h3",null,te(w.save.name),1)],8,el),x("span",tl,"v"+te(w.save.modVersion),1),v[15]||(v[15]=x("br",null,null,-1)),c.value?(k(),_("div",nl," Last played "+te(y(r).format(c.value)),1)):Q("",!0)])):w.save.error==null&&a.value?(k(),_("div",il,[m(mi,{modelValue:o.value,"onUpdate:modelValue":v[7]||(v[7]=T=>o.value=T),class:"editname",onSubmit:C},null,8,["modelValue"])])):(k(),_("div",rl,[N(" Error: Failed to load save with id "+te(w.save.id),1),v[16]||(v[16]=x("br",null,null,-1)),N(te(w.save.error),1)]))],2))}}),tn=le(al,[["__scopeId","data-v-0058f767"]]),ol={key:0,style:{color:"var(--danger)"}},sl={class:"modal-footer"},ll={class:"field"},ul={class:"field-buttons"},cl={class:"footer"},dl=ae({__name:"SavesManager",setup(n,{expose:e}){const t=G(!1),i=G(null);e({open(){t.value=!0}});const r=G(!1),a=G(""),p=G(null);se(a,M=>{M?Nt(()=>{try{if(M=Le(M)??"",M===""){console.warn("Unable to determine preset encoding",M),r.value=!0;return}const F=JSON.parse(M);if(typeof F!="object"){r.value=!0;return}const $=Ct();F.id=$,j(F),a.value="",r.value=!1,ee.saves.push($)}catch{r.value=!0}}):r.value=!1});let o=Object.assign({}),s=G(Object.keys(o).reduce((M,F)=>(M.push({label:F.split("/").slice(-1)[0].slice(0,-4),value:o[F]}),M),[]));se(t,M=>{M&&Os()});const c=q(()=>ee.saves.reduce((M,F)=>(M[F]=_s(F),M),{})),h=q(()=>{var M;return((M=Ne.value)==null?void 0:M.loggedIn)===!0&&ee.saves.length<At.value.length});function C(M){let F;switch(I.id===M?F=dt(I):F=JSON.stringify(c.value[M]),K.exportEncoding){default:console.warn(`Unknown save encoding: ${K.exportEncoding}. Defaulting to lz`);case"lz":F=Be.compressToUTF16(F);break;case"base64":F=btoa(unescape(encodeURIComponent(F)));break;case"plain":break}const $=document.createElement("textarea");$.value=F,document.body.appendChild($),$.select(),$.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild($)}function w(M){I.id===M&&j();const F={...c.value[M],id:Ct()};j(F),ee.saves.push(F.id)}function v(M){var F;((F=Ne.value)==null?void 0:F.loggedIn)===!0&&Ne.value.getSaveList().then($=>{var re;const ye=Object.keys($).find(Wt=>{const Jt=$[parseInt(Wt)].content;try{if(JSON.parse(Jt).id===M)return!0}catch{return!1}});ye!=null&&((re=Ne.value)==null||re.save(parseInt(ye),"","").catch(console.error))}),ee.saves=ee.saves.filter($=>$!==M),localStorage.removeItem(M),Rt(M)}function T(M){c.value[I.id].time=I.time,j(),Rt(I.id),Pe(c.value[M]),Rt(M)}function O(M){if(p.value=M,Nt(()=>{p.value=null}),M=Le(M)??"",M===""){console.warn("Unable to determine preset encoding",M);return}const F=JSON.parse(M);F.id=Ct(),j(F),ee.saves.push(F.id),T(F.id)}function U(M,F){const $=c.value[M];$!=null&&($.name=F,I.id===M?(I.name=F,j()):(j($),Rt(M)))}return(M,F)=>(k(),he(pt,{modelValue:t.value,"onUpdate:modelValue":F[4]||(F[4]=$=>t.value=$),ref_key:"modal",ref:i},{header:Z(()=>F[5]||(F[5]=[x("h2",null,"Saves Manager",-1)])),body:Z(({shown:$})=>[h.value?(k(),_("div",ol," Not all saves are synced! You may need to delete stale saves. ")):Q("",!0),$?(k(),he(y(zi),{key:1,list:y(ee).saves,handle:".handle",itemKey:ye=>ye},{item:Z(({element:ye})=>[m(tn,{save:c.value[ye],onOpen:re=>T(ye),onExport:re=>C(ye),onEditName:re=>U(ye,re),onDuplicate:re=>w(ye),onDelete:re=>v(ye)},null,8,["save","onOpen","onExport","onEditName","onDuplicate","onDelete"])]),_:1},8,["list","itemKey"])):Q("",!0)]),footer:Z(()=>[x("div",sl,[m(mi,{modelValue:a.value,"onUpdate:modelValue":F[0]||(F[0]=$=>a.value=$),title:"Import Save",placeholder:"Paste your save here!",class:ge({importingFailed:r.value})},null,8,["modelValue","class"]),x("div",ll,[F[6]||(F[6]=x("span",{class:"field-title"},"Create Save",-1)),x("div",ul,[x("button",{class:"button",onClick:F[1]||(F[1]=$=>T(y(ct)().id))},"New Game"),Object.keys(y(s)).length>0?(k(),he(li,{key:0,options:y(s),modelValue:p.value,"onUpdate:modelValue":F[2]||(F[2]=$=>O($)),closeOnSelect:"",placeholder:"Select preset",class:"presets"},null,8,["options","modelValue"])):Q("",!0)])]),x("div",cl,[F[7]||(F[7]=x("div",{style:{"flex-grow":"1"}},null,-1)),x("button",{class:"button modal-default-button",onClick:F[3]||(F[3]=$=>t.value=!1)}," Close ")])])]),_:1},8,["modelValue"]))}}),pi=le(dl,[["__scopeId","data-v-99458d64"]]),ml={class:"vga-footer"},pl=ae({__name:"AddictionWarning",setup(n){const e=G(!1);zn(()=>{K.disableHealthWarning===!1&&ee.showHealthWarning&&X.mouseActivity.filter(i=>i).length>6&&(e.value=!0)});function t(){ee.showHealthWarning=!1,e.value=!1}return(i,r)=>(k(),_(ie,null,[m(pt,Tt({modelValue:e.value,"onUpdate:modelValue":r[1]||(r[1]=a=>e.value=a)},i.$attrs),{header:Z(()=>r[2]||(r[2]=[x("div",{class:"vga-modal-header"},[x("h2",null,"Kindly consider taking a break.")],-1)])),body:Z(()=>r[3]||(r[3]=[x("p",null," You've been actively enjoying this game for awhile recently - and it's great that you've been having a good time! That said, there are dangers to games like these that you should be aware of: ",-1),x("p",null," While incremental games can be fun and even healthy in certain contexts, they can exacerbate video game addiction even more than other genres. If you feel like playing incremental games is taking priority over other things in your life, or manipulating your sleep schedule, it may be prudent to seek help. ",-1),x("h4",null,"Resources:",-1),x("p",null,[x("span",null,[x("a",{style:{display:"inline"},href:"https://www.samhsa.gov/",target:"_blank"}," SAMHSA "),N(" ("),x("a",{style:{display:"inline"},href:"tel:1-800-662-4357"},"1-800-662-HELP"),N(") ")]),x("br"),x("a",{href:"https://www.reddit.com/r/StopGaming/"},"r/StopGaming")],-1)])),footer:Z(()=>[x("div",ml,[x("button",{onClick:t,class:"button"},"Never show this again"),x("button",{onClick:r[0]||(r[0]=a=>e.value=!1),class:"button"},"Close")])]),_:1},16,["modelValue"]),m(pi,{ref:"savesManager"},null,512)],64))}}),gl=le(pl,[["__scopeId","data-v-84eac81b"]]),fl={class:"cloud-saves-modal-header"},hl=["onClick"],vl={key:0,class:"note"},yl={key:1,class:"note"},bl=["onClick"],wl={key:0,class:"note"},Cl={key:1,class:"note"},xl=["onClick"],Nl=ae({__name:"CloudSaveResolver",setup(n){const e=G(!1),t=G([]),i=q(()=>Ee.value.length>1?"saves":"save"),r=G(null);se(()=>Ee.value.length>0,c=>{c&&(t.value=Ee.value.map(({local:h,cloud:C})=>(h.time??0)<(C.time??0)?"cloud":"local"),e.value=!0)},{immediate:!0}),se(()=>{var c;return(c=r.value)==null?void 0:c.isOpen},c=>{c===!1&&(Ee.value=[])});function a(c){t.value[c]="local"}function p(c){t.value[c]="cloud"}function o(c){t.value[c]="both"}function s(){var c,h;for(let C=0;C<t.value.length;C++){const{slot:w,local:v,cloud:T}=Ee.value[C];switch(t.value[C]){case"local":(c=Ne.value)==null||c.save(w,Be.compressToUTF16(dt(Oe(v))),T.name).catch(console.error);break;case"cloud":j(Oe(T));break;case"both":const O=Ct();j({...Oe(T),id:O}),ee.saves.push(O),(h=Ne.value)==null||h.save(w,Be.compressToUTF16(dt(Oe(v))),T.name).catch(console.error);break}}e.value=!1}return(c,h)=>(k(),he(pt,{modelValue:e.value,"onUpdate:modelValue":h[0]||(h[0]=C=>e.value=C),width:"960px",ref_key:"modal",ref:r,"prevent-closing":!0},{header:Z(()=>[x("div",fl,[x("h2",null,"Cloud "+te(i.value)+" loaded!",1)])]),body:Z(()=>[x("div",null," Upon loading, your cloud "+te(i.value)+" "+te(y(Ee).length>1?"appear":"appears")+" to be out of sync with your local "+te(i.value)+". Which "+te(i.value)+" do you want to keep? ",1),h[4]||(h[4]=x("br",null,null,-1)),(k(!0),_(ie,null,je(y(y(Ee)),(C,w)=>(k(),_("div",{key:C.id,class:"conflict-container"},[x("div",{onClick:v=>p(w),class:ge({selected:t.value[w]==="cloud"})},[x("h2",null,[h[1]||(h[1]=N(" Cloud ")),(C.cloud.time??0)>(C.local.time??0)?(k(),_("span",vl,"(more recent)")):Q("",!0),(C.cloud.timePlayed??0)>(C.local.timePlayed??0)?(k(),_("span",yl,"(more playtime)")):Q("",!0)]),m(tn,{save:C.cloud,readonly:!0},null,8,["save"])],10,hl),x("div",{onClick:v=>a(w),class:ge({selected:t.value[w]==="local"})},[x("h2",null,[h[2]||(h[2]=N(" Local ")),(C.cloud.time??0)<=(C.local.time??0)?(k(),_("span",wl,"(more recent)")):Q("",!0),(C.cloud.timePlayed??0)<=(C.local.timePlayed??0)?(k(),_("span",Cl,"(more playtime)")):Q("",!0)]),m(tn,{save:C.local,readonly:!0},null,8,["save"])],10,bl),x("div",{onClick:v=>o(w),class:ge({selected:t.value[w]==="both"}),style:{"flex-basis":"30%"}},h[3]||(h[3]=[x("h2",null,"Both",-1),x("div",{class:"save"},"Keep Both",-1)]),10,xl)]))),128))]),footer:Z(()=>[x("div",{class:"cloud-saves-footer"},[x("button",{onClick:s,class:"button"},"Confirm")])]),_:1},8,["modelValue"]))}}),Il=le(Nl,[["__scopeId","data-v-c79a1b2e"]]),kl={class:"field"},Sl=ae({__name:"Toggle",props:{title:{},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,i=e,r=()=>de(t.title??"",p=>m("span",null,[p])),a=q({get(){return!!t.modelValue},set(p){i("update:modelValue",p)}});return(p,o)=>(k(),_("label",kl,[on(x("input",{type:"checkbox",class:"toggle","onUpdate:modelValue":o[0]||(o[0]=s=>a.value=s)},null,512),[[Fi,a.value]]),m(r)]))}}),nn=le(Sl,[["__scopeId","data-v-faad62a6"]]),Tl={class:"game-over-modal-header"},Al=["src","alt"],Ml={class:"game-over-modal-title"},El={key:0},_l={key:0},Ol=["href"],Pl={key:1},Fl=ae({__name:"GameOverScreen",setup(n){const{title:e,logo:t,discordName:i,discordLink:r,versionNumber:a,versionTitle:p}=K,o=q(()=>ti(I.timePlayed)),s=q(()=>wt.value&&!I.keepGoing),c=et(I,"autosave");function h(){I.keepGoing=!0}function C(){Pe(ct())}return(w,v)=>(k(),he(pt,{"model-value":s.value},{header:Z(()=>[x("div",Tl,[y(t)?(k(),_("img",{key:0,class:"game-over-modal-logo",src:y(t),alt:y(e)},null,8,Al)):Q("",!0),x("div",Ml,[v[1]||(v[1]=x("h2",null,"Congratulations!",-1)),x("h4",null,"You've beaten "+te(y(e))+" v"+te(y(a))+": "+te(y(p)),1)])])]),body:Z(({shown:T})=>[T?(k(),_("div",El,[x("div",null,"It took you "+te(o.value)+" to beat the game.",1),v[4]||(v[4]=x("br",null,null,-1)),v[5]||(v[5]=x("div",null," Please check the Discord to discuss the game or to check for new content updates! ",-1)),v[6]||(v[6]=x("br",null,null,-1)),y(r)&&y(i)?(k(),_("div",_l,[x("a",{href:y(r),class:"game-over-modal-discord-link"},[v[2]||(v[2]=x("span",{class:"material-icons game-over-modal-discord"},"discord",-1)),N(" "+te(y(i)),1)],8,Ol)])):(k(),_("div",Pl,v[3]||(v[3]=[x("a",{href:"https://discord.gg/yJ4fjnjU54",class:"game-over-modal-discord-link"},[x("span",{class:"material-icons game-over-modal-discord"},"discord"),N(" Profectus & Friends ")],-1)]))),m(nn,{title:"Autosave",modelValue:c.value,"onUpdate:modelValue":v[0]||(v[0]=O=>c.value=O)},null,8,["modelValue"])])):Q("",!0)]),footer:Z(()=>[x("div",{class:"game-over-footer"},[x("button",{onClick:h,class:"button"},"Keep Going"),x("button",{onClick:C,class:"button danger"},"Play Again")])]),_:1},8,["model-value"]))}}),Dl=le(Fl,[["__scopeId","data-v-66cd5266"]]),Rl={key:0},ql=["href"],$l={class:"nan-footer"},Ll=ae({__name:"NaNScreen",setup(n){const{discordName:e,discordLink:t}=K,i=G(!0),r=G(!0),a=et(X,"hasNaN"),p=G(null);se(a,w=>{w?(i.value=I.autosave,r.value=I.devSpeed===0):(I.autosave=i.value,I.devSpeed=r.value?0:null)});const o=q(()=>{var w;return(w=X.NaNPath)==null?void 0:w.join(".")}),s=q(()=>X.NaNPersistent!=null?X.NaNPersistent.value:null);function c(){X.NaNPersistent!=null&&(X.NaNPersistent.value=new d(0),X.hasNaN=!1)}function h(){X.NaNPersistent&&(X.NaNPersistent.value=new d(1),X.hasNaN=!1)}function C(){X.NaNPersistent&&(X.NaNPersistent.value=new d(NaN),X.hasNaN=!1)}return(w,v)=>(k(),_(ie,null,[m(pt,Tt({modelValue:a.value,"onUpdate:modelValue":v[4]||(v[4]=T=>a.value=T)},w.$attrs),{header:Z(()=>v[5]||(v[5]=[x("div",{class:"nan-modal-header"},[x("h2",null,"NaN value detected!")],-1)])),body:Z(()=>[x("div",null,[N(' Attempted to assign "'+te(o.value)+'" to NaN',1),s.value?(k(),_("span",Rl,te(" ")+"(previously "+te(y(Te)(s.value))+")",1)):Q("",!0),N(". Auto-saving has been "+te(i.value?"enabled":"disabled")+". Check the console for more details, and consider sharing it with the developers on discord. ",1)]),v[7]||(v[7]=x("br",null,null,-1)),x("div",null,[x("a",{href:y(t)||"https://discord.gg/yJ4fjnjU54",class:"nan-modal-discord-link"},[v[6]||(v[6]=x("span",{class:"material-icons nan-modal-discord"},"discord",-1)),N(" "+te(y(e)||"Profectus & Friends"),1)],8,ql)]),v[8]||(v[8]=x("br",null,null,-1)),m(nn,{title:"Autosave",modelValue:i.value,"onUpdate:modelValue":v[0]||(v[0]=T=>i.value=T)},null,8,["modelValue"]),y(K).enablePausing?(k(),he(nn,{key:0,title:"Pause game",modelValue:r.value,"onUpdate:modelValue":v[1]||(v[1]=T=>r.value=T)},null,8,["modelValue"])):Q("",!0)]),footer:Z(()=>[x("div",$l,[x("button",{onClick:v[2]||(v[2]=T=>{var O;return(O=p.value)==null?void 0:O.open()}),class:"button"},"Open Saves Manager"),x("button",{onClick:c,class:"button"},"Set to 0"),x("button",{onClick:h,class:"button"},"Set to 1"),s.value&&y(d).neq(s.value,0)&&y(d).neq(s.value,1)?(k(),_("button",{key:0,onClick:v[3]||(v[3]=T=>a.value=!1),class:"button"}," Set to previous ")):Q("",!0),x("button",{onClick:C,class:"button danger"},"Ignore")])]),_:1},16,["modelValue"]),m(pi,{ref_key:"savesManager",ref:p},null,512)],64))}}),Bl=le(Ll,[["__scopeId","data-v-cab8d401"]]),zl={key:1},Gl=ae({__name:"Layer",props:{display:{},minimizedDisplay:{},minimized:{},name:{},color:{},minimizable:{},nodes:{},forceHideGoBack:{},index:{}},setup(n){const e=n,t=()=>de(e.display),i=()=>e.minimizedDisplay==null?void 0:de(e.minimizedDisplay),r=q(()=>K.allowGoBack&&!y(e.forceHideGoBack)&&e.index>0&&!y(e.minimized));function a(){I.tabs.splice(y(e.index),1/0)}function p(s){e.nodes.value=s}const o=G([]);return Di((s,c,h)=>(console.warn(`Error caught in "${e.name}" layer`,s,c,h),o.value.push(s instanceof Error?s:new Error(JSON.stringify(s))),!1)),(s,c)=>o.value.length>0?(k(),he(Wn,{key:0,errors:o.value},null,8,["errors"])):(k(),_("div",Tt({key:1,class:"layer-container",style:{"--layer-color":y(s.color)}},s.$attrs),[r.value?(k(),_("button",{key:0,class:"goBack",onClick:a},"❌")):Q("",!0),y(s.minimized)?(k(),_("button",{key:1,class:"layer-tab minimized",onClick:c[0]||(c[0]=h=>s.$emit("setMinimized",!1))},[s.minimizedDisplay?(k(),he(i,{key:0})):(k(),_("div",zl,te(y(s.name)),1))])):(k(),_("div",{key:2,class:ge(["layer-tab",{showGoBack:r.value}])},[m(Yn,{onUpdateNodes:p},{default:Z(()=>[m(t)]),_:1})],2)),y(s.minimizable)?(k(),_("button",{key:3,class:"minimize",onClick:c[1]||(c[1]=h=>s.$emit("setMinimized",!0))}," ▼ ")):Q("",!0)],16))}}),Vl=le(Gl,[["__scopeId","data-v-afadeceb"]]),Ul={class:"inner-tab"},Wl=ae({__name:"Game",setup(n){const e=et(I,"tabs"),t=q(()=>Object.keys(H)),i=K.useHeader;function r(a){const{display:p,name:o,color:s,minimizable:c,minimizedDisplay:h,minimized:C,nodes:w,forceHideGoBack:v}=a;return{display:p,name:o,color:s,minimizable:c,minimizedDisplay:h,minimized:C,nodes:w,forceHideGoBack:v}}return(a,p)=>(k(),_("div",{class:ge(["tabs-container",{useHeader:y(i)}])},[(k(!0),_(ie,null,je(e.value,(o,s)=>{var c,h;return k(),_("div",{key:s,class:ge(["tab",y((c=y(H)[o])==null?void 0:c.classes)]),style:Fe(y((h=y(H)[o])==null?void 0:h.style))},[x("div",Ul,[t.value.includes(o)?(k(),he(Vl,Tt({key:0,ref_for:!0},r(y(H)[o]),{index:s,onSetMinimized:C=>y(H)[o].minimized.value=C}),null,16,["index","onSetMinimized"])):(k(),he(Ri(o),{key:1,index:s},null,8,["index"]))])],6)}),128))],2))}}),Jl=le(Wl,[["__scopeId","data-v-d0c89af0"]]),Yl={key:0,class:"tpsDisplay"},Hl=ae({__name:"TPS",setup(n){const e=q(()=>d.div(X.lastTenTicks.length,X.lastTenTicks.reduce((t,i)=>t+i,0)));return(t,i)=>e.value.isNan()?Q("",!0):(k(),_("div",Yl,"TPS: "+te(y(ei)(e.value)),1))}}),jl=le(Hl,[["__scopeId","data-v-7df31503"]]),Ql=ae({__name:"App",setup(n){const e=K.useHeader,t=q(()=>Jn[ee.theme].variables),i=et(ee,"showTPS"),r=et(X,"errors"),a=()=>qs.map(p=>de(p));return(p,o)=>r.value.length>0?(k(),_("div",{key:0,class:"error-container",style:Fe(t.value)},[m(Wn,{errors:r.value},null,8,["errors"])],4)):(k(),_(ie,{key:1},[x("div",{id:"modal-root",style:Fe(t.value)},null,4),x("div",{class:ge(["app",{useHeader:y(e)}]),style:Fe(t.value)},[m(Jl),y(i.value)?(k(),he(jl,{key:0})):Q("",!0),m(gl),m(Dl),m(Bl),m(Il),m(a)],6)],64))}}),Zl=le(Ql,[["__scopeId","data-v-8c1964eb"]]),Kl="modulepreload",Xl=function(n,e){return new URL(n,e).href},qn={},eu=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){const p=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(t.map(c=>{if(c=Xl(c,i),c in qn)return;qn[c]=!0;const h=c.endsWith(".css"),C=h?'[rel="stylesheet"]':"";if(!!i)for(let T=p.length-1;T>=0;T--){const O=p[T];if(O.href===c&&(!h||O.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${C}`))return;const v=document.createElement("link");if(v.rel=h?"stylesheet":Kl,h||(v.as="script"),v.crossOrigin="",v.href=c,s&&v.setAttribute("nonce",s),document.head.appendChild(v),h)return new Promise((T,O)=>{v.addEventListener("load",T),v.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(p){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=p,window.dispatchEvent(o),!o.defaultPrevented)throw p}return r.then(p=>{for(const o of p||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function tu(n={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:i,onRegistered:r,onRegisteredSW:a,onRegisterError:p}=n;let o,s;const c=async(C=!0)=>{await s};async function h(){if("serviceWorker"in navigator){if(o=await eu(async()=>{const{Workbox:C}=await import("./workbox-window-D5gOYdM7.js");return{Workbox:C}},[],import.meta.url).then(({Workbox:C})=>new C("./sw.js",{scope:"./",type:"classic"})).catch(C=>{p==null||p(C)}),!o)return;o.addEventListener("activated",C=>{(C.isUpdate||C.isExternal)&&window.location.reload()}),o.addEventListener("installed",C=>{C.isUpdate||i==null||i()}),o.register({immediate:e}).then(C=>{a?a("./sw.js",C):r==null||r(C)}).catch(C=>{p==null||p(C)})}}return s=h(),c}function nu(n={}){const{immediate:e=!0,onNeedRefresh:t,onOfflineReady:i,onRegistered:r,onRegisteredSW:a,onRegisterError:p}=n,o=G(!1),s=G(!1);return{updateServiceWorker:tu({immediate:e,onNeedRefresh(){o.value=!0,t==null||t()},onOfflineReady(){s.value=!0,i==null||i()},onRegistered:r,onRegisteredSW:a,onRegisterError:p}),offlineReady:s,needRefresh:o}}let st=null;function Vt(){const n=Date.now();let e=(n-I.time)/1e3;I.time=n;const t=e;if(X.lastTenTicks.push(t),X.lastTenTicks.length>10&&(X.lastTenTicks=X.lastTenTicks.slice(1)),!(wt!=null&&wt.value&&!I.keepGoing)&&!I.gameOver&&!X.hasNaN&&(e=Math.max(e,0),I.devSpeed!==0)){if(Ut.value=!1,I.offlineTime!=null){if(d.gt(I.offlineTime,K.offlineLimit*3600)&&(I.offlineTime=K.offlineLimit*3600),d.gt(I.offlineTime,0)&&I.devSpeed!==0){const i=Math.max(I.offlineTime/10,e);I.offlineTime=I.offlineTime-i,e+=i}else I.devSpeed===0&&(I.offlineTime+=e);(!I.offlineProd||d.lt(I.offlineTime,0))&&(I.offlineTime=null)}e=Math.min(e,K.maxTickLength),I.devSpeed!=null&&(e*=I.devSpeed),Number.isFinite(e)||(e=1e308),!d.eq(e,0)&&(I.timePlayed+=e,Number.isFinite(I.timePlayed)||(I.timePlayed=1e308),ve.emit("update",e,t),ee.unthrottled?(requestAnimationFrame(Vt),st!=null&&(clearInterval(st),st=null)):st==null&&(st=setInterval(Vt,50)))}}async function iu(){ee.unthrottled?requestAnimationFrame(Vt):st=setInterval(Vt,50)}se(wt,n=>{n&&ve.emit("gameWon")});setInterval(()=>{X.mouseActivity=[...X.mouseActivity.slice(-7),!1]},1e3*60*60);const dn=console.error;console.error=function(...n){dn(...n)};window.onerror=function(n,e,t,i,r){return X.errors.push(r instanceof Error?r:new Error(JSON.stringify(r))),dn(r),!0};window.onunhandledrejection=function(n){X.errors.push(n.reason instanceof Error?n.reason:new Error(JSON.stringify(n.reason))),dn(n.reason)};document.title=K.title;window.projInfo=K;K.id===""&&console.error("Project ID is empty!","Please select a unique ID for this project in /src/data/projInfo.json");requestAnimationFrame(async()=>{await Es();const n=window.vue=qi(Zl);n.config.errorHandler=function(e,t,i){console.error(e,i,t)},ve.emit("setupVue",n),n.mount("#app"),Nt(()=>{const e=Vn();nu({immediate:!0,onOfflineReady(){e.info("App ready to work offline")},onRegisterError:console.warn,onRegistered:console.info})}),iu()});
