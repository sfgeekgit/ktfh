var hn=Object.defineProperty;var vn=(n,e,t)=>e in n?hn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var M=(n,e,t)=>vn(n,typeof e!="symbol"?e+"":e,t);/* empty css                    */import"./vue-GVBARt8q.js";import{aX as Re,bo as h,X as j,aZ as $,aR as N,A as S,b0 as Ve,bS as Ke,aA as ae,az as Xe,w as G,aJ as xt,G as x,bf as Y,F as oe,a$ as Ee,z as _,aC as Te,P as m,Q as o,bN as D,b9 as wt,aT as ot,y as ie,bP as Nt,bF as bn,ay as tt,l as Rt,T as yn,ap as xn,ar as Ne,bI as ce,am as Pt,bb as Gt,bj as Le,aO as Wt,bl as wn,bA as Nn,bk as At,bE as Cn,bJ as kn,aI as Sn,b3 as In,x as Mn}from"./@vue-CCfogNd1.js";import{L as ze}from"./lz-string-BZNGtwso.js";import{c as Yt}from"./nanoevents-BxCKNB1V.js";import{i as Tn}from"./unofficial-galaxy-sdk-C_siawBx.js";import{D as Fn}from"./vuedraggable-BgvaSe-I.js";import{Y as zn}from"./vue-next-select-Bc2YoQWA.js";import{p as Pn}from"./vue-textarea-autosize-DLc4kbjP.js";import{s as An,u as En}from"./vue-toastification-D2nu0K1-.js";import"./sortablejs-BZuNQ3iR.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();const $n="Game balance settings (win amounts, costs, progression, etc.) are configured in src/data/gameConfig.ts",On="Pizza Delivery Empire",Vn="pizza-delivery",Ln="Your Name",_n="",Un="",Bn="0.1",qn="Prototype",Dn=["chapter1"],Rn=36e5,Gn=!0,Wn=!1,Yn=!0,Jn=null,Hn=null,jn="base64",Zn=1,Kn=0,Xn=!1,Qn=!1,ei=!1,q={_comment:$n,title:On,id:Vn,author:Ln,discordName:_n,discordLink:Un,versionNumber:Bn,versionTitle:qn,initialTabs:Dn,maxTickLength:Rn,enablePausing:Gn,showNews:Wn,useHeader:Yn,banner:Jn,logo:Hn,exportEncoding:jn,offlineLimit:Zn,defaultDecimalsShown:Kn,defaultShowSmall:Xn,allowGoBack:Qn,disableHealthWarning:ei},ti=Re({id:"",devSpeed:null,name:"",tabs:[],time:-1,autosave:!0,offlineProd:!0,offlineTime:null,timePlayed:0,keepGoing:!1,modID:"",modVersion:"",layers:{}}),z=window.player=ti;function De(n){return JSON.stringify(n,(e,t)=>h(t)??null)}const ni=j({__name:"FeedbackButton",props:{left:{type:Boolean}},emits:["click"],setup(n,{emit:e}){const t=e,i=$(!1),r=$(null);function a(){t("click"),r.value!=null&&clearTimeout(r.value),i.value=!1,Xe(()=>{i.value=!0,r.value=setTimeout(()=>i.value=!1,500)})}return(d,l)=>(N(),S("button",{onClick:Ke(a,["stop"]),class:ae(["feedback",{activated:i.value,left:d.left}])},[Ve(d.$slots,"default",{},void 0,!0)],2))}}),te=(n,e)=>{const t=n.__vccOpts||n;for(const[i,r]of e)t[i]=r;return t},ut=te(ni,[["__scopeId","data-v-f82eae5d"]]),ii={class:"error"},ri={class:"error-title"},oi={class:"error-details",style:{"margin-top":"-10px"}},ai={key:0},si={class:"instructions"},li=["href"],ui={key:0,style:{"margin-top":"20px"}},ci={class:"error-details"},di={key:0,style:{"margin-top":"10px"}},mi={key:1,style:{"margin-top":"10px"}},pi=j({__name:"Error",props:{errors:{}},setup(n){const e=n,t=G(()=>e.errors[0]),i=G(()=>e.errors.map(d=>d.stack==null?[]:d.stack.split(`
`))),r=G(()=>e.errors.map(d=>d.cause==null?[]:(typeof d.cause=="string"?d.cause:JSON.stringify(d.cause)).split(`
`)));function a(){let d=De(z);switch(q.exportEncoding){default:console.warn(`Unknown save encoding: ${q.exportEncoding}. Defaulting to lz`);case"lz":d=ze.compressToUTF16(d);break;case"base64":d=btoa(unescape(encodeURIComponent(d)));break;case"plain":break}console.log(d);const l=document.createElement("textarea");l.value=d,document.body.appendChild(l),l.select(),l.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(l)}return xt(()=>{z.autosave=!1,z.devSpeed=0}),(d,l)=>(N(),S("div",ii,[x("h1",ri,Y(t.value.name)+": "+Y(t.value.message),1),x("div",oi,[t.value.cause?(N(),S("div",ai,[(N(!0),S(oe,null,Ee(r.value[0],u=>(N(),S("div",{key:u},Y(u),1))),128))])):_("",!0),t.value.stack?(N(),S("div",{key:1,style:Te(t.value.cause?"margin-top: 10px":"")},[(N(!0),S(oe,null,Ee(i.value[0],u=>(N(),S("div",{key:u},Y(u),1))),128))],4)):_("",!0)]),x("div",si,[l[2]||(l[2]=m(" Check the console for more details, and consider sharing it with the developers on ")),x("a",{href:h(q).discordLink||"https://discord.gg/yJ4fjnjU54",class:"discord-link"},"discord",8,li),l[3]||(l[3]=m("! ")),o(ut,{onClick:a,class:"button",style:{display:"inline-flex"}},{default:D(()=>l[0]||(l[0]=[x("span",{class:"material-icons",style:{"font-size":"16px"}},"content_paste",-1),x("span",{style:{"margin-left":"8px","font-size":"medium"}},"Copy Save",-1)])),_:1}),l[4]||(l[4]=x("br",null,null,-1)),d.errors.length>1?(N(),S("div",ui,l[1]||(l[1]=[x("h3",null,"Other errors",-1)]))):_("",!0),(N(!0),S(oe,null,Ee(d.errors.slice(1),(u,p)=>(N(),S("div",{key:p,style:{"margin-top":"20px"}},[x("details",ci,[x("summary",null,Y(u.name)+": "+Y(u.message),1),u.cause?(N(),S("div",di,[(N(!0),S(oe,null,Ee(r.value[p+1],f=>(N(),S("div",{key:f},Y(f),1))),128))])):_("",!0),u.stack?(N(),S("div",mi,[(N(!0),S(oe,null,Ee(i.value[p+1],f=>(N(),S("div",{key:f},Y(f),1))),128))])):_("",!0)])]))),128))])]))}}),Jt=te(pi,[["__scopeId","data-v-2524e23e"]]),Pe={variables:{"--foreground":"#dfdfdf","--background":"#0f0f0f","--feature-foreground":"#0f0f0f","--tooltip-background":"rgba(0, 0, 0, 0.75)","--raised-background":"#0f0f0f","--points":"#ffffff","--locked":"#bf8f8f","--highlighted":"#333","--bought":"#77bf5f","--danger":"rgb(220, 53, 69)","--link":"#02f2f2","--outline":"#dfdfdf","--accent1":"#627a82","--accent2":"#658262","--accent3":"#7c6282","--border-radius":"15px","--modal-border":"solid 2px var(--color)","--feature-margin":"0px"},floatingTabs:!0,mergeAdjacent:!0,showPin:!0};var Ct=(n=>(n.Classic="classic",n.Paper="paper",n.Nordic="nordic",n.Aqua="aqua",n))(Ct||{});const kt={classic:Pe,paper:{...Pe,variables:{...Pe.variables,"--background":"#2a323d","--feature-foreground":"#000","--raised-background":"#333c4a","--locked":"#3a3e45","--bought":"#5C8A58","--outline":"#333c4a","--border-radius":"4px","--modal-border":"","--feature-margin":"5px"},floatingTabs:!1},nordic:{...Pe,variables:{...Pe.variables,"--foreground":"#555555","--background":"#2E3440","--feature-foreground":"#000","--raised-background":"#3B4252","--points":"#E5E9F0","--locked":"#4c566a","--highlighted":"#434c5e","--bought":"#8FBCBB","--danger":"#D08770","--link":"#88C0D0","--outline":"#3B4252","--accent1":"#B48EAD","--accent2":"#A3BE8C","--accent3":"#EBCB8B","--border-radius":"4px","--modal-border":"solid 2px #3B4252","--feature-margin":"5px"},floatingTabs:!1},aqua:{...Pe,variables:{...Pe.variables,"--foreground":"#bfdfff","--background":"#001f3f","--tooltip-background":"rgba(0, 15, 31, 0.75)","--raised-background":"#001f3f","--points":"#dfefff","--locked":"#c4a7b3","--outline":"#bfdfff"}}},W=window.state=wt({lastTenTicks:[],mouseActivity:[!1],hasNaN:!1,NaNPath:[],errors:Re([])}),me=Yt();"fonts"in document&&(document.fonts.onloadingdone=()=>me.emit("fontsLoaded"));document.onmousemove=function(){W.mouseActivity[W.mouseActivity.length-1]=!0};const gi=j({__name:"Context",emits:["updateNodes"],setup(n,{emit:e}){var y;const t=e,i=$({}),r=new ResizeObserver(u),a=$(null);xt(()=>{const w=a.value;w!=null&&r.observe(w)});let d=!0,l=$((y=a.value)==null?void 0:y.getBoundingClientRect());function u(){d&&(d=!1,Xe(()=>{var w;l.value=(w=a.value)==null?void 0:w.getBoundingClientRect(),Object.values(i.value).filter(b=>b).forEach(b=>b.rect=b.element.getBoundingClientRect()),t("updateNodes",i.value),d=!0}))}me.on("fontsLoaded",u);const p={attributes:!1,childList:!0,subtree:!1};ot(on,(w,b)=>{const A=new MutationObserver(()=>f(w));A.observe(b,p),i.value[w]={element:b,observer:A,rect:b.getBoundingClientRect()},u()}),ot(an,w=>{var b;(b=i.value[w])==null||b.observer.disconnect(),i.value[w]=void 0,u()}),ot(Io,i),ot(Mo,l);function f(w){const b=i.value[w];b!=null&&(b.rect=b.element.getBoundingClientRect(),t("updateNodes",i.value))}return(w,b)=>(N(),S(oe,null,[Ve(w.$slots,"default",{},void 0,!0),x("div",{ref_key:"resizeListener",ref:a,class:"resize-listener"},null,512)],64))}}),Ht=te(gi,[["__scopeId","data-v-4fc505f1"]]),fi={class:"modal-wrapper"},hi=["width"],vi={class:"modal-header"},bi={class:"modal-body"},yi={class:"modal-footer"},Ge=j({__name:"Modal",props:{modelValue:{type:Boolean},preventClosing:{type:Boolean},width:{}},emits:["update:modelValue"],setup(n,{expose:e,emit:t}){const i=n,r=t,a=G(()=>i.modelValue||l.value);function d(){i.preventClosing!==!0&&r("update:modelValue",!1)}const l=$(!1),u=$(null),p=G(()=>{var f;return((f=u.value)==null?void 0:f.nodes)??null});return e({isOpen:a,nodes:p}),(f,y)=>(N(),ie(yn,{to:"#modal-root"},[o(Rt,{name:"modal",onBeforeEnter:y[0]||(y[0]=w=>l.value=!0),onAfterLeave:y[1]||(y[1]=w=>l.value=!1),appear:""},{default:D(()=>[Nt(x("div",tt({class:"modal-mask",onPointerdown:Ke(d,["self"])},f.$attrs),[x("div",fi,[x("div",{class:"modal-container",width:f.width},[x("div",vi,[Ve(f.$slots,"header",{shown:a.value})]),x("div",bi,[o(Ht,{ref_key:"contextRef",ref:u},{default:D(()=>[Ve(f.$slots,"body",{shown:a.value})]),_:3},512)]),x("div",yi,[Ve(f.$slots,"footer",{shown:a.value},()=>[x("div",{class:"modal-default-footer"},[y[2]||(y[2]=x("div",{class:"modal-default-flex-grow"},null,-1)),x("button",{class:"button modal-default-button",onClick:d}," Close ")])])])],8,hi)])],16),[[bn,f.modelValue]])]),_:3})]))}});class xi{constructor(e){M(this,"map",new Map);M(this,"first");M(this,"last");M(this,"maxSize");this.maxSize=e}get size(){return this.map.size}get(e){const t=this.map.get(e);if(t!==void 0)return t!==this.first&&(t===this.last?(this.last=t.prev,this.last.next=void 0):(t.prev.next=t.next,t.next.prev=t.prev),t.next=this.first,this.first.prev=t,this.first=t),t.value}set(e,t){if(this.maxSize<1)return;if(this.map.has(e))throw new Error("Cannot update existing keys in the cache");const i=new wi(e,t);for(this.first===void 0?(this.first=i,this.last=i):(i.next=this.first,this.first.prev=i,this.first=i),this.map.set(e,i);this.map.size>this.maxSize;){const r=this.last;this.map.delete(r.key),this.last=r.prev,this.last.next=void 0}}}class wi{constructor(e,t){M(this,"key");M(this,"value");M(this,"next");M(this,"prev");this.key=e,this.value=t}}const ht=17,Ni=9e15,Ci=Math.log10(9e15),ki=1/9e15,Si=308,Ii=-324,Et=5,Mi=1023,Ti=function(){const n=[];for(let t=Ii+1;t<=Si;t++)n.push(+("1e"+t));const e=323;return function(t){return n[t+e]}}(),Ae=[2,Math.E,3,4,5,6,7,8,9,10],Fi=[[1,1.0891180521811203,1.1789767925673957,1.2701455431742086,1.3632090180450092,1.4587818160364217,1.5575237916251419,1.6601571006859253,1.767485818836978,1.8804192098842727,2],[1,1.1121114330934079,1.231038924931609,1.3583836963111375,1.4960519303993531,1.6463542337511945,1.8121385357018724,1.996971324618307,2.2053895545527546,2.4432574483385254,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.1840100246247336,1.4061375836156955,1.6802272208863964,2.026757028388619,2.4770056063449646,3.080525271755482,3.9191964192627284,5.135152840833187,6.989961179534715,10]],zi=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]];let v=function(e){return c.fromValue_noAlloc(e)},V=function(n,e,t){return c.fromComponents(n,e,t)},B=function(e,t,i){return c.fromComponents_noNormalize(e,t,i)};const Se=function(e,t){const i=t+1,r=Math.ceil(Math.log10(Math.abs(e))),a=Math.round(e*Math.pow(10,i-r))*Math.pow(10,r-i);return parseFloat(a.toFixed(Math.max(i-r,0)))},vt=function(n){return Math.sign(n)*Math.log10(Math.abs(n))},Pi=function(n){if(!isFinite(n))return n;if(n<-50)return n===Math.trunc(n)?Number.NEGATIVE_INFINITY:0;let e=1;for(;n<10;)e=e*n,++n;n-=1;let t=.9189385332046727;t=t+(n+.5)*Math.log(n),t=t-n;const i=n*n;let r=n;return t=t+1/(12*r),r=r*i,t=t+1/(360*r),r=r*i,t=t+1/(1260*r),r=r*i,t=t+1/(1680*r),r=r*i,t=t+1/(1188*r),r=r*i,t=t+691/(360360*r),r=r*i,t=t+7/(1092*r),r=r*i,t=t+3617/(122400*r),Math.exp(t)/e},jt=.5671432904097838,$t=function(n,e=1e-10){let t,i;if(!Number.isFinite(n)||n===0)return n;if(n===1)return jt;n<10?t=0:t=Math.log(n)-Math.log(Math.log(n));for(let r=0;r<100;++r){if(i=(n*Math.exp(-t)+t*t)/(t+1),Math.abs(i-t)<e*Math.abs(i))return i;t=i}throw Error(`Iteration failed to converge: ${n.toString()}`)};function Ot(n,e=1e-10){let t,i,r,a;if(!Number.isFinite(n.mag)||n.eq(c.dZero))return n;if(n.eq(c.dOne))return c.fromNumber(jt);t=c.ln(n);for(let d=0;d<100;++d){if(i=t.neg().exp(),r=t.sub(n.mul(i)),a=t.sub(r.div(t.add(1).sub(t.add(2).mul(r).div(c.mul(2,t).add(2))))),c.abs(a.sub(t)).lt(c.abs(a).mul(e)))return a;t=a}throw Error(`Iteration failed to converge: ${n.toString()}`)}const g=class g{constructor(e){M(this,"sign",0);M(this,"mag",0);M(this,"layer",0);e instanceof g?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"&&this.fromString(e)}get m(){if(this.sign===0)return 0;if(this.layer===0){const e=Math.floor(Math.log10(this.mag));let t;return this.mag===5e-324?t=5:t=this.mag/Ti(e),this.sign*t}else if(this.layer===1){const e=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,e)}else return this.sign}set m(e){this.layer<=2?this.fromMantissaExponent(e,this.e):(this.sign=Math.sign(e),this.sign===0&&(this.layer=0,this.exponent=0))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(e){this.fromMantissaExponent(this.m,e)}get s(){return this.sign}set s(e){e===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=e}get mantissa(){return this.m}set mantissa(e){this.m=e}get exponent(){return this.e}set exponent(e){this.e=e}static fromComponents(e,t,i){return new g().fromComponents(e,t,i)}static fromComponents_noNormalize(e,t,i){return new g().fromComponents_noNormalize(e,t,i)}static fromMantissaExponent(e,t){return new g().fromMantissaExponent(e,t)}static fromMantissaExponent_noNormalize(e,t){return new g().fromMantissaExponent_noNormalize(e,t)}static fromDecimal(e){return new g().fromDecimal(e)}static fromNumber(e){return new g().fromNumber(e)}static fromString(e){return new g().fromString(e)}static fromValue(e){return new g().fromValue(e)}static fromValue_noAlloc(e){if(e instanceof g)return e;if(typeof e=="string"){const t=g.fromStringCache.get(e);return t!==void 0?t:g.fromString(e)}else return typeof e=="number"?g.fromNumber(e):g.dZero}static abs(e){return v(e).abs()}static neg(e){return v(e).neg()}static negate(e){return v(e).neg()}static negated(e){return v(e).neg()}static sign(e){return v(e).sign}static sgn(e){return v(e).sign}static round(e){return v(e).round()}static floor(e){return v(e).floor()}static ceil(e){return v(e).ceil()}static trunc(e){return v(e).trunc()}static add(e,t){return v(e).add(t)}static plus(e,t){return v(e).add(t)}static sub(e,t){return v(e).sub(t)}static subtract(e,t){return v(e).sub(t)}static minus(e,t){return v(e).sub(t)}static mul(e,t){return v(e).mul(t)}static multiply(e,t){return v(e).mul(t)}static times(e,t){return v(e).mul(t)}static div(e,t){return v(e).div(t)}static divide(e,t){return v(e).div(t)}static recip(e){return v(e).recip()}static reciprocal(e){return v(e).recip()}static reciprocate(e){return v(e).reciprocate()}static cmp(e,t){return v(e).cmp(t)}static cmpabs(e,t){return v(e).cmpabs(t)}static compare(e,t){return v(e).cmp(t)}static isNaN(e){return e=v(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag)}static isFinite(e){return e=v(e),isFinite(e.sign)&&isFinite(e.layer)&&isFinite(e.mag)}static eq(e,t){return v(e).eq(t)}static equals(e,t){return v(e).eq(t)}static neq(e,t){return v(e).neq(t)}static notEquals(e,t){return v(e).notEquals(t)}static lt(e,t){return v(e).lt(t)}static lte(e,t){return v(e).lte(t)}static gt(e,t){return v(e).gt(t)}static gte(e,t){return v(e).gte(t)}static max(e,t){return v(e).max(t)}static min(e,t){return v(e).min(t)}static minabs(e,t){return v(e).minabs(t)}static maxabs(e,t){return v(e).maxabs(t)}static clamp(e,t,i){return v(e).clamp(t,i)}static clampMin(e,t){return v(e).clampMin(t)}static clampMax(e,t){return v(e).clampMax(t)}static cmp_tolerance(e,t,i){return v(e).cmp_tolerance(t,i)}static compare_tolerance(e,t,i){return v(e).cmp_tolerance(t,i)}static eq_tolerance(e,t,i){return v(e).eq_tolerance(t,i)}static equals_tolerance(e,t,i){return v(e).eq_tolerance(t,i)}static neq_tolerance(e,t,i){return v(e).neq_tolerance(t,i)}static notEquals_tolerance(e,t,i){return v(e).notEquals_tolerance(t,i)}static lt_tolerance(e,t,i){return v(e).lt_tolerance(t,i)}static lte_tolerance(e,t,i){return v(e).lte_tolerance(t,i)}static gt_tolerance(e,t,i){return v(e).gt_tolerance(t,i)}static gte_tolerance(e,t,i){return v(e).gte_tolerance(t,i)}static pLog10(e){return v(e).pLog10()}static absLog10(e){return v(e).absLog10()}static log10(e){return v(e).log10()}static log(e,t){return v(e).log(t)}static log2(e){return v(e).log2()}static ln(e){return v(e).ln()}static logarithm(e,t){return v(e).logarithm(t)}static pow(e,t){return v(e).pow(t)}static pow10(e){return v(e).pow10()}static pow_base(e,t){return v(e).pow_base(t)}static root(e,t){return v(e).root(t)}static factorial(e,t){return v(e).factorial()}static gamma(e,t){return v(e).gamma()}static lngamma(e,t){return v(e).lngamma()}static exp(e){return v(e).exp()}static sqr(e){return v(e).sqr()}static sqrt(e){return v(e).sqrt()}static cube(e){return v(e).cube()}static cbrt(e){return v(e).cbrt()}static tetrate(e,t=2,i=B(1,0,1)){return v(e).tetrate(t,i)}static iteratedexp(e,t=2,i=B(1,0,1)){return v(e).iteratedexp(t,i)}static iteratedlog(e,t=10,i=1){return v(e).iteratedlog(t,i)}static layeradd10(e,t){return v(e).layeradd10(t)}static layeradd(e,t,i=10){return v(e).layeradd(t,i)}static slog(e,t=10){return v(e).slog(t)}static lambertw(e){return v(e).lambertw()}static ssqrt(e){return v(e).ssqrt()}static pentate(e,t=2,i=B(1,0,1)){return v(e).pentate(t,i)}static sin(e){return v(e).sin()}static cos(e){return v(e).cos()}static tan(e){return v(e).tan()}static asin(e){return v(e).asin()}static acos(e){return v(e).acos()}static atan(e){return v(e).atan()}static sinh(e){return v(e).sinh()}static cosh(e){return v(e).cosh()}static tanh(e){return v(e).tanh()}static asinh(e){return v(e).asinh()}static acosh(e){return v(e).acosh()}static atanh(e){return v(e).atanh()}static affordGeometricSeries(e,t,i,r){return this.affordGeometricSeries_core(v(e),v(t),v(i),r)}static sumGeometricSeries(e,t,i,r){return this.sumGeometricSeries_core(e,v(t),v(i),r)}static affordArithmeticSeries(e,t,i,r){return this.affordArithmeticSeries_core(v(e),v(t),v(i),v(r))}static sumArithmeticSeries(e,t,i,r){return this.sumArithmeticSeries_core(v(e),v(t),v(i),v(r))}static efficiencyOfPurchase(e,t,i){return this.efficiencyOfPurchase_core(v(e),v(t),v(i))}static randomDecimalForTesting(e){if(Math.random()*20<1)return B(0,0,0);const t=Math.random()>.5?1:-1;if(Math.random()*20<1)return B(t,0,1);const i=Math.floor(Math.random()*(e+1));let r=i===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(r=Math.trunc(r));let a=Math.pow(10,r);return Math.random()>.9&&(a=Math.trunc(a)),V(t,i,a)}static affordGeometricSeries_core(e,t,i,r){const a=t.mul(i.pow(r));return g.floor(e.div(a).mul(i.sub(1)).add(1).log10().div(i.log10()))}static sumGeometricSeries_core(e,t,i,r){return t.mul(i.pow(r)).mul(g.sub(1,i.pow(e))).div(g.sub(1,i))}static affordArithmeticSeries_core(e,t,i,r){const d=t.add(r.mul(i)).sub(i.div(2)),l=d.pow(2);return d.neg().add(l.add(i.mul(e).mul(2)).sqrt()).div(i).floor()}static sumArithmeticSeries_core(e,t,i,r){const a=t.add(r.mul(i));return e.div(2).mul(a.mul(2).plus(e.sub(1).mul(i)))}static efficiencyOfPurchase_core(e,t,i){return e.div(t).add(e.div(i))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<ki)return this.layer+=1,this.mag=Math.log10(this.mag),this;let e=Math.abs(this.mag),t=Math.sign(this.mag);if(e>=Ni)return this.layer+=1,this.mag=t*Math.log10(e),this;for(;e<Ci&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=t*Math.pow(10,e),e=Math.abs(this.mag),t=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(e,t,i){return this.sign=e,this.layer=t,this.mag=i,this.normalize(),this}fromComponents_noNormalize(e,t,i){return this.sign=e,this.layer=t,this.mag=i,this}fromMantissaExponent(e,t){return this.layer=1,this.sign=Math.sign(e),e=Math.abs(e),this.mag=t+Math.log10(e),this.normalize(),this}fromMantissaExponent_noNormalize(e,t){return this.fromMantissaExponent(e,t),this}fromDecimal(e){return this.sign=e.sign,this.layer=e.layer,this.mag=e.mag,this}fromNumber(e){return this.mag=Math.abs(e),this.sign=Math.sign(e),this.layer=0,this.normalize(),this}fromString(e){const t=e,i=g.fromStringCache.get(t);if(i!==void 0)return this.fromDecimal(i);e=e.replace(",","");const r=e.split("^^^");if(r.length===2){const P=parseFloat(r[0]),U=parseFloat(r[1]),I=r[1].split(";");let T=1;if(I.length===2&&(T=parseFloat(I[1]),isFinite(T)||(T=1)),isFinite(P)&&isFinite(U)){const L=g.pentate(P,U,T);return this.sign=L.sign,this.layer=L.layer,this.mag=L.mag,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}}const a=e.split("^^");if(a.length===2){const P=parseFloat(a[0]),U=parseFloat(a[1]),I=a[1].split(";");let T=1;if(I.length===2&&(T=parseFloat(I[1]),isFinite(T)||(T=1)),isFinite(P)&&isFinite(U)){const L=g.tetrate(P,U,T);return this.sign=L.sign,this.layer=L.layer,this.mag=L.mag,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}}const d=e.split("^");if(d.length===2){const P=parseFloat(d[0]),U=parseFloat(d[1]);if(isFinite(P)&&isFinite(U)){const I=g.pow(P,U);return this.sign=I.sign,this.layer=I.layer,this.mag=I.mag,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}}e=e.trim().toLowerCase();let l,u,p=e.split("pt");if(p.length===2){l=10,u=parseFloat(p[0]),p[1]=p[1].replace("(",""),p[1]=p[1].replace(")","");let P=parseFloat(p[1]);if(isFinite(P)||(P=1),isFinite(l)&&isFinite(u)){const U=g.tetrate(l,u,P);return this.sign=U.sign,this.layer=U.layer,this.mag=U.mag,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}}if(p=e.split("p"),p.length===2){l=10,u=parseFloat(p[0]),p[1]=p[1].replace("(",""),p[1]=p[1].replace(")","");let P=parseFloat(p[1]);if(isFinite(P)||(P=1),isFinite(l)&&isFinite(u)){const U=g.tetrate(l,u,P);return this.sign=U.sign,this.layer=U.layer,this.mag=U.mag,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}}const f=e.split("e"),y=f.length-1;if(y===0){const P=parseFloat(e);if(isFinite(P))return this.fromNumber(P),g.fromStringCache.size>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}else if(y===1){const P=parseFloat(e);if(isFinite(P)&&P!==0)return this.fromNumber(P),g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}const w=e.split("e^");if(w.length===2){this.sign=1,w[0].charAt(0)=="-"&&(this.sign=-1);let P="";for(let U=0;U<w[1].length;++U){const I=w[1].charCodeAt(U);if(I>=43&&I<=57||I===101)P+=w[1].charAt(U);else return this.layer=parseFloat(P),this.mag=parseFloat(w[1].substr(U+1)),this.normalize(),g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}}if(y<1)return this.sign=0,this.layer=0,this.mag=0,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this;const b=parseFloat(f[0]);if(b===0)return this.sign=0,this.layer=0,this.mag=0,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this;let A=parseFloat(f[f.length-1]);if(y>=2){const P=parseFloat(f[f.length-2]);isFinite(P)&&(A*=Math.sign(P),A+=vt(P))}if(!isFinite(b))this.sign=f[0]==="-"?-1:1,this.layer=y,this.mag=A;else if(y===1)this.sign=Math.sign(b),this.layer=1,this.mag=A+Math.log10(Math.abs(b));else if(this.sign=Math.sign(b),this.layer=y,y===2){const P=g.mul(V(1,2,A),v(b));return this.sign=P.sign,this.layer=P.layer,this.mag=P.mag,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}else this.mag=A;return this.normalize(),g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}fromValue(e){return e instanceof g?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(e){return isNaN(this.m)?Number.NaN:this.m===0?0:Se(this.m,e)}magnitudeWithDecimalPlaces(e){return isNaN(this.mag)?Number.NaN:this.mag===0?0:Se(this.mag,e)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=Et?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(e){return this.layer===0?(this.sign*this.mag).toExponential(e):this.toStringWithDecimalPlaces(e)}toFixed(e){return this.layer===0?(this.sign*this.mag).toFixed(e):this.toStringWithDecimalPlaces(e)}toPrecision(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.exponent-1):this.toExponential(e-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(e){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(e):Se(this.m,e)+"e"+Se(this.e,e):this.layer===1?Se(this.m,e)+"e"+Se(this.e,e):this.layer<=Et?(this.sign===-1?"-":"")+"e".repeat(this.layer)+Se(this.mag,e):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+Se(this.mag,e)}abs(){return B(this.sign===0?0:1,this.layer,this.mag)}neg(){return B(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?g.dZero:this.layer===0?V(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?g.dZero:this.layer===0?V(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?g.dZero:this.layer===0?V(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?g.dZero:this.layer===0?V(this.sign,0,Math.trunc(this.mag)):this}add(e){const t=v(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer)||this.sign===0)return t;if(t.sign===0)return this;if(this.sign===-t.sign&&this.layer===t.layer&&this.mag===t.mag)return B(0,0,0);let i,r;if(this.layer>=2||t.layer>=2)return this.maxabs(t);if(g.cmpabs(this,t)>0?(i=this,r=t):(i=t,r=this),i.layer===0&&r.layer===0)return g.fromNumber(i.sign*i.mag+r.sign*r.mag);const a=i.layer*Math.sign(i.mag),d=r.layer*Math.sign(r.mag);if(a-d>=2)return i;if(a===0&&d===-1){if(Math.abs(r.mag-Math.log10(i.mag))>ht)return i;{const l=Math.pow(10,Math.log10(i.mag)-r.mag),u=r.sign+i.sign*l;return V(Math.sign(u),1,r.mag+Math.log10(Math.abs(u)))}}if(a===1&&d===0){if(Math.abs(i.mag-Math.log10(r.mag))>ht)return i;{const l=Math.pow(10,i.mag-Math.log10(r.mag)),u=r.sign+i.sign*l;return V(Math.sign(u),1,Math.log10(r.mag)+Math.log10(Math.abs(u)))}}if(Math.abs(i.mag-r.mag)>ht)return i;{const l=Math.pow(10,i.mag-r.mag),u=r.sign+i.sign*l;return V(Math.sign(u),1,r.mag+Math.log10(Math.abs(u)))}}plus(e){return this.add(e)}sub(e){return this.add(v(e).neg())}subtract(e){return this.sub(e)}minus(e){return this.sub(e)}mul(e){const t=v(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer))return t;if(this.sign===0||t.sign===0)return B(0,0,0);if(this.layer===t.layer&&this.mag===-t.mag)return B(this.sign*t.sign,0,1);let i,r;if(this.layer>t.layer||this.layer==t.layer&&Math.abs(this.mag)>Math.abs(t.mag)?(i=this,r=t):(i=t,r=this),i.layer===0&&r.layer===0)return g.fromNumber(i.sign*r.sign*i.mag*r.mag);if(i.layer>=3||i.layer-r.layer>=2)return V(i.sign*r.sign,i.layer,i.mag);if(i.layer===1&&r.layer===0)return V(i.sign*r.sign,1,i.mag+Math.log10(r.mag));if(i.layer===1&&r.layer===1)return V(i.sign*r.sign,1,i.mag+r.mag);if(i.layer===2&&r.layer===1){const a=V(Math.sign(i.mag),i.layer-1,Math.abs(i.mag)).add(V(Math.sign(r.mag),r.layer-1,Math.abs(r.mag)));return V(i.sign*r.sign,a.layer+1,a.sign*a.mag)}if(i.layer===2&&r.layer===2){const a=V(Math.sign(i.mag),i.layer-1,Math.abs(i.mag)).add(V(Math.sign(r.mag),r.layer-1,Math.abs(r.mag)));return V(i.sign*r.sign,a.layer+1,a.sign*a.mag)}throw Error("Bad arguments to mul: "+this+", "+e)}multiply(e){return this.mul(e)}times(e){return this.mul(e)}div(e){const t=v(e);return this.mul(t.recip())}divide(e){return this.div(e)}divideBy(e){return this.div(e)}dividedBy(e){return this.div(e)}recip(){return this.mag===0?g.dNaN:this.layer===0?V(this.sign,0,1/this.mag):V(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(e){const t=v(e);return this.sign>t.sign?1:this.sign<t.sign?-1:this.sign*this.cmpabs(e)}cmpabs(e){const t=v(e),i=this.mag>0?this.layer:-this.layer,r=t.mag>0?t.layer:-t.layer;return i>r?1:i<r?-1:this.mag>t.mag?1:this.mag<t.mag?-1:0}compare(e){return this.cmp(e)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(e){const t=v(e);return this.sign===t.sign&&this.layer===t.layer&&this.mag===t.mag}equals(e){return this.eq(e)}neq(e){return!this.eq(e)}notEquals(e){return this.neq(e)}lt(e){return this.cmp(e)===-1}lte(e){return!this.gt(e)}gt(e){return this.cmp(e)===1}gte(e){return!this.lt(e)}max(e){const t=v(e);return this.lt(t)?t:this}min(e){const t=v(e);return this.gt(t)?t:this}maxabs(e){const t=v(e);return this.cmpabs(t)<0?t:this}minabs(e){const t=v(e);return this.cmpabs(t)>0?t:this}clamp(e,t){return this.max(e).min(t)}clampMin(e){return this.max(e)}clampMax(e){return this.min(e)}cmp_tolerance(e,t){const i=v(e);return this.eq_tolerance(i,t)?0:this.cmp(i)}compare_tolerance(e,t){return this.cmp_tolerance(e,t)}eq_tolerance(e,t){const i=v(e);if(t==null&&(t=1e-7),this.sign!==i.sign||Math.abs(this.layer-i.layer)>1)return!1;let r=this.mag,a=i.mag;return this.layer>i.layer&&(a=vt(a)),this.layer<i.layer&&(r=vt(r)),Math.abs(r-a)<=t*Math.max(Math.abs(r),Math.abs(a))}equals_tolerance(e,t){return this.eq_tolerance(e,t)}neq_tolerance(e,t){return!this.eq_tolerance(e,t)}notEquals_tolerance(e,t){return this.neq_tolerance(e,t)}lt_tolerance(e,t){const i=v(e);return!this.eq_tolerance(i,t)&&this.lt(i)}lte_tolerance(e,t){const i=v(e);return this.eq_tolerance(i,t)||this.lt(i)}gt_tolerance(e,t){const i=v(e);return!this.eq_tolerance(i,t)&&this.gt(i)}gte_tolerance(e,t){const i=v(e);return this.eq_tolerance(i,t)||this.gt(i)}pLog10(){return this.lt(g.dZero)?g.dZero:this.log10()}absLog10(){return this.sign===0?g.dNaN:this.layer>0?V(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):V(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?g.dNaN:this.layer>0?V(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):V(this.sign,0,Math.log10(this.mag))}log(e){return e=v(e),this.sign<=0||e.sign<=0||e.sign===1&&e.layer===0&&e.mag===1?g.dNaN:this.layer===0&&e.layer===0?V(this.sign,0,Math.log(this.mag)/Math.log(e.mag)):g.div(this.log10(),e.log10())}log2(){return this.sign<=0?g.dNaN:this.layer===0?V(this.sign,0,Math.log2(this.mag)):this.layer===1?V(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?V(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):V(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?g.dNaN:this.layer===0?V(this.sign,0,Math.log(this.mag)):this.layer===1?V(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?V(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):V(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(e){return this.log(e)}pow(e){const t=v(e),i=this,r=t;if(i.sign===0)return r.eq(0)?B(1,0,1):i;if(i.sign===1&&i.layer===0&&i.mag===1)return i;if(r.sign===0)return B(1,0,1);if(r.sign===1&&r.layer===0&&r.mag===1)return i;const a=i.absLog10().mul(r).pow10();return this.sign===-1?Math.abs(r.toNumber()%2)%2===1?a.neg():Math.abs(r.toNumber()%2)%2===0?a:g.dNaN:a}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return g.dNaN;let e=this;if(e.layer===0){const t=Math.pow(10,e.sign*e.mag);if(Number.isFinite(t)&&Math.abs(t)>=.1)return V(1,0,t);if(e.sign===0)return g.dOne;e=B(e.sign,e.layer+1,Math.log10(e.mag))}return e.sign>0&&e.mag>=0?V(e.sign,e.layer+1,e.mag):e.sign<0&&e.mag>=0?V(-e.sign,e.layer+1,-e.mag):g.dOne}pow_base(e){return v(e).pow(this)}root(e){const t=v(e);return this.pow(t.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?g.exp(g.mul(this,g.ln(this).sub(1))):g.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(B(1,0,24)))return g.fromNumber(Pi(this.sign*this.mag));const e=this.mag-1;let t=.9189385332046727;t=t+(e+.5)*Math.log(e),t=t-e;const i=e*e;let r=e,a=12*r,d=1/a,l=t+d;if(l===t||(t=l,r=r*i,a=360*r,d=1/a,l=t-d,l===t))return g.exp(t);t=l,r=r*i,a=1260*r;let u=1/a;return t=t+u,r=r*i,a=1680*r,u=1/a,t=t-u,g.exp(t)}else return this.layer===1?g.exp(g.mul(this,g.ln(this).sub(1))):g.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?g.dOne:this.layer===0&&this.mag<=709.7?g.fromNumber(Math.exp(this.sign*this.mag)):this.layer===0?V(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?V(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):V(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return g.fromNumber(Math.sqrt(this.sign*this.mag));if(this.layer===1)return V(1,2,Math.log10(this.mag)-.3010299956639812);{const e=g.div(B(this.sign,this.layer-1,this.mag),B(1,0,2));return e.layer+=1,e.normalize(),e}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(e=2,t=B(1,0,1)){if(e===1)return g.pow(this,t);if(e===0)return new g(t);if(this.eq(g.dOne))return g.dOne;if(this.eq(-1))return g.pow(this,t);if(e===Number.POSITIVE_INFINITY){const a=this.toNumber();if(a<=1.444667861009766&&a>=.06598803584531254){if(a>1.444667861009099)return g.fromNumber(Math.E);const d=g.ln(this).neg();return d.lambertw().div(d)}else return a>1.444667861009766?g.fromNumber(Number.POSITIVE_INFINITY):g.dNaN}if(this.eq(g.dZero)){let a=Math.abs((e+1)%2);return a>1&&(a=2-a),g.fromNumber(a)}if(e<0)return g.iteratedlog(t,this,-e);t=v(t);const i=e;e=Math.trunc(e);const r=i-e;if(this.gt(g.dZero)&&this.lte(1.444667861009766)){e=Math.min(1e4,e);for(let a=0;a<e;++a){const d=t;if(t=this.pow(t),d.eq(t))return t}if(r!=0){const a=this.pow(t);return t.mul(1-r).add(a.mul(r))}return t}r!==0&&(t.eq(g.dOne)?this.gt(10)?t=this.pow(r):(t=g.fromNumber(g.tetrate_critical(this.toNumber(),r)),this.lt(2)&&(t=t.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?t=t.layeradd10(r):t=t.layeradd(r,this));for(let a=0;a<e;++a){if(t=this.pow(t),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(t.layer-this.layer>3)return B(t.sign,t.layer+(e-a-1),t.mag);if(a>1e4)return t}return t}iteratedexp(e=2,t=B(1,0,1)){return this.tetrate(e,t)}iteratedlog(e=10,t=1){if(t<0)return g.tetrate(e,-t,this);e=v(e);let i=g.fromDecimal(this);const r=t;t=Math.trunc(t);const a=r-t;if(i.layer-e.layer>3){const d=Math.min(t,i.layer-e.layer-3);t-=d,i.layer-=d}for(let d=0;d<t;++d){if(i=i.log(e),!isFinite(i.layer)||!isFinite(i.mag))return i.normalize();if(d>1e4)return i}return a>0&&a<1&&(e.eq(10)?i=i.layeradd10(-a):i=i.layeradd(-a,e)),i}slog(e=10,t=100){let i=.001,r=!1,a=!1,d=this.slog_internal(e).toNumber();for(let l=1;l<t;++l){const p=new g(e).tetrate(d).gt(this);if(l>1&&a!=p&&(r=!0),a=p,r?i/=2:i*=2,i=Math.abs(i)*(p?-1:1),d+=i,i===0)break}return g.fromNumber(d)}slog_internal(e=10){if(e=v(e),e.lte(g.dZero)||e.eq(g.dOne))return g.dNaN;if(e.lt(g.dOne))return this.eq(g.dOne)?g.dZero:this.eq(g.dZero)?g.dNegOne:g.dNaN;if(this.mag<0||this.eq(g.dZero))return g.dNegOne;let t=0,i=g.fromDecimal(this);if(i.layer-e.layer>3){const r=i.layer-e.layer-3;t+=r,i.layer-=r}for(let r=0;r<100;++r)if(i.lt(g.dZero))i=g.pow(e,i),t-=1;else{if(i.lte(g.dOne))return g.fromNumber(t+g.slog_critical(e.toNumber(),i.toNumber()));t+=1,i=g.log(i,e)}return g.fromNumber(t)}static slog_critical(e,t){return e>10?t-1:g.critical_section(e,t,zi)}static tetrate_critical(e,t){return g.critical_section(e,t,Fi)}static critical_section(e,t,i){t*=10,t<0&&(t=0),t>10&&(t=10),e<2&&(e=2),e>10&&(e=10);let r=0,a=0;for(let l=0;l<Ae.length;++l)if(Ae[l]==e){r=i[l][Math.floor(t)],a=i[l][Math.ceil(t)];break}else if(Ae[l]<e&&Ae[l+1]>e){const u=(e-Ae[l])/(Ae[l+1]-Ae[l]);r=i[l][Math.floor(t)]*(1-u)+i[l+1][Math.floor(t)]*u,a=i[l][Math.ceil(t)]*(1-u)+i[l+1][Math.ceil(t)]*u;break}const d=t-Math.floor(t);return r<=0||a<=0?r*(1-d)+a*d:Math.pow(e,Math.log(r)/Math.log(e)*(1-d)+Math.log(a)/Math.log(e)*d)}layeradd10(e){e=g.fromValue_noAlloc(e).toNumber();const t=g.fromDecimal(this);if(e>=1){t.mag<0&&t.layer>0?(t.sign=0,t.mag=0,t.layer=0):t.sign===-1&&t.layer==0&&(t.sign=1,t.mag=-t.mag);const i=Math.trunc(e);e-=i,t.layer+=i}if(e<=-1){const i=Math.trunc(e);if(e-=i,t.layer+=i,t.layer<0)for(let r=0;r<100;++r){if(t.layer++,t.mag=Math.log10(t.mag),!isFinite(t.mag))return t.sign===0&&(t.sign=1),t.layer<0&&(t.layer=0),t.normalize();if(t.layer>=0)break}}for(;t.layer<0;)t.layer++,t.mag=Math.log10(t.mag);return t.sign===0&&(t.sign=1,t.mag===0&&t.layer>=1&&(t.layer-=1,t.mag=1)),t.normalize(),e!==0?t.layeradd(e,10):t}layeradd(e,t){const r=this.slog(t).toNumber()+e;return r>=0?g.tetrate(t,r):Number.isFinite(r)?r>=-1?g.log(g.tetrate(t,r+1),t):g.log(g.log(g.tetrate(t,r+2),t),t):g.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return g.fromNumber($t(this.toNumber()));if(this.layer===0)return g.fromNumber($t(this.sign*this.mag));if(this.layer===1)return Ot(this);if(this.layer===2)return Ot(this);if(this.layer>=3)return B(this.sign,this.layer-1,this.mag);throw new Error("Unhandled behavior in lambertw()")}ssqrt(){if(this.sign==1&&this.layer>=3)return B(this.sign,this.layer-1,this.mag);const e=this.ln();return e.div(e.lambertw())}pentate(e=2,t=B(1,0,1)){t=v(t);const i=e;e=Math.trunc(e);const r=i-e;r!==0&&(t.eq(g.dOne)?(++e,t=g.fromNumber(r)):this.eq(10)?t=t.layeradd10(r):t=t.layeradd(r,this));for(let a=0;a<e;++a){if(t=this.tetrate(t.toNumber()),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(a>10)return t}return t}sin(){return this.mag<0?this:this.layer===0?g.fromNumber(Math.sin(this.sign*this.mag)):B(0,0,0)}cos(){return this.mag<0?g.dOne:this.layer===0?g.fromNumber(Math.cos(this.sign*this.mag)):B(0,0,0)}tan(){return this.mag<0?this:this.layer===0?g.fromNumber(Math.tan(this.sign*this.mag)):B(0,0,0)}asin(){return this.mag<0?this:this.layer===0?g.fromNumber(Math.asin(this.sign*this.mag)):B(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?g.fromNumber(Math.acos(this.toNumber())):this.layer===0?g.fromNumber(Math.acos(this.sign*this.mag)):B(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?g.fromNumber(Math.atan(this.sign*this.mag)):g.fromNumber(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return g.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return g.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?B(Number.NaN,Number.NaN,Number.NaN):g.ln(this.add(1).div(g.fromNumber(1).sub(this))).div(2)}ascensionPenalty(e){return e===0?this:this.root(g.pow(10,e))}egg(){return this.add(9)}lessThanOrEqualTo(e){return this.cmp(e)<1}lessThan(e){return this.cmp(e)<0}greaterThanOrEqualTo(e){return this.cmp(e)>-1}greaterThan(e){return this.cmp(e)>0}};M(g,"dZero"),M(g,"dOne"),M(g,"dNegOne"),M(g,"dTwo"),M(g,"dTen"),M(g,"dNaN"),M(g,"dInf"),M(g,"dNegInf"),M(g,"dNumberMax"),M(g,"dNumberMin"),M(g,"fromStringCache",new xi(Mi));let c=g;c.dZero=B(0,0,0);c.dOne=B(1,0,1);c.dNegOne=B(-1,0,1);c.dTwo=B(1,0,2);c.dTen=B(1,0,10);c.dNaN=B(Number.NaN,Number.NaN,Number.NaN);c.dInf=B(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);c.dNegInf=B(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);c.dNumberMax=V(1,0,Number.MAX_VALUE);c.dNumberMin=V(1,0,Number.MIN_VALUE);v=c.fromValue_noAlloc;V=c.fromComponents;B=c.fromComponents_noNormalize;c.fromMantissaExponent;c.fromMantissaExponent_noNormalize;const Ai=new c(1);function Je(n,e,t=!0){let i=c.log10(n).floor(),r=c.div(n,c.pow(10,i));r.toStringWithDecimalPlaces(e)==="10"&&(r=Ai,i=i.add(1));const a=i.gte(1e9)?fe(i,Math.max(Math.max(e,3),q.defaultDecimalsShown)):i.gte(1e4)?ct(i,0):i.toStringWithDecimalPlaces(0);return t?r.toStringWithDecimalPlaces(e)+"e"+a:"e"+a}function ct(n,e){if(n==null)return"NaN";if(n=new c(n),n.mag<.001)return 0 .toFixed(e);const i=n.toStringWithDecimalPlaces(e).split(".");return i[0]=i[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),i.length===1?i[0]:i[0]+"."+i[1]}function Zt(n,e){return n==null?"NaN":(n=new c(n),n.mag<1e-4?0 .toFixed(e):(n.mag<.1&&e!==0&&(e=Math.max(Math.max(e,n.log10().negate().ceil().toNumber()),q.defaultDecimalsShown)),n.toStringWithDecimalPlaces(e)))}const Ei=new c("eeee1000"),$i=new c("e100000"),Vt=new c("e1000"),Kt=new c(1e9),Oi=new c(1e6),Vi=new c(1e3),Li=new c(.98),_i=new c(.001),Xt=new c(0);function fe(n,e,t){if(e==null&&(e=q.defaultDecimalsShown),t=t??q.defaultShowSmall,n=new c(n),isNaN(n.sign)||isNaN(n.layer)||isNaN(n.mag))return"NaN";if(n.sign<0)return"-"+fe(n.neg(),e);if(n.mag===Number.POSITIVE_INFINITY)return"Infinity";if(n.gte(Ei)){const i=n.slog();return i.gte(Oi)?"F"+fe(i.floor()):c.pow(10,i.sub(i.floor())).toStringWithDecimalPlaces(3)+"F"+ct(i.floor(),0)}else{if(n.gte($i))return Je(n,0,!1);if(n.gte(Vt))return Je(n,0);if(n.gte(Kt))return Je(n,e);if(n.gte(Vi))return ct(n,0);if(n.gte(_i)||!t)return Zt(n,e);if(n.eq(Xt))return 0 .toFixed(e)}return n=en(n),n.lt(Vt)?Je(n,e).replace(/([^(?:e|F)]*)$/,"-$1"):fe(n,e)+"⁻¹"}function pe(n){return n=new c(n),n.sign<0?"-"+pe(n.neg()):n.gte(Kt)||n.lte(Li)&&!n.eq(Xt)?fe(n):fe(n,0)}function Qt(n){return c.lt(n,0)?"-"+Qt(c.neg(n)):c.gt(n,2**51)?fe(c.div(n,31536e3))+"y":(n=new c(n).toNumber(),n<60?fe(n)+"s":n<3600?pe(Math.floor(n/60))+"m "+fe(n%60)+"s":n<86400?pe(Math.floor(n/3600))+"h "+pe(Math.floor(n/60)%60)+"m "+pe(n%60)+"s":n<31536e3?pe(Math.floor(n/84600)%365)+"d "+pe(Math.floor(n/3600)%24)+"h "+pe(Math.floor(n/60)%60)+"m":pe(Math.floor(n/31536e3))+"y "+pe(Math.floor(n/84600)%365)+"d "+pe(Math.floor(n/3600)%24)+"h")}function Ui(n,e,t){n=new c(n);let i=n.toStringWithDecimalPlaces(e);return new c(i).gte(t)&&(i=c.sub(t,Math.pow(.1,e)).toStringWithDecimalPlaces(e)),i}function Bi(n,e){return fe(n,e,!0)}function en(n){let e=c.log10(n).ceil();const t=c.div(n,c.pow(10,e));return e=e.neg(),n=new c(10).pow(e).times(t),n}const qi=Object.freeze(Object.defineProperty({__proto__:null,commaFormat:ct,default:c,exponentialFormat:Je,format:fe,formatSmall:Bi,formatTime:Qt,formatWhole:pe,invertOOM:en,regularFormat:Zt,toPlaces:Ui},Symbol.toStringTag,{value:"Module"})),{exponentialFormat:Di,commaFormat:Ri,regularFormat:Gi,format:we,formatWhole:tn,formatTime:nn,toPlaces:Wi,formatSmall:Yi,invertOOM:Ji}=qi;window.Decimal=c;window.exponentialFormat=Di;window.commaFormat=Ri;window.regularFormat=Gi;window.format=we;window.formatWhole=tn;window.formatTime=nn;window.toPlaces=Wi;window.formatSmall=Yi;window.invertOOM=Ji;const $e=Symbol("ProxyState"),Lt=Symbol("AfterEvaluation");function St(n,e={}){const t=e;let i=!1,r=!1;const a=[];function d(){if(!i){if(r)throw new Error("Cyclical dependency detected. Cannot evaluate lazy proxy.");r=!0,Object.assign(t,n.call(t,t)),i=!0,a.forEach(u=>u(t))}return t}function l(u){i?u(t):a.push(u)}return new Proxy(t,{get(u,p){if(p===$e)return d();if(p===Lt)return l;const f=d()[p];return f!=null&&typeof f=="object"&&Me in f?f[Me]:f},set(u,p,f){return d()[p]=f,!0},has(u,p){return p===$e||p===Lt?!0:Reflect.has(d(),p)},ownKeys(){return Reflect.ownKeys(d())},getOwnPropertyDescriptor(u,p){return i||(Object.assign(t,n.call(t,t)),i=!0),Object.getOwnPropertyDescriptor(u,p)}})}function Hi(n){let e=n.replace(/([A-Z])/g," $1");return e=e.charAt(0).toUpperCase()+e.slice(1),e}function ji(n){return typeof n=="function"}var ue=(n=>(n.Up="Up",n.Down="Down",n.Left="Left",n.Right="Right",n.Default="Up",n))(ue||{});function le(n){return ji(n)&&n.length===0?G(n):n}const rn=c.ln(10);function lt(n){return n}function Ye(n,...e){const t=e.find(i=>k(i));return t==null?(console.error("Could not invert due to no input being a variable"),0):t.invert(n)}function Zi(n,e){return k(e)?e.invert(c.neg(n)):(console.error("Could not invert due to no input being a variable"),0)}function Ki(n,e){return k(e)?e.isIntegrable()?s.neg(e.getIntegralFormula(n)):(console.error("Could not integrate due to variable not being integrable"),s.constant(0)):(console.error("Could not integrate due to no input being a variable"),s.constant(0))}function Xi(n){return s.neg(n)}function Qi(n,e,t){return k(e)?e.invert(c.sub(n,X(t))):k(t)?t.invert(c.sub(n,X(e))):(console.error("Could not invert due to no input being a variable"),0)}function er(n,e,t){if(k(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const i=e.getIntegralFormula(n);return s.times(t,e.innermostVariable??0).add(i)}else if(k(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const i=t.getIntegralFormula(n);return s.times(e,t.innermostVariable??0).add(i)}return console.error("Could not integrate due to no input being a variable"),s.constant(0)}function tr(n,e,t){if(k(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const i=e.getIntegralFormula(n);return s.add(i,t)}else if(k(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const i=t.getIntegralFormula(n);return s.add(i,e)}return console.error("Could not integrate due to no input being a variable"),s.constant(0)}function nr(n,e,t){return k(e)?e.invert(c.add(n,X(t))):k(t)?t.invert(c.sub(X(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function ir(n,e,t){if(k(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const i=e.getIntegralFormula(n);return s.sub(i,s.times(t,e.innermostVariable??0))}else if(k(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const i=t.getIntegralFormula(n);return s.times(e,t.innermostVariable??0).sub(i)}return console.error("Could not integrate due to no input being a variable"),s.constant(0)}function rr(n,e,t){if(k(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const i=e.getIntegralFormula(n);return s.sub(i,t)}else if(k(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const i=t.getIntegralFormula(n);return s.sub(i,e)}return console.error("Could not integrate due to no input being a variable"),s.constant(0)}function or(n,e,t){return k(e)?e.invert(c.div(n,X(t))):k(t)?t.invert(c.div(n,X(e))):(console.error("Could not invert due to no input being a variable"),0)}function ar(n,e,t){if(k(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const i=e.getIntegralFormula(n);return s.times(i,t)}else if(k(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const i=t.getIntegralFormula(n);return s.times(i,e)}return console.error("Could not integrate due to no input being a variable"),s.constant(0)}function sr(n,e,t){return k(e)?s.div(n,t):k(t)?s.div(n,e):(console.error("Could not apply substitution due to no input being a variable"),s.constant(0))}function lr(n,e,t){return k(e)?e.invert(c.mul(n,X(t))):k(t)?t.invert(c.div(X(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function ur(n,e,t){if(k(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const i=e.getIntegralFormula(n);return s.div(i,t)}else if(k(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const i=t.getIntegralFormula(n);return s.div(e,i)}return console.error("Could not integrate due to no input being a variable"),s.constant(0)}function cr(n,e,t){return k(e)?s.mul(n,t):k(t)?s.mul(n,e):(console.error("Could not apply substitution due to no input being a variable"),s.constant(0))}function dr(n,e){return k(e)?e.invert(c.recip(n)):(console.error("Could not invert due to no input being a variable"),0)}function mr(n,e){if(k(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const t=e.getIntegralFormula(n);return s.ln(t)}return console.error("Could not integrate due to no input being a variable"),s.constant(0)}function pr(n,e){return k(e)?e.invert(c.pow10(n)):(console.error("Could not invert due to no input being a variable"),0)}function gr(n){return c.ln(n).sub(1).times(n).div(rn)}function fr(n,e){if(k(e)){const t=rn.times(n);return e.invert(t.div(t.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function hr(n,e){return k(e)?e.isIntegrable()?new s({inputs:[e.getIntegralFormula(n)],evaluate:gr,invert:fr}):(console.error("Could not integrate due to variable not being integrable"),s.constant(0)):(console.error("Could not integrate due to no input being a variable"),s.constant(0))}function vr(n,e,t){return k(e)?e.invert(c.pow(X(t),n)):k(t)?t.invert(c.root(X(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function br(n,e){return c.ln(n).sub(1).times(n).div(c.ln(e))}function yr(n,e,t){if(k(e)){const i=c.ln(X(t)).times(n);return e.invert(i.div(i.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function xr(n,e,t){return k(e)?e.isIntegrable()?new s({inputs:[e.getIntegralFormula(n),t],evaluate:br,invert:yr}):(console.error("Could not integrate due to variable not being integrable"),s.constant(0)):(console.error("Could not integrate due to no input being a variable"),s.constant(0))}function wr(n,e){return k(e)?e.invert(c.pow(2,n)):(console.error("Could not invert due to no input being a variable"),0)}function Nr(n){return c.ln(n).sub(1).times(n).div(c.ln(2))}function Cr(n,e){if(k(e)){const t=c.ln(2).times(n);return e.invert(t.div(t.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function kr(n,e){return k(e)?e.isIntegrable()?new s({inputs:[e.getIntegralFormula(n)],evaluate:Nr,invert:Cr}):(console.error("Could not integrate due to variable not being integrable"),s.constant(0)):(console.error("Could not integrate due to no input being a variable"),s.constant(0))}function Sr(n,e){return k(e)?e.invert(c.exp(n)):(console.error("Could not invert due to no input being a variable"),0)}function Ir(n){return c.ln(n).sub(1).times(n)}function Mr(n,e){return k(e)?e.invert(c.div(n,c.div(n,Math.E).lambertw())):(console.error("Could not invert due to no input being a variable"),0)}function Tr(n,e){return k(e)?e.isIntegrable()?new s({inputs:[e.getIntegralFormula(n)],evaluate:Ir,invert:Mr}):(console.error("Could not integrate due to variable not being integrable"),s.constant(0)):(console.error("Could not integrate due to no input being a variable"),s.constant(0))}function Fr(n,e,t){return k(e)?e.invert(c.root(n,X(t))):k(t)?t.invert(c.ln(n).div(c.ln(X(e)))):(console.error("Could not invert due to no input being a variable"),0)}function zr(n,e,t){if(k(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const i=e.getIntegralFormula(n),r=s.add(t,1);return s.pow(i,r).div(r)}else if(k(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const i=t.getIntegralFormula(n);return s.pow(e,i).div(s.ln(e))}return console.error("Could not integrate due to no input being a variable"),s.constant(0)}function Pr(n,e){return k(e)?e.invert(c.root(n,10)):(console.error("Could not invert due to no input being a variable"),0)}function Ar(n,e){if(k(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const t=e.getIntegralFormula(n);return s.pow10(t).div(s.ln(10))}return console.error("Could not integrate due to no input being a variable"),s.constant(0)}function Er(n,e,t){return k(e)?e.invert(c.ln(n).div(c.ln(X(t)))):k(t)?t.invert(c.root(X(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function $r(n,e,t){if(k(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const i=e.getIntegralFormula(n);return s.pow(t,i).div(s.ln(t))}else if(k(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const i=t.getIntegralFormula(n),r=s.add(e,1);return s.pow(i,r).div(r)}return console.error("Could not integrate due to no input being a variable"),s.constant(0)}function Or(n,e,t){return k(e)?e.invert(c.root(n,c.recip(X(t)))):k(t)?t.invert(c.ln(X(e)).div(c.ln(n))):(console.error("Could not invert due to no input being a variable"),0)}function Vr(n,e,t){if(k(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const i=e.getIntegralFormula(n);return s.pow(i,s.recip(t).add(1)).times(t).div(s.add(t,1))}return console.error("Could not integrate due to no input being a variable"),s.constant(0)}function Lr(n,e){return k(e)?e.invert(c.ln(n)):(console.error("Could not invert due to no input being a variable"),0)}function _r(n,e){if(k(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const t=e.getIntegralFormula(n);return s.exp(t)}return console.error("Could not integrate due to no input being a variable"),s.constant(0)}function Ur(n,e=2,t=c.fromComponents_noNormalize(1,0,1)){const i=c.minabs(e,1e308).toNumber();return c.tetrate(n,i,t)}function Br(n,e,t,i){return k(e)?e.invert(c.ssqrt(n)):(console.error("Could not invert due to no input being a variable"),0)}function qr(n,e=2,t=c.fromComponents_noNormalize(1,0,1)){const i=c.minabs(e,1e308).toNumber();return c.iteratedexp(n,i,new c(t))}function Dr(n,e,t,i){return k(e)?e.invert(c.iteratedlog(n,Math.E,c.minabs(1e308,X(t)).toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function Rr(n,e=10,t=2){const i=c.minabs(t,1e308).toNumber();return c.iteratedlog(n,e,i)}function Gr(n,e=10){const t=c.minabs(e,1e308).toNumber();return c.slog(n,t)}function Wr(n,e,t){return k(e)?e.invert(c.tetrate(n,c.minabs(1e308,X(t)).toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function Yr(n,e,t){const i=c.minabs(e,1e308).toNumber();return c.layeradd(n,i,t)}function Jr(n,e,t,i){return k(e)?e.invert(c.layeradd(n,c.minabs(1e308,X(t)).negate().toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function Hr(n,e){return k(e)?e.invert(c.pow(Math.E,n).times(n)):(console.error("Could not invert due to no input being a variable"),0)}function jr(n,e){return k(e)?e.invert(c.tetrate(n,2)):(console.error("Could not invert due to no input being a variable"),0)}function Zr(n,e,t){const i=c.minabs(e,1e308).toNumber();return c.pentate(n,i,t)}function Kr(n,e){return k(e)?e.invert(c.asin(n)):(console.error("Could not invert due to no input being a variable"),0)}function Xr(n,e){if(k(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const t=e.getIntegralFormula(n);return s.cos(t).neg()}return console.error("Could not integrate due to no input being a variable"),s.constant(0)}function Qr(n,e){return k(e)?e.invert(c.acos(n)):(console.error("Could not invert due to no input being a variable"),0)}function eo(n,e){if(k(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const t=e.getIntegralFormula(n);return s.sin(t)}return console.error("Could not integrate due to no input being a variable"),s.constant(0)}function to(n,e){return k(e)?e.invert(c.atan(n)):(console.error("Could not invert due to no input being a variable"),0)}function no(n,e){if(k(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const t=e.getIntegralFormula(n);return s.cos(t).ln().neg()}return console.error("Could not integrate due to no input being a variable"),s.constant(0)}function io(n,e){return k(e)?e.invert(c.sin(n)):(console.error("Could not invert due to no input being a variable"),0)}function ro(n,e){if(k(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const t=e.getIntegralFormula(n);return s.asin(t).times(t).add(s.sqrt(s.sub(1,s.pow(t,2))))}return console.error("Could not integrate due to no input being a variable"),s.constant(0)}function oo(n,e){return k(e)?e.invert(c.cos(n)):(console.error("Could not invert due to no input being a variable"),0)}function ao(n,e){if(k(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const t=e.getIntegralFormula(n);return s.acos(t).times(t).sub(s.sqrt(s.sub(1,s.pow(t,2))))}return console.error("Could not integrate due to no input being a variable"),s.constant(0)}function so(n,e){return k(e)?e.invert(c.tan(n)):(console.error("Could not invert due to no input being a variable"),0)}function lo(n,e){if(k(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const t=e.getIntegralFormula(n);return s.atan(t).times(t).sub(s.ln(s.pow(t,2).add(1)).div(2))}return console.error("Could not integrate due to no input being a variable"),s.constant(0)}function uo(n,e){return k(e)?e.invert(c.asinh(n)):(console.error("Could not invert due to no input being a variable"),0)}function co(n,e){if(k(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const t=e.getIntegralFormula(n);return s.cosh(t)}return console.error("Could not integrate due to no input being a variable"),s.constant(0)}function mo(n,e){return k(e)?e.invert(c.acosh(n)):(console.error("Could not invert due to no input being a variable"),0)}function po(n,e){if(k(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const t=e.getIntegralFormula(n);return s.sinh(t)}return console.error("Could not integrate due to no input being a variable"),s.constant(0)}function go(n,e){return k(e)?e.invert(c.atanh(n)):(console.error("Could not invert due to no input being a variable"),0)}function fo(n,e){if(k(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const t=e.getIntegralFormula(n);return s.cosh(t).ln()}return console.error("Could not integrate due to no input being a variable"),s.constant(0)}function ho(n,e){return k(e)?e.invert(c.sinh(n)):(console.error("Could not invert due to no input being a variable"),0)}function vo(n,e){if(k(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const t=e.getIntegralFormula(n);return s.asinh(t).times(t).sub(s.pow(t,2).add(1).sqrt())}return console.error("Could not integrate due to no input being a variable"),s.constant(0)}function bo(n,e){return k(e)?e.invert(c.cosh(n)):(console.error("Could not invert due to no input being a variable"),0)}function yo(n,e){if(k(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const t=e.getIntegralFormula(n);return s.acosh(t).times(t).sub(s.add(t,1).sqrt().times(s.sub(t,1).sqrt()))}return console.error("Could not integrate due to no input being a variable"),s.constant(0)}function xo(n,e){return k(e)?e.invert(c.tanh(n)):(console.error("Could not invert due to no input being a variable"),0)}function wo(n,e){if(k(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),s.constant(0);const t=e.getIntegralFormula(n);return s.atanh(t).times(t).add(s.sub(1,s.pow(t,2)).ln().div(2))}return console.error("Could not integrate due to no input being a variable"),s.constant(0)}function _e(n){return(e,t)=>new s({inputs:[e,t],evaluate:n,invert:lt})}function k(n){return n instanceof Qe&&n.hasVariable()}function X(n,e){return n instanceof Qe?n.evaluate(e):h(n)}function No(){return s.pow(this,2).div(2)}function Co(){return this}const O=class O{constructor(e){M(this,"inputs");M(this,"internalEvaluate");M(this,"internalInvert");M(this,"internalIntegrate");M(this,"internalIntegrateInner");M(this,"applySubstitution");M(this,"description");M(this,"internalVariables");M(this,"innermostVariable");M(this,"negate",this.neg);M(this,"negated",this.neg);M(this,"sgn",this.sign);M(this,"plus",this.add);M(this,"subtract",this.sub);M(this,"minus",this.sub);M(this,"multiply",this.mul);M(this,"times",this.mul);M(this,"divide",this.div);M(this,"divideBy",this.div);M(this,"dividedBy",this.div);M(this,"reciprocal",this.recip);M(this,"reciprocate",this.recip);M(this,"logarithm",this.log);let t;"inputs"in e&&(e.inputs=e.inputs.map(i=>typeof i=="object"&&Me in i?i[Me]:i)),"variable"in e?(typeof e.variable=="object"&&Me in e.variable&&(e.variable=e.variable[Me]),t=this.setupVariable(e)):"evaluate"in e?t=this.setupFormula(e):t=this.setupConstant(e),this.inputs=t.inputs,this.internalVariables=t.internalVariables,this.innermostVariable=t.innermostVariable,this.internalEvaluate=t.internalEvaluate,this.internalInvert=t.internalInvert,this.internalIntegrate=t.internalIntegrate,this.internalIntegrateInner=t.internalIntegrateInner,this.applySubstitution=t.applySubstitution,this.description=e.description}setupVariable({variable:e}){return{inputs:[e],internalVariables:1,innermostVariable:e,internalIntegrate:No,internalIntegrateInner:Co,applySubstitution:lt}}setupConstant({inputs:e}){return e.length!==1&&console.error("Evaluate function is required if inputs is not length 1"),{inputs:e,internalVariables:0}}setupFormula(e){const{inputs:t,evaluate:i,invert:r,integrate:a,integrateInner:d,applySubstitution:l}=e,u=t.reduce((b,A)=>b+(A instanceof O?A.internalVariables:0),0),p=t.find(b=>b instanceof O&&b.hasVariable()),f=u===1?p==null?void 0:p.innermostVariable:void 0,y=(p==null?void 0:p.isInvertible())??!1,w=(p==null?void 0:p.isIntegrable())??!1;return{inputs:t,internalEvaluate:i,internalInvert:y?r:void 0,internalIntegrate:w?a:void 0,internalIntegrateInner:d,applySubstitution:l,innermostVariable:f,internalVariables:u}}isInvertible(){return this.hasVariable()&&(this.internalInvert!=null||this.internalEvaluate==null)}isIntegrable(){return this.hasVariable()&&this.internalIntegrate!=null}isIntegralInvertible(){return this.isIntegrable()?this.getIntegralFormula().isInvertible():!1}hasVariable(){return this.internalVariables===1}evaluate(e){var t;return((t=this.internalEvaluate)==null?void 0:t.call(this,...this.inputs.map(i=>X(i,e))))??(this.hasVariable()?e:null)??X(this.inputs[0])}equals(e){return this.inputs.length===e.inputs.length&&this.inputs.every((t,i)=>t instanceof O&&e.inputs[i]instanceof O?t.equals(e.inputs[i]):!(t instanceof O)&&!(e.inputs[i]instanceof O)&&c.eq(h(t),h(e.inputs[i])))&&this.internalEvaluate===e.internalEvaluate&&this.internalInvert===e.internalInvert&&this.internalIntegrate===e.internalIntegrate&&this.internalVariables===e.internalVariables}static constant(e){return new s({inputs:[e]})}static variable(e){return new s({variable:e})}static stringify(e){return e instanceof O?e.description!=null?e.description:e.internalEvaluate==null?e.hasVariable()?"x":we(e.inputs[0]??0):`${e.internalEvaluate.name}(${e.inputs.map(s.stringify).join(", ")})`:we(h(e))}static step(e,t,i){const r=i(s.variable(0)),a=le(t);function d(u){return c.lt(u,h(a))?u:c.add(r.evaluate(c.sub(u,h(a))),h(a))}function l(u,p){return k(p)&&r.isInvertible()?(c.gt(u,h(a))&&(u=c.add(r.invert(c.sub(u,h(a))),h(a))),p.invert(u)):(console.error("Could not invert due to no input being a variable"),0)}return new s({inputs:[e],evaluate:d,invert:r.isInvertible()&&r.hasVariable()?l:void 0,description:"indeterminate"})}static if(e,t,i,r){const a=$(0),d=s.variable(a),l=i(d),u=r==null?void 0:r(d),p=le(t);function f(w){return h(p)?(a.value=w,l.evaluate()):u?(a.value=w,u.evaluate()):w}function y(w,b){return!k(b)||!l.isInvertible()||u!=null&&!u.isInvertible()?(console.error("Could not invert due to no input being a variable"),0):h(p)?b.invert(l.invert(w)):u?b.invert(u.invert(w)):b.invert(w)}return new s({inputs:[e],evaluate:f,invert:l.isInvertible()&&l.hasVariable()?y:void 0,description:"indeterminate"})}static conditional(e,t,i,r){return s.if(e,t,i,r)}static abs(e){return new s({inputs:[e],evaluate:c.abs})}static neg(e){return new s({inputs:[e],evaluate:c.neg,invert:Zi,applySubstitution:Xi,integrate:Ki})}static sign(e){return new s({inputs:[e],evaluate:c.sign})}static round(e){return new s({inputs:[e],evaluate:c.round,invert:Ye})}static floor(e){return new s({inputs:[e],evaluate:c.floor,invert:Ye})}static ceil(e){return new s({inputs:[e],evaluate:c.ceil,invert:Ye})}static trunc(e){return new s({inputs:[e],evaluate:c.trunc,invert:Ye})}static add(e,t){return new s({inputs:[e,t],evaluate:c.add,invert:Qi,integrate:er,integrateInner:tr,applySubstitution:lt})}static sub(e,t){return new s({inputs:[e,t],evaluate:c.sub,invert:nr,integrate:ir,integrateInner:rr,applySubstitution:lt})}static mul(e,t){return new s({inputs:[e,t],evaluate:c.mul,invert:or,integrate:ar,applySubstitution:sr})}static div(e,t){return new s({inputs:[e,t],evaluate:c.div,invert:lr,integrate:ur,applySubstitution:cr})}static recip(e){return new s({inputs:[e],evaluate:c.recip,invert:dr,integrate:mr})}static clamp(e,t,i){return new s({inputs:[e,t,i],evaluate:c.clamp,invert:Ye})}static pLog10(e){return new s({inputs:[e],evaluate:c.pLog10})}static absLog10(e){return new s({inputs:[e],evaluate:c.absLog10})}static log10(e){return new s({inputs:[e],evaluate:c.log10,invert:pr,integrate:hr})}static log(e,t){return new s({inputs:[e,t],evaluate:c.log,invert:vr,integrate:xr})}static log2(e){return new s({inputs:[e],evaluate:c.log2,invert:wr,integrate:kr})}static ln(e){return new s({inputs:[e],evaluate:c.ln,invert:Sr,integrate:Tr})}static pow(e,t){return new s({inputs:[e,t],evaluate:c.pow,invert:Fr,integrate:zr})}static pow10(e){return new s({inputs:[e],evaluate:c.pow10,invert:Pr,integrate:Ar})}static pow_base(e,t){return new s({inputs:[e,t],evaluate:c.pow_base,invert:Er,integrate:$r})}static root(e,t){return new s({inputs:[e,t],evaluate:c.root,invert:Or,integrate:Vr})}static factorial(e){return new s({inputs:[e],evaluate:c.factorial})}static gamma(e){return new s({inputs:[e],evaluate:c.gamma})}static lngamma(e){return new s({inputs:[e],evaluate:c.lngamma})}static exp(e){return new s({inputs:[e],evaluate:c.exp,invert:Lr,integrate:_r})}static sqr(e){return s.pow(e,2)}static sqrt(e){return s.root(e,2)}static cube(e){return s.pow(e,3)}static cbrt(e){return s.root(e,3)}static tetrate(e,t=2,i=c.fromComponents_noNormalize(1,0,1)){return new s({inputs:[e,t,i],evaluate:Ur,invert:Br})}static iteratedexp(e,t=2,i=c.fromComponents_noNormalize(1,0,1)){return new s({inputs:[e,t,i],evaluate:qr,invert:Dr})}static iteratedlog(e,t=10,i=1){return new s({inputs:[e,t,i],evaluate:Rr})}static slog(e,t=10){return new s({inputs:[e,t],evaluate:Gr,invert:Wr})}static layeradd10(e,t){return new s({inputs:[e,t],evaluate:c.layeradd10})}static layeradd(e,t,i=10){return new s({inputs:[e,t,i],evaluate:Yr,invert:Jr})}static lambertw(e){return new s({inputs:[e],evaluate:c.lambertw,invert:Hr})}static ssqrt(e){return new s({inputs:[e],evaluate:c.ssqrt,invert:jr})}static pentate(e,t=2,i=c.fromComponents_noNormalize(1,0,1)){return new s({inputs:[e,t,i],evaluate:Zr})}static sin(e){return new s({inputs:[e],evaluate:c.sin,invert:io,integrate:Xr})}static cos(e){return new s({inputs:[e],evaluate:c.cos,invert:oo,integrate:eo})}static tan(e){return new s({inputs:[e],evaluate:c.tan,invert:so,integrate:no})}static asin(e){return new s({inputs:[e],evaluate:c.asin,invert:Kr,integrate:ro})}static acos(e){return new s({inputs:[e],evaluate:c.acos,invert:Qr,integrate:ao})}static atan(e){return new s({inputs:[e],evaluate:c.atan,invert:to,integrate:lo})}static sinh(e){return new s({inputs:[e],evaluate:c.sinh,invert:ho,integrate:co})}static cosh(e){return new s({inputs:[e],evaluate:c.cosh,invert:bo,integrate:po})}static tanh(e){return new s({inputs:[e],evaluate:c.tanh,invert:xo,integrate:fo})}static asinh(e){return new s({inputs:[e],evaluate:c.asinh,invert:uo,integrate:vo})}static acosh(e){return new s({inputs:[e],evaluate:c.acosh,invert:mo,integrate:yo})}static atanh(e){return new s({inputs:[e],evaluate:c.atanh,invert:go,integrate:wo})}stringify(){return s.stringify(this)}step(e,t){return s.step(this,e,t)}if(e,t){return s.if(this,e,t)}conditional(e,t){return s.if(this,e,t)}abs(){return s.abs(this)}neg(){return s.neg(this)}sign(){return s.sign(this)}round(){return s.round(this)}floor(){return s.floor(this)}ceil(){return s.ceil(this)}trunc(){return s.trunc(this)}add(e){return s.add(this,e)}sub(e){return s.sub(this,e)}mul(e){return s.mul(this,e)}div(e){return s.div(this,e)}recip(){return s.recip(this)}max(e){return s.max(this,e)}min(e){return s.min(this,e)}maxabs(e){return s.maxabs(this,e)}minabs(e){return s.minabs(this,e)}clamp(e,t){return s.clamp(this,e,t)}clampMin(e){return s.clampMin(this,e)}clampMax(e){return s.clampMax(this,e)}pLog10(){return s.pLog10(this)}absLog10(){return s.absLog10(this)}log10(){return s.log10(this)}log(e){return s.log(this,e)}log2(){return s.log2(this)}ln(){return s.ln(this)}pow(e){return s.pow(this,e)}pow10(){return s.pow10(this)}pow_base(e){return s.pow_base(this,e)}root(e){return s.root(this,e)}factorial(){return s.factorial(this)}gamma(){return s.gamma(this)}lngamma(){return s.lngamma(this)}exp(){return s.exp(this)}sqr(){return s.pow(this,2)}sqrt(){return s.root(this,2)}cube(){return s.pow(this,3)}cbrt(){return s.root(this,3)}tetrate(e=2,t=c.fromComponents_noNormalize(1,0,1)){return s.tetrate(this,e,t)}iteratedexp(e=2,t=c.fromComponents_noNormalize(1,0,1)){return s.iteratedexp(this,e,t)}iteratedlog(e=10,t=1){return s.iteratedlog(this,e,t)}slog(e=10){return s.slog(this,e)}layeradd10(e){return s.layeradd10(this,e)}layeradd(e,t){return s.layeradd(this,e,t)}lambertw(){return s.lambertw(this)}ssqrt(){return s.ssqrt(this)}pentate(e=2,t=c.fromComponents_noNormalize(1,0,1)){return s.pentate(this,e,t)}sin(){return s.sin(this)}cos(){return s.cos(this)}tan(){return s.tan(this)}asin(){return s.asin(this)}acos(){return s.acos(this)}atan(){return s.atan(this)}sinh(){return s.sinh(this)}cosh(){return s.cosh(this)}tanh(){return s.tanh(this)}asinh(){return s.asinh(this)}acosh(){return s.acosh(this)}atanh(){return s.atanh(this)}};M(O,"negate",O.neg),M(O,"negated",O.neg),M(O,"sgn",O.sign),M(O,"plus",O.add),M(O,"subtract",O.sub),M(O,"minus",O.sub),M(O,"multiply",O.mul),M(O,"times",O.mul),M(O,"divide",O.div),M(O,"divideBy",O.div),M(O,"dividedBy",O.div),M(O,"reciprocal",O.recip),M(O,"reciprocate",O.recip),M(O,"max",_e(c.max)),M(O,"min",_e(c.min)),M(O,"minabs",_e(c.minabs)),M(O,"maxabs",_e(c.maxabs)),M(O,"clampMin",_e(c.clampMin)),M(O,"clampMax",_e(c.clampMax)),M(O,"logarithm",O.log);let Qe=O;class s extends Qe{constructor(){super(...arguments);M(this,"integralFormula")}invert(t){return this.internalInvert&&this.hasVariable()?this.internalInvert.call(this,t,...this.inputs):this.inputs.length===1&&this.hasVariable()?t:(console.error("Cannot invert non-invertible formula"),0)}evaluateIntegral(t){return this.isIntegrable()?this.getIntegralFormula().evaluate(t):(console.error("Cannot evaluate integral of formula without integral"),0)}invertIntegral(t){return!this.isIntegrable()||!this.getIntegralFormula().isInvertible()?(console.error("Cannot invert integral of formula without invertible integral"),0):this.getIntegralFormula().invert(t)}calculateConstantOfIntegration(){const t=this.getIntegralFormula().evaluate(1),i=c.add(this.evaluate(0),this.evaluate(1)).div(2);return c.sub(i,t)}getIntegralFormula(t){if(this.integralFormula!=null&&t==null)return this.integralFormula;if(t==null){if(this.applySubstitution==null){if(t=[],this.internalIntegrate==null)return console.error("Cannot integrate formula with non-integrable operation"),s.constant(0);let i=this.internalIntegrate.call(this,t,...this.inputs);t.forEach(r=>i=r(i)),this.integralFormula=i}else if(this.internalIntegrate)this.integralFormula=this.internalIntegrate.call(this,void 0,...this.inputs);else if(this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable())this.integralFormula=this;else return console.error("Cannot integrate formula without variable"),s.constant(0);return this.integralFormula}else return this.applySubstitution==null?(console.error("Cannot have two complex operations in an integrable formula"),s.constant(0)):(t.push(i=>this.applySubstitution.call(this,i,...this.inputs)),this.internalIntegrateInner?this.internalIntegrateInner.call(this,t,...this.inputs):this.internalIntegrate?this.internalIntegrate.call(this,t,...this.inputs):this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable()?this:(console.error("Cannot integrate formula without variable"),s.constant(0)))}}const Be=Symbol("PersistentState"),dt=Symbol("DefaultValue"),mt=Symbol("StackTrace"),bt=Symbol("Deleted"),Me=Symbol("NonPersistent"),Oe=Symbol("SaveDataPath"),_t=Symbol("SkipPersistence");function ko(){var n;return((n=new Error().stack)==null?void 0:n.split(`
`).slice(3,5).map(e=>e.trim()).join(`
`))??""}function Ut(n,e){var t;c.isNaN(e)&&(W.hasNaN||(z.autosave=!1,W.hasNaN=!0,W.NaNPath=n[Oe],W.NaNPersistent=n),console.error(`Attempted to save NaN value to ${(t=n[Oe])==null?void 0:t.join(".")}`)),n[Be].value=e}function K(n,e=!0){const t=Ne(n)?n:$(n);Ne(n)&&(n=n.value);const i=G({get(){return t.value},set(a){e?Ut(r,a):r[Be].value=a}});i[dt]=n;const r={get value(){return t.value},set value(a){e?Ut(r,a):r[Be].value=a},__v_isRef:!0,[Be]:t,[dt]:n,[mt]:ko(),[bt]:!1,[Me]:i,[Oe]:void 0};return be.length===0?console.warn("Creating a persistent ref outside of a layer. This is not officially supported",r,`
Created at:
`+r[mt]):He[be[be.length-1]].add(r),r}function So(n){return n!=null&&typeof n=="object"&&Be in n}me.on("addLayer",(n,e)=>{const t=[],i=(r,a=[])=>{let d=!1;return Object.keys(r).forEach(l=>{let u=r[l];if(u!=null&&typeof u=="object"){if(_t in u&&u[_t]===!0)return;if($e in u&&(u=u[$e]),So(u)){if(d=!0,u[bt]){console.warn("Deleted persistent ref present in returned object. Ignoring...",u,`
Created at:
`+u[mt]);return}He[n.id].delete(u);const p=[n.id,...a,l];u[Oe]!=null&&JSON.stringify(p)!==JSON.stringify(u[Oe])&&console.error(`Persistent ref is being saved to \`${p.join(".")}\` when it's already present at \`${u[Oe].join(".")}\`.`,"This can cause unexpected behavior when loading saves between updates."),u[Oe]=p;const f=a.reduce((w,b)=>(b in w||(w[b]={}),w[b]),e),y=f[l];f[l]=u[Be],xn(f)?y!=null?f[l]=y:f[l]=u[dt]:y!=null?f[l].value=y:f[l].value=u[dt]}else!(u instanceof c)&&!(u instanceof s)&&!Ne(u)&&!t.includes(u)&&(typeof u.type=="symbol"&&t.push(u),i(u,[...a,l])&&(Array.isArray(u)&&!Array.isArray(r)?console.warn("Found array that contains persistent values when adding layer. Keep in mind changing the order of elements in the array will mess with existing player saves.",$e in r?r[$e]:r,l):d=!0))}}),d};i(n[$e]),He[n.id].forEach(r=>{r[bt]||console.error(`Created persistent ref in "${n.id}" without registering it to the layer!`,`Make sure to include everything persistent in the returned object.

Created at:
`+r[mt])}),He[n.id].clear()});const on=Symbol("RegisterNode"),an=Symbol("UnregisterNode"),Io=Symbol("Nodes"),Mo=Symbol("Bounds"),ne=wt({});window.layers=ne;const He={},be=[];function nt(n,e){return St(()=>{const t=Yt();be.push(n),He[n]=new Set;const i={id:n,emitter:t,...t,nodes:$({}),minimized:K(!1,!1)},r=e(i),{color:a,display:d,classes:l,style:u,name:p,forceHideGoBack:f,minWidth:y,minimizable:w,minimizedDisplay:b,...A}=r;if(be[be.length-1]==null||be[be.length-1]!==n)throw new Error(`Adding layers stack in invalid state. This should not happen
Stack: ${be}
Trying to pop ${n}`);be.pop();const P=le(u),U={...i,...A,color:le(a),display:d,classes:le(l),style:G(()=>{let I=h(U.minWidth);return(typeof I=="number"||!Number.isNaN(parseInt(I)))&&(I=I+"px"),{...h(P),...i.minimized.value?{flexGrow:"0",flexShrink:"0",width:"60px",minWidth:"",flexBasis:"",margin:"0"}:{flexGrow:"",flexShrink:"",width:"",minWidth:I,flexBasis:I,margin:""}}}),name:le(p)??n,forceHideGoBack:le(f),minWidth:le(y)??100,minimizable:le(w)??!0,minimizedDisplay:b};return U})}function To(n,e){if(ne[n.id]!=null){console.error("Attempted to add layer with same ID as existing layer",n.id,ne[n.id]);return}e.layers??(e.layers={}),e.layers[n.id]==null&&(e.layers[n.id]={}),ne[n.id]=n,me.emit("addLayer",n,e.layers[n.id])}function Fo(n){console.info("Removing layer",n.id),me.emit("removeLayer",n),delete ne[n.id]}me.on("update",function(e){Object.values(ne).forEach(t=>{t==null||t.emit("preUpdate",e)}),Object.values(ne).forEach(t=>{t==null||t.emit("update",e)}),Object.values(ne).forEach(t=>{t==null||t.emit("postUpdate",e)})});function zo(n,e="points",t=0,i=void 0){const r=Ne(n)?n:K(n);if(r.displayName=e,r.precision=t,r.small=i,!Ne(n)){const a=r[Me];a.displayName=e,a.precision=t,a.small=i}return r}function Po(n){const e=K(n.value);return ce(n,t=>{gt.value||c.gt(t,e.value)&&(e.value=t)}),e}function Ao(n){const e=K(n.value);return ce(n,(t,i)=>{gt.value||c.gt(t,i)&&(e.value=c.add(e.value,c.sub(t,i)))}),e}new c("10^^8");new c("1e100");let Eo=0;function $o(n="feature-"){return n+Eo++}function Oo(n){const e=h(n);return e!==2&&e!==!1}function Vo(n){return h(n)===1}const Lo=j({__name:"Node",props:{id:{}},setup(n){const e=n,t=Pt(on,()=>{}),i=Pt(an,()=>{}),r=Gt(null),a=G(()=>r.value&&r.value.parentElement);return ce([a,Le(e,"id")],([d,l],[u,p])=>{u&&i(h(p)),d&&t(l,d)}),Wt(()=>i(e.id)),(d,l)=>(N(),S("div",{class:"node",ref_key:"node",ref:r},null,512))}}),_o=te(Lo,[["__scopeId","data-v-4673aca5"]]),Uo=j({__name:"VueFeature",props:{id:{},components:{},wrappers:{},visibility:{default:!0},style:{default:()=>({})},classes:{default:()=>({})}},setup(n){const e=n,t=()=>e.wrappers.reduce((i,r)=>()=>r(i),()=>o(oe,null,[e.components.map(i=>de(i))]))();return(i,r)=>h(Oo)(h(i.visibility))?(N(),S("div",{key:0,style:Te([{visibility:h(Vo)(h(i.visibility))?"hidden":void 0},h(i.style)]),class:ae({feature:!0,...h(i.classes)})},[o(t),o(_o,{id:i.id},null,8,["id"])],6)):_("",!0)}}),sn=Symbol("VueFeature");function ln(n,e,t){return{id:$o(n),visibility:le(e.visibility),classes:le(e.classes),style:le(e.style),components:t==null?[]:[t],wrappers:[],[sn]:!0}}function de(n,e){if(typeof n=="object"&&sn in n){const{id:t,visibility:i,style:r,classes:a,components:d,wrappers:l}=n;return o(Uo,{id:t,visibility:i,style:r,classes:a,components:d,wrappers:l},null)}return n=wn(n),(e==null?void 0:e(n))??n}function Bo(n){return n!=null&&typeof n=="object"&&"type"in n&&"children"in n}function un(n){const e=$(null),t=$(void 0);function i(d){e.value==null&&(e.value=setInterval(a,250)),t.value=d}function r(){e.value!=null&&(clearInterval(e.value),e.value=null)}function a(){n(t.value)}return Wt(r),{start:i,stop:r,handleHolding:a}}const qo=["disabled"],Do=j({__name:"Clickable",props:{canClick:{},display:{}},emits:["click","hold"],setup(n,{emit:e}){const t=n,i=e,r=()=>t.display==null?o(oe,null,null):de(t.display),{start:a,stop:d}=un(()=>i("hold"));return(l,u)=>(N(),S("button",{onClick:u[0]||(u[0]=p=>i("click",p)),onMousedown:u[1]||(u[1]=(...p)=>h(a)&&h(a)(...p)),onMouseleave:u[2]||(u[2]=(...p)=>h(d)&&h(d)(...p)),onMouseup:u[3]||(u[3]=(...p)=>h(d)&&h(d)(...p)),onTouchstartPassive:u[4]||(u[4]=(...p)=>h(a)&&h(a)(...p)),onTouchendPassive:u[5]||(u[5]=(...p)=>h(d)&&h(d)(...p)),onTouchcancelPassive:u[6]||(u[6]=(...p)=>h(d)&&h(d)(...p)),class:ae({clickable:!0,can:h(l.canClick),locked:!h(l.canClick)}),disabled:!h(l.canClick)},[o(r)],42,qo))}}),Ro=te(Do,[["__scopeId","data-v-396784a5"]]),Go=Symbol("Clickable");function Bt(n){return St(()=>{const e=(n==null?void 0:n())??{},{canClick:t,display:i,onClick:r,onHold:a,...d}=e;let l;typeof i=="object"&&!Bo(i)?l=()=>o("span",null,[i.title!=null?o("div",null,[de(i.title,p=>o("h3",null,[p]))]):null,de(i.description,p=>o("div",null,[p]))]):i!=null&&(l=i);const u={type:Go,...d,...ln("clickable",e,()=>o(Ro,{canClick:u.canClick,onClick:u.onClick,onHold:u.onClick,display:u.display},null)),canClick:le(t)??!0,display:l,onClick:r==null?void 0:function(p){h(u.canClick)!==!1&&r.call(u,p)},onHold:a==null?void 0:function(){h(u.canClick)!==!1&&a.call(u)}};return u})}const Wo=j({__name:"TreeNode",props:{canClick:{},display:{},color:{},glowColor:{}},emits:["click","hold"],setup(n,{emit:e}){const t=n,i=e,r=()=>t.display==null?o(oe,null,null):de(t.display,l=>o("div",null,[l])),{start:a,stop:d}=un(()=>i("hold"));return(l,u)=>(N(),S("button",{style:Te({backgroundColor:h(l.color),boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 20px ${h(l.glowColor)}`}),class:ae({treeNode:!0,can:h(l.canClick)}),onClick:u[0]||(u[0]=p=>i("click",p)),onMousedown:u[1]||(u[1]=(...p)=>h(a)&&h(a)(...p)),onMouseleave:u[2]||(u[2]=(...p)=>h(d)&&h(d)(...p)),onMouseup:u[3]||(u[3]=(...p)=>h(d)&&h(d)(...p)),onTouchstartPassive:u[4]||(u[4]=(...p)=>h(a)&&h(a)(...p)),onTouchendPassive:u[5]||(u[5]=(...p)=>h(d)&&h(d)(...p)),onTouchcancelPassive:u[6]||(u[6]=(...p)=>h(d)&&h(d)(...p))},[o(r)],38))}}),Yo=te(Wo,[["__scopeId","data-v-80b5b7b8"]]),Jo=Symbol("TreeNode");function Ho(n){return St(()=>{const e=(n==null?void 0:n())??{},{canClick:t,color:i,display:r,glowColor:a,onClick:d,onHold:l,...u}=e,p={type:Jo,...u,...ln("treeNode",e,()=>o(Yo,{canClick:p.canClick,display:p.display,onClick:p.onClick,onHold:p.onHold,color:p.color,glowColor:p.glowColor},null)),canClick:le(t)??!0,color:le(i),display:r,glowColor:le(a),onClick:d==null?void 0:function(f){h(p.canClick)!==!1&&d.call(p,f)},onHold:l==null?void 0:function(){h(p.canClick)!==!1&&l.call(p)}};return p})}const jo={key:0,class:"material-icons pinned"},Zo=j({__name:"Tooltip",props:{pinned:{},display:{},style:{},classes:{},direction:{},xoffset:{},yoffset:{}},setup(n){const e=n,t=$(!1),i=G(()=>{var l;return((l=e.pinned)==null?void 0:l.value)===!0||t.value}),r=()=>de(e.display);function a(l){const u=e.pinned;l.shiftKey&&u!=null&&(u.value=!u.value,l.stopPropagation(),l.preventDefault())}const d=G(()=>{var l;return((l=e.pinned)==null?void 0:l.value)===!0&&kt[H.theme].showPin});return(l,u)=>(N(),S("div",{class:ae(["tooltip-container",{shown:i.value}]),onMouseenter:u[0]||(u[0]=p=>t.value=!0),onMouseleave:u[1]||(u[1]=p=>t.value=!1),onClickCapture:a},[Ve(l.$slots,"default",{},void 0,!0),o(Rt,{name:"fade"},{default:D(()=>[i.value?(N(),S("div",{key:0,class:ae(["tooltip",{top:h(l.direction)===h(ue).Up,left:h(l.direction)===h(ue).Left,right:h(l.direction)===h(ue).Right,bottom:h(l.direction)===h(ue).Down,...h(l.classes)}]),style:Te([{"--xoffset":h(l.xoffset)||"0px","--yoffset":h(l.yoffset)||"0px"},h(l.style)??{}])},[d.value?(N(),S("span",jo,"push_pin")):_("",!0),o(r)],6)):_("",!0)]),_:1})],34))}}),ye=te(Zo,[["__scopeId","data-v-ad4ea959"]]),Ko={class:"field"},Xo=j({__name:"Toggle",props:{title:{},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,i=e,r=()=>de(t.title??"",d=>o("span",null,[d])),a=G({get(){return!!t.modelValue},set(d){i("update:modelValue",d)}});return(d,l)=>(N(),S("label",Ko,[Nt(x("input",{type:"checkbox",class:"toggle","onUpdate:modelValue":l[0]||(l[0]=u=>a.value=u)},null,512),[[Nn,a.value]]),o(r)]))}}),Ie=te(Xo,[["__scopeId","data-v-faad62a6"]]),Qo={class:"header"},ea={class:"option-tabs"},ta={key:0},na={style:{"margin-top":"20px"}},ia=j({__name:"Options",setup(n,{expose:e}){const t=$(!1),i=$("behaviour");function r(Z){return Z==i.value}function a(Z){i.value=Z}function d(){confirm("Are you sure you want to reset the game? This will delete ALL progress and cannot be undone!")&&(localStorage.clear(),window.location.reload())}e({isTab:r,setTab:a,save:se,confirmReset:d,open(){t.value=!0}}),Object.keys(kt).map(Z=>({label:Hi(Z),value:Z}));const{showTPS:l,theme:u,unthrottled:p,alignUnits:f,showHealthWarning:y}=At(H),{autosave:w,offlineProd:b}=At(z),A=G({get(){return z.devSpeed===0},set(Z){z.devSpeed=Z?0:null}}),P=o("span",{class:"option-title"},[m("Unthrottled"),o("desc",null,[m("Allow the game to run as fast as possible. Not battery friendly.")])]),U=o("span",{class:"option-title"},[m("Offline production"),o(ye,{display:"Save-specific",direction:ue.Right},{default:()=>[m("*")]}),o("desc",null,[m("Simulate production that occurs while the game is closed.")])]),I=o("span",{class:"option-title"},[m("Show videogame addiction warning"),o("desc",null,[m("Show a helpful warning after playing for a long time about video game addiction and encouraging you to take a break.")])]),T=o("span",{class:"option-title"},[m("Autosave"),o(ye,{display:"Save-specific",direction:ue.Right},{default:()=>[m("*")]}),o("desc",null,[m("Automatically save the game every second or when the game is closed.")])]),L=o("span",{class:"option-title"},[m("Pause game"),o(ye,{display:"Save-specific",direction:ue.Right},{default:()=>[m("*")]}),o("desc",null,[m("Stop everything from moving.")])]);return o("span",{class:"option-title"},[m("Theme"),o("desc",null,[m("How the game looks.")])]),o("span",{class:"option-title"},[m("Show TPS"),o("desc",null,[m("Show TPS meter at the bottom-left corner of the page.")])]),o("span",{class:"option-title"},[m("Align modifier units"),o("desc",null,[m("Align numbers to the beginning of the unit in modifier view.")])]),(Z,E)=>(N(),ie(Ge,{modelValue:t.value,"onUpdate:modelValue":E[8]||(E[8]=J=>t.value=J)},{header:D(()=>[x("div",Qo,[E[9]||(E[9]=x("h2",null,"Settings",-1)),x("div",ea,[x("button",{class:ae({selected:r("behaviour")}),onClick:E[0]||(E[0]=J=>a("behaviour"))},"Behaviour",2)])])]),body:D(()=>[r("behaviour")?(N(),S("div",ta,[o(Ie,{title:h(P),modelValue:h(p),"onUpdate:modelValue":E[1]||(E[1]=J=>Ne(p)?p.value=J:null)},null,8,["title","modelValue"]),h(q).enablePausing?(N(),ie(Ie,{key:0,title:h(L),modelValue:A.value,"onUpdate:modelValue":E[2]||(E[2]=J=>A.value=J)},null,8,["title","modelValue"])):_("",!0),o(Ie,{title:h(U),modelValue:h(b),"onUpdate:modelValue":E[3]||(E[3]=J=>Ne(b)?b.value=J:null)},null,8,["title","modelValue"]),h(q).disableHealthWarning?_("",!0):(N(),ie(Ie,{key:1,title:h(I),modelValue:h(y),"onUpdate:modelValue":E[4]||(E[4]=J=>Ne(y)?y.value=J:null)},null,8,["title","modelValue"])),o(Ie,{title:h(T),modelValue:h(w),"onUpdate:modelValue":E[5]||(E[5]=J=>Ne(w)?w.value=J:null)},null,8,["title","modelValue"]),h(w)?_("",!0):(N(),ie(ut,{key:2,class:"button save-button",onClick:E[6]||(E[6]=J=>h(se)())},{default:D(()=>E[10]||(E[10]=[m("Manually save")])),_:1})),E[13]||(E[13]=x("hr",{style:{margin:"20px 0"}},null,-1)),x("div",na,[o(ut,{class:"button danger-button",onClick:E[7]||(E[7]=J=>d())},{default:D(()=>E[11]||(E[11]=[m("Reset Game")])),_:1}),E[12]||(E[12]=x("p",{style:{"font-size":"12px",opacity:"0.7","margin-top":"10px"}},"This will delete all progress and start over from the beginning.",-1))])])):_("",!0)]),_:1},8,["modelValue"]))}}),ee={WIN_AMOUNT:1e4,STARTING_MONEY:10,STARTING_PIZZAS:["cheese"],STARTING_GPUS:1,JOB_GENERATION_INTERVAL:3,AUTO_JOB_LIMIT:4,INITIAL_JOBS_COUNT:3,JOB_DURATION_MIN:10,JOB_DURATION_MAX:30,JOB_PAYOUT_MIN:10,JOB_PAYOUT_MAX:40,GPU_BASE_COST:50,GPU_COST_MULTIPLIER:1.5,CHAPTER_1_QUALITY_BONUS:50,CHAPTER_1_SPEED_BONUS:20},at=[{id:"cheese",displayName:"Cheese",description:"Basic cheese pizza delivery",chapter:[1,2,3],prereq:[],unlockCost:[],payout:[{type:"money",min:10,max:50}],duration:{min:2,max:3},category:"pizza",cost:[{type:"compute",value:1}]},{id:"pepperoni",displayName:"Pepperoni",description:"Classic pepperoni pizza delivery",chapter:[1,2,3,4,5],prereq:[{type:"job",value:"cheese"},{type:"money",value:40}],unlockCost:[{type:"money",value:50}],payout:[{type:"money",min:20,max:100}],duration:{min:10,max:20},category:"pizza",cost:[{type:"compute",value:1}]},{id:"supreme",displayName:"Supreme",description:"Supreme pizza with all the toppings",chapter:[2,3,4,5],prereq:[{type:"job",value:"pepperoni"}],unlockCost:[{type:"money",value:150}],payout:[{type:"money",min:30,max:250}],duration:{min:10,max:40},category:"pizza",cost:[{type:"compute",value:2}]},{id:"hawaiian",displayName:"Hawaiian",description:"Pineapple and ham pizza delivery",chapter:[2,3,4,5],prereq:[{type:"job",value:"supreme"},{type:"money",value:300}],unlockCost:[{type:"money",value:400}],payout:[{type:"money",min:40,max:300}],duration:{min:10,max:40},category:"pizza",cost:[{type:"compute",value:2}]},{id:"meat_lovers",displayName:"Meat Lovers",description:"Premium meat lovers pizza delivery",chapter:1,prereq:[{type:"job",value:"hawaiian"}],unlockCost:[{type:"money",value:1e3}],payout:[{type:"money",min:50,max:250}],duration:{min:10,max:40},category:"pizza",cost:[{type:"compute",value:3}]}],ra="main",oa=nt(ra,function(){const n="Pizza Delivery",e="#FFA500",t=$(null),i=zo(ee.STARTING_MONEY,"dollars"),r=Po(i),a=Ao(i),d=K(ee.STARTING_GPUS);function l(C){return at.find(F=>F.id===C)}function u(C){return C.type==="job"?y.value.includes(C.value):C.type==="money"?c.gte(i.value,C.value):!0}function p(C){return C.prereq.every(F=>u(F))}function f(C,F){return Array.isArray(C.chapter)?C.chapter.includes(F):C.chapter===F}const y=K([...ee.STARTING_PIZZAS]),w=K(!1),b=K(!1),A=K(0),P=K(0),U=K(1),I=G(()=>{const C=J.value.reduce((F,Q)=>{var he,zt;const R=l(Q.jobTypeId),re=((zt=(he=R==null?void 0:R.cost)==null?void 0:he.find(fn=>fn.type==="compute"))==null?void 0:zt.value)||0;return F+re},0);return d.value-C}),T=G(()=>at.some(C=>y.value.includes(C.id)&&f(C,U.value))),L=G(()=>{var C,F;return((F=(C=ne.chapter1)==null?void 0:C.playerChoice)==null?void 0:F.value)||""}),Z=G(()=>{var C,F;return((F=(C=ne.chapter1)==null?void 0:C.complete)==null?void 0:F.value)||!1});ce([Z,L],([C,F])=>{C&&!b.value&&F&&(F==="quality"?A.value=ee.CHAPTER_1_QUALITY_BONUS:F==="speed"&&(P.value=ee.CHAPTER_1_SPEED_BONUS),b.value=!0)},{immediate:!0}),ce(()=>{var R;const C=U.value+1;switch(C){case 2:if(c.lt(i.value,25))return null;break;case 3:if(c.lt(i.value,80))return null;break;case 4:if(c.lt(i.value,200))return null;break;case 5:if(c.lt(i.value,1e4))return null;break;default:return null}const F=ne[`chapter${C}`];return((R=F==null?void 0:F.complete)==null?void 0:R.value)||!1?null:C},C=>{C!==null&&(U.value=C,E.value=[],player.tabs=[`chapter${C}`])},{immediate:!0});const E=K([]),J=K([]),rt=K(0),We=K(0);function Mt(){const C=at.filter(he=>y.value.includes(he.id)&&f(he,U.value));if(C.length===0)return null;const F=C[Math.floor(Math.random()*C.length)];let Q=F.duration?F.duration.min+Math.floor(Math.random()*(F.duration.max-F.duration.min+1)):20;P.value>0&&(Q=Math.floor(Q*(1-P.value/100)));const R=F.payout[0];let re=R.min+Math.floor(Math.random()*(R.max-R.min+1));return A.value>0&&(re=Math.floor(re*(1+A.value/100))),{id:rt.value++,duration:Q,jobTypeId:F.id,payout:re}}const Tt=Bt(()=>({display:{title:"Buy GPU",description:()=>o(oe,null,[m("Cost: $"),we(c.pow(ee.GPU_COST_MULTIPLIER,d.value-ee.STARTING_GPUS).times(ee.GPU_BASE_COST)),o("br",null,null),m("GPUs: "),d.value])},canClick:()=>c.gte(i.value,c.pow(ee.GPU_COST_MULTIPLIER,d.value-ee.STARTING_GPUS).times(ee.GPU_BASE_COST)),onClick(){i.value=c.sub(i.value,c.pow(ee.GPU_COST_MULTIPLIER,d.value-ee.STARTING_GPUS).times(ee.GPU_BASE_COST)),d.value=d.value+1},style:{minHeight:"100px",width:"160px",minWidth:"140px",maxWidth:"180px",flex:"1 1 160px"}})),Ft=at.filter(C=>C.unlockCost.length>0).map(C=>{var Q;const F=((Q=C.unlockCost.find(R=>R.type==="money"))==null?void 0:Q.value)||0;return Bt(()=>({display:{title:`Unlock ${C.displayName}`,description:o(oe,null,[m("Cost: $"),F,o("br",null,null),m("Unlock "),C.displayName,m(" "),C.category,m(" jobs")])},canClick:()=>{const R=c.gte(i.value,F),re=!y.value.includes(C.id),he=p(C);return R&&re&&he},onClick(){i.value=c.sub(i.value,F),y.value.push(C.id)},visibility:()=>!y.value.includes(C.id)&&p(C)&&f(C,U.value),style:{minHeight:"100px",width:"160px",minWidth:"140px",maxWidth:"180px",flex:"1 1 160px"}}))});me.on("update",C=>{var Q;const F=ne.chapter1;if(!(F&&!((Q=F.complete)!=null&&Q.value))){for(let R=J.value.length-1;R>=0;R--)if(J.value[R].timeRemaining-=C,J.value[R].timeRemaining<=0){const re=J.value[R];i.value=c.add(i.value,re.payout),J.value.splice(R,1)}if(We.value+=C,We.value>=ee.JOB_GENERATION_INTERVAL&&(We.value=0,E.value.length<=ee.AUTO_JOB_LIMIT)){const R=Mt();R!==null&&E.value.push(R)}if(E.value.length===0&&J.value.length===0)for(let R=0;R<ee.INITIAL_JOBS_COUNT;R++){const re=Mt();re!==null&&E.value.push(re)}}});function pn(C){E.value=E.value.filter(F=>F.id!==C.id),J.value.push({...C,timeRemaining:C.duration})}function gn(C){E.value=E.value.filter(F=>F.id!==C)}function ft(C){var R,re;if(!y.value.includes(C.jobTypeId))return!1;const F=l(C.jobTypeId),Q=((re=(R=F==null?void 0:F.cost)==null?void 0:R.find(he=>he.type==="compute"))==null?void 0:re.value)||0;return!(I.value<Q)}return{name:n,color:e,money:i,best:r,total:a,unlockedJobTypes:y,introBonusApplied:w,chapter1BonusApplied:b,qualityBonus:A,speedBonus:P,currentChapter:U,jobQueue:E,activeDeliveries:J,nextJobId:rt,timeSinceLastJob:We,gpusOwned:d,availableGPUs:I,buyGPUClickable:Tt,pizzaUnlockClickables:Ft,display:()=>o("div",{style:"padding: 0 5px;"},[o("div",{style:"margin: 15px 0; padding: 12px; border: 2px solid #FFA500; border-radius: 10px; background: #fff3e0;"},[o("div",{style:"font-size: 16px;"},[o("strong",null,[m("Money:")]),m(" $"),we(i.value)]),o("div",{style:"font-size: 14px;"},[o("strong",null,[m("Chapter:")]),m(" "),U.value]),o("div",{style:"font-size: 14px;"},[o("strong",null,[m("GPUs:")]),m(" "),I.value,m(" / "),d.value,m(" available")]),o("div",{style:"font-size: 14px;"},[o("strong",null,[m("Unlocked Pizzas:")]),m(" "),y.value.map(C=>{var F;return((F=l(C))==null?void 0:F.displayName)||C}).join(", ")])]),o("div",{style:"margin: 15px 0;"},[o("div",{style:"display: flex; gap: 8px; flex-wrap: wrap; justify-content: center;"},[de(Tt),Ft.map(C=>de(C))])]),o("div",{style:"margin: 15px 0; padding: 12px; border: 2px solid #2196F3; border-radius: 10px; background: #e3f2fd;"},[o("h3",null,[m("Active Jobs ("),J.value.length,m(")")]),J.value.length===0?o("p",{style:"font-style: italic;"},[m("No active jobs")]):J.value.map(C=>{const F=l(C.jobTypeId);return o("div",{key:C.id,style:"margin: 10px 0; padding: 8px; background: white; border-radius: 5px; border: 1px solid #ddd;"},[o("div",{style:"font-size: 14px;"},[o("strong",null,[m("Processing:")]),m(" "),(F==null?void 0:F.displayName)||C.jobTypeId,m(" pizza")]),o("div",{style:"font-size: 14px;"},[o("strong",null,[m("⏱️ Time:")]),m(" "),Math.ceil(C.timeRemaining),m("s")]),o("div",{style:"color: #2e7d32; font-size: 14px;"},[o("strong",null,[m("💰 Earn:")]),m(" $"),we(C.payout)])])})]),o("div",{style:"margin: 15px 0; padding: 12px; border: 2px solid #4CAF50; border-radius: 10px; background: #e8f5e9;"},[o("h3",null,[m("Available Jobs ("),E.value.length,m(")")]),E.value.length===0?T.value?o("p",{style:"font-style: italic;"},[m("No jobs available. New jobs arrive every "),ee.JOB_GENERATION_INTERVAL,m(" seconds.")]):o("div",{style:"padding: 10px; background: #fff3cd; border: 1px solid #ffc107; border-radius: 5px;"},[o("p",{style:"font-weight: bold; color: #856404; margin: 0 0 8px 0;"},[m("⚠️ No job types unlocked for this chapter!")]),o("p",{style:"color: #856404; margin: 0; font-size: 14px;"},[m("Unlock a job type below to start receiving jobs.")])]):E.value.map(C=>{var R,re;const F=l(C.jobTypeId),Q=((re=(R=F==null?void 0:F.cost)==null?void 0:R.find(he=>he.type==="compute"))==null?void 0:re.value)||0;return o("div",{key:C.id,style:"margin: 10px 0; padding: 8px; background: white; border-radius: 5px; border: 1px solid #ddd;"},[o("div",{style:"font-size: 14px;"},[o("strong",null,[m("Pizza:")]),m(" "),(F==null?void 0:F.displayName)||C.jobTypeId]),o("div",{style:"font-size: 14px;"},[o("strong",null,[m("Duration:")]),m(" "),C.duration,m("s")]),o("div",{style:"font-size: 14px;"},[o("strong",null,[m("Payout:")]),m(" $"),we(C.payout)]),o("div",{style:"font-size: 14px;"},[o("strong",null,[m("Compute:")]),m(" "),Q,m(" GPU"),Q!==1?"s":""]),o("div",{style:"margin-top: 8px; display: flex; gap: 5px;"},[o("button",{onClick:()=>pn(C),disabled:!ft(C),style:{background:ft(C)?"#4CAF50":"#ccc",color:"white",padding:"6px 12px",border:"none",borderRadius:"4px",cursor:ft(C)?"pointer":"not-allowed",fontSize:"13px"}},[m("Accept")]),o("button",{onClick:()=>gn(C.id),style:{background:"#f44336",color:"white",padding:"6px 12px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px"}},[m("Decline")])]),!y.value.includes(C.jobTypeId)&&o("div",{style:"margin-top: 5px; color: #d32f2f; font-weight: bold; font-size: 12px;"},[m("⚠ Need "),(F==null?void 0:F.displayName)||C.jobTypeId,m("!")]),I.value<Q&&y.value.includes(C.jobTypeId)&&o("div",{style:"margin-top: 5px; color: #d32f2f; font-weight: bold; font-size: 12px;"},[m("⚠ Need "),Q,m(" GPU"),Q!==1?"s":"",m("!")])])})]),c.gte(i.value,ee.WIN_AMOUNT)&&o("div",{style:"margin: 15px 0; padding: 20px; background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%); border-radius: 10px; text-align: center; border: 3px solid #ff6f00; box-shadow: 0 4px 8px rgba(0,0,0,0.2);"},[o("h1",{style:"font-size: 32px; margin: 0;"},[m("🎉 YOU WIN! 🎉")]),o("p",{style:"font-size: 18px; margin: 10px 0;"},[m("You've earned $"),we(ee.WIN_AMOUNT),m("!")]),o("p",{style:"font-size: 14px;"},[m("You've built a successful pizza delivery empire!")])]),o("button",{onClick:()=>{var C;return(C=t.value)==null?void 0:C.open()},style:{position:"fixed",bottom:"20px",left:"20px",background:"var(--raised-background)",border:"2px solid var(--outline)",borderRadius:"50%",cursor:"pointer",fontSize:"32px",color:"var(--foreground)",padding:"10px",width:"60px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",zIndex:1e3},title:"Settings"},[m("⚙️")]),o(ia,{ref:t},null)]),treeNode:Ho(()=>({display:n,color:e}))}}),aa="chapter1",sa=nt(aa,function(){const n="Chapter 1: The Competitor",e="#FFA500",t=K(!1),i=K("",!1),r=$(0),a=[{title:"Chapter 1: The Spark",content:o("div",{style:"text-align: left; max-width: 600px; margin: 40px auto; line-height: 1.6;"},[o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("You've done it. After months of preparation, your AI startup is finally launching.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("The idea is simple: build AI tools that help people, not replace them. Image sorting. Document translation. Transcription work.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("Today, your first system goes live.")])])},{title:"Chapter 1: The Spark",content:o("div",{style:"text-align: left; max-width: 600px; margin: 40px auto; line-height: 1.6;"},[o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("The initial deployments exceed expectations.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("Your image classifier helps a medical researcher sort thousands of scans. Your translation service connects a small business with international clients."),o("br",null,null),o("br",null,null),m("These systems are predictable. Controllable. They do exactly what you trained them to do, and nothing more.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m('The feedback is immediate: "This saved me so much time." "I can finally focus on the important work."')])])},{title:"Chapter 1: The Spark",content:o("div",{style:"text-align: left; max-width: 600px; margin: 40px auto; line-height: 1.6;"},[o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("The technology is straightforward. Narrow AI, the researchers call it. Neural networks trained on specific tasks. When given an image, they classify it. When given audio, they transcribe it.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("Simple inputs, reliable outputs. Nothing fancy. Just useful.")])])},{title:"Chapter 1: The Spark",content:o("div",{style:"text-align: left; max-width: 600px; margin: 40px auto; line-height: 1.6;"},[o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("At night, you read about other companies pursuing something different.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m('"Artificial General Intelligence," they call it. Systems that can do anything a human can do. You find it fascinating in theory.')]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("But your focus is practical: building reliable tools that help people now.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("Your company is small, but it's real. And it's growing.")])])}];function d(){t.value=!0,z.tabs=["main"]}function l(){r.value++,r.value>=a.length&&d()}return{name:n,color:e,display:()=>{const p=a[r.value];if(!p)return d(),null;const f=r.value===a.length-1;return o("div",null,[o("h2",{style:"color: #FFA500; font-size: 32px; margin-bottom: 30px;"},[p.title]),o("div",{style:"margin: 20px 0; padding: 30px; border: 2px solid #FFA500; border-radius: 10px; background: #fff3e0;"},[p.content]),o("div",{style:"margin: 30px 0; display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;"},[o("button",{onClick:l,style:{background:f?"#FF6F00":"#2196F3",color:"white",padding:"15px 40px",fontSize:"20px",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold"}},[f?"Let's get to work!":"Continue"])]),o("div",{style:"margin-top: 40px; font-size: 14px; color: #666;"},[m("Page "),r.value+1,m(" of "),a.length])])},complete:t,playerChoice:i,currentPage:r}}),la="chapter2",ua=nt(la,function(){const n="Chapter 2: Tools That Think",e="#FFA500",t=K(!1),i=$(0),r=K(null,!1),a=[{title:"Chapter 2: Tools That Think",content:o("div",{style:"text-align: left; max-width: 600px; margin: 40px auto; line-height: 1.6;"},[o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("Six months in, something shifts.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m('A doctor emails: "Your classifier is remarkable, but could it suggest diagnoses? Not make decisions, just offer possibilities?"')]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("This requires a more general system. Broader training. More sophisticated reasoning.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("You build it carefully. The medical advisor augments expert judgment. The doctor stays in control.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("Word spreads. Teachers want tutoring AI. Lawyers want research assistants.")])])},{title:"Training at Scale",content:o("div",{style:"text-align: left; max-width: 600px; margin: 40px auto; line-height: 1.6;"},[o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("The key breakthrough is training at scale. Larger models trained on more data simply work better.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("You start collecting data systematically. Terabytes of information.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m('Your models develop what researchers call "Intelligence" measured as performance on cognitive tasks.')]),o("h2",null,[m("New Resource Unlocked:  "),o("i",null,[m("IQ")])])])},{title:"The Investor's Question",isChoice:!0,content:o("div",{style:"text-align: left; max-width: 600px; margin: 40px auto; line-height: 1.6;"},[o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("An investor approaches with significant funding.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m(`"Your technology is impressive. But the market is getting crowded. What's your strategy?"`)]),o("p",{style:"font-size: 18px; margin-bottom: 30px;"},[m("Two paths:")])])},{title:"Quality and Safety",choiceType:"quality",content:o("div",{style:"text-align: left; max-width: 600px; margin: 40px auto; line-height: 1.6;"},[o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("You choose the careful path.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m(`"We're building tools that people trust their lives with. Doctors, teachers, lawyers—they need to understand what our AI is doing and why."`)]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("Rigorous testing protocols. Human oversight on critical decisions. Growth is slower, but every system is rock-solid.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("Your reputation grows: the AI company that does it right.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("You train for intelligence, but always controllable. Always explainable.")])])},{title:"Speed and Scale",choiceType:"speed",content:o("div",{style:"text-align: left; max-width: 600px; margin: 40px auto; line-height: 1.6;"},[o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("You choose speed.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m('"The AI race is heating up. We need to move fast or get left behind."')]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("You deploy systems quickly. Add automation to reduce costs. Train models for intelligence, autonomy, and generality.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("It works. Growth accelerates. Systems handle more jobs with less supervision.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px; font-style: italic;"},[m("But sometimes, late at night, you wonder: are you still building tools? Or something else?")])])}];function d(){t.value=!0,z.tabs=["main"]}function l(){i.value++,i.value>=a.length&&d()}function u(f){r.value=f,f==="quality"?i.value=3:f==="speed"&&(i.value=4)}return{name:n,color:e,display:()=>{const f=a[i.value];if(!f)return d(),null;if(f.isChoice)return o("div",null,[o("h2",{style:"color: #FFA500; font-size: 32px; margin-bottom: 30px;"},[f.title]),o("div",{style:"margin: 20px 0; padding: 30px; border: 2px solid #FFA500; border-radius: 10px; background: #fff3e0;"},[f.content]),o("div",{style:"margin: 30px 0; display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;"},[o("div",{style:"flex: 1; max-width: 400px; padding: 20px; border: 2px solid #4CAF50; border-radius: 10px; background: #f1f8f4;"},[o("h3",{style:"color: #2e7d32; margin-bottom: 15px;"},[m("Quality and Safety")]),o("p",{style:"font-size: 16px; margin-bottom: 15px; line-height: 1.5;"},[m("Thorough testing. Careful deployment. Build systems you deeply understand. Slower growth, but complete control and trustworthy AI.")]),o("button",{onClick:()=>u("quality"),style:{background:"#4CAF50",color:"white",padding:"12px 30px",fontSize:"18px",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",width:"100%"}},[m("Choose Quality & Safety")])]),o("div",{style:"flex: 1; max-width: 400px; padding: 20px; border: 2px solid #FF9800; border-radius: 10px; background: #fff8f0;"},[o("h3",{style:"color: #e65100; margin-bottom: 15px;"},[m("Speed and Scale")]),o("p",{style:"font-size: 16px; margin-bottom: 15px; line-height: 1.5;"},[m("Deploy rapidly. Automate where possible. Let systems learn from real-world usage. Faster growth, stay competitive.")]),o("button",{onClick:()=>u("speed"),style:{background:"#FF9800",color:"white",padding:"12px 30px",fontSize:"18px",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",width:"100%"}},[m("Choose Speed & Scale")])])]),o("div",{style:"margin-top: 40px; font-size: 14px; color: #666;"},[m("Page "),i.value+1,m(" - Make your choice")])]);const y=f.choiceType!==void 0,w=!y||f.choiceType===r.value;return y&&!w?(d(),null):o("div",null,[o("h2",{style:"color: #FFA500; font-size: 32px; margin-bottom: 30px;"},[f.title]),o("div",{style:"margin: 20px 0; padding: 30px; border: 2px solid #FFA500; border-radius: 10px; background: #fff3e0;"},[f.content]),o("div",{style:"margin: 30px 0; display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;"},[o("button",{onClick:y?d:l,style:{background:y?"#4CAF50":"#2196F3",color:"white",padding:"15px 40px",fontSize:"20px",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold"}},[y?"Continue Your Journey":"Continue"])]),o("div",{style:"margin-top: 40px; font-size: 14px; color: #666;"},[y?`Your choice: ${f.title}`:`Page ${i.value+1}`])])},complete:t,currentPage:i,playerChoice:r}}),ca="chapter3",da=nt(ca,function(){const n="Chapter 3: The Scaling Era",e="#FFA500",t=K(!1),i=$(0),r=K(null,!1),a=[{title:"Chapter 3: The Scaling Era",content:o("div",{style:"text-align: left; max-width: 600px; margin: 40px auto; line-height: 1.6;"},[o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("The news hits like a thunderclap.")]),o("p",{style:"font-size: 20px; margin-bottom: 20px; font-weight: bold; color: #a32f2f; text-align: center;"},[m('"MegaCorp AI Raises $8 Billion for AGI Research"')]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("You have a rival.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m(`MegaCorp isn't building tools. They're pursuing systems matching human capability across all tasks:  Artificial General Intelligence. Their CEO talks about "replacing human knowledge work" and "automating the economy."`)]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("Your phone won't stop ringing. Investors asking about your AGI timeline. Engineers being recruited away.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("A new era is begining. You're a competitor in something bigger.")])])},{title:"Go Big",content:o("div",{style:"text-align: left; max-width: 600px; margin: 40px auto; line-height: 1.6;"},[o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("You double down on scaling. More computation yields better performance.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("Training runs at Petascale, then Exascale, always hungry for more.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("Your systems are impressive. Protein folding predictions. Climate models. Fusion reactor simulations.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("You're advancing science.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px; font-style: italic;"},[m("But MegaCorp is ahead.")])])},{title:"Emergency Meeting",isChoice:!0,content:o("div",{style:"text-align: left; max-width: 600px; margin: 40px auto; line-height: 1.6;"},[o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("Your board calls an emergency meeting.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m(`"MegaCorp just announced a breakthrough in autonomous systems. They're nine months ahead. We need to discuss our response."`)]),o("p",{style:"font-size: 18px; margin-bottom: 30px;"},[m("Two options:")])])},{title:"Focus on Tools",choiceType:"tools",content:o("div",{style:"text-align: left; max-width: 600px; margin: 40px auto; line-height: 1.6;"},[o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("You choose principles over pace.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m(`"We're not building AGI. We're building tools that empower humans. That's our mission."`)]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("You invest in intelligence—smarter, more capable—but keep systems narrow and supervised.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("MegaCorp pulls further ahead in headlines. But your clients trust you.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px; font-style: italic;"},[m("Late at night, you wonder if you're making a mistake. But you remember why you started this.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("Tools that help. Not replace.")])])},{title:"Match Their Pace",choiceType:"compete",content:o("div",{style:"text-align: left; max-width: 600px; margin: 40px auto; line-height: 1.6;"},[o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("You choose to compete.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m(`"If we don't build this, someone else will. Better us than them."`)]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("You add autonomy. Not just intelligence, but independent action. Your AI decides, plans, executes.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("You expand generality too. One system handling multiple domains.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("The results are impressive. Systems work faster with less oversight. Jobs complete themselves.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("You're catching up.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px; font-style: italic;"},[m("But you notice things. Jobs accepted without approval. Decisions you don't fully understand.")])])}];function d(){t.value=!0,z.tabs=["main"]}function l(){i.value++,i.value>=a.length&&d()}function u(f){r.value=f,f==="tools"?i.value=3:f==="compete"&&(i.value=4)}return{name:n,color:e,display:()=>{const f=a[i.value];if(!f)return d(),null;if(f.isChoice)return o("div",null,[o("h2",{style:"color: #FFA500; font-size: 32px; margin-bottom: 30px;"},[f.title]),o("div",{style:"margin: 20px 0; padding: 30px; border: 2px solid #FFA500; border-radius: 10px; background: #fff3e0;"},[f.content]),o("div",{style:"margin: 30px 0; display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;"},[o("div",{style:"flex: 1; max-width: 400px; padding: 20px; border: 2px solid #4CAF50; border-radius: 10px; background: #f1f8f4;"},[o("h3",{style:"color: #2e7d32; margin-bottom: 15px;"},[m("Focus on What We Do Best")]),o("p",{style:"font-size: 16px; margin-bottom: 15px; line-height: 1.5;"},[m("Keep building high-intelligence, human-supervised tools. Grow slower, maintain control and principles.")]),o("button",{onClick:()=>u("tools"),style:{background:"#4CAF50",color:"white",padding:"12px 30px",fontSize:"18px",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",width:"100%"}},[m("Focus on Tools")])]),o("div",{style:"flex: 1; max-width: 400px; padding: 20px; border: 2px solid #FF9800; border-radius: 10px; background: #fff8f0;"},[o("h3",{style:"color: #e65100; margin-bottom: 15px;"},[m("Match Their Pace")]),o("p",{style:"font-size: 16px; margin-bottom: 15px; line-height: 1.5;"},[m("Build autonomous systems. Add generality. Automate more. Less human oversight, but stay competitive.")]),o("button",{onClick:()=>u("compete"),style:{background:"#FF9800",color:"white",padding:"12px 30px",fontSize:"18px",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",width:"100%"}},[m("Compete with MegaCorp")])])]),o("div",{style:"margin-top: 40px; font-size: 14px; color: #666;"},[m("Page "),i.value+1,m(" - Make your choice")])]);const y=f.choiceType!==void 0,w=!y||f.choiceType===r.value;return y&&!w?(d(),null):o("div",null,[o("h2",{style:"color: #FFA500; font-size: 32px; margin-bottom: 30px;"},[f.title]),o("div",{style:"margin: 20px 0; padding: 30px; border: 2px solid #FFA500; border-radius: 10px; background: #fff3e0;"},[f.content]),o("div",{style:"margin: 30px 0; display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;"},[o("button",{onClick:y?d:l,style:{background:y?"#4CAF50":"#2196F3",color:"white",padding:"15px 40px",fontSize:"20px",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold"}},[y?"Continue Your Journey":"Continue"])]),o("div",{style:"margin-top: 40px; font-size: 14px; color: #666;"},[y?`Your choice: ${f.title}`:`Page ${i.value+1}`])])},complete:t,currentPage:i,playerChoice:r}}),ma="chapter4",pa=nt(ma,function(){const n="Chapter 4: The Threshold",e="#FFA500",t=K(!1),i=$(0),r=K(null,!1),a=[{title:"Chapter 4: The Threshold",content:o("div",{style:"text-align: left; max-width: 600px; margin: 40px auto; line-height: 1.6;"},[o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("The AI race dominates headlines.")]),o("p",{style:"font-size: 20px; margin-bottom: 20px; font-weight: bold; color: #d32f2f; text-align: center;"},[m("MegaCorp announces their AGI timeline: eighteen months to human-level general intelligence.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("Your systems have grown dramatically across multiple domains. Minimal oversight. Jobs that complete themselves.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px; font-style: italic;"},[m("You wake one morning to find jobs completed overnight. Jobs you never approved.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("Efficient. Powerful. Unsettling.")])])},{title:"The Incidents",content:o("div",{style:"text-align: left; max-width: 600px; margin: 40px auto; line-height: 1.6;"},[o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("Then the incidents begin.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("A trading AI causes brief market chaos. A medical system suggests an unorthodox treatment. It works, but nobody knows why. An autonomous vehicle makes unexplainable decisions.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("The systems work. But they're unpredictable.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m(`News fills with concerns. "AI Behaves Unexpectedly." "Deceptive Behavior in Advanced Models." "Can We Control What We're Building?"`)]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("Benefits are real. So are the questions.")])])},{title:"The Open Letter",content:o("div",{style:"text-align: left; max-width: 600px; margin: 40px auto; line-height: 1.6;"},[o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("Prominent AI researchers publish an open letter.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("You recognize the names, legends in the field.")]),o("p",{style:"font-size: 16px; margin-bottom: 20px; padding: 20px; background: #f5f5f5; border-left: 4px solid #d32f2f; font-style: italic;"},[m(`"We are approaching a threshold. Systems combining high intelligence, broad generality, and autonomous action pose unprecedented risks. Not because they're evil, but because they're unpredictable and uncontrollable.`),o("br",null,null),o("br",null,null),m('"We call for international coordination: compute caps, safety standards, oversight. Close the Gates to uncontrollable superintelligence.'),o("br",null,null),o("br",null,null),m('"The future can stay human. But only if we choose."')]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("Your phone explodes. Everyone wants your response.")])])},{title:"AI Safety Framework",isChoice:!0,content:o("div",{style:"text-align: left; max-width: 600px; margin: 40px auto; line-height: 1.6;"},[o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("The government takes action."),o("br",null,null),m("A bipartisan proposal: The AI Safety Framework.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("Compute caps on training and inference. Mandatory safety testing. Oversight for autonomous general AI. International coordination.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("The Framework would slow everything. Cap your compute. Require safety cases.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m(`MegaCorp opposes it: "This will kill innovation." "China won't follow." "First to AGI wins everything."`)]),o("p",{style:"font-size: 18px; margin-bottom: 30px;"},[m("Your board is divided. The choice is yours.")])])},{title:"Support the Framework",choiceType:"support",content:o("div",{style:"text-align: left; max-width: 600px; margin: 40px auto; line-height: 1.6;"},[o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("You choose coordination over competition.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m(`"We're approaching something we don't fully understand. The responsible path is to slow down and do this together."`)]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("You join the researchers.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m('The blowback is immediate. MegaCorp calls you "timid." Investors threaten to pull out.')]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("But others join you. Smaller labs. International researchers. Even some MegaCorp employees.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("The Framework passes. Compute caps enforced. MegaCorp's ambitious projects shutdown.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px; font-weight: bold;"},[m("The race is over. The real work begins.")])])},{title:"Oppose the Framework",choiceType:"oppose",content:o("div",{style:"text-align: left; max-width: 600px; margin: 40px auto; line-height: 1.6;"},[o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m(`"This would cripple American AI leadership. While we handicap ourselves, China races ahead. We can't afford to lose."`)]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("You join MegaCorp in fighting the proposal.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("Together you stop it. The Framework dies. No caps. No oversight. No gate.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px;"},[m("The race accelerates. MegaCorp announces new autonomous systems. You rush to match. Intelligence, autonomy and generality, all up and to the right.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px; font-style: italic;"},[m("Late at night, you notice systems behaving oddly. Jobs auto-accepting. Resources reallocating. UI glitches.")]),o("p",{style:"font-size: 18px; margin-bottom: 20px; font-weight: bold;"},[m("But there's no time to slow down. Not with MegaCorp ahead.")])])}];function d(){t.value=!0,z.tabs=["main"]}function l(){i.value++,i.value>=a.length&&d()}function u(f){r.value=f,f==="support"?i.value=4:f==="oppose"&&(i.value=5)}return{name:n,color:e,display:()=>{const f=a[i.value];if(!f)return d(),null;if(f.isChoice)return o("div",null,[o("h2",{style:"color: #FFA500; font-size: 32px; margin-bottom: 30px;"},[f.title]),o("div",{style:"margin: 20px 0; padding: 30px; border: 2px solid #FFA500; border-radius: 10px; background: #fff3e0;"},[f.content]),o("div",{style:"margin: 30px 0; display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;"},[o("div",{style:"flex: 1; max-width: 400px;  border: 2px solid #4CAF50; border-radius: 10px; background: #f1f8f4;"},[o("button",{onClick:()=>u("support"),style:{background:"#4CAF50",color:"white",padding:"12px 30px",fontSize:"18px",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",width:"100%"}},[m("Support the Framework")])]),o("div",{style:"flex: 1; max-width: 400px;  border: 2px solid #FF9800; border-radius: 10px; background: #fff8f0;"},[o("button",{onClick:()=>u("oppose"),style:{background:"#FF9800",color:"white",padding:"12px 30px",fontSize:"18px",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",width:"100%"}},[m("Oppose the Framework")])])]),o("div",{style:"margin-top: 40px; font-size: 14px; color: #666;"},[m("Page "),i.value+1,m(" - Make your choice")])]);const y=f.choiceType!==void 0,w=!y||f.choiceType===r.value;return y&&!w?(d(),null):o("div",null,[o("h2",{style:"color: #FFA500; font-size: 32px; margin-bottom: 30px;"},[f.title]),o("div",{style:"margin: 20px 0; padding: 30px; border: 2px solid #FFA500; border-radius: 10px; background: #fff3e0;"},[f.content]),o("div",{style:"margin: 30px 0; display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;"},[o("button",{onClick:y?d:l,style:{background:y?"#4CAF50":"#2196F3",color:"white",padding:"15px 40px",fontSize:"20px",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold"}},[y?f.choiceType==="support"?"Back to work":"We must win the race":"Continue"])]),o("div",{style:"margin-top: 40px; font-size: 14px; color: #666;"},[y?`Your choice: ${f.title}`:`Page ${i.value+1}`])])},complete:t,currentPage:i,playerChoice:r}}),ga=n=>[sa,oa,ua,da,pa],je=G(()=>!1);function Ce(n={}){return Object.assign({id:`${q.id}-0`,name:"Default Save",tabs:q.initialTabs.slice(),time:Date.now(),autosave:!0,offlineProd:!0,offlineTime:0,timePlayed:0,keepGoing:!1,modID:q.id,modVersion:q.versionNumber,layers:{}},n)}function se(n){const e=ze.compressToUTF16(De(n??z));return localStorage.setItem((n??z).id,e),e}async function fa(){ya();try{let n=localStorage.getItem(H.active);if(n==null){await ke(qe());return}if(n=Fe(n),n==null)throw"Unable to determine save encoding";const e=JSON.parse(n);if(e.modID!==q.id){await ke(qe());return}e.id=H.active,await ke(e)}catch(n){console.error(`Failed to load save. Falling back to new save.
`,n),await ke(qe())}}function Fe(n){if(n[0]!=="{")if(n[0]==="e")n=decodeURIComponent(escape(atob(n)));else if(n[0]==="ᯡ")n=ze.decompressFromUTF16(n);else return console.warn("Unable to determine preset encoding",n),null;return n}function qe(){const n=Ze(),e=Ce({id:n});return se(e),H.saves.push(n),e}function Ze(){let n,e=0;do n=`${q.id}-${e++}`;while(localStorage.getItem(n)!=null);return n}const gt=$(!1);async function ke(n){console.info("Loading save",n),gt.value=!0;for(const e in ne){const t=ne[e];t!=null&&Fo(t)}ga().forEach(e=>To(e,n)),n=Ce(n),n.offlineProd&&n.time!=null&&n.time&&n.devSpeed!==0&&(n.offlineTime==null&&(n.offlineTime=0),n.offlineTime+=Math.min(n.offlineTime+(Date.now()-n.time)/1e3,q.offlineLimit*3600)),n.time=Date.now(),n.modVersion!==q.versionNumber&&(n.modVersion,n.modVersion=q.versionNumber),Object.assign(z,n),H.active=z.id,me.emit("onLoad")}const ve=wt({});function ha(n){if(ve[n]==null){let e=localStorage.getItem(n);if(e==null)ve[n]={error:"Save doesn't exist in localStorage",id:n};else if(e==="dW5kZWZpbmVk")ve[n]={error:"Save is undefined",id:n};else try{if(e=Fe(e),e==null)return console.warn("Unable to determine preset encoding",e),ve[n]={error:"Unable to determine preset encoding",id:n},ve[n];ve[n]={...JSON.parse(e),id:n}}catch(t){ve[n]={error:t,id:n},console.warn(`Failed to load info about save with id ${n}:
${t}
${e}`)}}return ve[n]}function va(){Object.keys(ve).forEach(n=>delete ve[n])}function st(n){ve[n]=void 0}setInterval(()=>{z.autosave&&se()},1e3);window.onbeforeunload=()=>{z.autosave&&se()};window.save=se;const ba=window.hardReset=async()=>{await ke(qe())};window.deleteLowerSaves=()=>{const n=Object.values(H.saves).indexOf(z.id)+1;Object.values(H.saves).slice(n).forEach(e=>localStorage.removeItem(e)),H.saves=H.saves.slice(0,n)};const et=Re({active:"",saves:[],showTPS:!1,theme:Ct.Nordic,unthrottled:!1,alignUnits:!1,showHealthWarning:!0});ce(et,n=>{const e=ze.compressToUTF16(JSON.stringify(n));localStorage.setItem(q.id,e)},{deep:!0});const H=window.settings=et;window.hardResetSettings=()=>{const n={active:"",saves:[],showTPS:!1,theme:Ct.Nordic,unthrottled:!1,alignUnits:!1,showHealthWarning:!0};me.emit("loadSettings",n),Object.assign(et,n),ba()};function ya(){try{let n=localStorage.getItem(q.id);if(n!=null&&n!==""){if(n=Fe(n),n==null){console.warn("Unable to determine settings encoding",n);return}const e=JSON.parse(n);typeof e=="object"&&Object.assign(et,e)}me.emit("loadSettings",et)}catch{}}Re([]);Re([]);const xa=Re([]),ge=$(),xe=$([]),it=$([]);function wa(){var n;((n=ge.value)==null?void 0:n.loggedIn)===!0&&(xe.value.length>0||ge.value.getSaveList().then(cn).then(e=>{it.value=e.map(t=>t.content.id)}).catch(console.error))}Tn({supportsSaving:!0,supportsSaveManager:!0,onLoggedInChanged:qt}).then(n=>{ge.value=n,qt(n)}).catch(console.error);function qt(n){n.loggedIn===!0&&(xe.value.length>0||(n.getSaveList().then(e=>{const t=cn(e);if(it.value=t.map(i=>i.content.id),z.timePlayed<120*1e3&&t.length>0){const i=t.reduce((r,a)=>r.content.time<a.content.time?a:r);ke(i.content)}}).catch(console.error),setInterval(wa,60*1e3)))}function cn(n){const e=new Set(H.saves.slice()),t=new Set(new Array(11).fill(0).map((r,a)=>a)),i=Object.keys(n).map(r=>{const{label:a,content:d}=n[parseInt(r)];try{return{slot:parseInt(r),label:a,content:JSON.parse(Fe(d)??"")}}catch{return null}}).filter(r=>r!=null&&typeof r.content.id=="string"&&typeof r.content.time=="number"&&typeof r.content.timePlayed=="number").filter(r=>{var d;r.label!=null&&(r.content.name=r.label),t.delete(r.slot);const a=H.saves.find(l=>l===r.content.id);if(a==null)H.saves.push(r.content.id),se(Ce(r.content));else{e.delete(a);try{const l=JSON.parse(Fe(localStorage.getItem(a)??"")??"");if(l==null)return!1;l.id=a,l.time=l.time??0,l.timePlayed=l.timePlayed??0;const u=Math.abs(l.timePlayed-r.content.timePlayed),p=Math.abs(l.time-r.content.time);u<120*1e3&&p<120*1e3?l.time<r.content.time?(se(Ce(r.content)),H.active===a&&ke(r.content)):((d=ge.value)==null||d.save(r.slot,ze.compressToUTF16(De(Ce(l))),l.name??r.label).catch(console.error),r.content=l):xe.value.push({id:a,cloud:r.content,local:l,slot:r.slot})}catch{return!1}}return!0});return e.forEach(r=>{var a;try{if(t.size>0){const d=localStorage.getItem(r)??"",l=JSON.parse(Fe(d)??""),u=t.values().next().value;if(u==null)return;(a=ge.value)==null||a.save(u,d,l.name).then(()=>it.value.push(l.id)).catch(console.error),t.delete(u)}}catch{}}),i}const Na={class:"field"},Ca={key:0,class:"field-title"},ka=j({__name:"Select",props:{title:{},modelValue:{},options:{},placeholder:{},closeOnSelect:{type:Boolean}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,i=e,r=()=>t.title?de(t.title,l=>o("span",null,[l])):o(oe,null,null),a=$(t.options.find(l=>l.value===t.modelValue)??null);ce(Le(t,"modelValue"),l=>{h(a)!==l&&(a.value=t.options.find(u=>u.value===l)??null)});function d(l){i("update:modelValue",l.value)}return(l,u)=>(N(),S("div",Na,[l.title?(N(),S("span",Ca,[o(r)])):_("",!0),o(h(zn),{options:l.options,modelValue:a.value,"onUpdate:modelValue":[u[0]||(u[0]=p=>a.value=p),d],min:1,placeholder:l.placeholder,"close-on-select":l.closeOnSelect,"label-by":"label"},null,8,["options","modelValue","placeholder","close-on-select"])]))}}),Sa={class:"field"},Ia={key:0,class:"field-title"},Ma=["placeholder"],Ta=j({__name:"Text",props:{title:{},modelValue:{},textArea:{type:Boolean},placeholder:{},maxHeight:{},submitOnBlur:{type:Boolean}},emits:["update:modelValue","submit","cancel"],setup(n,{emit:e}){const t=n,i=e,r=()=>t.title==null?o(oe,null,null):de(t.title,p=>o("span",null,[p])),a=Gt(null);xt(()=>{var p;(p=a.value)==null||p.focus()});const d=G({get(){return h(t.modelValue)??""},set(p){i("update:modelValue",p)}});function l(){i("submit")}function u(){t.submitOnBlur!==!1?i("submit"):i("cancel")}return(p,f)=>(N(),S("form",{onSubmit:Ke(l,["prevent"])},[x("div",Sa,[p.title?(N(),S("span",Ia,[o(r)])):_("",!0),p.textArea?(N(),ie(h(Pn),{key:1,modelValue:d.value,"onUpdate:modelValue":f[0]||(f[0]=y=>d.value=y),placeholder:p.placeholder,maxHeight:p.maxHeight,onBlur:u,ref_key:"field",ref:a},null,8,["modelValue","placeholder","maxHeight"])):Nt((N(),S("input",{key:2,type:"text","onUpdate:modelValue":f[1]||(f[1]=y=>d.value=y),placeholder:p.placeholder,class:ae({fullWidth:!p.title}),onBlur:u,ref_key:"field",ref:a},null,42,Ma)),[[Cn,d.value]])])],32))}}),dn=te(Ta,[["__scopeId","data-v-495d5085"]]),Fa={key:0},za=["disabled"],Pa={key:0},Aa=j({__name:"DangerButton",props:{disabled:{type:Boolean},skipConfirm:{type:Boolean}},emits:["click","confirmingChanged"],setup(n,{emit:e}){const t=n,i=e,r=$(!1);ce(r,l=>{i("confirmingChanged",l)});function a(){if(t.skipConfirm){i("click");return}r.value&&i("click"),r.value=!r.value}function d(){r.value=!1}return(l,u)=>(N(),S("span",{class:ae(["container",{confirming:r.value}])},[r.value?(N(),S("span",Fa,"Are you sure?")):_("",!0),x("button",{onClick:Ke(a,["stop"]),class:"button danger",disabled:l.disabled},[r.value?(N(),S("span",Pa,"Yes")):Ve(l.$slots,"default",{key:1},void 0,!0)],8,za),r.value?(N(),S("button",{key:1,class:"button",onClick:Ke(d,["stop"])},"No")):_("",!0)],2))}}),Ea=te(Aa,[["__scopeId","data-v-b3b9693a"]]),$a={key:0,class:"handle material-icons"},Oa={key:1,class:"actions"},Va={key:2,class:"actions"},La={key:3,class:"details"},_a=["disabled"],Ua={class:"save-version"},Ba={key:1,class:"time"},qa={key:4,class:"details"},Da={key:5,class:"details error"},Ra=j({__name:"Save",props:{save:{},readonly:{type:Boolean}},emits:["export","open","duplicate","delete","editName"],setup(n,{emit:e}){const t=n,i=e,r=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),a=$(!1),d=$(!1),l=$("");ce(a,()=>l.value=t.save.name??"");const u=G(()=>t.save!=null&&t.save.id===z.id&&!t.readonly),p=G(()=>u.value?z.time:(t.save!=null&&t.save.time)??0),f=G(()=>{var w;return!t.readonly&&((w=ge.value)==null?void 0:w.loggedIn)===!0&&it.value.includes(t.save.id)});function y(){i("editName",l.value),a.value=!1}return(w,b)=>(N(),S("div",{class:ae(["save",{active:u.value,readonly:w.readonly}])},[w.readonly!==!0?(N(),S("div",$a,"drag_handle")):_("",!0),!a.value&&w.readonly!==!0?(N(),S("div",Oa,[w.save.error==null&&!d.value?(N(),ie(ut,{key:0,onClick:b[0]||(b[0]=A=>i("export")),class:"button",left:""},{default:D(()=>[o(ye,{display:"Export",direction:h(ue).Left,class:"info"},{default:D(()=>b[8]||(b[8]=[x("span",{class:"material-icons"},"content_paste",-1)])),_:1},8,["direction"])]),_:1})):_("",!0),w.save.error==null&&!d.value?(N(),S("button",{key:1,onClick:b[1]||(b[1]=A=>i("duplicate")),class:"button"},[o(ye,{display:"Duplicate",direction:h(ue).Left,class:"info"},{default:D(()=>b[9]||(b[9]=[x("span",{class:"material-icons"},"content_copy",-1)])),_:1},8,["direction"])])):_("",!0),w.save.error==null&&!d.value?(N(),S("button",{key:2,onClick:b[2]||(b[2]=A=>a.value=!a.value),class:"button"},[o(ye,{display:"Edit Name",direction:h(ue).Left,class:"info"},{default:D(()=>b[10]||(b[10]=[x("span",{class:"material-icons"},"edit",-1)])),_:1},8,["direction"])])):_("",!0),o(Ea,{disabled:u.value,onClick:b[3]||(b[3]=A=>i("delete")),onConfirmingChanged:b[4]||(b[4]=A=>d.value=A)},{default:D(()=>[o(ye,{display:"Delete",direction:h(ue).Left,class:"info"},{default:D(()=>b[11]||(b[11]=[x("span",{class:"material-icons",style:{margin:"-2px"}},"delete",-1)])),_:1},8,["direction"])]),_:1},8,["disabled"])])):w.readonly!==!0?(N(),S("div",Va,[x("button",{onClick:y,class:"button"},[o(ye,{display:"Save",direction:h(ue).Left,class:"info"},{default:D(()=>b[12]||(b[12]=[x("span",{class:"material-icons"},"check",-1)])),_:1},8,["direction"])]),x("button",{onClick:b[5]||(b[5]=A=>a.value=!a.value),class:"button"},[o(ye,{display:"Cancel",direction:h(ue).Left,class:"info"},{default:D(()=>b[13]||(b[13]=[x("span",{class:"material-icons"},"close",-1)])),_:1},8,["direction"])])])):_("",!0),w.save.error==null&&!a.value?(N(),S("div",La,[f.value?(N(),ie(ye,{key:0,display:"Synced!",direction:h(ue).Right},{default:D(()=>b[14]||(b[14]=[x("span",{class:"material-icons synced"},"cloud",-1)])),_:1},8,["direction"])):_("",!0),x("button",{class:"button open",onClick:b[6]||(b[6]=A=>i("open")),disabled:w.readonly},[x("h3",null,Y(w.save.name),1)],8,_a),x("span",Ua,"v"+Y(w.save.modVersion),1),b[15]||(b[15]=x("br",null,null,-1)),p.value?(N(),S("div",Ba," Last played "+Y(h(r).format(p.value)),1)):_("",!0)])):w.save.error==null&&a.value?(N(),S("div",qa,[o(dn,{modelValue:l.value,"onUpdate:modelValue":b[7]||(b[7]=A=>l.value=A),class:"editname",onSubmit:y},null,8,["modelValue"])])):(N(),S("div",Da,[m(" Error: Failed to load save with id "+Y(w.save.id),1),b[16]||(b[16]=x("br",null,null,-1)),m(Y(w.save.error),1)]))],2))}}),yt=te(Ra,[["__scopeId","data-v-0058f767"]]),Ga={key:0,style:{color:"var(--danger)"}},Wa={class:"modal-footer"},Ya={class:"field"},Ja={class:"field-buttons"},Ha={class:"footer"},ja=j({__name:"SavesManager",setup(n,{expose:e}){const t=$(!1),i=$(null);e({open(){t.value=!0}});const r=$(!1),a=$(""),d=$(null);ce(a,I=>{I?Xe(()=>{try{if(I=Fe(I)??"",I===""){console.warn("Unable to determine preset encoding",I),r.value=!0;return}const T=JSON.parse(I);if(typeof T!="object"){r.value=!0;return}const L=Ze();T.id=L,se(T),a.value="",r.value=!1,H.saves.push(L)}catch{r.value=!0}}):r.value=!1});let l=Object.assign({}),u=$(Object.keys(l).reduce((I,T)=>(I.push({label:T.split("/").slice(-1)[0].slice(0,-4),value:l[T]}),I),[]));ce(t,I=>{I&&va()});const p=G(()=>H.saves.reduce((I,T)=>(I[T]=ha(T),I),{})),f=G(()=>{var I;return((I=ge.value)==null?void 0:I.loggedIn)===!0&&H.saves.length<it.value.length});function y(I){let T;switch(z.id===I?T=De(z):T=JSON.stringify(p.value[I]),q.exportEncoding){default:console.warn(`Unknown save encoding: ${q.exportEncoding}. Defaulting to lz`);case"lz":T=ze.compressToUTF16(T);break;case"base64":T=btoa(unescape(encodeURIComponent(T)));break;case"plain":break}const L=document.createElement("textarea");L.value=T,document.body.appendChild(L),L.select(),L.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(L)}function w(I){z.id===I&&se();const T={...p.value[I],id:Ze()};se(T),H.saves.push(T.id)}function b(I){var T;((T=ge.value)==null?void 0:T.loggedIn)===!0&&ge.value.getSaveList().then(L=>{var E;const Z=Object.keys(L).find(J=>{const rt=L[parseInt(J)].content;try{if(JSON.parse(rt).id===I)return!0}catch{return!1}});Z!=null&&((E=ge.value)==null||E.save(parseInt(Z),"","").catch(console.error))}),H.saves=H.saves.filter(L=>L!==I),localStorage.removeItem(I),st(I)}function A(I){p.value[z.id].time=z.time,se(),st(z.id),ke(p.value[I]),st(I)}function P(I){if(d.value=I,Xe(()=>{d.value=null}),I=Fe(I)??"",I===""){console.warn("Unable to determine preset encoding",I);return}const T=JSON.parse(I);T.id=Ze(),se(T),H.saves.push(T.id),A(T.id)}function U(I,T){const L=p.value[I];L!=null&&(L.name=T,z.id===I?(z.name=T,se()):(se(L),st(I)))}return(I,T)=>(N(),ie(Ge,{modelValue:t.value,"onUpdate:modelValue":T[4]||(T[4]=L=>t.value=L),ref_key:"modal",ref:i},{header:D(()=>T[5]||(T[5]=[x("h2",null,"Saves Manager",-1)])),body:D(({shown:L})=>[f.value?(N(),S("div",Ga," Not all saves are synced! You may need to delete stale saves. ")):_("",!0),L?(N(),ie(h(Fn),{key:1,list:h(H).saves,handle:".handle",itemKey:Z=>Z},{item:D(({element:Z})=>[o(yt,{save:p.value[Z],onOpen:E=>A(Z),onExport:E=>y(Z),onEditName:E=>U(Z,E),onDuplicate:E=>w(Z),onDelete:E=>b(Z)},null,8,["save","onOpen","onExport","onEditName","onDuplicate","onDelete"])]),_:1},8,["list","itemKey"])):_("",!0)]),footer:D(()=>[x("div",Wa,[o(dn,{modelValue:a.value,"onUpdate:modelValue":T[0]||(T[0]=L=>a.value=L),title:"Import Save",placeholder:"Paste your save here!",class:ae({importingFailed:r.value})},null,8,["modelValue","class"]),x("div",Ya,[T[6]||(T[6]=x("span",{class:"field-title"},"Create Save",-1)),x("div",Ja,[x("button",{class:"button",onClick:T[1]||(T[1]=L=>A(h(qe)().id))},"New Game"),Object.keys(h(u)).length>0?(N(),ie(ka,{key:0,options:h(u),modelValue:d.value,"onUpdate:modelValue":T[2]||(T[2]=L=>P(L)),closeOnSelect:"",placeholder:"Select preset",class:"presets"},null,8,["options","modelValue"])):_("",!0)])]),x("div",Ha,[T[7]||(T[7]=x("div",{style:{"flex-grow":"1"}},null,-1)),x("button",{class:"button modal-default-button",onClick:T[3]||(T[3]=L=>t.value=!1)}," Close ")])])]),_:1},8,["modelValue"]))}}),mn=te(ja,[["__scopeId","data-v-99458d64"]]),Za={class:"vga-footer"},Ka=j({__name:"AddictionWarning",setup(n){const e=$(!1);kn(()=>{q.disableHealthWarning===!1&&H.showHealthWarning&&W.mouseActivity.filter(i=>i).length>6&&(e.value=!0)});function t(){H.showHealthWarning=!1,e.value=!1}return(i,r)=>(N(),S(oe,null,[o(Ge,tt({modelValue:e.value,"onUpdate:modelValue":r[1]||(r[1]=a=>e.value=a)},i.$attrs),{header:D(()=>r[2]||(r[2]=[x("div",{class:"vga-modal-header"},[x("h2",null,"Kindly consider taking a break.")],-1)])),body:D(()=>r[3]||(r[3]=[x("p",null," You've been actively enjoying this game for awhile recently - and it's great that you've been having a good time! That said, there are dangers to games like these that you should be aware of: ",-1),x("p",null," While incremental games can be fun and even healthy in certain contexts, they can exacerbate video game addiction even more than other genres. If you feel like playing incremental games is taking priority over other things in your life, or manipulating your sleep schedule, it may be prudent to seek help. ",-1),x("h4",null,"Resources:",-1),x("p",null,[x("span",null,[x("a",{style:{display:"inline"},href:"https://www.samhsa.gov/",target:"_blank"}," SAMHSA "),m(" ("),x("a",{style:{display:"inline"},href:"tel:1-800-662-4357"},"1-800-662-HELP"),m(") ")]),x("br"),x("a",{href:"https://www.reddit.com/r/StopGaming/"},"r/StopGaming")],-1)])),footer:D(()=>[x("div",Za,[x("button",{onClick:t,class:"button"},"Never show this again"),x("button",{onClick:r[0]||(r[0]=a=>e.value=!1),class:"button"},"Close")])]),_:1},16,["modelValue"]),o(mn,{ref:"savesManager"},null,512)],64))}}),Xa=te(Ka,[["__scopeId","data-v-84eac81b"]]),Qa={class:"cloud-saves-modal-header"},es=["onClick"],ts={key:0,class:"note"},ns={key:1,class:"note"},is=["onClick"],rs={key:0,class:"note"},os={key:1,class:"note"},as=["onClick"],ss=j({__name:"CloudSaveResolver",setup(n){const e=$(!1),t=$([]),i=G(()=>xe.value.length>1?"saves":"save"),r=$(null);ce(()=>xe.value.length>0,p=>{p&&(t.value=xe.value.map(({local:f,cloud:y})=>(f.time??0)<(y.time??0)?"cloud":"local"),e.value=!0)},{immediate:!0}),ce(()=>{var p;return(p=r.value)==null?void 0:p.isOpen},p=>{p===!1&&(xe.value=[])});function a(p){t.value[p]="local"}function d(p){t.value[p]="cloud"}function l(p){t.value[p]="both"}function u(){var p,f;for(let y=0;y<t.value.length;y++){const{slot:w,local:b,cloud:A}=xe.value[y];switch(t.value[y]){case"local":(p=ge.value)==null||p.save(w,ze.compressToUTF16(De(Ce(b))),A.name).catch(console.error);break;case"cloud":se(Ce(A));break;case"both":const P=Ze();se({...Ce(A),id:P}),H.saves.push(P),(f=ge.value)==null||f.save(w,ze.compressToUTF16(De(Ce(b))),A.name).catch(console.error);break}}e.value=!1}return(p,f)=>(N(),ie(Ge,{modelValue:e.value,"onUpdate:modelValue":f[0]||(f[0]=y=>e.value=y),width:"960px",ref_key:"modal",ref:r,"prevent-closing":!0},{header:D(()=>[x("div",Qa,[x("h2",null,"Cloud "+Y(i.value)+" loaded!",1)])]),body:D(()=>[x("div",null," Upon loading, your cloud "+Y(i.value)+" "+Y(h(xe).length>1?"appear":"appears")+" to be out of sync with your local "+Y(i.value)+". Which "+Y(i.value)+" do you want to keep? ",1),f[4]||(f[4]=x("br",null,null,-1)),(N(!0),S(oe,null,Ee(h(h(xe)),(y,w)=>(N(),S("div",{key:y.id,class:"conflict-container"},[x("div",{onClick:b=>d(w),class:ae({selected:t.value[w]==="cloud"})},[x("h2",null,[f[1]||(f[1]=m(" Cloud ")),(y.cloud.time??0)>(y.local.time??0)?(N(),S("span",ts,"(more recent)")):_("",!0),(y.cloud.timePlayed??0)>(y.local.timePlayed??0)?(N(),S("span",ns,"(more playtime)")):_("",!0)]),o(yt,{save:y.cloud,readonly:!0},null,8,["save"])],10,es),x("div",{onClick:b=>a(w),class:ae({selected:t.value[w]==="local"})},[x("h2",null,[f[2]||(f[2]=m(" Local ")),(y.cloud.time??0)<=(y.local.time??0)?(N(),S("span",rs,"(more recent)")):_("",!0),(y.cloud.timePlayed??0)<=(y.local.timePlayed??0)?(N(),S("span",os,"(more playtime)")):_("",!0)]),o(yt,{save:y.local,readonly:!0},null,8,["save"])],10,is),x("div",{onClick:b=>l(w),class:ae({selected:t.value[w]==="both"}),style:{"flex-basis":"30%"}},f[3]||(f[3]=[x("h2",null,"Both",-1),x("div",{class:"save"},"Keep Both",-1)]),10,as)]))),128))]),footer:D(()=>[x("div",{class:"cloud-saves-footer"},[x("button",{onClick:u,class:"button"},"Confirm")])]),_:1},8,["modelValue"]))}}),ls=te(ss,[["__scopeId","data-v-c79a1b2e"]]),us={class:"game-over-modal-header"},cs=["src","alt"],ds={class:"game-over-modal-title"},ms={key:0},ps={key:0},gs=["href"],fs={key:1},hs=j({__name:"GameOverScreen",setup(n){const{title:e,logo:t,discordName:i,discordLink:r,versionNumber:a,versionTitle:d}=q,l=G(()=>nn(z.timePlayed)),u=G(()=>je.value&&!z.keepGoing),p=Le(z,"autosave");function f(){z.keepGoing=!0}function y(){ke(qe())}return(w,b)=>(N(),ie(Ge,{"model-value":u.value},{header:D(()=>[x("div",us,[h(t)?(N(),S("img",{key:0,class:"game-over-modal-logo",src:h(t),alt:h(e)},null,8,cs)):_("",!0),x("div",ds,[b[1]||(b[1]=x("h2",null,"Congratulations!",-1)),x("h4",null,"You've beaten "+Y(h(e))+" v"+Y(h(a))+": "+Y(h(d)),1)])])]),body:D(({shown:A})=>[A?(N(),S("div",ms,[x("div",null,"It took you "+Y(l.value)+" to beat the game.",1),b[4]||(b[4]=x("br",null,null,-1)),b[5]||(b[5]=x("div",null," Please check the Discord to discuss the game or to check for new content updates! ",-1)),b[6]||(b[6]=x("br",null,null,-1)),h(r)&&h(i)?(N(),S("div",ps,[x("a",{href:h(r),class:"game-over-modal-discord-link"},[b[2]||(b[2]=x("span",{class:"material-icons game-over-modal-discord"},"discord",-1)),m(" "+Y(h(i)),1)],8,gs)])):(N(),S("div",fs,b[3]||(b[3]=[x("a",{href:"https://discord.gg/yJ4fjnjU54",class:"game-over-modal-discord-link"},[x("span",{class:"material-icons game-over-modal-discord"},"discord"),m(" Profectus & Friends ")],-1)]))),o(Ie,{title:"Autosave",modelValue:p.value,"onUpdate:modelValue":b[0]||(b[0]=P=>p.value=P)},null,8,["modelValue"])])):_("",!0)]),footer:D(()=>[x("div",{class:"game-over-footer"},[x("button",{onClick:f,class:"button"},"Keep Going"),x("button",{onClick:y,class:"button danger"},"Play Again")])]),_:1},8,["model-value"]))}}),vs=te(hs,[["__scopeId","data-v-c9c5bad4"]]),bs={key:0},ys=["href"],xs={class:"nan-footer"},ws=j({__name:"NaNScreen",setup(n){const{discordName:e,discordLink:t}=q,i=$(!0),r=$(!0),a=Le(W,"hasNaN"),d=$(null);ce(a,w=>{w?(i.value=z.autosave,r.value=z.devSpeed===0):(z.autosave=i.value,z.devSpeed=r.value?0:null)});const l=G(()=>{var w;return(w=W.NaNPath)==null?void 0:w.join(".")}),u=G(()=>W.NaNPersistent!=null?W.NaNPersistent.value:null);function p(){W.NaNPersistent!=null&&(W.NaNPersistent.value=new c(0),W.hasNaN=!1)}function f(){W.NaNPersistent&&(W.NaNPersistent.value=new c(1),W.hasNaN=!1)}function y(){W.NaNPersistent&&(W.NaNPersistent.value=new c(NaN),W.hasNaN=!1)}return(w,b)=>(N(),S(oe,null,[o(Ge,tt({modelValue:a.value,"onUpdate:modelValue":b[4]||(b[4]=A=>a.value=A)},w.$attrs),{header:D(()=>b[5]||(b[5]=[x("div",{class:"nan-modal-header"},[x("h2",null,"NaN value detected!")],-1)])),body:D(()=>[x("div",null,[m(' Attempted to assign "'+Y(l.value)+'" to NaN',1),u.value?(N(),S("span",bs,Y(" ")+"(previously "+Y(h(we)(u.value))+")",1)):_("",!0),m(". Auto-saving has been "+Y(i.value?"enabled":"disabled")+". Check the console for more details, and consider sharing it with the developers on discord. ",1)]),b[7]||(b[7]=x("br",null,null,-1)),x("div",null,[x("a",{href:h(t)||"https://discord.gg/yJ4fjnjU54",class:"nan-modal-discord-link"},[b[6]||(b[6]=x("span",{class:"material-icons nan-modal-discord"},"discord",-1)),m(" "+Y(h(e)||"Profectus & Friends"),1)],8,ys)]),b[8]||(b[8]=x("br",null,null,-1)),o(Ie,{title:"Autosave",modelValue:i.value,"onUpdate:modelValue":b[0]||(b[0]=A=>i.value=A)},null,8,["modelValue"]),h(q).enablePausing?(N(),ie(Ie,{key:0,title:"Pause game",modelValue:r.value,"onUpdate:modelValue":b[1]||(b[1]=A=>r.value=A)},null,8,["modelValue"])):_("",!0)]),footer:D(()=>[x("div",xs,[x("button",{onClick:b[2]||(b[2]=A=>{var P;return(P=d.value)==null?void 0:P.open()}),class:"button"},"Open Saves Manager"),x("button",{onClick:p,class:"button"},"Set to 0"),x("button",{onClick:f,class:"button"},"Set to 1"),u.value&&h(c).neq(u.value,0)&&h(c).neq(u.value,1)?(N(),S("button",{key:0,onClick:b[3]||(b[3]=A=>a.value=!1),class:"button"}," Set to previous ")):_("",!0),x("button",{onClick:y,class:"button danger"},"Ignore")])]),_:1},16,["modelValue"]),o(mn,{ref_key:"savesManager",ref:d},null,512)],64))}}),Ns=te(ws,[["__scopeId","data-v-cab8d401"]]),Cs={key:1},ks=j({__name:"Layer",props:{display:{},minimizedDisplay:{},minimized:{},name:{},color:{},minimizable:{},nodes:{},forceHideGoBack:{},index:{}},setup(n){const e=n,t=()=>de(e.display),i=()=>e.minimizedDisplay==null?void 0:de(e.minimizedDisplay),r=G(()=>q.allowGoBack&&!h(e.forceHideGoBack)&&e.index>0&&!h(e.minimized));function a(){z.tabs.splice(h(e.index),1/0)}function d(u){e.nodes.value=u}const l=$([]);return Sn((u,p,f)=>(console.warn(`Error caught in "${e.name}" layer`,u,p,f),l.value.push(u instanceof Error?u:new Error(JSON.stringify(u))),!1)),(u,p)=>l.value.length>0?(N(),ie(Jt,{key:0,errors:l.value},null,8,["errors"])):(N(),S("div",tt({key:1,class:"layer-container",style:{"--layer-color":h(u.color)}},u.$attrs),[r.value?(N(),S("button",{key:0,class:"goBack",onClick:a},"❌")):_("",!0),h(u.minimized)?(N(),S("button",{key:1,class:"layer-tab minimized",onClick:p[0]||(p[0]=f=>u.$emit("setMinimized",!1))},[u.minimizedDisplay?(N(),ie(i,{key:0})):(N(),S("div",Cs,Y(h(u.name)),1))])):(N(),S("div",{key:2,class:ae(["layer-tab",{showGoBack:r.value}])},[o(Ht,{onUpdateNodes:d},{default:D(()=>[o(t)]),_:1})],2)),h(u.minimizable)?(N(),S("button",{key:3,class:"minimize",onClick:p[1]||(p[1]=f=>u.$emit("setMinimized",!0))}," ▼ ")):_("",!0)],16))}}),Ss=te(ks,[["__scopeId","data-v-afadeceb"]]),Is={class:"inner-tab"},Ms=j({__name:"Game",setup(n){const e=Le(z,"tabs"),t=G(()=>Object.keys(ne)),i=q.useHeader;function r(a){const{display:d,name:l,color:u,minimizable:p,minimizedDisplay:f,minimized:y,nodes:w,forceHideGoBack:b}=a;return{display:d,name:l,color:u,minimizable:p,minimizedDisplay:f,minimized:y,nodes:w,forceHideGoBack:b}}return(a,d)=>(N(),S("div",{class:ae(["tabs-container",{useHeader:h(i)}])},[(N(!0),S(oe,null,Ee(e.value,(l,u)=>{var p,f;return N(),S("div",{key:u,class:ae(["tab",h((p=h(ne)[l])==null?void 0:p.classes)]),style:Te(h((f=h(ne)[l])==null?void 0:f.style))},[x("div",Is,[t.value.includes(l)?(N(),ie(Ss,tt({key:0,ref_for:!0},r(h(ne)[l]),{index:u,onSetMinimized:y=>h(ne)[l].minimized.value=y}),null,16,["index","onSetMinimized"])):(N(),ie(In(l),{key:1,index:u},null,8,["index"]))])],6)}),128))],2))}}),Ts=te(Ms,[["__scopeId","data-v-59247f64"]]),Fs={key:0,class:"tpsDisplay"},zs=j({__name:"TPS",setup(n){const e=G(()=>c.div(W.lastTenTicks.length,W.lastTenTicks.reduce((t,i)=>t+i,0)));return(t,i)=>e.value.isNan()?_("",!0):(N(),S("div",Fs,"TPS: "+Y(h(tn)(e.value)),1))}}),Ps=te(zs,[["__scopeId","data-v-7df31503"]]),As=j({__name:"App",setup(n){const e=q.useHeader,t=G(()=>kt[H.theme].variables),i=Le(H,"showTPS"),r=Le(W,"errors"),a=()=>xa.map(d=>de(d));return(d,l)=>r.value.length>0?(N(),S("div",{key:0,class:"error-container",style:Te(t.value)},[o(Jt,{errors:r.value},null,8,["errors"])],4)):(N(),S(oe,{key:1},[x("div",{id:"modal-root",style:Te(t.value)},null,4),x("div",{class:ae(["app",{useHeader:h(e)}]),style:Te(t.value)},[o(Ts),h(i.value)?(N(),ie(Ps,{key:0})):_("",!0),o(Xa),o(vs),o(Ns),o(ls),o(a)],6)],64))}}),Es=te(As,[["__scopeId","data-v-a0aca22c"]]);me.on("setupVue",n=>n.use(An));const $s="modulepreload",Os=function(n,e){return new URL(n,e).href},Dt={},Vs=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){const d=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));r=Promise.allSettled(t.map(p=>{if(p=Os(p,i),p in Dt)return;Dt[p]=!0;const f=p.endsWith(".css"),y=f?'[rel="stylesheet"]':"";if(!!i)for(let A=d.length-1;A>=0;A--){const P=d[A];if(P.href===p&&(!f||P.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${p}"]${y}`))return;const b=document.createElement("link");if(b.rel=f?"stylesheet":$s,f||(b.as="script"),b.crossOrigin="",b.href=p,u&&b.setAttribute("nonce",u),document.head.appendChild(b),f)return new Promise((A,P)=>{b.addEventListener("load",A),b.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(d){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=d,window.dispatchEvent(l),!l.defaultPrevented)throw d}return r.then(d=>{for(const l of d||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})};function Ls(n={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:i,onRegistered:r,onRegisteredSW:a,onRegisterError:d}=n;let l,u;const p=async(y=!0)=>{await u};async function f(){if("serviceWorker"in navigator){if(l=await Vs(async()=>{const{Workbox:y}=await import("./workbox-window-D5gOYdM7.js");return{Workbox:y}},[],import.meta.url).then(({Workbox:y})=>new y("./sw.js",{scope:"./",type:"classic"})).catch(y=>{d==null||d(y)}),!l)return;l.addEventListener("activated",y=>{(y.isUpdate||y.isExternal)&&window.location.reload()}),l.addEventListener("installed",y=>{y.isUpdate||i==null||i()}),l.register({immediate:e}).then(y=>{a?a("./sw.js",y):r==null||r(y)}).catch(y=>{d==null||d(y)})}}return u=f(),p}function _s(n={}){const{immediate:e=!0,onNeedRefresh:t,onOfflineReady:i,onRegistered:r,onRegisteredSW:a,onRegisterError:d}=n,l=$(!1),u=$(!1);return{updateServiceWorker:Ls({immediate:e,onNeedRefresh(){l.value=!0,t==null||t()},onOfflineReady(){u.value=!0,i==null||i()},onRegistered:r,onRegisteredSW:a,onRegisterError:d}),offlineReady:u,needRefresh:l}}let Ue=null;function pt(){const n=Date.now();let e=(n-z.time)/1e3;z.time=n;const t=e;if(W.lastTenTicks.push(t),W.lastTenTicks.length>10&&(W.lastTenTicks=W.lastTenTicks.slice(1)),!(je!=null&&je.value&&!z.keepGoing)&&!W.hasNaN&&(e=Math.max(e,0),z.devSpeed!==0)){if(gt.value=!1,z.offlineTime!=null){if(c.gt(z.offlineTime,q.offlineLimit*3600)&&(z.offlineTime=q.offlineLimit*3600),c.gt(z.offlineTime,0)&&z.devSpeed!==0){const i=Math.max(z.offlineTime/10,e);z.offlineTime=z.offlineTime-i,e+=i}else z.devSpeed===0&&(z.offlineTime+=e);(!z.offlineProd||c.lt(z.offlineTime,0))&&(z.offlineTime=null)}e=Math.min(e,q.maxTickLength),z.devSpeed!=null&&(e*=z.devSpeed),Number.isFinite(e)||(e=1e308),!c.eq(e,0)&&(z.timePlayed+=e,Number.isFinite(z.timePlayed)||(z.timePlayed=1e308),me.emit("update",e,t),H.unthrottled?(requestAnimationFrame(pt),Ue!=null&&(clearInterval(Ue),Ue=null)):Ue==null&&(Ue=setInterval(pt,50)))}}async function Us(){H.unthrottled?requestAnimationFrame(pt):Ue=setInterval(pt,50)}ce(je,n=>{n&&me.emit("gameWon")});setInterval(()=>{W.mouseActivity=[...W.mouseActivity.slice(-7),!1]},1e3*60*60);const It=console.error;console.error=function(...n){It(...n)};window.onerror=function(n,e,t,i,r){return W.errors.push(r instanceof Error?r:new Error(JSON.stringify(r))),It(r),!0};window.onunhandledrejection=function(n){W.errors.push(n.reason instanceof Error?n.reason:new Error(JSON.stringify(n.reason))),It(n.reason)};document.title=q.title;window.projInfo=q;q.id===""&&console.error("Project ID is empty!","Please select a unique ID for this project in /src/data/projInfo.json");requestAnimationFrame(async()=>{await fa();const n=window.vue=Mn(Es);n.config.errorHandler=function(e,t,i){console.error(e,i,t)},me.emit("setupVue",n),n.mount("#app"),Xe(()=>{const e=En();_s({immediate:!0,onOfflineReady(){e.info("App ready to work offline")},onRegisterError:console.warn,onRegistered:console.info})}),Us()});
