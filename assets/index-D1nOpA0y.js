var Ca=Object.defineProperty;var _a=(n,e,t)=>e in n?Ca(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var O=(n,e,t)=>_a(n,typeof e!="symbol"?e+"":e,t);/* empty css                    */import"./vue-GVBARt8q.js";import{aX as _t,bo as w,X as de,aZ as V,aR as S,A as D,b0 as st,bS as Ft,aA as ve,az as Rt,w as $,aJ as Nn,G as k,bf as oe,F as se,a$ as at,z as X,aC as Be,P as N,Q as u,bN as ie,b9 as In,aT as Zt,y as Ce,bP as Sn,bF as xa,ay as zt,l as vi,T as ka,ap as Na,ar as Ot,bI as le,am as ei,bb as bi,bj as ut,aO as wi,bl as Ia,bJ as Ci,bE as Sa,bA as Aa,aI as Ta,b3 as Ma,x as Ea}from"./@vue-CCfogNd1.js";import{L as He}from"./lz-string-BZNGtwso.js";import{c as _i}from"./nanoevents-BxCKNB1V.js";import{Y as qa}from"./vue-next-select-Bc2YoQWA.js";import{s as Pa,u as xi}from"./vue-toastification-D2nu0K1-.js";import{D as Da}from"./vuedraggable-BgvaSe-I.js";import{p as Fa}from"./vue-textarea-autosize-DLc4kbjP.js";import"./sortablejs-BZuNQ3iR.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const m of r.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function t(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(a){if(a.ep)return;a.ep=!0;const r=t(a);fetch(a.href,r)}})();const Ra="Game balance settings (win amounts, costs, progression, etc.) are configured in src/data/gameConfig.ts",Oa="The Choice Before Us",La="intelligent-choices",Ga="Nick Shapiro",za="",Wa="",$a="0.1",Ba="Prototype",Ua=["chapter1"],Va=36e5,Ja=!0,ja=!1,Ya=!0,Ha=null,Qa=null,Za="base64",Ka=1,Xa=0,er=!1,tr=!1,nr=!0,ee={_comment:Ra,title:Oa,id:La,author:Ga,discordName:za,discordLink:Wa,versionNumber:$a,versionTitle:Ba,initialTabs:Ua,maxTickLength:Va,enablePausing:Ja,showNews:ja,useHeader:Ya,banner:Ha,logo:Qa,exportEncoding:Za,offlineLimit:Ka,defaultDecimalsShown:Xa,defaultShowSmall:er,allowGoBack:tr,disableHealthWarning:nr},ir=_t({id:"",devSpeed:null,name:"",tabs:[],time:-1,autosave:!0,offlineProd:!0,offlineTime:null,timePlayed:0,keepGoing:!1,modID:"",modVersion:"",frameworkChoice:"not_yet",gameOver:!1,layers:{}}),_=window.player=ir;function wt(n){return JSON.stringify(n,(e,t)=>w(t)??null)}const ar=de({__name:"FeedbackButton",props:{left:{type:Boolean}},emits:["click"],setup(n,{emit:e}){const t=e,i=V(!1),a=V(null);function r(){t("click"),a.value!=null&&clearTimeout(a.value),i.value=!1,Rt(()=>{i.value=!0,a.value=setTimeout(()=>i.value=!1,500)})}return(m,p)=>(S(),D("button",{onClick:Ft(r,["stop"]),class:ve(["feedback",{activated:i.value,left:m.left}])},[st(m.$slots,"default",{},void 0,!0)],2))}}),he=(n,e)=>{const t=n.__vccOpts||n;for(const[i,a]of e)t[i]=a;return t},ki=he(ar,[["__scopeId","data-v-f82eae5d"]]),rr={class:"error"},or={class:"error-title"},sr={class:"error-details",style:{"margin-top":"-10px"}},lr={key:0},ur={class:"instructions"},cr=["href"],dr={key:0,style:{"margin-top":"20px"}},pr={class:"error-details"},mr={key:0,style:{"margin-top":"10px"}},gr={key:1,style:{"margin-top":"10px"}},hr=de({__name:"Error",props:{errors:{}},setup(n){const e=n,t=$(()=>e.errors[0]),i=$(()=>e.errors.map(m=>m.stack==null?[]:m.stack.split(`
`))),a=$(()=>e.errors.map(m=>m.cause==null?[]:(typeof m.cause=="string"?m.cause:JSON.stringify(m.cause)).split(`
`)));function r(){let m=wt(_);switch(ee.exportEncoding){default:console.warn(`Unknown save encoding: ${ee.exportEncoding}. Defaulting to lz`);case"lz":m=He.compressToUTF16(m);break;case"base64":m=btoa(unescape(encodeURIComponent(m)));break;case"plain":break}console.log(m);const p=document.createElement("textarea");p.value=m,document.body.appendChild(p),p.select(),p.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(p)}return Nn(()=>{_.autosave=!1,_.devSpeed=0}),(m,p)=>(S(),D("div",rr,[k("h1",or,oe(t.value.name)+": "+oe(t.value.message),1),k("div",sr,[t.value.cause?(S(),D("div",lr,[(S(!0),D(se,null,at(a.value[0],s=>(S(),D("div",{key:s},oe(s),1))),128))])):X("",!0),t.value.stack?(S(),D("div",{key:1,style:Be(t.value.cause?"margin-top: 10px":"")},[(S(!0),D(se,null,at(i.value[0],s=>(S(),D("div",{key:s},oe(s),1))),128))],4)):X("",!0)]),k("div",ur,[p[2]||(p[2]=N(" Check the console for more details, and consider sharing it with the developers on ")),k("a",{href:w(ee).discordLink||"https://discord.gg/yJ4fjnjU54",class:"discord-link"},"discord",8,cr),p[3]||(p[3]=N("! ")),u(ki,{onClick:r,class:"button",style:{display:"inline-flex"}},{default:ie(()=>p[0]||(p[0]=[k("span",{class:"material-icons",style:{"font-size":"16px"}},"content_paste",-1),k("span",{style:{"margin-left":"8px","font-size":"medium"}},"Copy Save",-1)])),_:1}),p[4]||(p[4]=k("br",null,null,-1)),m.errors.length>1?(S(),D("div",dr,p[1]||(p[1]=[k("h3",null,"Other errors",-1)]))):X("",!0),(S(!0),D(se,null,at(m.errors.slice(1),(s,o)=>(S(),D("div",{key:o,style:{"margin-top":"20px"}},[k("details",pr,[k("summary",null,oe(s.name)+": "+oe(s.message),1),s.cause?(S(),D("div",mr,[(S(!0),D(se,null,at(a.value[o+1],f=>(S(),D("div",{key:f},oe(f),1))),128))])):X("",!0),s.stack?(S(),D("div",gr,[(S(!0),D(se,null,at(i.value[o+1],f=>(S(),D("div",{key:f},oe(f),1))),128))])):X("",!0)])]))),128))])]))}}),Ni=he(hr,[["__scopeId","data-v-2524e23e"]]),Xe={variables:{"--foreground":"#dfdfdf","--background":"#0f0f0f","--feature-foreground":"#0f0f0f","--tooltip-background":"rgba(0, 0, 0, 0.75)","--raised-background":"#0f0f0f","--points":"#ffffff","--locked":"#bf8f8f","--highlighted":"#333","--bought":"#77bf5f","--danger":"rgb(220, 53, 69)","--link":"#02f2f2","--outline":"#dfdfdf","--accent1":"#627a82","--accent2":"#658262","--accent3":"#7c6282","--border-radius":"15px","--modal-border":"solid 2px var(--color)","--feature-margin":"0px"},floatingTabs:!0,mergeAdjacent:!0,showPin:!0};var An=(n=>(n.Classic="classic",n.Paper="paper",n.Nordic="nordic",n.Aqua="aqua",n))(An||{});const Ii={classic:Xe,paper:{...Xe,variables:{...Xe.variables,"--background":"#2a323d","--feature-foreground":"#000","--raised-background":"#333c4a","--locked":"#3a3e45","--bought":"#5C8A58","--outline":"#333c4a","--border-radius":"4px","--modal-border":"","--feature-margin":"5px"},floatingTabs:!1},nordic:{...Xe,variables:{...Xe.variables,"--foreground":"#555555","--background":"#2E3440","--feature-foreground":"#000","--raised-background":"#3B4252","--points":"#E5E9F0","--locked":"#D08770","--highlighted":"#434c5e","--bought":"#8FBCBB","--danger":"#D08770","--link":"#88C0D0","--outline":"#3B4252","--accent1":"#B48EAD","--accent2":"#A3BE8C","--accent3":"#EBCB8B","--border-radius":"4px","--modal-border":"solid 2px #3B4252","--feature-margin":"5px"},floatingTabs:!1},aqua:{...Xe,variables:{...Xe.variables,"--foreground":"#bfdfff","--background":"#001f3f","--tooltip-background":"rgba(0, 15, 31, 0.75)","--raised-background":"#001f3f","--points":"#dfefff","--locked":"#c4a7b3","--outline":"#bfdfff"}}},re=window.state=In({lastTenTicks:[],mouseActivity:[!1],hasNaN:!1,NaNPath:[],errors:_t([])}),be=_i();"fonts"in document&&(document.fonts.onloadingdone=()=>be.emit("fontsLoaded"));document.onmousemove=function(){re.mouseActivity[re.mouseActivity.length-1]=!0};const fr=de({__name:"Context",emits:["updateNodes"],setup(n,{emit:e}){var v;const t=e,i=V({}),a=new ResizeObserver(s),r=V(null);Nn(()=>{const y=r.value;y!=null&&a.observe(y)});let m=!0,p=V((v=r.value)==null?void 0:v.getBoundingClientRect());function s(){m&&(m=!1,Rt(()=>{var y;p.value=(y=r.value)==null?void 0:y.getBoundingClientRect(),Object.values(i.value).filter(h=>h).forEach(h=>h.rect=h.element.getBoundingClientRect()),t("updateNodes",i.value),m=!0}))}be.on("fontsLoaded",s);const o={attributes:!1,childList:!0,subtree:!1};Zt(Oi,(y,h)=>{const q=new MutationObserver(()=>f(y));q.observe(h,o),i.value[y]={element:h,observer:q,rect:h.getBoundingClientRect()},s()}),Zt(Li,y=>{var h;(h=i.value[y])==null||h.observer.disconnect(),i.value[y]=void 0,s()}),Zt(As,i),Zt(Ts,p);function f(y){const h=i.value[y];h!=null&&(h.rect=h.element.getBoundingClientRect(),t("updateNodes",i.value))}return(y,h)=>(S(),D(se,null,[st(y.$slots,"default",{},void 0,!0),k("div",{ref_key:"resizeListener",ref:r,class:"resize-listener"},null,512)],64))}}),Si=he(fr,[["__scopeId","data-v-4fc505f1"]]),yr={class:"modal-wrapper"},vr=["width"],br={class:"modal-header"},wr={class:"modal-body"},Cr={class:"modal-footer"},xt=de({__name:"Modal",props:{modelValue:{type:Boolean},preventClosing:{type:Boolean},width:{}},emits:["update:modelValue"],setup(n,{expose:e,emit:t}){const i=n,a=t,r=$(()=>i.modelValue||p.value);function m(){i.preventClosing!==!0&&a("update:modelValue",!1)}const p=V(!1),s=V(null),o=$(()=>{var f;return((f=s.value)==null?void 0:f.nodes)??null});return e({isOpen:r,nodes:o}),(f,v)=>(S(),Ce(ka,{to:"#modal-root"},[u(vi,{name:"modal",onBeforeEnter:v[0]||(v[0]=y=>p.value=!0),onAfterLeave:v[1]||(v[1]=y=>p.value=!1),appear:""},{default:ie(()=>[Sn(k("div",zt({class:"modal-mask",onPointerdown:Ft(m,["self"])},f.$attrs),[k("div",yr,[k("div",{class:"modal-container",width:f.width},[k("div",br,[st(f.$slots,"header",{shown:r.value})]),k("div",wr,[u(Si,{ref_key:"contextRef",ref:s},{default:ie(()=>[st(f.$slots,"body",{shown:r.value})]),_:3},512)]),k("div",Cr,[st(f.$slots,"footer",{shown:r.value},()=>[k("div",{class:"modal-default-footer"},[v[2]||(v[2]=k("div",{class:"modal-default-flex-grow"},null,-1)),k("button",{class:"button modal-default-button",onClick:m}," Close ")])])])],8,vr)])],16),[[xa,f.modelValue]])]),_:3})]))}});class _r{constructor(e){O(this,"map",new Map);O(this,"first");O(this,"last");O(this,"maxSize");this.maxSize=e}get size(){return this.map.size}get(e){const t=this.map.get(e);if(t!==void 0)return t!==this.first&&(t===this.last?(this.last=t.prev,this.last.next=void 0):(t.prev.next=t.next,t.next.prev=t.prev),t.next=this.first,this.first.prev=t,this.first=t),t.value}set(e,t){if(this.maxSize<1)return;if(this.map.has(e))throw new Error("Cannot update existing keys in the cache");const i=new xr(e,t);for(this.first===void 0?(this.first=i,this.last=i):(i.next=this.first,this.first.prev=i,this.first=i),this.map.set(e,i);this.map.size>this.maxSize;){const a=this.last;this.map.delete(a.key),this.last=a.prev,this.last.next=void 0}}}class xr{constructor(e,t){O(this,"key");O(this,"value");O(this,"next");O(this,"prev");this.key=e,this.value=t}}const vn=17,kr=9e15,Nr=Math.log10(9e15),Ir=1/9e15,Sr=308,Ar=-324,ti=5,Tr=1023,Mr=function(){const n=[];for(let t=Ar+1;t<=Sr;t++)n.push(+("1e"+t));const e=323;return function(t){return n[t+e]}}(),et=[2,Math.E,3,4,5,6,7,8,9,10],Er=[[1,1.0891180521811203,1.1789767925673957,1.2701455431742086,1.3632090180450092,1.4587818160364217,1.5575237916251419,1.6601571006859253,1.767485818836978,1.8804192098842727,2],[1,1.1121114330934079,1.231038924931609,1.3583836963111375,1.4960519303993531,1.6463542337511945,1.8121385357018724,1.996971324618307,2.2053895545527546,2.4432574483385254,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.1840100246247336,1.4061375836156955,1.6802272208863964,2.026757028388619,2.4770056063449646,3.080525271755482,3.9191964192627284,5.135152840833187,6.989961179534715,10]],qr=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]];let C=function(e){return d.fromValue_noAlloc(e)},j=function(n,e,t){return d.fromComponents(n,e,t)},Z=function(e,t,i){return d.fromComponents_noNormalize(e,t,i)};const Ve=function(e,t){const i=t+1,a=Math.ceil(Math.log10(Math.abs(e))),r=Math.round(e*Math.pow(10,i-a))*Math.pow(10,a-i);return parseFloat(r.toFixed(Math.max(i-a,0)))},bn=function(n){return Math.sign(n)*Math.log10(Math.abs(n))},Pr=function(n){if(!isFinite(n))return n;if(n<-50)return n===Math.trunc(n)?Number.NEGATIVE_INFINITY:0;let e=1;for(;n<10;)e=e*n,++n;n-=1;let t=.9189385332046727;t=t+(n+.5)*Math.log(n),t=t-n;const i=n*n;let a=n;return t=t+1/(12*a),a=a*i,t=t+1/(360*a),a=a*i,t=t+1/(1260*a),a=a*i,t=t+1/(1680*a),a=a*i,t=t+1/(1188*a),a=a*i,t=t+691/(360360*a),a=a*i,t=t+7/(1092*a),a=a*i,t=t+3617/(122400*a),Math.exp(t)/e},Ai=.5671432904097838,ni=function(n,e=1e-10){let t,i;if(!Number.isFinite(n)||n===0)return n;if(n===1)return Ai;n<10?t=0:t=Math.log(n)-Math.log(Math.log(n));for(let a=0;a<100;++a){if(i=(n*Math.exp(-t)+t*t)/(t+1),Math.abs(i-t)<e*Math.abs(i))return i;t=i}throw Error(`Iteration failed to converge: ${n.toString()}`)};function ii(n,e=1e-10){let t,i,a,r;if(!Number.isFinite(n.mag)||n.eq(d.dZero))return n;if(n.eq(d.dOne))return d.fromNumber(Ai);t=d.ln(n);for(let m=0;m<100;++m){if(i=t.neg().exp(),a=t.sub(n.mul(i)),r=t.sub(a.div(t.add(1).sub(t.add(2).mul(a).div(d.mul(2,t).add(2))))),d.abs(r.sub(t)).lt(d.abs(r).mul(e)))return r;t=r}throw Error(`Iteration failed to converge: ${n.toString()}`)}const g=class g{constructor(e){O(this,"sign",0);O(this,"mag",0);O(this,"layer",0);e instanceof g?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"&&this.fromString(e)}get m(){if(this.sign===0)return 0;if(this.layer===0){const e=Math.floor(Math.log10(this.mag));let t;return this.mag===5e-324?t=5:t=this.mag/Mr(e),this.sign*t}else if(this.layer===1){const e=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,e)}else return this.sign}set m(e){this.layer<=2?this.fromMantissaExponent(e,this.e):(this.sign=Math.sign(e),this.sign===0&&(this.layer=0,this.exponent=0))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(e){this.fromMantissaExponent(this.m,e)}get s(){return this.sign}set s(e){e===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=e}get mantissa(){return this.m}set mantissa(e){this.m=e}get exponent(){return this.e}set exponent(e){this.e=e}static fromComponents(e,t,i){return new g().fromComponents(e,t,i)}static fromComponents_noNormalize(e,t,i){return new g().fromComponents_noNormalize(e,t,i)}static fromMantissaExponent(e,t){return new g().fromMantissaExponent(e,t)}static fromMantissaExponent_noNormalize(e,t){return new g().fromMantissaExponent_noNormalize(e,t)}static fromDecimal(e){return new g().fromDecimal(e)}static fromNumber(e){return new g().fromNumber(e)}static fromString(e){return new g().fromString(e)}static fromValue(e){return new g().fromValue(e)}static fromValue_noAlloc(e){if(e instanceof g)return e;if(typeof e=="string"){const t=g.fromStringCache.get(e);return t!==void 0?t:g.fromString(e)}else return typeof e=="number"?g.fromNumber(e):g.dZero}static abs(e){return C(e).abs()}static neg(e){return C(e).neg()}static negate(e){return C(e).neg()}static negated(e){return C(e).neg()}static sign(e){return C(e).sign}static sgn(e){return C(e).sign}static round(e){return C(e).round()}static floor(e){return C(e).floor()}static ceil(e){return C(e).ceil()}static trunc(e){return C(e).trunc()}static add(e,t){return C(e).add(t)}static plus(e,t){return C(e).add(t)}static sub(e,t){return C(e).sub(t)}static subtract(e,t){return C(e).sub(t)}static minus(e,t){return C(e).sub(t)}static mul(e,t){return C(e).mul(t)}static multiply(e,t){return C(e).mul(t)}static times(e,t){return C(e).mul(t)}static div(e,t){return C(e).div(t)}static divide(e,t){return C(e).div(t)}static recip(e){return C(e).recip()}static reciprocal(e){return C(e).recip()}static reciprocate(e){return C(e).reciprocate()}static cmp(e,t){return C(e).cmp(t)}static cmpabs(e,t){return C(e).cmpabs(t)}static compare(e,t){return C(e).cmp(t)}static isNaN(e){return e=C(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag)}static isFinite(e){return e=C(e),isFinite(e.sign)&&isFinite(e.layer)&&isFinite(e.mag)}static eq(e,t){return C(e).eq(t)}static equals(e,t){return C(e).eq(t)}static neq(e,t){return C(e).neq(t)}static notEquals(e,t){return C(e).notEquals(t)}static lt(e,t){return C(e).lt(t)}static lte(e,t){return C(e).lte(t)}static gt(e,t){return C(e).gt(t)}static gte(e,t){return C(e).gte(t)}static max(e,t){return C(e).max(t)}static min(e,t){return C(e).min(t)}static minabs(e,t){return C(e).minabs(t)}static maxabs(e,t){return C(e).maxabs(t)}static clamp(e,t,i){return C(e).clamp(t,i)}static clampMin(e,t){return C(e).clampMin(t)}static clampMax(e,t){return C(e).clampMax(t)}static cmp_tolerance(e,t,i){return C(e).cmp_tolerance(t,i)}static compare_tolerance(e,t,i){return C(e).cmp_tolerance(t,i)}static eq_tolerance(e,t,i){return C(e).eq_tolerance(t,i)}static equals_tolerance(e,t,i){return C(e).eq_tolerance(t,i)}static neq_tolerance(e,t,i){return C(e).neq_tolerance(t,i)}static notEquals_tolerance(e,t,i){return C(e).notEquals_tolerance(t,i)}static lt_tolerance(e,t,i){return C(e).lt_tolerance(t,i)}static lte_tolerance(e,t,i){return C(e).lte_tolerance(t,i)}static gt_tolerance(e,t,i){return C(e).gt_tolerance(t,i)}static gte_tolerance(e,t,i){return C(e).gte_tolerance(t,i)}static pLog10(e){return C(e).pLog10()}static absLog10(e){return C(e).absLog10()}static log10(e){return C(e).log10()}static log(e,t){return C(e).log(t)}static log2(e){return C(e).log2()}static ln(e){return C(e).ln()}static logarithm(e,t){return C(e).logarithm(t)}static pow(e,t){return C(e).pow(t)}static pow10(e){return C(e).pow10()}static pow_base(e,t){return C(e).pow_base(t)}static root(e,t){return C(e).root(t)}static factorial(e,t){return C(e).factorial()}static gamma(e,t){return C(e).gamma()}static lngamma(e,t){return C(e).lngamma()}static exp(e){return C(e).exp()}static sqr(e){return C(e).sqr()}static sqrt(e){return C(e).sqrt()}static cube(e){return C(e).cube()}static cbrt(e){return C(e).cbrt()}static tetrate(e,t=2,i=Z(1,0,1)){return C(e).tetrate(t,i)}static iteratedexp(e,t=2,i=Z(1,0,1)){return C(e).iteratedexp(t,i)}static iteratedlog(e,t=10,i=1){return C(e).iteratedlog(t,i)}static layeradd10(e,t){return C(e).layeradd10(t)}static layeradd(e,t,i=10){return C(e).layeradd(t,i)}static slog(e,t=10){return C(e).slog(t)}static lambertw(e){return C(e).lambertw()}static ssqrt(e){return C(e).ssqrt()}static pentate(e,t=2,i=Z(1,0,1)){return C(e).pentate(t,i)}static sin(e){return C(e).sin()}static cos(e){return C(e).cos()}static tan(e){return C(e).tan()}static asin(e){return C(e).asin()}static acos(e){return C(e).acos()}static atan(e){return C(e).atan()}static sinh(e){return C(e).sinh()}static cosh(e){return C(e).cosh()}static tanh(e){return C(e).tanh()}static asinh(e){return C(e).asinh()}static acosh(e){return C(e).acosh()}static atanh(e){return C(e).atanh()}static affordGeometricSeries(e,t,i,a){return this.affordGeometricSeries_core(C(e),C(t),C(i),a)}static sumGeometricSeries(e,t,i,a){return this.sumGeometricSeries_core(e,C(t),C(i),a)}static affordArithmeticSeries(e,t,i,a){return this.affordArithmeticSeries_core(C(e),C(t),C(i),C(a))}static sumArithmeticSeries(e,t,i,a){return this.sumArithmeticSeries_core(C(e),C(t),C(i),C(a))}static efficiencyOfPurchase(e,t,i){return this.efficiencyOfPurchase_core(C(e),C(t),C(i))}static randomDecimalForTesting(e){if(Math.random()*20<1)return Z(0,0,0);const t=Math.random()>.5?1:-1;if(Math.random()*20<1)return Z(t,0,1);const i=Math.floor(Math.random()*(e+1));let a=i===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(a=Math.trunc(a));let r=Math.pow(10,a);return Math.random()>.9&&(r=Math.trunc(r)),j(t,i,r)}static affordGeometricSeries_core(e,t,i,a){const r=t.mul(i.pow(a));return g.floor(e.div(r).mul(i.sub(1)).add(1).log10().div(i.log10()))}static sumGeometricSeries_core(e,t,i,a){return t.mul(i.pow(a)).mul(g.sub(1,i.pow(e))).div(g.sub(1,i))}static affordArithmeticSeries_core(e,t,i,a){const m=t.add(a.mul(i)).sub(i.div(2)),p=m.pow(2);return m.neg().add(p.add(i.mul(e).mul(2)).sqrt()).div(i).floor()}static sumArithmeticSeries_core(e,t,i,a){const r=t.add(a.mul(i));return e.div(2).mul(r.mul(2).plus(e.sub(1).mul(i)))}static efficiencyOfPurchase_core(e,t,i){return e.div(t).add(e.div(i))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<Ir)return this.layer+=1,this.mag=Math.log10(this.mag),this;let e=Math.abs(this.mag),t=Math.sign(this.mag);if(e>=kr)return this.layer+=1,this.mag=t*Math.log10(e),this;for(;e<Nr&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=t*Math.pow(10,e),e=Math.abs(this.mag),t=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(e,t,i){return this.sign=e,this.layer=t,this.mag=i,this.normalize(),this}fromComponents_noNormalize(e,t,i){return this.sign=e,this.layer=t,this.mag=i,this}fromMantissaExponent(e,t){return this.layer=1,this.sign=Math.sign(e),e=Math.abs(e),this.mag=t+Math.log10(e),this.normalize(),this}fromMantissaExponent_noNormalize(e,t){return this.fromMantissaExponent(e,t),this}fromDecimal(e){return this.sign=e.sign,this.layer=e.layer,this.mag=e.mag,this}fromNumber(e){return this.mag=Math.abs(e),this.sign=Math.sign(e),this.layer=0,this.normalize(),this}fromString(e){const t=e,i=g.fromStringCache.get(t);if(i!==void 0)return this.fromDecimal(i);e=e.replace(",","");const a=e.split("^^^");if(a.length===2){const R=parseFloat(a[0]),H=parseFloat(a[1]),M=a[1].split(";");let E=1;if(M.length===2&&(E=parseFloat(M[1]),isFinite(E)||(E=1)),isFinite(R)&&isFinite(H)){const z=g.pentate(R,H,E);return this.sign=z.sign,this.layer=z.layer,this.mag=z.mag,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}}const r=e.split("^^");if(r.length===2){const R=parseFloat(r[0]),H=parseFloat(r[1]),M=r[1].split(";");let E=1;if(M.length===2&&(E=parseFloat(M[1]),isFinite(E)||(E=1)),isFinite(R)&&isFinite(H)){const z=g.tetrate(R,H,E);return this.sign=z.sign,this.layer=z.layer,this.mag=z.mag,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}}const m=e.split("^");if(m.length===2){const R=parseFloat(m[0]),H=parseFloat(m[1]);if(isFinite(R)&&isFinite(H)){const M=g.pow(R,H);return this.sign=M.sign,this.layer=M.layer,this.mag=M.mag,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}}e=e.trim().toLowerCase();let p,s,o=e.split("pt");if(o.length===2){p=10,s=parseFloat(o[0]),o[1]=o[1].replace("(",""),o[1]=o[1].replace(")","");let R=parseFloat(o[1]);if(isFinite(R)||(R=1),isFinite(p)&&isFinite(s)){const H=g.tetrate(p,s,R);return this.sign=H.sign,this.layer=H.layer,this.mag=H.mag,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}}if(o=e.split("p"),o.length===2){p=10,s=parseFloat(o[0]),o[1]=o[1].replace("(",""),o[1]=o[1].replace(")","");let R=parseFloat(o[1]);if(isFinite(R)||(R=1),isFinite(p)&&isFinite(s)){const H=g.tetrate(p,s,R);return this.sign=H.sign,this.layer=H.layer,this.mag=H.mag,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}}const f=e.split("e"),v=f.length-1;if(v===0){const R=parseFloat(e);if(isFinite(R))return this.fromNumber(R),g.fromStringCache.size>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}else if(v===1){const R=parseFloat(e);if(isFinite(R)&&R!==0)return this.fromNumber(R),g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}const y=e.split("e^");if(y.length===2){this.sign=1,y[0].charAt(0)=="-"&&(this.sign=-1);let R="";for(let H=0;H<y[1].length;++H){const M=y[1].charCodeAt(H);if(M>=43&&M<=57||M===101)R+=y[1].charAt(H);else return this.layer=parseFloat(R),this.mag=parseFloat(y[1].substr(H+1)),this.normalize(),g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}}if(v<1)return this.sign=0,this.layer=0,this.mag=0,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this;const h=parseFloat(f[0]);if(h===0)return this.sign=0,this.layer=0,this.mag=0,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this;let q=parseFloat(f[f.length-1]);if(v>=2){const R=parseFloat(f[f.length-2]);isFinite(R)&&(q*=Math.sign(R),q+=bn(R))}if(!isFinite(h))this.sign=f[0]==="-"?-1:1,this.layer=v,this.mag=q;else if(v===1)this.sign=Math.sign(h),this.layer=1,this.mag=q+Math.log10(Math.abs(h));else if(this.sign=Math.sign(h),this.layer=v,v===2){const R=g.mul(j(1,2,q),C(h));return this.sign=R.sign,this.layer=R.layer,this.mag=R.mag,g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}else this.mag=q;return this.normalize(),g.fromStringCache.maxSize>=1&&g.fromStringCache.set(t,g.fromDecimal(this)),this}fromValue(e){return e instanceof g?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(e){return isNaN(this.m)?Number.NaN:this.m===0?0:Ve(this.m,e)}magnitudeWithDecimalPlaces(e){return isNaN(this.mag)?Number.NaN:this.mag===0?0:Ve(this.mag,e)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=ti?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(e){return this.layer===0?(this.sign*this.mag).toExponential(e):this.toStringWithDecimalPlaces(e)}toFixed(e){return this.layer===0?(this.sign*this.mag).toFixed(e):this.toStringWithDecimalPlaces(e)}toPrecision(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.exponent-1):this.toExponential(e-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(e){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(e):Ve(this.m,e)+"e"+Ve(this.e,e):this.layer===1?Ve(this.m,e)+"e"+Ve(this.e,e):this.layer<=ti?(this.sign===-1?"-":"")+"e".repeat(this.layer)+Ve(this.mag,e):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+Ve(this.mag,e)}abs(){return Z(this.sign===0?0:1,this.layer,this.mag)}neg(){return Z(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?g.dZero:this.layer===0?j(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?g.dZero:this.layer===0?j(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?g.dZero:this.layer===0?j(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?g.dZero:this.layer===0?j(this.sign,0,Math.trunc(this.mag)):this}add(e){const t=C(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer)||this.sign===0)return t;if(t.sign===0)return this;if(this.sign===-t.sign&&this.layer===t.layer&&this.mag===t.mag)return Z(0,0,0);let i,a;if(this.layer>=2||t.layer>=2)return this.maxabs(t);if(g.cmpabs(this,t)>0?(i=this,a=t):(i=t,a=this),i.layer===0&&a.layer===0)return g.fromNumber(i.sign*i.mag+a.sign*a.mag);const r=i.layer*Math.sign(i.mag),m=a.layer*Math.sign(a.mag);if(r-m>=2)return i;if(r===0&&m===-1){if(Math.abs(a.mag-Math.log10(i.mag))>vn)return i;{const p=Math.pow(10,Math.log10(i.mag)-a.mag),s=a.sign+i.sign*p;return j(Math.sign(s),1,a.mag+Math.log10(Math.abs(s)))}}if(r===1&&m===0){if(Math.abs(i.mag-Math.log10(a.mag))>vn)return i;{const p=Math.pow(10,i.mag-Math.log10(a.mag)),s=a.sign+i.sign*p;return j(Math.sign(s),1,Math.log10(a.mag)+Math.log10(Math.abs(s)))}}if(Math.abs(i.mag-a.mag)>vn)return i;{const p=Math.pow(10,i.mag-a.mag),s=a.sign+i.sign*p;return j(Math.sign(s),1,a.mag+Math.log10(Math.abs(s)))}}plus(e){return this.add(e)}sub(e){return this.add(C(e).neg())}subtract(e){return this.sub(e)}minus(e){return this.sub(e)}mul(e){const t=C(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer))return t;if(this.sign===0||t.sign===0)return Z(0,0,0);if(this.layer===t.layer&&this.mag===-t.mag)return Z(this.sign*t.sign,0,1);let i,a;if(this.layer>t.layer||this.layer==t.layer&&Math.abs(this.mag)>Math.abs(t.mag)?(i=this,a=t):(i=t,a=this),i.layer===0&&a.layer===0)return g.fromNumber(i.sign*a.sign*i.mag*a.mag);if(i.layer>=3||i.layer-a.layer>=2)return j(i.sign*a.sign,i.layer,i.mag);if(i.layer===1&&a.layer===0)return j(i.sign*a.sign,1,i.mag+Math.log10(a.mag));if(i.layer===1&&a.layer===1)return j(i.sign*a.sign,1,i.mag+a.mag);if(i.layer===2&&a.layer===1){const r=j(Math.sign(i.mag),i.layer-1,Math.abs(i.mag)).add(j(Math.sign(a.mag),a.layer-1,Math.abs(a.mag)));return j(i.sign*a.sign,r.layer+1,r.sign*r.mag)}if(i.layer===2&&a.layer===2){const r=j(Math.sign(i.mag),i.layer-1,Math.abs(i.mag)).add(j(Math.sign(a.mag),a.layer-1,Math.abs(a.mag)));return j(i.sign*a.sign,r.layer+1,r.sign*r.mag)}throw Error("Bad arguments to mul: "+this+", "+e)}multiply(e){return this.mul(e)}times(e){return this.mul(e)}div(e){const t=C(e);return this.mul(t.recip())}divide(e){return this.div(e)}divideBy(e){return this.div(e)}dividedBy(e){return this.div(e)}recip(){return this.mag===0?g.dNaN:this.layer===0?j(this.sign,0,1/this.mag):j(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(e){const t=C(e);return this.sign>t.sign?1:this.sign<t.sign?-1:this.sign*this.cmpabs(e)}cmpabs(e){const t=C(e),i=this.mag>0?this.layer:-this.layer,a=t.mag>0?t.layer:-t.layer;return i>a?1:i<a?-1:this.mag>t.mag?1:this.mag<t.mag?-1:0}compare(e){return this.cmp(e)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(e){const t=C(e);return this.sign===t.sign&&this.layer===t.layer&&this.mag===t.mag}equals(e){return this.eq(e)}neq(e){return!this.eq(e)}notEquals(e){return this.neq(e)}lt(e){return this.cmp(e)===-1}lte(e){return!this.gt(e)}gt(e){return this.cmp(e)===1}gte(e){return!this.lt(e)}max(e){const t=C(e);return this.lt(t)?t:this}min(e){const t=C(e);return this.gt(t)?t:this}maxabs(e){const t=C(e);return this.cmpabs(t)<0?t:this}minabs(e){const t=C(e);return this.cmpabs(t)>0?t:this}clamp(e,t){return this.max(e).min(t)}clampMin(e){return this.max(e)}clampMax(e){return this.min(e)}cmp_tolerance(e,t){const i=C(e);return this.eq_tolerance(i,t)?0:this.cmp(i)}compare_tolerance(e,t){return this.cmp_tolerance(e,t)}eq_tolerance(e,t){const i=C(e);if(t==null&&(t=1e-7),this.sign!==i.sign||Math.abs(this.layer-i.layer)>1)return!1;let a=this.mag,r=i.mag;return this.layer>i.layer&&(r=bn(r)),this.layer<i.layer&&(a=bn(a)),Math.abs(a-r)<=t*Math.max(Math.abs(a),Math.abs(r))}equals_tolerance(e,t){return this.eq_tolerance(e,t)}neq_tolerance(e,t){return!this.eq_tolerance(e,t)}notEquals_tolerance(e,t){return this.neq_tolerance(e,t)}lt_tolerance(e,t){const i=C(e);return!this.eq_tolerance(i,t)&&this.lt(i)}lte_tolerance(e,t){const i=C(e);return this.eq_tolerance(i,t)||this.lt(i)}gt_tolerance(e,t){const i=C(e);return!this.eq_tolerance(i,t)&&this.gt(i)}gte_tolerance(e,t){const i=C(e);return this.eq_tolerance(i,t)||this.gt(i)}pLog10(){return this.lt(g.dZero)?g.dZero:this.log10()}absLog10(){return this.sign===0?g.dNaN:this.layer>0?j(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):j(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?g.dNaN:this.layer>0?j(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):j(this.sign,0,Math.log10(this.mag))}log(e){return e=C(e),this.sign<=0||e.sign<=0||e.sign===1&&e.layer===0&&e.mag===1?g.dNaN:this.layer===0&&e.layer===0?j(this.sign,0,Math.log(this.mag)/Math.log(e.mag)):g.div(this.log10(),e.log10())}log2(){return this.sign<=0?g.dNaN:this.layer===0?j(this.sign,0,Math.log2(this.mag)):this.layer===1?j(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?j(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):j(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?g.dNaN:this.layer===0?j(this.sign,0,Math.log(this.mag)):this.layer===1?j(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?j(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):j(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(e){return this.log(e)}pow(e){const t=C(e),i=this,a=t;if(i.sign===0)return a.eq(0)?Z(1,0,1):i;if(i.sign===1&&i.layer===0&&i.mag===1)return i;if(a.sign===0)return Z(1,0,1);if(a.sign===1&&a.layer===0&&a.mag===1)return i;const r=i.absLog10().mul(a).pow10();return this.sign===-1?Math.abs(a.toNumber()%2)%2===1?r.neg():Math.abs(a.toNumber()%2)%2===0?r:g.dNaN:r}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return g.dNaN;let e=this;if(e.layer===0){const t=Math.pow(10,e.sign*e.mag);if(Number.isFinite(t)&&Math.abs(t)>=.1)return j(1,0,t);if(e.sign===0)return g.dOne;e=Z(e.sign,e.layer+1,Math.log10(e.mag))}return e.sign>0&&e.mag>=0?j(e.sign,e.layer+1,e.mag):e.sign<0&&e.mag>=0?j(-e.sign,e.layer+1,-e.mag):g.dOne}pow_base(e){return C(e).pow(this)}root(e){const t=C(e);return this.pow(t.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?g.exp(g.mul(this,g.ln(this).sub(1))):g.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(Z(1,0,24)))return g.fromNumber(Pr(this.sign*this.mag));const e=this.mag-1;let t=.9189385332046727;t=t+(e+.5)*Math.log(e),t=t-e;const i=e*e;let a=e,r=12*a,m=1/r,p=t+m;if(p===t||(t=p,a=a*i,r=360*a,m=1/r,p=t-m,p===t))return g.exp(t);t=p,a=a*i,r=1260*a;let s=1/r;return t=t+s,a=a*i,r=1680*a,s=1/r,t=t-s,g.exp(t)}else return this.layer===1?g.exp(g.mul(this,g.ln(this).sub(1))):g.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?g.dOne:this.layer===0&&this.mag<=709.7?g.fromNumber(Math.exp(this.sign*this.mag)):this.layer===0?j(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?j(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):j(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return g.fromNumber(Math.sqrt(this.sign*this.mag));if(this.layer===1)return j(1,2,Math.log10(this.mag)-.3010299956639812);{const e=g.div(Z(this.sign,this.layer-1,this.mag),Z(1,0,2));return e.layer+=1,e.normalize(),e}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(e=2,t=Z(1,0,1)){if(e===1)return g.pow(this,t);if(e===0)return new g(t);if(this.eq(g.dOne))return g.dOne;if(this.eq(-1))return g.pow(this,t);if(e===Number.POSITIVE_INFINITY){const r=this.toNumber();if(r<=1.444667861009766&&r>=.06598803584531254){if(r>1.444667861009099)return g.fromNumber(Math.E);const m=g.ln(this).neg();return m.lambertw().div(m)}else return r>1.444667861009766?g.fromNumber(Number.POSITIVE_INFINITY):g.dNaN}if(this.eq(g.dZero)){let r=Math.abs((e+1)%2);return r>1&&(r=2-r),g.fromNumber(r)}if(e<0)return g.iteratedlog(t,this,-e);t=C(t);const i=e;e=Math.trunc(e);const a=i-e;if(this.gt(g.dZero)&&this.lte(1.444667861009766)){e=Math.min(1e4,e);for(let r=0;r<e;++r){const m=t;if(t=this.pow(t),m.eq(t))return t}if(a!=0){const r=this.pow(t);return t.mul(1-a).add(r.mul(a))}return t}a!==0&&(t.eq(g.dOne)?this.gt(10)?t=this.pow(a):(t=g.fromNumber(g.tetrate_critical(this.toNumber(),a)),this.lt(2)&&(t=t.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?t=t.layeradd10(a):t=t.layeradd(a,this));for(let r=0;r<e;++r){if(t=this.pow(t),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(t.layer-this.layer>3)return Z(t.sign,t.layer+(e-r-1),t.mag);if(r>1e4)return t}return t}iteratedexp(e=2,t=Z(1,0,1)){return this.tetrate(e,t)}iteratedlog(e=10,t=1){if(t<0)return g.tetrate(e,-t,this);e=C(e);let i=g.fromDecimal(this);const a=t;t=Math.trunc(t);const r=a-t;if(i.layer-e.layer>3){const m=Math.min(t,i.layer-e.layer-3);t-=m,i.layer-=m}for(let m=0;m<t;++m){if(i=i.log(e),!isFinite(i.layer)||!isFinite(i.mag))return i.normalize();if(m>1e4)return i}return r>0&&r<1&&(e.eq(10)?i=i.layeradd10(-r):i=i.layeradd(-r,e)),i}slog(e=10,t=100){let i=.001,a=!1,r=!1,m=this.slog_internal(e).toNumber();for(let p=1;p<t;++p){const o=new g(e).tetrate(m).gt(this);if(p>1&&r!=o&&(a=!0),r=o,a?i/=2:i*=2,i=Math.abs(i)*(o?-1:1),m+=i,i===0)break}return g.fromNumber(m)}slog_internal(e=10){if(e=C(e),e.lte(g.dZero)||e.eq(g.dOne))return g.dNaN;if(e.lt(g.dOne))return this.eq(g.dOne)?g.dZero:this.eq(g.dZero)?g.dNegOne:g.dNaN;if(this.mag<0||this.eq(g.dZero))return g.dNegOne;let t=0,i=g.fromDecimal(this);if(i.layer-e.layer>3){const a=i.layer-e.layer-3;t+=a,i.layer-=a}for(let a=0;a<100;++a)if(i.lt(g.dZero))i=g.pow(e,i),t-=1;else{if(i.lte(g.dOne))return g.fromNumber(t+g.slog_critical(e.toNumber(),i.toNumber()));t+=1,i=g.log(i,e)}return g.fromNumber(t)}static slog_critical(e,t){return e>10?t-1:g.critical_section(e,t,qr)}static tetrate_critical(e,t){return g.critical_section(e,t,Er)}static critical_section(e,t,i){t*=10,t<0&&(t=0),t>10&&(t=10),e<2&&(e=2),e>10&&(e=10);let a=0,r=0;for(let p=0;p<et.length;++p)if(et[p]==e){a=i[p][Math.floor(t)],r=i[p][Math.ceil(t)];break}else if(et[p]<e&&et[p+1]>e){const s=(e-et[p])/(et[p+1]-et[p]);a=i[p][Math.floor(t)]*(1-s)+i[p+1][Math.floor(t)]*s,r=i[p][Math.ceil(t)]*(1-s)+i[p+1][Math.ceil(t)]*s;break}const m=t-Math.floor(t);return a<=0||r<=0?a*(1-m)+r*m:Math.pow(e,Math.log(a)/Math.log(e)*(1-m)+Math.log(r)/Math.log(e)*m)}layeradd10(e){e=g.fromValue_noAlloc(e).toNumber();const t=g.fromDecimal(this);if(e>=1){t.mag<0&&t.layer>0?(t.sign=0,t.mag=0,t.layer=0):t.sign===-1&&t.layer==0&&(t.sign=1,t.mag=-t.mag);const i=Math.trunc(e);e-=i,t.layer+=i}if(e<=-1){const i=Math.trunc(e);if(e-=i,t.layer+=i,t.layer<0)for(let a=0;a<100;++a){if(t.layer++,t.mag=Math.log10(t.mag),!isFinite(t.mag))return t.sign===0&&(t.sign=1),t.layer<0&&(t.layer=0),t.normalize();if(t.layer>=0)break}}for(;t.layer<0;)t.layer++,t.mag=Math.log10(t.mag);return t.sign===0&&(t.sign=1,t.mag===0&&t.layer>=1&&(t.layer-=1,t.mag=1)),t.normalize(),e!==0?t.layeradd(e,10):t}layeradd(e,t){const a=this.slog(t).toNumber()+e;return a>=0?g.tetrate(t,a):Number.isFinite(a)?a>=-1?g.log(g.tetrate(t,a+1),t):g.log(g.log(g.tetrate(t,a+2),t),t):g.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return g.fromNumber(ni(this.toNumber()));if(this.layer===0)return g.fromNumber(ni(this.sign*this.mag));if(this.layer===1)return ii(this);if(this.layer===2)return ii(this);if(this.layer>=3)return Z(this.sign,this.layer-1,this.mag);throw new Error("Unhandled behavior in lambertw()")}ssqrt(){if(this.sign==1&&this.layer>=3)return Z(this.sign,this.layer-1,this.mag);const e=this.ln();return e.div(e.lambertw())}pentate(e=2,t=Z(1,0,1)){t=C(t);const i=e;e=Math.trunc(e);const a=i-e;a!==0&&(t.eq(g.dOne)?(++e,t=g.fromNumber(a)):this.eq(10)?t=t.layeradd10(a):t=t.layeradd(a,this));for(let r=0;r<e;++r){if(t=this.tetrate(t.toNumber()),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(r>10)return t}return t}sin(){return this.mag<0?this:this.layer===0?g.fromNumber(Math.sin(this.sign*this.mag)):Z(0,0,0)}cos(){return this.mag<0?g.dOne:this.layer===0?g.fromNumber(Math.cos(this.sign*this.mag)):Z(0,0,0)}tan(){return this.mag<0?this:this.layer===0?g.fromNumber(Math.tan(this.sign*this.mag)):Z(0,0,0)}asin(){return this.mag<0?this:this.layer===0?g.fromNumber(Math.asin(this.sign*this.mag)):Z(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?g.fromNumber(Math.acos(this.toNumber())):this.layer===0?g.fromNumber(Math.acos(this.sign*this.mag)):Z(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?g.fromNumber(Math.atan(this.sign*this.mag)):g.fromNumber(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return g.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return g.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?Z(Number.NaN,Number.NaN,Number.NaN):g.ln(this.add(1).div(g.fromNumber(1).sub(this))).div(2)}ascensionPenalty(e){return e===0?this:this.root(g.pow(10,e))}egg(){return this.add(9)}lessThanOrEqualTo(e){return this.cmp(e)<1}lessThan(e){return this.cmp(e)<0}greaterThanOrEqualTo(e){return this.cmp(e)>-1}greaterThan(e){return this.cmp(e)>0}};O(g,"dZero"),O(g,"dOne"),O(g,"dNegOne"),O(g,"dTwo"),O(g,"dTen"),O(g,"dNaN"),O(g,"dInf"),O(g,"dNegInf"),O(g,"dNumberMax"),O(g,"dNumberMin"),O(g,"fromStringCache",new _r(Tr));let d=g;d.dZero=Z(0,0,0);d.dOne=Z(1,0,1);d.dNegOne=Z(-1,0,1);d.dTwo=Z(1,0,2);d.dTen=Z(1,0,10);d.dNaN=Z(Number.NaN,Number.NaN,Number.NaN);d.dInf=Z(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);d.dNegInf=Z(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);d.dNumberMax=j(1,0,Number.MAX_VALUE);d.dNumberMin=j(1,0,Number.MIN_VALUE);C=d.fromValue_noAlloc;j=d.fromComponents;Z=d.fromComponents_noNormalize;d.fromMantissaExponent;d.fromMantissaExponent_noNormalize;const Dr=new d(1);function Mt(n,e,t=!0){let i=d.log10(n).floor(),a=d.div(n,d.pow(10,i));a.toStringWithDecimalPlaces(e)==="10"&&(a=Dr,i=i.add(1));const r=i.gte(1e9)?Me(i,Math.max(Math.max(e,3),ee.defaultDecimalsShown)):i.gte(1e4)?tn(i,0):i.toStringWithDecimalPlaces(0);return t?a.toStringWithDecimalPlaces(e)+"e"+r:"e"+r}function tn(n,e){if(n==null)return"NaN";if(n=new d(n),n.mag<.001)return 0 .toFixed(e);const i=n.toStringWithDecimalPlaces(e).split(".");return i[0]=i[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),i.length===1?i[0]:i[0]+"."+i[1]}function Ti(n,e){return n==null?"NaN":(n=new d(n),n.mag<1e-4?0 .toFixed(e):(n.mag<.1&&e!==0&&(e=Math.max(Math.max(e,n.log10().negate().ceil().toNumber()),ee.defaultDecimalsShown)),n.toStringWithDecimalPlaces(e)))}const Fr=new d("eeee1000"),Rr=new d("e100000"),ai=new d("e1000"),Mi=new d(1e9),Or=new d(1e6),Lr=new d(1e3),Gr=new d(.98),zr=new d(.001),Ei=new d(0);function Me(n,e,t){if(e==null&&(e=ee.defaultDecimalsShown),t=t??ee.defaultShowSmall,n=new d(n),isNaN(n.sign)||isNaN(n.layer)||isNaN(n.mag))return"NaN";if(n.sign<0)return"-"+Me(n.neg(),e);if(n.mag===Number.POSITIVE_INFINITY)return"Infinity";if(n.gte(Fr)){const i=n.slog();return i.gte(Or)?"F"+Me(i.floor()):d.pow(10,i.sub(i.floor())).toStringWithDecimalPlaces(3)+"F"+tn(i.floor(),0)}else{if(n.gte(Rr))return Mt(n,0,!1);if(n.gte(ai))return Mt(n,0);if(n.gte(Mi))return Mt(n,e);if(n.gte(Lr))return tn(n,0);if(n.gte(zr)||!t)return Ti(n,e);if(n.eq(Ei))return 0 .toFixed(e)}return n=Pi(n),n.lt(ai)?Mt(n,e).replace(/([^(?:e|F)]*)$/,"-$1"):Me(n,e)+"⁻¹"}function Se(n){return n=new d(n),n.sign<0?"-"+Se(n.neg()):n.gte(Mi)||n.lte(Gr)&&!n.eq(Ei)?Me(n):Me(n,0)}function qi(n){return d.lt(n,0)?"-"+qi(d.neg(n)):d.gt(n,2**51)?Me(d.div(n,31536e3))+"y":(n=new d(n).toNumber(),n<60?Me(n)+"s":n<3600?Se(Math.floor(n/60))+"m "+Me(n%60)+"s":n<86400?Se(Math.floor(n/3600))+"h "+Se(Math.floor(n/60)%60)+"m "+Se(n%60)+"s":n<31536e3?Se(Math.floor(n/84600)%365)+"d "+Se(Math.floor(n/3600)%24)+"h "+Se(Math.floor(n/60)%60)+"m":Se(Math.floor(n/31536e3))+"y "+Se(Math.floor(n/84600)%365)+"d "+Se(Math.floor(n/3600)%24)+"h")}function Wr(n,e,t){n=new d(n);let i=n.toStringWithDecimalPlaces(e);return new d(i).gte(t)&&(i=d.sub(t,Math.pow(.1,e)).toStringWithDecimalPlaces(e)),i}function $r(n,e){return Me(n,e,!0)}function Pi(n){let e=d.log10(n).ceil();const t=d.div(n,d.pow(10,e));return e=e.neg(),n=new d(10).pow(e).times(t),n}const Br=Object.freeze(Object.defineProperty({__proto__:null,commaFormat:tn,default:d,exponentialFormat:Mt,format:Me,formatSmall:$r,formatTime:qi,formatWhole:Se,invertOOM:Pi,regularFormat:Ti,toPlaces:Wr},Symbol.toStringTag,{value:"Module"})),{exponentialFormat:Ur,commaFormat:Vr,regularFormat:Jr,format:Pe,formatWhole:Di,formatTime:Fi,toPlaces:jr,formatSmall:Yr,invertOOM:Hr}=Br;window.Decimal=d;window.exponentialFormat=Ur;window.commaFormat=Vr;window.regularFormat=Jr;window.format=Pe;window.formatWhole=Di;window.formatTime=Fi;window.toPlaces=jr;window.formatSmall=Yr;window.invertOOM=Hr;const rt=Symbol("ProxyState"),ri=Symbol("AfterEvaluation");function kt(n,e={}){const t=e;let i=!1,a=!1;const r=[];function m(){if(!i){if(a)throw new Error("Cyclical dependency detected. Cannot evaluate lazy proxy.");a=!0,Object.assign(t,n.call(t,t)),i=!0,r.forEach(s=>s(t))}return t}function p(s){i?s(t):r.push(s)}return new Proxy(t,{get(s,o){if(o===rt)return m();if(o===ri)return p;const f=m()[o];return f!=null&&typeof f=="object"&&Je in f?f[Je]:f},set(s,o,f){return m()[o]=f,!0},has(s,o){return o===rt||o===ri?!0:Reflect.has(m(),o)},ownKeys(){return Reflect.ownKeys(m())},getOwnPropertyDescriptor(s,o){return i||(Object.assign(t,n.call(t,t)),i=!0),Object.getOwnPropertyDescriptor(s,o)}})}function Qr(n){let e=n.replace(/([A-Z])/g," $1");return e=e.charAt(0).toUpperCase()+e.slice(1),e}function Zr(n){return typeof n=="function"}var Ae=(n=>(n.Up="Up",n.Down="Down",n.Left="Left",n.Right="Right",n.Default="Up",n))(Ae||{});function fe(n){return Zr(n)&&n.length===0?$(n):n}const Ri=d.ln(10);function Xt(n){return n}function Tt(n,...e){const t=e.find(i=>T(i));return t==null?(console.error("Could not invert due to no input being a variable"),0):t.invert(n)}function Kr(n,e){return T(e)?e.invert(d.neg(n)):(console.error("Could not invert due to no input being a variable"),0)}function Xr(n,e){return T(e)?e.isIntegrable()?l.neg(e.getIntegralFormula(n)):(console.error("Could not integrate due to variable not being integrable"),l.constant(0)):(console.error("Could not integrate due to no input being a variable"),l.constant(0))}function eo(n){return l.neg(n)}function to(n,e,t){return T(e)?e.invert(d.sub(n,ge(t))):T(t)?t.invert(d.sub(n,ge(e))):(console.error("Could not invert due to no input being a variable"),0)}function no(n,e,t){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=e.getIntegralFormula(n);return l.times(t,e.innermostVariable??0).add(i)}else if(T(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=t.getIntegralFormula(n);return l.times(e,t.innermostVariable??0).add(i)}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function io(n,e,t){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=e.getIntegralFormula(n);return l.add(i,t)}else if(T(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=t.getIntegralFormula(n);return l.add(i,e)}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function ao(n,e,t){return T(e)?e.invert(d.add(n,ge(t))):T(t)?t.invert(d.sub(ge(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function ro(n,e,t){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=e.getIntegralFormula(n);return l.sub(i,l.times(t,e.innermostVariable??0))}else if(T(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=t.getIntegralFormula(n);return l.times(e,t.innermostVariable??0).sub(i)}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function oo(n,e,t){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=e.getIntegralFormula(n);return l.sub(i,t)}else if(T(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=t.getIntegralFormula(n);return l.sub(i,e)}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function so(n,e,t){return T(e)?e.invert(d.div(n,ge(t))):T(t)?t.invert(d.div(n,ge(e))):(console.error("Could not invert due to no input being a variable"),0)}function lo(n,e,t){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=e.getIntegralFormula(n);return l.times(i,t)}else if(T(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=t.getIntegralFormula(n);return l.times(i,e)}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function uo(n,e,t){return T(e)?l.div(n,t):T(t)?l.div(n,e):(console.error("Could not apply substitution due to no input being a variable"),l.constant(0))}function co(n,e,t){return T(e)?e.invert(d.mul(n,ge(t))):T(t)?t.invert(d.div(ge(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function po(n,e,t){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=e.getIntegralFormula(n);return l.div(i,t)}else if(T(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=t.getIntegralFormula(n);return l.div(e,i)}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function mo(n,e,t){return T(e)?l.mul(n,t):T(t)?l.mul(n,e):(console.error("Could not apply substitution due to no input being a variable"),l.constant(0))}function go(n,e){return T(e)?e.invert(d.recip(n)):(console.error("Could not invert due to no input being a variable"),0)}function ho(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.ln(t)}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function fo(n,e){return T(e)?e.invert(d.pow10(n)):(console.error("Could not invert due to no input being a variable"),0)}function yo(n){return d.ln(n).sub(1).times(n).div(Ri)}function vo(n,e){if(T(e)){const t=Ri.times(n);return e.invert(t.div(t.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function bo(n,e){return T(e)?e.isIntegrable()?new l({inputs:[e.getIntegralFormula(n)],evaluate:yo,invert:vo}):(console.error("Could not integrate due to variable not being integrable"),l.constant(0)):(console.error("Could not integrate due to no input being a variable"),l.constant(0))}function wo(n,e,t){return T(e)?e.invert(d.pow(ge(t),n)):T(t)?t.invert(d.root(ge(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function Co(n,e){return d.ln(n).sub(1).times(n).div(d.ln(e))}function _o(n,e,t){if(T(e)){const i=d.ln(ge(t)).times(n);return e.invert(i.div(i.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function xo(n,e,t){return T(e)?e.isIntegrable()?new l({inputs:[e.getIntegralFormula(n),t],evaluate:Co,invert:_o}):(console.error("Could not integrate due to variable not being integrable"),l.constant(0)):(console.error("Could not integrate due to no input being a variable"),l.constant(0))}function ko(n,e){return T(e)?e.invert(d.pow(2,n)):(console.error("Could not invert due to no input being a variable"),0)}function No(n){return d.ln(n).sub(1).times(n).div(d.ln(2))}function Io(n,e){if(T(e)){const t=d.ln(2).times(n);return e.invert(t.div(t.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function So(n,e){return T(e)?e.isIntegrable()?new l({inputs:[e.getIntegralFormula(n)],evaluate:No,invert:Io}):(console.error("Could not integrate due to variable not being integrable"),l.constant(0)):(console.error("Could not integrate due to no input being a variable"),l.constant(0))}function Ao(n,e){return T(e)?e.invert(d.exp(n)):(console.error("Could not invert due to no input being a variable"),0)}function To(n){return d.ln(n).sub(1).times(n)}function Mo(n,e){return T(e)?e.invert(d.div(n,d.div(n,Math.E).lambertw())):(console.error("Could not invert due to no input being a variable"),0)}function Eo(n,e){return T(e)?e.isIntegrable()?new l({inputs:[e.getIntegralFormula(n)],evaluate:To,invert:Mo}):(console.error("Could not integrate due to variable not being integrable"),l.constant(0)):(console.error("Could not integrate due to no input being a variable"),l.constant(0))}function qo(n,e,t){return T(e)?e.invert(d.root(n,ge(t))):T(t)?t.invert(d.ln(n).div(d.ln(ge(e)))):(console.error("Could not invert due to no input being a variable"),0)}function Po(n,e,t){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=e.getIntegralFormula(n),a=l.add(t,1);return l.pow(i,a).div(a)}else if(T(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=t.getIntegralFormula(n);return l.pow(e,i).div(l.ln(e))}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function Do(n,e){return T(e)?e.invert(d.root(n,10)):(console.error("Could not invert due to no input being a variable"),0)}function Fo(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.pow10(t).div(l.ln(10))}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function Ro(n,e,t){return T(e)?e.invert(d.ln(n).div(d.ln(ge(t)))):T(t)?t.invert(d.root(ge(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function Oo(n,e,t){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=e.getIntegralFormula(n);return l.pow(t,i).div(l.ln(t))}else if(T(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=t.getIntegralFormula(n),a=l.add(e,1);return l.pow(i,a).div(a)}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function Lo(n,e,t){return T(e)?e.invert(d.root(n,d.recip(ge(t)))):T(t)?t.invert(d.ln(ge(e)).div(d.ln(n))):(console.error("Could not invert due to no input being a variable"),0)}function Go(n,e,t){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const i=e.getIntegralFormula(n);return l.pow(i,l.recip(t).add(1)).times(t).div(l.add(t,1))}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function zo(n,e){return T(e)?e.invert(d.ln(n)):(console.error("Could not invert due to no input being a variable"),0)}function Wo(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.exp(t)}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function $o(n,e=2,t=d.fromComponents_noNormalize(1,0,1)){const i=d.minabs(e,1e308).toNumber();return d.tetrate(n,i,t)}function Bo(n,e,t,i){return T(e)?e.invert(d.ssqrt(n)):(console.error("Could not invert due to no input being a variable"),0)}function Uo(n,e=2,t=d.fromComponents_noNormalize(1,0,1)){const i=d.minabs(e,1e308).toNumber();return d.iteratedexp(n,i,new d(t))}function Vo(n,e,t,i){return T(e)?e.invert(d.iteratedlog(n,Math.E,d.minabs(1e308,ge(t)).toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function Jo(n,e=10,t=2){const i=d.minabs(t,1e308).toNumber();return d.iteratedlog(n,e,i)}function jo(n,e=10){const t=d.minabs(e,1e308).toNumber();return d.slog(n,t)}function Yo(n,e,t){return T(e)?e.invert(d.tetrate(n,d.minabs(1e308,ge(t)).toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function Ho(n,e,t){const i=d.minabs(e,1e308).toNumber();return d.layeradd(n,i,t)}function Qo(n,e,t,i){return T(e)?e.invert(d.layeradd(n,d.minabs(1e308,ge(t)).negate().toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function Zo(n,e){return T(e)?e.invert(d.pow(Math.E,n).times(n)):(console.error("Could not invert due to no input being a variable"),0)}function Ko(n,e){return T(e)?e.invert(d.tetrate(n,2)):(console.error("Could not invert due to no input being a variable"),0)}function Xo(n,e,t){const i=d.minabs(e,1e308).toNumber();return d.pentate(n,i,t)}function es(n,e){return T(e)?e.invert(d.asin(n)):(console.error("Could not invert due to no input being a variable"),0)}function ts(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.cos(t).neg()}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function ns(n,e){return T(e)?e.invert(d.acos(n)):(console.error("Could not invert due to no input being a variable"),0)}function is(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.sin(t)}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function as(n,e){return T(e)?e.invert(d.atan(n)):(console.error("Could not invert due to no input being a variable"),0)}function rs(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.cos(t).ln().neg()}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function os(n,e){return T(e)?e.invert(d.sin(n)):(console.error("Could not invert due to no input being a variable"),0)}function ss(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.asin(t).times(t).add(l.sqrt(l.sub(1,l.pow(t,2))))}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function ls(n,e){return T(e)?e.invert(d.cos(n)):(console.error("Could not invert due to no input being a variable"),0)}function us(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.acos(t).times(t).sub(l.sqrt(l.sub(1,l.pow(t,2))))}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function cs(n,e){return T(e)?e.invert(d.tan(n)):(console.error("Could not invert due to no input being a variable"),0)}function ds(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.atan(t).times(t).sub(l.ln(l.pow(t,2).add(1)).div(2))}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function ps(n,e){return T(e)?e.invert(d.asinh(n)):(console.error("Could not invert due to no input being a variable"),0)}function ms(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.cosh(t)}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function gs(n,e){return T(e)?e.invert(d.acosh(n)):(console.error("Could not invert due to no input being a variable"),0)}function hs(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.sinh(t)}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function fs(n,e){return T(e)?e.invert(d.atanh(n)):(console.error("Could not invert due to no input being a variable"),0)}function ys(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.cosh(t).ln()}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function vs(n,e){return T(e)?e.invert(d.sinh(n)):(console.error("Could not invert due to no input being a variable"),0)}function bs(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.asinh(t).times(t).sub(l.pow(t,2).add(1).sqrt())}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function ws(n,e){return T(e)?e.invert(d.cosh(n)):(console.error("Could not invert due to no input being a variable"),0)}function Cs(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.acosh(t).times(t).sub(l.add(t,1).sqrt().times(l.sub(t,1).sqrt()))}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function _s(n,e){return T(e)?e.invert(d.tanh(n)):(console.error("Could not invert due to no input being a variable"),0)}function xs(n,e){if(T(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),l.constant(0);const t=e.getIntegralFormula(n);return l.atanh(t).times(t).add(l.sub(1,l.pow(t,2)).ln().div(2))}return console.error("Could not integrate due to no input being a variable"),l.constant(0)}function ht(n){return(e,t)=>new l({inputs:[e,t],evaluate:n,invert:Xt})}function T(n){return n instanceof Lt&&n.hasVariable()}function ge(n,e){return n instanceof Lt?n.evaluate(e):w(n)}function ks(){return l.pow(this,2).div(2)}function Ns(){return this}const J=class J{constructor(e){O(this,"inputs");O(this,"internalEvaluate");O(this,"internalInvert");O(this,"internalIntegrate");O(this,"internalIntegrateInner");O(this,"applySubstitution");O(this,"description");O(this,"internalVariables");O(this,"innermostVariable");O(this,"negate",this.neg);O(this,"negated",this.neg);O(this,"sgn",this.sign);O(this,"plus",this.add);O(this,"subtract",this.sub);O(this,"minus",this.sub);O(this,"multiply",this.mul);O(this,"times",this.mul);O(this,"divide",this.div);O(this,"divideBy",this.div);O(this,"dividedBy",this.div);O(this,"reciprocal",this.recip);O(this,"reciprocate",this.recip);O(this,"logarithm",this.log);let t;"inputs"in e&&(e.inputs=e.inputs.map(i=>typeof i=="object"&&Je in i?i[Je]:i)),"variable"in e?(typeof e.variable=="object"&&Je in e.variable&&(e.variable=e.variable[Je]),t=this.setupVariable(e)):"evaluate"in e?t=this.setupFormula(e):t=this.setupConstant(e),this.inputs=t.inputs,this.internalVariables=t.internalVariables,this.innermostVariable=t.innermostVariable,this.internalEvaluate=t.internalEvaluate,this.internalInvert=t.internalInvert,this.internalIntegrate=t.internalIntegrate,this.internalIntegrateInner=t.internalIntegrateInner,this.applySubstitution=t.applySubstitution,this.description=e.description}setupVariable({variable:e}){return{inputs:[e],internalVariables:1,innermostVariable:e,internalIntegrate:ks,internalIntegrateInner:Ns,applySubstitution:Xt}}setupConstant({inputs:e}){return e.length!==1&&console.error("Evaluate function is required if inputs is not length 1"),{inputs:e,internalVariables:0}}setupFormula(e){const{inputs:t,evaluate:i,invert:a,integrate:r,integrateInner:m,applySubstitution:p}=e,s=t.reduce((h,q)=>h+(q instanceof J?q.internalVariables:0),0),o=t.find(h=>h instanceof J&&h.hasVariable()),f=s===1?o==null?void 0:o.innermostVariable:void 0,v=(o==null?void 0:o.isInvertible())??!1,y=(o==null?void 0:o.isIntegrable())??!1;return{inputs:t,internalEvaluate:i,internalInvert:v?a:void 0,internalIntegrate:y?r:void 0,internalIntegrateInner:m,applySubstitution:p,innermostVariable:f,internalVariables:s}}isInvertible(){return this.hasVariable()&&(this.internalInvert!=null||this.internalEvaluate==null)}isIntegrable(){return this.hasVariable()&&this.internalIntegrate!=null}isIntegralInvertible(){return this.isIntegrable()?this.getIntegralFormula().isInvertible():!1}hasVariable(){return this.internalVariables===1}evaluate(e){var t;return((t=this.internalEvaluate)==null?void 0:t.call(this,...this.inputs.map(i=>ge(i,e))))??(this.hasVariable()?e:null)??ge(this.inputs[0])}equals(e){return this.inputs.length===e.inputs.length&&this.inputs.every((t,i)=>t instanceof J&&e.inputs[i]instanceof J?t.equals(e.inputs[i]):!(t instanceof J)&&!(e.inputs[i]instanceof J)&&d.eq(w(t),w(e.inputs[i])))&&this.internalEvaluate===e.internalEvaluate&&this.internalInvert===e.internalInvert&&this.internalIntegrate===e.internalIntegrate&&this.internalVariables===e.internalVariables}static constant(e){return new l({inputs:[e]})}static variable(e){return new l({variable:e})}static stringify(e){return e instanceof J?e.description!=null?e.description:e.internalEvaluate==null?e.hasVariable()?"x":Pe(e.inputs[0]??0):`${e.internalEvaluate.name}(${e.inputs.map(l.stringify).join(", ")})`:Pe(w(e))}static step(e,t,i){const a=i(l.variable(0)),r=fe(t);function m(s){return d.lt(s,w(r))?s:d.add(a.evaluate(d.sub(s,w(r))),w(r))}function p(s,o){return T(o)&&a.isInvertible()?(d.gt(s,w(r))&&(s=d.add(a.invert(d.sub(s,w(r))),w(r))),o.invert(s)):(console.error("Could not invert due to no input being a variable"),0)}return new l({inputs:[e],evaluate:m,invert:a.isInvertible()&&a.hasVariable()?p:void 0,description:"indeterminate"})}static if(e,t,i,a){const r=V(0),m=l.variable(r),p=i(m),s=a==null?void 0:a(m),o=fe(t);function f(y){return w(o)?(r.value=y,p.evaluate()):s?(r.value=y,s.evaluate()):y}function v(y,h){return!T(h)||!p.isInvertible()||s!=null&&!s.isInvertible()?(console.error("Could not invert due to no input being a variable"),0):w(o)?h.invert(p.invert(y)):s?h.invert(s.invert(y)):h.invert(y)}return new l({inputs:[e],evaluate:f,invert:p.isInvertible()&&p.hasVariable()?v:void 0,description:"indeterminate"})}static conditional(e,t,i,a){return l.if(e,t,i,a)}static abs(e){return new l({inputs:[e],evaluate:d.abs})}static neg(e){return new l({inputs:[e],evaluate:d.neg,invert:Kr,applySubstitution:eo,integrate:Xr})}static sign(e){return new l({inputs:[e],evaluate:d.sign})}static round(e){return new l({inputs:[e],evaluate:d.round,invert:Tt})}static floor(e){return new l({inputs:[e],evaluate:d.floor,invert:Tt})}static ceil(e){return new l({inputs:[e],evaluate:d.ceil,invert:Tt})}static trunc(e){return new l({inputs:[e],evaluate:d.trunc,invert:Tt})}static add(e,t){return new l({inputs:[e,t],evaluate:d.add,invert:to,integrate:no,integrateInner:io,applySubstitution:Xt})}static sub(e,t){return new l({inputs:[e,t],evaluate:d.sub,invert:ao,integrate:ro,integrateInner:oo,applySubstitution:Xt})}static mul(e,t){return new l({inputs:[e,t],evaluate:d.mul,invert:so,integrate:lo,applySubstitution:uo})}static div(e,t){return new l({inputs:[e,t],evaluate:d.div,invert:co,integrate:po,applySubstitution:mo})}static recip(e){return new l({inputs:[e],evaluate:d.recip,invert:go,integrate:ho})}static clamp(e,t,i){return new l({inputs:[e,t,i],evaluate:d.clamp,invert:Tt})}static pLog10(e){return new l({inputs:[e],evaluate:d.pLog10})}static absLog10(e){return new l({inputs:[e],evaluate:d.absLog10})}static log10(e){return new l({inputs:[e],evaluate:d.log10,invert:fo,integrate:bo})}static log(e,t){return new l({inputs:[e,t],evaluate:d.log,invert:wo,integrate:xo})}static log2(e){return new l({inputs:[e],evaluate:d.log2,invert:ko,integrate:So})}static ln(e){return new l({inputs:[e],evaluate:d.ln,invert:Ao,integrate:Eo})}static pow(e,t){return new l({inputs:[e,t],evaluate:d.pow,invert:qo,integrate:Po})}static pow10(e){return new l({inputs:[e],evaluate:d.pow10,invert:Do,integrate:Fo})}static pow_base(e,t){return new l({inputs:[e,t],evaluate:d.pow_base,invert:Ro,integrate:Oo})}static root(e,t){return new l({inputs:[e,t],evaluate:d.root,invert:Lo,integrate:Go})}static factorial(e){return new l({inputs:[e],evaluate:d.factorial})}static gamma(e){return new l({inputs:[e],evaluate:d.gamma})}static lngamma(e){return new l({inputs:[e],evaluate:d.lngamma})}static exp(e){return new l({inputs:[e],evaluate:d.exp,invert:zo,integrate:Wo})}static sqr(e){return l.pow(e,2)}static sqrt(e){return l.root(e,2)}static cube(e){return l.pow(e,3)}static cbrt(e){return l.root(e,3)}static tetrate(e,t=2,i=d.fromComponents_noNormalize(1,0,1)){return new l({inputs:[e,t,i],evaluate:$o,invert:Bo})}static iteratedexp(e,t=2,i=d.fromComponents_noNormalize(1,0,1)){return new l({inputs:[e,t,i],evaluate:Uo,invert:Vo})}static iteratedlog(e,t=10,i=1){return new l({inputs:[e,t,i],evaluate:Jo})}static slog(e,t=10){return new l({inputs:[e,t],evaluate:jo,invert:Yo})}static layeradd10(e,t){return new l({inputs:[e,t],evaluate:d.layeradd10})}static layeradd(e,t,i=10){return new l({inputs:[e,t,i],evaluate:Ho,invert:Qo})}static lambertw(e){return new l({inputs:[e],evaluate:d.lambertw,invert:Zo})}static ssqrt(e){return new l({inputs:[e],evaluate:d.ssqrt,invert:Ko})}static pentate(e,t=2,i=d.fromComponents_noNormalize(1,0,1)){return new l({inputs:[e,t,i],evaluate:Xo})}static sin(e){return new l({inputs:[e],evaluate:d.sin,invert:os,integrate:ts})}static cos(e){return new l({inputs:[e],evaluate:d.cos,invert:ls,integrate:is})}static tan(e){return new l({inputs:[e],evaluate:d.tan,invert:cs,integrate:rs})}static asin(e){return new l({inputs:[e],evaluate:d.asin,invert:es,integrate:ss})}static acos(e){return new l({inputs:[e],evaluate:d.acos,invert:ns,integrate:us})}static atan(e){return new l({inputs:[e],evaluate:d.atan,invert:as,integrate:ds})}static sinh(e){return new l({inputs:[e],evaluate:d.sinh,invert:vs,integrate:ms})}static cosh(e){return new l({inputs:[e],evaluate:d.cosh,invert:ws,integrate:hs})}static tanh(e){return new l({inputs:[e],evaluate:d.tanh,invert:_s,integrate:ys})}static asinh(e){return new l({inputs:[e],evaluate:d.asinh,invert:ps,integrate:bs})}static acosh(e){return new l({inputs:[e],evaluate:d.acosh,invert:gs,integrate:Cs})}static atanh(e){return new l({inputs:[e],evaluate:d.atanh,invert:fs,integrate:xs})}stringify(){return l.stringify(this)}step(e,t){return l.step(this,e,t)}if(e,t){return l.if(this,e,t)}conditional(e,t){return l.if(this,e,t)}abs(){return l.abs(this)}neg(){return l.neg(this)}sign(){return l.sign(this)}round(){return l.round(this)}floor(){return l.floor(this)}ceil(){return l.ceil(this)}trunc(){return l.trunc(this)}add(e){return l.add(this,e)}sub(e){return l.sub(this,e)}mul(e){return l.mul(this,e)}div(e){return l.div(this,e)}recip(){return l.recip(this)}max(e){return l.max(this,e)}min(e){return l.min(this,e)}maxabs(e){return l.maxabs(this,e)}minabs(e){return l.minabs(this,e)}clamp(e,t){return l.clamp(this,e,t)}clampMin(e){return l.clampMin(this,e)}clampMax(e){return l.clampMax(this,e)}pLog10(){return l.pLog10(this)}absLog10(){return l.absLog10(this)}log10(){return l.log10(this)}log(e){return l.log(this,e)}log2(){return l.log2(this)}ln(){return l.ln(this)}pow(e){return l.pow(this,e)}pow10(){return l.pow10(this)}pow_base(e){return l.pow_base(this,e)}root(e){return l.root(this,e)}factorial(){return l.factorial(this)}gamma(){return l.gamma(this)}lngamma(){return l.lngamma(this)}exp(){return l.exp(this)}sqr(){return l.pow(this,2)}sqrt(){return l.root(this,2)}cube(){return l.pow(this,3)}cbrt(){return l.root(this,3)}tetrate(e=2,t=d.fromComponents_noNormalize(1,0,1)){return l.tetrate(this,e,t)}iteratedexp(e=2,t=d.fromComponents_noNormalize(1,0,1)){return l.iteratedexp(this,e,t)}iteratedlog(e=10,t=1){return l.iteratedlog(this,e,t)}slog(e=10){return l.slog(this,e)}layeradd10(e){return l.layeradd10(this,e)}layeradd(e,t){return l.layeradd(this,e,t)}lambertw(){return l.lambertw(this)}ssqrt(){return l.ssqrt(this)}pentate(e=2,t=d.fromComponents_noNormalize(1,0,1)){return l.pentate(this,e,t)}sin(){return l.sin(this)}cos(){return l.cos(this)}tan(){return l.tan(this)}asin(){return l.asin(this)}acos(){return l.acos(this)}atan(){return l.atan(this)}sinh(){return l.sinh(this)}cosh(){return l.cosh(this)}tanh(){return l.tanh(this)}asinh(){return l.asinh(this)}acosh(){return l.acosh(this)}atanh(){return l.atanh(this)}};O(J,"negate",J.neg),O(J,"negated",J.neg),O(J,"sgn",J.sign),O(J,"plus",J.add),O(J,"subtract",J.sub),O(J,"minus",J.sub),O(J,"multiply",J.mul),O(J,"times",J.mul),O(J,"divide",J.div),O(J,"divideBy",J.div),O(J,"dividedBy",J.div),O(J,"reciprocal",J.recip),O(J,"reciprocate",J.recip),O(J,"max",ht(d.max)),O(J,"min",ht(d.min)),O(J,"minabs",ht(d.minabs)),O(J,"maxabs",ht(d.maxabs)),O(J,"clampMin",ht(d.clampMin)),O(J,"clampMax",ht(d.clampMax)),O(J,"logarithm",J.log);let Lt=J;class l extends Lt{constructor(){super(...arguments);O(this,"integralFormula")}invert(t){return this.internalInvert&&this.hasVariable()?this.internalInvert.call(this,t,...this.inputs):this.inputs.length===1&&this.hasVariable()?t:(console.error("Cannot invert non-invertible formula"),0)}evaluateIntegral(t){return this.isIntegrable()?this.getIntegralFormula().evaluate(t):(console.error("Cannot evaluate integral of formula without integral"),0)}invertIntegral(t){return!this.isIntegrable()||!this.getIntegralFormula().isInvertible()?(console.error("Cannot invert integral of formula without invertible integral"),0):this.getIntegralFormula().invert(t)}calculateConstantOfIntegration(){const t=this.getIntegralFormula().evaluate(1),i=d.add(this.evaluate(0),this.evaluate(1)).div(2);return d.sub(i,t)}getIntegralFormula(t){if(this.integralFormula!=null&&t==null)return this.integralFormula;if(t==null){if(this.applySubstitution==null){if(t=[],this.internalIntegrate==null)return console.error("Cannot integrate formula with non-integrable operation"),l.constant(0);let i=this.internalIntegrate.call(this,t,...this.inputs);t.forEach(a=>i=a(i)),this.integralFormula=i}else if(this.internalIntegrate)this.integralFormula=this.internalIntegrate.call(this,void 0,...this.inputs);else if(this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable())this.integralFormula=this;else return console.error("Cannot integrate formula without variable"),l.constant(0);return this.integralFormula}else return this.applySubstitution==null?(console.error("Cannot have two complex operations in an integrable formula"),l.constant(0)):(t.push(i=>this.applySubstitution.call(this,i,...this.inputs)),this.internalIntegrateInner?this.internalIntegrateInner.call(this,t,...this.inputs):this.internalIntegrate?this.internalIntegrate.call(this,t,...this.inputs):this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable()?this:(console.error("Cannot integrate formula without variable"),l.constant(0)))}}const vt=Symbol("PersistentState"),nn=Symbol("DefaultValue"),an=Symbol("StackTrace"),Cn=Symbol("Deleted"),Je=Symbol("NonPersistent"),ot=Symbol("SaveDataPath"),rn=Symbol("SkipPersistence");function Is(){var n;return((n=new Error().stack)==null?void 0:n.split(`
`).slice(3,5).map(e=>e.trim()).join(`
`))??""}function oi(n,e){var t;d.isNaN(e)&&(re.hasNaN||(_.autosave=!1,re.hasNaN=!0,re.NaNPath=n[ot],re.NaNPersistent=n),console.error(`Attempted to save NaN value to ${(t=n[ot])==null?void 0:t.join(".")}`)),n[vt].value=e}function Y(n,e=!0){const t=Ot(n)?n:V(n);Ot(n)&&(n=n.value);const i=$({get(){return t.value},set(r){e?oi(a,r):a[vt].value=r}});i[nn]=n;const a={get value(){return t.value},set value(r){e?oi(a,r):a[vt].value=r},__v_isRef:!0,[vt]:t,[nn]:n,[an]:Is(),[Cn]:!1,[Je]:i,[ot]:void 0};return Oe.length===0?console.warn("Creating a persistent ref outside of a layer. This is not officially supported",a,`
Created at:
`+a[an]):Et[Oe[Oe.length-1]].add(a),a}function Ss(n){return n!=null&&typeof n=="object"&&vt in n}be.on("addLayer",(n,e)=>{const t=[],i=(a,r=[])=>{let m=!1;return Object.keys(a).forEach(p=>{let s=a[p];if(s!=null&&typeof s=="object"){if(rn in s&&s[rn]===!0)return;if(rt in s&&(s=s[rt]),Ss(s)){if(m=!0,s[Cn]){console.warn("Deleted persistent ref present in returned object. Ignoring...",s,`
Created at:
`+s[an]);return}Et[n.id].delete(s);const o=[n.id,...r,p];s[ot]!=null&&JSON.stringify(o)!==JSON.stringify(s[ot])&&console.error(`Persistent ref is being saved to \`${o.join(".")}\` when it's already present at \`${s[ot].join(".")}\`.`,"This can cause unexpected behavior when loading saves between updates."),s[ot]=o;const f=r.reduce((y,h)=>(h in y||(y[h]={}),y[h]),e),v=f[p];f[p]=s[vt],Na(f)?v!=null?f[p]=v:f[p]=s[nn]:v!=null?f[p].value=v:f[p].value=s[nn]}else!(s instanceof d)&&!(s instanceof l)&&!Ot(s)&&!t.includes(s)&&(typeof s.type=="symbol"&&t.push(s),i(s,[...r,p])&&(Array.isArray(s)&&!Array.isArray(a)?console.warn("Found array that contains persistent values when adding layer. Keep in mind changing the order of elements in the array will mess with existing player saves.",rt in a?a[rt]:a,p):m=!0))}}),m};i(n[rt]),Et[n.id].forEach(a=>{a[Cn]||console.error(`Created persistent ref in "${n.id}" without registering it to the layer!`,`Make sure to include everything persistent in the returned object.

Created at:
`+a[an])}),Et[n.id].clear()});const Oi=Symbol("RegisterNode"),Li=Symbol("UnregisterNode"),As=Symbol("Nodes"),Ts=Symbol("Bounds"),B=In({});window.layers=B;const Et={},Oe=[];function Tn(n,e){return kt(()=>{const t=_i();Oe.push(n),Et[n]=new Set;const i={id:n,emitter:t,...t,nodes:V({}),minimized:Y(!1,!1)},a=e(i),{color:r,display:m,classes:p,style:s,name:o,forceHideGoBack:f,minWidth:v,minimizable:y,minimizedDisplay:h,...q}=a;if(Oe[Oe.length-1]==null||Oe[Oe.length-1]!==n)throw new Error(`Adding layers stack in invalid state. This should not happen
Stack: ${Oe}
Trying to pop ${n}`);Oe.pop();const R=fe(s),H={...i,...q,color:fe(r),display:m,classes:fe(p),style:$(()=>{let M=w(H.minWidth);return(typeof M=="number"||!Number.isNaN(parseInt(M)))&&(M=M+"px"),{...w(R),...i.minimized.value?{flexGrow:"0",flexShrink:"0",width:"60px",minWidth:"",flexBasis:"",margin:"0"}:{flexGrow:"",flexShrink:"",width:"",minWidth:M,flexBasis:M,margin:""}}}),name:fe(o)??n,forceHideGoBack:fe(f),minWidth:fe(v)??100,minimizable:fe(y)??!0,minimizedDisplay:h};return H})}function Ms(n,e){if(B[n.id]!=null){console.error("Attempted to add layer with same ID as existing layer",n.id,B[n.id]);return}e.layers??(e.layers={}),e.layers[n.id]==null&&(e.layers[n.id]={}),B[n.id]=n,be.emit("addLayer",n,e.layers[n.id])}function Es(n){console.info("Removing layer",n.id),be.emit("removeLayer",n),delete B[n.id]}be.on("update",function(e){_.gameOver||(Object.values(B).forEach(t=>{t==null||t.emit("preUpdate",e)}),Object.values(B).forEach(t=>{t==null||t.emit("update",e)}),Object.values(B).forEach(t=>{t==null||t.emit("postUpdate",e)}))});function si(n,e="points",t=0,i=void 0){const a=Ot(n)?n:Y(n);if(a.displayName=e,a.precision=t,a.small=i,!Ot(n)){const r=a[Je];r.displayName=e,r.precision=t,r.small=i}return a}function qs(n){const e=Y(n.value);return le(n,t=>{Ct.value||d.gt(t,e.value)&&(e.value=t)}),e}function Ps(n){const e=Y(n.value);return le(n,(t,i)=>{Ct.value||d.gt(t,i)&&(e.value=d.add(e.value,d.sub(t,i)))}),e}new d("10^^8");new d("1e100");let Ds=0;function Fs(n="feature-"){return n+Ds++}var lt=(n=>(n[n.Visible=0]="Visible",n[n.Hidden=1]="Hidden",n[n.None=2]="None",n))(lt||{});function Mn(n){const e=w(n);return e!==2&&e!==!1}function Rs(n){return w(n)===1}const Os=de({__name:"Node",props:{id:{}},setup(n){const e=n,t=ei(Oi,()=>{}),i=ei(Li,()=>{}),a=bi(null),r=$(()=>a.value&&a.value.parentElement);return le([r,ut(e,"id")],([m,p],[s,o])=>{s&&i(w(o)),m&&t(p,m)}),wi(()=>i(e.id)),(m,p)=>(S(),D("div",{class:"node",ref_key:"node",ref:a},null,512))}}),Ls=he(Os,[["__scopeId","data-v-4673aca5"]]),Gs=de({__name:"VueFeature",props:{id:{},components:{},wrappers:{},visibility:{default:!0},style:{default:()=>({})},classes:{default:()=>({})}},setup(n){const e=n,t=()=>e.wrappers.reduce((i,a)=>()=>a(i),()=>u(se,null,[e.components.map(i=>ye(i))]))();return(i,a)=>w(Mn)(w(i.visibility))?(S(),D("div",{key:0,style:Be([{visibility:w(Rs)(w(i.visibility))?"hidden":void 0},w(i.style)]),class:ve({feature:!0,...w(i.classes)})},[u(t),u(Ls,{id:i.id},null,8,["id"])],6)):X("",!0)}}),Gi=Symbol("VueFeature");function En(n,e,t){return{id:Fs(n),visibility:fe(e.visibility),classes:fe(e.classes),style:fe(e.style),components:t==null?[]:[t],wrappers:[],[Gi]:!0}}function ye(n,e){if(typeof n=="object"&&Gi in n){const{id:t,visibility:i,style:a,classes:r,components:m,wrappers:p}=n;return u(Gs,{id:t,visibility:i,style:a,classes:r,components:m,wrappers:p},null)}return n=Ia(n),(e==null?void 0:e(n))??n}function li(n,e){return n.reduce((t,i)=>u(se,null,[t,e,ye(i)]),u(se,null,null))}function en(n){return n!=null&&typeof n=="object"&&"type"in n&&"children"in n}function zi(n){const e=V(null),t=V(void 0);function i(m){e.value==null&&(e.value=setInterval(r,250)),t.value=m}function a(){e.value!=null&&(clearInterval(e.value),e.value=null)}function r(){n(t.value)}return wi(a),{start:i,stop:a,handleHolding:r}}const zs=["disabled"],Ws=de({__name:"Clickable",props:{canClick:{},display:{}},emits:["click","hold"],setup(n,{emit:e}){const t=n,i=e,a=()=>t.display==null?u(se,null,null):ye(t.display),{start:r,stop:m}=zi(()=>i("hold"));return(p,s)=>(S(),D("button",{onClick:s[0]||(s[0]=o=>i("click",o)),onMousedown:s[1]||(s[1]=(...o)=>w(r)&&w(r)(...o)),onMouseleave:s[2]||(s[2]=(...o)=>w(m)&&w(m)(...o)),onMouseup:s[3]||(s[3]=(...o)=>w(m)&&w(m)(...o)),onTouchstartPassive:s[4]||(s[4]=(...o)=>w(r)&&w(r)(...o)),onTouchendPassive:s[5]||(s[5]=(...o)=>w(m)&&w(m)(...o)),onTouchcancelPassive:s[6]||(s[6]=(...o)=>w(m)&&w(m)(...o)),class:ve({clickable:!0,can:w(p.canClick),locked:!w(p.canClick)}),disabled:!w(p.canClick)},[u(a)],42,zs))}}),$s=he(Ws,[["__scopeId","data-v-c427c38d"]]),Bs=Symbol("Clickable");function ui(n){return kt(()=>{const e=(n==null?void 0:n())??{},{canClick:t,display:i,onClick:a,onHold:r,...m}=e;let p;typeof i=="object"&&!en(i)?p=()=>u("span",null,[i.title!=null?u("div",null,[ye(i.title,o=>u("h3",null,[o]))]):null,ye(i.description,o=>u("div",null,[o]))]):i!=null&&(p=i);const s={type:Bs,...m,...En("clickable",e,()=>u($s,{canClick:s.canClick,onClick:s.onClick,onHold:s.onClick,display:s.display},null)),canClick:fe(t)??!0,display:p,onClick:a==null?void 0:function(o){w(s.canClick)!==!1&&a.call(s,o)},onHold:r==null?void 0:function(){w(s.canClick)!==!1&&r.call(s)}};return s})}const Us=de({__name:"TreeNode",props:{canClick:{},display:{},color:{},glowColor:{}},emits:["click","hold"],setup(n,{emit:e}){const t=n,i=e,a=()=>t.display==null?u(se,null,null):ye(t.display,p=>u("div",null,[p])),{start:r,stop:m}=zi(()=>i("hold"));return(p,s)=>(S(),D("button",{style:Be({backgroundColor:w(p.color),boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 20px ${w(p.glowColor)}`}),class:ve({treeNode:!0,can:w(p.canClick)}),onClick:s[0]||(s[0]=o=>i("click",o)),onMousedown:s[1]||(s[1]=(...o)=>w(r)&&w(r)(...o)),onMouseleave:s[2]||(s[2]=(...o)=>w(m)&&w(m)(...o)),onMouseup:s[3]||(s[3]=(...o)=>w(m)&&w(m)(...o)),onTouchstartPassive:s[4]||(s[4]=(...o)=>w(r)&&w(r)(...o)),onTouchendPassive:s[5]||(s[5]=(...o)=>w(m)&&w(m)(...o)),onTouchcancelPassive:s[6]||(s[6]=(...o)=>w(m)&&w(m)(...o))},[u(a)],38))}}),Vs=he(Us,[["__scopeId","data-v-80b5b7b8"]]),Js=Symbol("TreeNode");function Wi(n){return kt(()=>{const e=(n==null?void 0:n())??{},{canClick:t,color:i,display:a,glowColor:r,onClick:m,onHold:p,...s}=e,o={type:Js,...s,...En("treeNode",e,()=>u(Vs,{canClick:o.canClick,display:o.display,onClick:o.onClick,onHold:o.onHold,color:o.color,glowColor:o.glowColor},null)),canClick:fe(t)??!0,color:fe(i),display:a,glowColor:fe(r),onClick:m==null?void 0:function(f){w(o.canClick)!==!1&&m.call(o,f)},onHold:p==null?void 0:function(){w(o.canClick)!==!1&&p.call(o)}};return o})}const js={class:"field"},Ys={key:0,class:"field-title"},$i=de({__name:"Select",props:{title:{},modelValue:{},options:{},placeholder:{},closeOnSelect:{type:Boolean}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,i=e,a=()=>t.title?ye(t.title,p=>u("span",null,[p])):u(se,null,null),r=V(t.options.find(p=>p.value===t.modelValue)??null);le(ut(t,"modelValue"),p=>{w(r)!==p&&(r.value=t.options.find(s=>s.value===p)??null)});function m(p){i("update:modelValue",p.value)}return(p,s)=>(S(),D("div",js,[p.title?(S(),D("span",Ys,[u(a)])):X("",!0),u(w(qa),{options:p.options,modelValue:r.value,"onUpdate:modelValue":[s[0]||(s[0]=o=>r.value=o),m],min:1,placeholder:p.placeholder,"close-on-select":p.closeOnSelect,"label-by":"label"},null,8,["options","modelValue","placeholder","close-on-select"])]))}});be.on("setupVue",n=>n.use(Pa));function Hs(n){return kt(()=>({[rn]:!0,requirementMet:$(()=>Mn(n)),visibility:lt.None,requiresPay:!1}))}function Bi(n,e){return kt(()=>{const t=e==null?void 0:typeof e=="function"?e:()=>e;return{requirementMet:fe(n),partialDisplay:t,display:e==null?void 0:()=>u(se,null,[N("Req: "),t]),visibility:e==null?lt.None:lt.Visible,requiresPay:!1,[rn]:!0}})}function Ui(n){if(Array.isArray(n))return n.every(Ui);const e=w(n.requirementMet);return typeof e=="boolean"?e:d.gt(e,0)}function ci(n,e=1){var t;if(Array.isArray(n)&&(n=n.filter(i=>Mn(i.visibility??!0)),n.length===1&&(n=n[0])),Array.isArray(n)){n=n.filter(r=>"partialDisplay"in r);const i=n.filter(r=>w(r.requiresPay)),a=n.filter(r=>!w(r.requiresPay));return u(se,null,[i.length>0?u("div",null,[N("Costs:")," ",li(i.map(r=>r.partialDisplay(e)),u(se,null,[N(", ")]))]):null,a.length>0?u("div",null,[N("Requires:")," ",li(a.map(r=>r.partialDisplay(e)),u(se,null,[N(", ")]))]):null])}return((t=n.display)==null?void 0:t.call(n))??u(se,null,null)}const Qs=de({__name:"Achievement",props:{display:{},earned:{},requirements:{},image:{},small:{}},setup(n){const e=n,t=()=>e.display==null?u(se,null,null):ye(e.display);return(i,a)=>(S(),D("button",{style:Be({backgroundImage:w(i.earned)&&w(i.image)&&`url(${i.image})`||""}),class:ve({achievement:!0,locked:!w(i.earned),done:w(i.earned),small:w(i.small)})},[u(t)],6))}}),Zs=he(Qs,[["__scopeId","data-v-13cff920"]]),Ks=xi(),Xs=Symbol("Achievement");let yt=function(n){return n.All="all",n.Configurable="configurable",n.Incomplete="incomplete",n.None="none",n}({});function el(n){const e=Y(!1,!1);return kt(()=>{const t=(n==null?void 0:n())??{},{requirements:i,display:a,small:r,image:m,showPopups:p,onComplete:s,...o}=t,f=En("achievement",t,()=>u(Zs,{display:y.display,earned:y.earned,requirements:y.requirements,image:y.image,small:y.small},null));let v;if(typeof a=="object"&&!en(a)){const{requirement:h,effectDisplay:q,optionsDisplay:R}=a;v=()=>u("span",null,[h==null?ci(i??[]):ye(h,H=>u("h3",null,[H])),q==null?null:u("div",null,[ye(q,H=>u("b",null,[H]))]),R!=null?u("div",{class:"equal-spaced"},[ye(R)]):null])}else a!=null&&(v=a);const y={type:Xs,...o,...f,visibility:$(()=>{switch(Q.msDisplay){default:case yt.All:return w(f.visibility)??!0;case yt.Configurable:return w(e)&&!(a!=null&&typeof a=="object"&&!en(a))?lt.None:w(f.visibility)??!0;case yt.Incomplete:return w(e)?lt.None:w(f.visibility)??!0;case yt.None:return lt.None}}),earned:e,onComplete:s,small:fe(r),image:fe(m),showPopups:fe(p)??!0,display:v,requirements:i==null?void 0:[Hs(f.visibility??!0),Bi(()=>!e.value),...Array.isArray(i)?i:[i]],complete(){var h;e.value||(e.value=!0,(h=y.onComplete)==null||h.call(y),Ji(),y.display!=null&&w(y.showPopups)===!0&&(y.display,typeof a=="object"&&!en(a)&&(a.requirement!=null?a.requirement:ci(i??[])),Ks.info(u("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},[y.image!=null?u("img",{src:w(y.image),alt:"Achievement",style:"width: 28px; height: 28px; border-radius: 4px; object-fit: cover;"},null):null,u("div",null,[u("div",{style:"font-weight: 700;"},[N("Achievement earned!")]),u("div",null,[ye(y.display)])])]),{timeout:3500})))}};return y.requirements!=null&&Ci(()=>{Q.active===_.id&&Ui(y.requirements??[])&&y.complete()}),y})}be.on("loadSettings",n=>{n.msDisplay??(n.msDisplay=yt.All)});const tl=Object.values(yt).map(n=>({label:Qr(n),value:n}));be.on("setupVue",()=>wl(()=>u($i,{title:u("span",{class:"option-title"},[N("Show achievements"),u("desc",null,[N("Select which achievements to display based on criterias.")])]),options:tl,"onUpdate:modelValue":n=>Q.msDisplay=n,modelValue:Q.msDisplay},null)));const nl="achievements";let je={};const il=Tn(nl,function(){const n="Achievements",e="#9C27B0",t=$(()=>B.main),i=$(()=>{var y,h;return((h=(y=t.value)==null?void 0:y.gpusOwned)==null?void 0:h.value)??0}),a=$(()=>{var y,h;return((h=(y=t.value)==null?void 0:y.money)==null?void 0:h.value)??0}),r=$(()=>{var y,h;return((h=(y=t.value)==null?void 0:y.jobCompletions)==null?void 0:h.value)??0}),m=$(()=>{var y,h;return((h=(y=t.value)==null?void 0:y.completedOnetimeJobs)==null?void 0:h.value)??[]}),p="/ach/ach_gen.png",o=[...[{id:"computeCluster4",title:"Quad Compute",image:"/ach/ach3.png",description:"Own 4 GPUs",requirement:()=>i.value>=4,requirementText:"Own at least requirementText"},{id:"computeCluster",title:"Compute Cluster",description:"Reach 8 total compute units.",reward:"Permanent badge for future runs.",image:"/ach/ach_sat_signal.png",requirement:()=>i.value>=8},{id:"compute16",title:"Sillicon",description:"Reach 16 total compute units.",image:"/ach/ach_beehat.png",requirement:()=>i.value>=16},{id:"gateStayedClosed",title:"The Narrow Path",image:"/ach/ach_good1.png",description:"YOU WON! AI is a boon to humanity",requirement:()=>_.gameOver===!0&&Array.isArray(_.tabs)&&_.tabs.includes("ending_win")&&!_.tabs.includes("ending_lose_agi_threshold")&&!_.tabs.includes("ending_lose_agi")&&!_.tabs.includes("ending_bad_perception_manipulation_apparatus")&&!_.tabs.includes("ending_bad_algorithmic_authoritarianism"),requirementText:"Win by completing 5 Wonders without triggering AGI"},{id:"wonderPerceptionManipulationApparatus",title:"Perception Manipulation Apparatus",image:"/ach/ach_badai2.png",requirement:()=>m.value.includes("dem15"),requirementText:"Complete Perception Manipulation Apparatus"},{id:"wonderAlgorithmicAuthoritarianism",title:"Algorithmic Authoritarianism",image:"/ach/ach_badai1.png",requirement:()=>m.value.includes("dem18"),requirementText:"Complete Algorithmic Authoritarianism"},{id:"agiOverload",title:"AGI Overload",image:"/ach/ach_badai3.png",description:"Exceed A+G+I safety threshold.",requirement:()=>_.gameOver===!0&&Array.isArray(_.tabs)&&_.tabs.includes("ending_lose_agi_threshold"),requirementText:"Lose by exceeding the A+G+I threshold"},{id:"mcAgiRace",title:"Lose The Race",image:"/ach/ach_bad1.png",description:"Lose to MegaCorp AGI",requirement:()=>_.gameOver===!0&&Array.isArray(_.tabs)&&_.tabs.includes("ending_lose_agi"),requirementText:"Lose to MegaCorp's AGI timer in Chapter 5"},{id:"wonderFusionEnergy",title:"Fusion Energy",image:"/ach/ach_suneng.png",requirement:()=>m.value.includes("sci12"),requirementText:"Complete Fusion Energy"},{id:"wonderDemocraticConsensusSynthesizer",title:"Democratic Consensus Synthesizer",image:"/ach/ach_dem2.png",requirement:()=>m.value.includes("dem7"),requirementText:"Complete Democratic Consensus Synthesizer"},{id:"wonderCivicTrustInfrastructure",title:"Civic Trust Infrastructure",image:"/ach/ach_civ4.png",requirement:()=>m.value.includes("dem11"),requirementText:"Complete Civic Trust Infrastructure"},{id:"wonderMolecularManufacturing",title:"Molecular Manufacturing",image:"/ach/ach_molen2.png",requirement:()=>m.value.includes("sci7"),requirementText:"Complete Molecular Manufacturing"},{id:"wonderMaterialsDiscovery",title:"Materials Discovery",image:"/ach/ach_fiss.png",requirement:()=>m.value.includes("sci9"),requirementText:"Complete Materials Discovery"},{id:"wonderUniversalEducationTutor",title:"Universal Education Tutor",image:"/ach/ach_edu1.png",requirement:()=>m.value.includes("edu8"),requirementText:"Complete Universal Education Tutor"},{id:"wonderGlobalLearningNetwork",title:"Global Learning Network",image:"/ach/ach_edu4.png",requirement:()=>m.value.includes("edu11"),requirementText:"Complete Global Learning Network"},{id:"wonderHighlyLocalizedWeatherForecasting",title:"Highly Localized Weather Forecasting",image:"/ach/ach_cli2.png",requirement:()=>m.value.includes("clim4"),requirementText:"Complete Highly Localized Weather Forecasting"},{id:"wonderGlobalEmissionsTracking",title:"Global Emissions Tracking",image:"/ach/ach_glob_emis.png",requirement:()=>m.value.includes("clim7"),requirementText:"Complete Global Emissions Tracking"},{id:"wonderClimateAwareGridBalancing",title:"Climate-Aware Grid Balancing",image:"/ach/ach_climdata.png",requirement:()=>m.value.includes("clim11"),requirementText:"Complete Climate-Aware Grid Balancing"},{id:"wonderPrecisionOncology",title:"Precision Oncology",image:"/ach/ach_medtargt.png",requirement:()=>m.value.includes("med4"),requirementText:"Complete Precision Oncology"},{id:"wonderAcceleratedDrugDiscovery",title:"Accelerated Drug Discovery",image:"/ach/ach_protien1.png",requirement:()=>m.value.includes("med8"),requirementText:"Complete Accelerated Drug Discovery"},{id:"wonderUniversalDiseaseTherapeutics",title:"Universal Disease Therapeutics",image:"/ach/ach_med.png",requirement:()=>m.value.includes("med12"),requirementText:"Complete Universal Disease Therapeutics"},{id:"wonderReversalOfAging",title:"Reversal of Aging",image:"/ach/ach_age2.png",requirement:()=>m.value.includes("med14"),requirementText:"Complete Reversal of Aging"},{id:"wonderDis",title:"Disability Support Systems",image:"/ach/ach_disab.png",requirement:()=>m.value.includes("dissu")},{id:"wonderscsc",title:"Room Temperature Superconductors",image:"/ach/ach_nuc.png",requirement:()=>m.value.includes("rtsusc")},{id:"worker",title:"Worker",description:"Complete 1,000 jobs.",image:"/ach/ach_tasks.png",requirement:()=>r.value>=1e3,requirementText:"Complete 1,000 jobs"},{id:"money1",title:"Series A",description:"Reach $5000",image:"/ach/ach_cash1.png",requirement:()=>d.gte(a.value,5e3),requirementText:"Reach $5000"},{id:"money2",title:"Funded",description:"Reach $50,000",image:"/ach/ach_cash2.png",requirement:()=>d.gte(a.value,5e4),requirementText:"Reach $50000"}]];je=Object.fromEntries(o.map(y=>[y.id,el(()=>({display:()=>y.title,image:y.image??p,requirements:Bi(y.requirement,()=>u(se,null,["requirementText"in y&&y.requirementText||""]))}))]));const f=o.map(y=>({id:y.id,title:y.title,description:y.description,image:y.image??p,achievement:je[y.id],reward:"reward"in y?y.reward:void 0}));return setTimeout(()=>{Vi()},100),{name:n,color:e,achievements:je,display:()=>u("div",{style:"padding: 10px;"},[u("div",{style:"text-align: center; margin-bottom: 20px;"},[u("h2",{style:"margin: 0;  color: rgb(230, 218, 199)"},[N("Achievements")])]),u("div",{style:"text-align: center; margin-bottom: 20px;"},[u("button",{onClick:()=>_.tabs=["main"],style:{background:"#4CAF50",color:"white",padding:"10px 20px",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"16px",fontWeight:"bold"}},[N("Return to Game")])]),u("div",{style:"display: flex; flex-direction: column; gap: 12px;"},[f.map(y=>u("div",{key:y.id,style:{display:"flex",alignItems:"center",gap:"16px",padding:"12px 16px",borderRadius:"10px",border:`2px solid ${y.achievement.earned.value?"#4CAF50":"#333"}`,background:y.achievement.earned.value?"#e8f5e9":"#3E4450",color:y.achievement.earned.value?"#555555":"#777777",boxShadow:"0 2px 6px rgba(0,0,0,0.1)",width:"300px"}},[u("img",{src:y.image,alt:y.title,style:{width:"80px",height:"80px",borderRadius:"8px",objectFit:"cover",opacity:(y.achievement.earned.value,.8)}},null),u("div",{style:"flex: 1; text-align: left;"},[u("div",{style:"font-size: 18px; font-weight: bold; margin-bottom: 4px;"},[y.title,y.achievement.earned.value&&u("span",{style:"color: #388E3C; margin-left: 8px; font-size: 14px;"},[N("✓")])]),u("div",{style:"fontSize:15px; marginBottom:4px;"},[y.description])])]))])]),treeNode:Wi(()=>({display:n,color:e}))}}),qn=`achievements-${ee.id||"default"}`;function al(){try{const n=localStorage.getItem(qn);if(!n)return{earned:{}};const e=JSON.parse(n);if(typeof e=="object"&&e!=null&&"earned"in e)return{earned:e.earned}}catch(n){console.warn("Failed to read achievement meta state",n)}return{earned:{}}}function rl(n){try{localStorage.setItem(qn,JSON.stringify(n))}catch(e){console.warn("Failed to write achievement meta state",e)}}function Vi(){const n=al();je&&Object.entries(n.earned).forEach(([e,t])=>{const i=je[e];i!=null&&i.earned&&(i.earned.value=t)})}function Ji(){if(!je||Object.keys(je).length===0)return;const n={};Object.entries(je).forEach(([e,t])=>{var i;((i=t==null?void 0:t.earned)==null?void 0:i.value)===!0&&(n[e]=!0)}),rl({earned:n})}async function _n(){Xi.value=!0,_.autosave=!1,Object.keys(localStorage).forEach(e=>{e!==qn&&localStorage.removeItem(e)}),window.location.reload()}const ol={key:0,style:{"margin-top":"15px"}},di=de({__name:"ResetModal",props:{isDev:{type:Boolean,default:!0}},setup(n,{expose:e}){const t=n,i=V(!1);function a(){i.value=!1,_.devSpeed===0&&(_.devSpeed=null)}function r(){confirm("Are you sure you want to reset the game? This will delete ALL progress and cannot be undone!")&&_n()}function m(){const o=B.main;if(o){o.autonomy.value=1,o.currentChapter.value=4,_.frameworkChoice="not_yet",_.gameOver=!1,o.chapter5CompletionTime&&(o.chapter5CompletionTime.value=null),o.timeSinceChapter5&&(o.timeSinceChapter5.value=0),o.activeNewsFlashes&&(o.activeNewsFlashes.value=[]),o.dismissedNewsIds&&(o.dismissedNewsIds.value=[]);const f=B.chapter5;f&&(f.complete&&(f.complete.value=!1),f.currentPage&&(f.currentPage.value=0),f.playerChoice&&(f.playerChoice.value=null)),_.tabs=["main"],G()}i.value=!1}function p(){const o=B.main;if(o){const f=["trun_auto1","trun_auto2","trun_auto3","trun_auto4"];o.spawnedOnetimeJobs&&(o.spawnedOnetimeJobs.value=o.spawnedOnetimeJobs.value.filter(v=>!f.includes(v))),o.completedOnetimeJobs&&(o.completedOnetimeJobs.value=o.completedOnetimeJobs.value.filter(v=>!f.includes(v))),o.unlockedJobTypes&&(o.unlockedJobTypes.value=o.unlockedJobTypes.value.filter(v=>!f.includes(v))),o.everVisibleJobTypes&&(o.everVisibleJobTypes.value=o.everVisibleJobTypes.value.filter(v=>!f.includes(v))),o.jobQueue&&(o.jobQueue.value=o.jobQueue.value.filter(v=>!f.includes(v.jobTypeId))),o.activeDeliveries&&(o.activeDeliveries.value=o.activeDeliveries.value.filter(v=>!f.includes(v.jobTypeId))),G()}i.value=!1}function s(){const o=B.main;if(o){const f=["wonder1","wonder2","wonder3","wonder4","wonder5"];o.wonder&&(o.wonder.value=3),o.spawnedOnetimeJobs&&(o.spawnedOnetimeJobs.value=o.spawnedOnetimeJobs.value.filter(v=>!f.includes(v))),o.completedOnetimeJobs&&(o.completedOnetimeJobs.value=o.completedOnetimeJobs.value.filter(v=>!f.includes(v))),o.unlockedJobTypes&&(o.unlockedJobTypes.value=o.unlockedJobTypes.value.filter(v=>!f.includes(v))),o.everVisibleJobTypes&&(o.everVisibleJobTypes.value=o.everVisibleJobTypes.value.filter(v=>!f.includes(v))),o.jobQueue&&(o.jobQueue.value=o.jobQueue.value.filter(v=>!f.includes(v.jobTypeId))),o.activeDeliveries&&(o.activeDeliveries.value=o.activeDeliveries.value.filter(v=>!f.includes(v.jobTypeId))),G()}i.value=!1}return e({confirmReset:r,open(){i.value=!0}}),(o,f)=>(S(),Ce(xt,{modelValue:i.value,"onUpdate:modelValue":f[4]||(f[4]=v=>i.value=v)},{header:ie(()=>f[5]||(f[5]=[k("div",{class:"header"},null,-1)])),body:ie(()=>[k("div",null,[k("button",{class:"reset-button",onClick:f[0]||(f[0]=v=>r())},"Reset Game"),f[7]||(f[7]=k("p",{style:{"font-size":"12px",color:"#2196F3",opacity:"0.8","margin-top":"10px"}},"This will delete all progress and start over from the beginning.",-1)),f[8]||(f[8]=k("hr",{style:{margin:"20px 0","border-color":"#2196F3",opacity:"0.3"}},null,-1)),t.isDev?(S(),D("div",ol,[f[6]||(f[6]=k("h3",{style:{color:"#2196F3","font-size":"14px","margin-bottom":"10px"}},"Dev Tools",-1)),k("button",{class:"dev-button",onClick:f[1]||(f[1]=v=>m())},"Dev to Chap 4"),k("button",{class:"dev-button",onClick:f[2]||(f[2]=v=>p()),style:{"margin-top":"8px"}},"Reset Auto Trainings"),k("button",{class:"dev-button",onClick:f[3]||(f[3]=v=>s()),style:{"margin-top":"8px"}},"Reset Wonders")])):X("",!0)])]),footer:ie(()=>[k("div",{class:"modal-default-footer"},[f[9]||(f[9]=k("div",{class:"modal-default-flex-grow"},null,-1)),k("button",{class:"close-button",onClick:a}," Close ")])]),_:1},8,["modelValue"]))}}),ae={CHAP_2_TRIGGER:9,CHAP_3_IQ_TRIGGER:3,CHAP_4_GENERALITY_TRIGGER:3,CHAP_5_AUTONOMY_TRIGGER:3,STARTING_MONEY:48,STARTING_PIZZAS:["imgclassifier"],STARTING_GPUS:1,STARTING_IQ:1,STARTING_DATA:0,AGI_SUM_LOSE:21,WONDER_WIN:5,JOB_GENERATION_INTERVAL:2.5,AUTO_JOB_LIMIT:4,INITIAL_JOBS_COUNT:1,GPU_BASE_COST:40,GPU_COST_MULTIPLIER:1.27,INTERLUDES:[{id:"interlude_fork1",trigger:{type:"iq",value:2}},{id:"interlude_public_sentiment",trigger:{type:"jobRun",value:"dem3"}},{id:"interlude_agi_warning",trigger:{type:"agiSum",value:16}},{id:"interlude_agi_warning_mid",trigger:{type:"agiSum",value:18}},{id:"interlude_agi_warning_final",trigger:{type:"agiSum",value:20}},{id:"interlude_job_refusals",trigger:{type:"autonomy",value:1},delayJobs:8},{id:"interlude_job_refusals_high",trigger:{type:"autonomy",value:2},delayJobs:8},{id:"interlude_prewonder_Nanotechnology_before_MolecularManufacturing",trigger:{type:"unlockedJob",value:"sci6"}},{id:"interlude_wonder_MolecularManufacturing_after_Nanotechnology",trigger:{type:"completedJob",value:"sci7"}},{id:"interlude_prewonder_MaterialsModelingWork_before_MaterialsDiscovery",trigger:{type:"unlockedJob",value:"sci8"}},{id:"interlude_wonder_MaterialsDiscovery_after_MaterialsModelingWork",trigger:{type:"completedJob",value:"sci9"}},{id:"interlude_prewonder_EnergyModeling_before_FusionEnergy",trigger:{type:"unlockedJob",value:"sci11"}},{id:"interlude_wonder_FusionEnergy_after_EnergyModeling",trigger:{type:"completedJob",value:"sci12"}},{id:"interlude_prewonder_IdentifyConsensus_before_DemocraticConsensusSynthesizer",trigger:{type:"unlockedJob",value:"dem6"}},{id:"interlude_wonder_DemocraticConsensusSynthesizer_after_IdentifyConsensus",trigger:{type:"completedJob",value:"dem7"}},{id:"interlude_prewonder_InformationIntegrityAudit_before_CivicTrustInfrastructure",trigger:{type:"unlockedJob",value:"dem10"}},{id:"interlude_wonder_CivicTrustInfrastructure_after_InformationIntegrityAudit",trigger:{type:"completedJob",value:"dem11"}},{id:"interlude_prewonder_AIDrivenPropaganda_before_PerceptionManipulationApparatus",trigger:{type:"unlockedJob",value:"dem14"}},{id:"interlude_prewonder_PopulationComplianceModeling_before_AlgorithmicAuthoritarianism",trigger:{type:"unlockedJob",value:"dem17"}},{id:"interlude_prewonder_VirtualTutoringService_before_UniversalEducationTutor",trigger:{type:"unlockedJob",value:"edu7"}},{id:"interlude_wonder_UniversalEducationTutor_after_VirtualTutoringService",trigger:{type:"completedJob",value:"edu8"}},{id:"interlude_prewonder_AccessibleVirtualTutoringSystems_before_GlobalLearningNetwork",trigger:{type:"unlockedJob",value:"edu10"}},{id:"interlude_wonder_GlobalLearningNetwork_after_AccessibleVirtualTutoringSystems",trigger:{type:"completedJob",value:"edu11"}},{id:"interlude_prewonder_Micro-ClimateSimulation_before_HighlyLocalizedWeatherForecasting",trigger:{type:"unlockedJob",value:"clim3"}},{id:"interlude_wonder_HighlyLocalizedWeatherForecasting_after_Micro-ClimateSimulation",trigger:{type:"completedJob",value:"clim4"}},{id:"interlude_prewonder_EmissionsSourceDetection_before_GlobalEmissionsTracking",trigger:{type:"unlockedJob",value:"clim6"}},{id:"interlude_wonder_GlobalEmissionsTracking_after_EmissionsSourceDetection",trigger:{type:"completedJob",value:"clim7"}},{id:"interlude_prewonder_AnticipatoryWindandSolar_before_Climate-AwareGridBalancing",trigger:{type:"unlockedJob",value:"clim10"}},{id:"interlude_wonder_Climate-AwareGridBalancing_after_AnticipatoryWindandSolar",trigger:{type:"completedJob",value:"clim11"}},{id:"interlude_prewonder_PersonalizedMedicineEngines_before_PrecisionOncology",trigger:{type:"unlockedJob",value:"med3"}},{id:"interlude_wonder_PrecisionOncology_after_PersonalizedMedicineEngines",trigger:{type:"completedJob",value:"med4"}},{id:"interlude_prewonder_DrugDiscoveryAI_before_AcceleratedDrugDiscovery",trigger:{type:"unlockedJob",value:"med7"}},{id:"interlude_wonder_AcceleratedDrugDiscovery_after_DrugDiscoveryAI",trigger:{type:"completedJob",value:"med8"}},{id:"interlude_prewonder_PredictiveMedicine_before_UniversalDiseaseTherapeutics",trigger:{type:"unlockedJob",value:"med11"}},{id:"interlude_wonder_UniversalDiseaseTherapeutics_after_PredictiveMedicine",trigger:{type:"completedJob",value:"med12"}},{id:"interlude_prewonder_RegenerativeMedicinePlatforms_before_ReversalofAging",trigger:{type:"unlockedJob",value:"med13"}},{id:"interlude_wonder_ReversalofAging_after_RegenerativeMedicinePlatforms",trigger:{type:"completedJob",value:"med14"}}],CHAPTER_2_QUALITY_BONUS:1.1,CHAPTER_2_SPEED_BONUS:1.1,CHAPTER_3_QUALITY_BONUS:1.15,CHAPTER_3_SPEED_BONUS:1.15},it={NEWS_MC_AGI_START:30,NEWS_MC_AGI_AUTO_DISMISS:60,COUNTDOWN_START_TIME:100,COUNTDOWN_DURATION:150,get GAME_OVER_TIME(){return this.COUNTDOWN_START_TIME+this.COUNTDOWN_DURATION}},sl=[{time:10,newsId:"n5a1"},{time:60,newsId:"n5a2"},{time:130,newsId:"n5a3"}],wn={1:"GPU",2:"GPU",3:"GPU Cluster",4:"Data Center",5:"Data Center"},ne={money:"💰",data:"📊",iq:"🧠",autonomy:"🤖",generality:"💠",wonder:"⭐"},K=4,ll=[{id:"trun1",displayName:"Basic Training Run",description:"Train a smarter base model",chapter:[2,3,4,5,6],displayTrigger:[{type:"data",value:1}],prereq:[{type:"compute",value:3}],unlockCost:[{type:"data",value:100}],payout:[{type:"iq",min:1}],duration:{min:K*3.5,max:K*3.5},category:"onetime",cost:[{type:"compute",value:2},{type:"money",value:200}]},{id:"trun2",displayName:"Pattern Recognition Training",chapter:[2,3,4,5,6],displayTrigger:[{type:"completedJob",value:"trun1"}],prereq:[{type:"compute",value:4}],unlockCost:[{type:"data",value:400}],payout:[{type:"iq",min:1}],duration:{min:K*2,max:K*2},category:"onetime",cost:[{type:"compute",value:3},{type:"money",value:200}]},{id:"trun3",displayName:"Deep Learning Architecture",chapter:[2,3,4,5,6],displayTrigger:[{type:"completedJob",value:"trun2"}],prereq:[{type:"compute",value:10}],unlockCost:[{type:"data",value:600}],payout:[{type:"iq",min:1}],duration:{min:K*3.5,max:K*3.5},category:"onetime",cost:[{type:"compute",value:7},{type:"money",value:300}]},{id:"trun4",displayName:"Reinforcement Learning Engine",chapter:[2,3,4,5,6],displayTrigger:[{type:"completedJob",value:"trun3"}],prereq:[{type:"compute",value:11},{type:"autonomy",value:1}],unlockCost:[{type:"data",value:800}],payout:[{type:"iq",min:1}],duration:{min:K*5,max:K*5},category:"onetime",cost:[{type:"compute",value:8},{type:"money",value:400}]},{id:"trun5",displayName:"Memory Enhancement",chapter:[2,3,4,5,6],displayTrigger:[{type:"completedJob",value:"trun4"}],prereq:[{type:"compute",value:14}],unlockCost:[{type:"data",value:1e3}],payout:[{type:"iq",min:1}],duration:{min:K*5.5,max:K*5.5},category:"onetime",cost:[{type:"compute",value:10},{type:"money",value:500}]},{id:"trun6",displayName:"Advanced Reasoning Core",chapter:[2,3,4,5,6],displayTrigger:[{type:"completedJob",value:"trun5"}],prereq:[{type:"compute",value:14}],unlockCost:[{type:"data",value:1200}],payout:[{type:"iq",min:1}],duration:{min:K*6,max:K*6},category:"onetime",cost:[{type:"compute",value:10},{type:"money",value:600}]},{id:"trun7",displayName:"Chain-of-Thought Enhancer",chapter:[2,3,4,5,6],displayTrigger:[{type:"completedJob",value:"trun6"}],prereq:[{type:"compute",value:15},{type:"autonomy",value:3}],unlockCost:[{type:"data",value:1400}],payout:[{type:"iq",min:1}],duration:{min:K*6.5,max:K*6.5},category:"onetime",cost:[{type:"compute",value:10},{type:"money",value:600}]},{id:"trun8",displayName:"Inference Optimization",chapter:[2,3,4,5,6],displayTrigger:[{type:"completedJob",value:"trun7"}],prereq:[{type:"compute",value:16}],unlockCost:[{type:"data",value:1600}],payout:[{type:"iq",min:1}],duration:{min:K*7,max:K*7},category:"onetime",cost:[{type:"compute",value:11},{type:"money",value:700}]},{id:"trun9",displayName:"Strategic Planning Module",chapter:[2,3,4,5,6],displayTrigger:[{type:"completedJob",value:"trun8"}],prereq:[{type:"compute",value:17}],unlockCost:[{type:"data",value:1800}],payout:[{type:"iq",min:1}],duration:{min:K*7.5,max:K*7.5},category:"onetime",cost:[{type:"compute",value:11},{type:"money",value:700}]},{id:"trun_mm1",displayName:"Multimodal Integration",description:"A more GENERAL intelligence",chapter:[3,4,5,6],displayTrigger:[{type:"iq",value:3}],prereq:[{type:"compute",value:4}],unlockCost:[{type:"data",value:200}],payout:[{type:"generality",min:1}],duration:{min:K*1,max:K*1},category:"onetime",cost:[{type:"compute",value:3},{type:"money",value:50}]},{id:"trun_mm2",displayName:"Cross-Domain Learning",description:"Transfer knowledge between fields",chapter:[3,4,5,6],displayTrigger:[{type:"completedJob",value:"trun_mm1"}],prereq:[{type:"compute",value:6}],unlockCost:[{type:"data",value:400}],payout:[{type:"generality",min:1}],duration:{min:K*2.5,max:K*2.5},category:"onetime",cost:[{type:"compute",value:4},{type:"money",value:100}]},{id:"trun_mm3",displayName:"Meta-Learning Scaffold",chapter:[3,4,5,6],displayTrigger:[{type:"completedJob",value:"trun_mm2"}],prereq:[{type:"compute",value:7}],unlockCost:[{type:"data",value:800}],payout:[{type:"generality",min:1}],duration:{min:K*3,max:K*3},category:"onetime",cost:[{type:"compute",value:5},{type:"money",value:200}]},{id:"trun_mm4",displayName:"Few-Shot Learning",chapter:[3,4,5,6],displayTrigger:[{type:"completedJob",value:"trun_mm3"}],prereq:[{type:"compute",value:7}],unlockCost:[{type:"data",value:800}],payout:[{type:"generality",min:1}],duration:{min:K*4,max:K*4},category:"onetime",cost:[{type:"compute",value:5},{type:"money",value:200}]},{id:"trun_mm5",displayName:"Domain Bridging Framework",chapter:[3,4,5,6],displayTrigger:[{type:"completedJob",value:"trun_mm4"}],prereq:[{type:"compute",value:10}],unlockCost:[{type:"data",value:1200}],payout:[{type:"generality",min:1}],duration:{min:K*4.5,max:K*4.5},category:"onetime",cost:[{type:"compute",value:7},{type:"money",value:300}]},{id:"trun_auto1",displayName:"Basic Agents",description:"+1 Autonomy",chapter:[4,5,6],prereq:[{type:"compute",value:5}],unlockCost:[{type:"data",value:200}],payout:[{type:"autonomy",min:1}],duration:{min:K*2,max:K*2},category:"onetime",cost:[{type:"compute",value:3},{type:"money",value:100}]},{id:"trun_auto2",displayName:"Agentic Reasoning Training",chapter:[4,5,6],displayTrigger:[{type:"completedJob",value:"trun_auto1"}],prereq:[{type:"compute",value:7}],unlockCost:[{type:"data",value:600}],payout:[{type:"autonomy",min:1}],duration:{min:K*2.5,max:K*2.5},category:"onetime",cost:[{type:"compute",value:5},{type:"money",value:150}]},{id:"trun_auto3",displayName:"Multi-Step Task Planner",chapter:[4,5,6],displayTrigger:[{type:"completedJob",value:"trun_auto2"}],prereq:[{type:"compute",value:11}],unlockCost:[{type:"data",value:900}],payout:[{type:"autonomy",min:1}],duration:{min:K*4,max:K*4},category:"onetime",cost:[{type:"compute",value:8},{type:"money",value:250}]},{id:"trun_auto4",displayName:"Goal-Conditioned Agent",chapter:[4,5,6],displayTrigger:[{type:"completedJob",value:"trun_auto3"}],prereq:[{type:"compute",value:15}],unlockCost:[{type:"data",value:1500}],payout:[{type:"autonomy",min:1}],duration:{min:K*4.5,max:K*4.5},category:"onetime",cost:[{type:"compute",value:11},{type:"money",value:400}]}],tt=[{id:"imgclassifier",displayName:"Image Classifier",description:"Find Waldo",chapter:[1,2],prereq:[],unlockCost:[],payout:[{type:"money",min:20}],duration:{min:2,max:4},category:"tool",cost:[{type:"compute",value:1}]},{id:"spellchecker",displayName:"Spell Checker",chapter:[1,2],prereq:[{type:"job",value:"imgclassifier",display_prereq:!1},{type:"compute",value:2,display_prereq:!1}],unlockCost:[{type:"money",value:10}],payout:[{type:"money",min:25}],duration:{min:3,max:6},category:"tool",cost:[{type:"compute",value:1}]},{id:"game1",displayName:"Digit Recognition",chapter:[99],prereq:[{type:"compute",value:999,display_prereq:!1}],unlockCost:[{type:"money",value:10}],payout:[{type:"money",min:20}],duration:{min:5,max:5},category:"tool",cost:[{type:"compute",value:1}]},{id:"speechtran",displayName:"Speech Transcription",description:"",chapter:[1,2,3],prereq:[{type:"compute",value:3,display_prereq:!1},{type:"money",value:50},{type:"job",value:"spellchecker"}],unlockCost:[{type:"money",value:50}],payout:[{type:"money",min:40}],duration:{min:6,max:8},category:"tool",cost:[{type:"compute",value:2}]},{id:"spamfilter",displayName:"Spam Filter",description:"",chapter:[1,2,3],prereq:[{type:"money",value:70},{type:"job",value:"spellchecker"}],unlockCost:[{type:"money",value:80}],payout:[{type:"money",min:40}],duration:{min:5,max:8},category:"tool",cost:[{type:"compute",value:2}]},{id:"routeopt",displayName:"Route Optimizer",description:"Popular with salesmen",chapter:[1,2,3],prereq:[{type:"money",value:100},{type:"job",value:"speechtran",display_prereq:!1}],unlockCost:[{type:"money",value:100}],payout:[{type:"money",min:50}],duration:{min:6,max:8},cost:[{type:"compute",value:3}],category:"tool"},{id:"webscrape",displayName:"Web Scraper",description:"Collect Data",chapter:[2,3,4],prereq:[],unlockCost:[{type:"money",value:10}],payout:[{type:"data",min:80}],duration:{min:9,max:12},cost:[{type:"compute",value:1},{type:"money",value:20}],category:"gameplay"},{id:"chess",displayName:"Chess Engine",description:"",chapter:[2,3,4,5],displayTrigger:[{type:"iq",value:1}],prereq:[{type:"iq",value:2}],unlockCost:[{type:"money",value:300}],payout:[{type:"money",min:80},{type:"data",min:5}],duration:{min:6,max:8},cost:[{type:"compute",value:3}],category:"tool"},{id:"goengine",displayName:"Go Engine",description:"",chapter:[2,3,4,5],displayTrigger:[{type:"job",value:"chess"}],prereq:[{type:"iq",value:3},{type:"compute",value:5}],unlockCost:[{type:"money",value:500}],payout:[{type:"money",min:90},{type:"data",min:15}],duration:{min:7,max:9},category:"tool",cost:[{type:"compute",value:3}]},{id:"synthdata",displayName:"Synthetic Data Generator",description:"More Data",chapter:[2,3,4,5,6,7],displayTrigger:[{type:"job",value:"goengine",display_prereq:!1}],prereq:[{type:"iq",value:4}],unlockCost:[{type:"money",value:1e3}],payout:[{type:"data",min:500}],duration:{min:8,max:11},category:"gameplay",cost:[{type:"compute",value:4},{type:"money",value:200}]},...ll,{id:"sci1",displayName:"Scientific Data Processing",chapter:[2,3,4,5],prereq:[{type:"job",value:"routeopt"}],unlockCost:[{type:"money",value:100}],payout:[{type:"data",min:80}],duration:{min:3,max:4},cost:[{type:"compute",value:3}],category:"tool",path:"sci"},{id:"sci2",displayName:"Rapid Science Modeling",chapter:[2,3,4,5],prereq:[{type:"job",value:"sci1"},{type:"money",value:240,display_prereq:!1}],unlockCost:[{type:"money",value:250}],payout:[{type:"money",min:144},{type:"data",min:20}],duration:{min:2,max:6},cost:[{type:"compute",value:4}],category:"tool",path:"sci"},{id:"sci3",displayName:"Scientific Prediction Work",chapter:[2,3,4,5],prereq:[{type:"job",value:"sci2"},{type:"iq",value:2},{type:"money",value:480,display_prereq:!1}],unlockCost:[{type:"money",value:500}],payout:[{type:"money",min:192},{type:"data",min:20}],duration:{min:3,max:6},cost:[{type:"compute",value:4}],category:"tool",path:"sci"},{id:"sci4",displayName:"Structure Prediction",chapter:[2,3,4,5],displayTrigger:[{type:"job",value:"sci3"}],prereq:[{type:"job",value:"sci3"},{type:"generality",value:2},{type:"money",value:680,display_prereq:!1}],unlockCost:[{type:"money",value:700}],payout:[{type:"money",min:200},{type:"data",min:70}],duration:{min:4,max:6},cost:[{type:"compute",value:5},{type:"data",value:120}],category:"tool",path:"sci"},{id:"sci5",displayName:"Molecular Structure Prediction",chapter:[2,3,4,5],prereq:[{type:"job",value:"sci4"},{type:"iq",value:5}],unlockCost:[{type:"money",value:900},{type:"data",value:120}],payout:[{type:"money",min:352}],duration:{min:5,max:7},cost:[{type:"compute",value:5},{type:"data",value:140}],category:"tool",path:"sci"},{id:"sci6",displayName:"Nanotechnology",chapter:[2,3,4,5],displayTrigger:[{type:"job",value:"sci5"}],prereq:[{type:"job",value:"sci5"},{type:"autonomy",value:3}],unlockCost:[{type:"money",value:1200},{type:"data",value:400}],payout:[{type:"money",min:412}],duration:{min:5,max:8},cost:[{type:"compute",value:6},{type:"data",value:160}],category:"tool",path:"sci"},{id:"sci7",displayName:"Molecular Manufacturing",chapter:[2,3,4,5],prereq:[{type:"job",value:"sci6"}],unlockCost:[{type:"money",value:2e3},{type:"data",value:200}],payout:[{type:"wonder",min:1},{type:"generality",min:1}],duration:{min:5,max:8},cost:[{type:"compute",value:7},{type:"data",value:700}],category:"onetime",is_wonder:!0,path:"sci"},{id:"sci8",displayName:"Materials Modeling",chapter:[2,3,4,5],prereq:[{type:"job",value:"sci7"},{type:"money",value:2200,display_prereq:!1}],unlockCost:[{type:"money",value:1800},{type:"data",value:200}],payout:[{type:"money",min:412}],duration:{min:5,max:8},cost:[{type:"compute",value:5},{type:"data",value:150}],category:"tool",path:"sci"},{id:"sci9",displayName:"Materials Discovery",chapter:[2,3,4,5],prereq:[{type:"job",value:"sci8",display_prereq:!1}],unlockCost:[{type:"money",value:4e3},{type:"data",value:800}],payout:[{type:"wonder",min:1},{type:"generality",min:1},{type:"autonomy",min:1}],duration:{min:8,max:11},cost:[{type:"compute",value:7},{type:"data",value:800}],category:"onetime",is_wonder:!0,path:"sci"},{id:"sci10",displayName:"Chemical Prediction",chapter:[2,3,4,5],displayTrigger:[{type:"job",value:"sci5"}],prereq:[{type:"job",value:"sci5"},{type:"generality",value:4}],unlockCost:[{type:"money",value:1200}],payout:[{type:"money",min:542}],duration:{min:3,max:9},cost:[{type:"compute",value:5},{type:"data",value:140}],category:"tool",path:"sci"},{id:"sci11",displayName:"Atomic Energy Modeling",chapter:[2,3,4,5],prereq:[{type:"job",value:"sci10"},{type:"money",value:1500,display_prereq:!1}],unlockCost:[{type:"money",value:1500},{type:"data",value:200}],payout:[{type:"money",min:250}],duration:{min:5,max:9},cost:[{type:"compute",value:5},{type:"data",value:200}],category:"tool",path:"sci"},{id:"sci12",displayName:"Fusion Energy",chapter:[2,3,4,5],displayTrigger:[{type:"job",value:"sci11",display_prereq:!1}],prereq:[{type:"job",value:"sci11"},{type:"iq",value:7}],unlockCost:[{type:"money",value:5e3},{type:"data",value:800}],payout:[{type:"wonder",min:1}],duration:{min:10,max:14},cost:[{type:"compute",value:7},{type:"data",value:900}],category:"onetime",is_wonder:!0,path:"sci"},{id:"dem1",displayName:"Sentiment Analysis",chapter:[2,3,4],prereq:[{type:"job",value:"spamfilter"},{type:"compute",value:4,display_prereq:!1}],unlockCost:[{type:"money",value:90}],payout:[{type:"money",min:144},{type:"data",min:10}],duration:{min:5,max:9},cost:[{type:"compute",value:4}],category:"tool",path:"dem"},{id:"dem2",displayName:"Digital Civic Information System",chapter:[2,3,4,5],prereq:[{type:"job",value:"dem1"},{type:"iq",value:2},{type:"compute",value:5},{type:"money",value:300}],unlockCost:[{type:"money",value:400}],payout:[{type:"generality",min:1}],duration:{min:20,max:25},cost:[{type:"compute",value:4},{type:"data",value:150}],category:"onetime",path:"dem"},{id:"dem3",displayName:"Public Sentiment Analysis",chapter:[2,3,4,5],prereq:[{type:"job",value:"dem2"},{type:"money",value:700,display_prereq:!1}],unlockCost:[{type:"money",value:700},{type:"data",value:30}],payout:[{type:"money",min:276}],duration:{min:5,max:7},cost:[{type:"compute",value:5},{type:"data",value:140}],category:"tool",path:"dem"},{id:"dem4",displayName:"Multi-Stakeholder Dialogue",chapter:[2,3,4,5],prereq:[{type:"choice",value:"dem4"},{type:"money",value:800,display_prereq:!1}],unlockCost:[{type:"money",value:800}],payout:[{type:"money",min:228}],duration:{min:8,max:11},cost:[{type:"compute",value:5}],category:"tool",path:"dem"},{id:"dem6",displayName:"Identify Consensus",chapter:[2,3,4,5],prereq:[{type:"job",value:"dem4"},{type:"money",value:1600,display_prereq:!1}],unlockCost:[{type:"money",value:1600},{type:"data",value:180}],payout:[{type:"money",min:300}],duration:{min:9,max:12},cost:[{type:"compute",value:6},{type:"data",value:150}],category:"tool",path:"dem"},{id:"dem7",displayName:"Democratic Consensus Synthesizer",chapter:[2,3,4,5],prereq:[{type:"job",value:"dem6",display_prereq:!1}],unlockCost:[{type:"money",value:3e3},{type:"data",value:1400}],payout:[{type:"wonder",min:1},{type:"generality",min:1}],duration:{min:5,max:7},cost:[{type:"compute",value:7},{type:"data",value:500}],category:"onetime",is_wonder:!0,path:"dem"},{id:"dem8",displayName:"Narrative Transparency Frameworks",chapter:[3,4,5],prereq:[{type:"job",value:"dem4"},{type:"money",value:1200,display_prereq:!1}],unlockCost:[{type:"money",value:1200},{type:"data",value:120}],payout:[{type:"generality",min:1}],duration:{min:7,max:10},cost:[{type:"compute",value:5},{type:"data",value:150}],category:"onetime",path:"dem"},{id:"dem9",displayName:"Misinformation Detection",chapter:[2,3,4,5],prereq:[{type:"job",value:"dem8"},{type:"money",value:1200,display_prereq:!1}],unlockCost:[{type:"money",value:1200},{type:"data",value:180}],payout:[{type:"money",min:286}],duration:{min:9,max:12},cost:[{type:"compute",value:5},{type:"data",value:160}],category:"tool",path:"dem"},{id:"dem10",displayName:"Information Integrity Audit",chapter:[2,3,4,5],prereq:[{type:"job",value:"dem9"},{type:"money",value:1400,display_prereq:!1}],unlockCost:[{type:"money",value:1400},{type:"data",value:220}],payout:[{type:"money",min:276}],duration:{min:9,max:12},cost:[{type:"compute",value:6},{type:"data",value:180}],category:"tool",path:"dem"},{id:"dem11",displayName:"Civic Trust Infrastructure",chapter:[2,3,4,5],prereq:[{type:"job",value:"dem10",display_prereq:!1}],unlockCost:[{type:"money",value:4e3},{type:"data",value:500}],payout:[{type:"wonder",min:1},{type:"generality",min:1}],duration:{min:6,max:11},cost:[{type:"compute",value:7},{type:"data",value:600}],category:"onetime",is_wonder:!0,path:"dem"},{id:"dem12",displayName:"Targeted Persuasion",chapter:[2,3,4,5],prereq:[{type:"choice",value:"dem12"}],unlockCost:[{type:"money",value:300}],payout:[{type:"money",min:304}],duration:{min:9,max:12},cost:[{type:"compute",value:5}],category:"tool",path:"dem"},{id:"dem13",displayName:"Political Microtargeting",chapter:[2,3,4,5],prereq:[{type:"job",value:"dem12"},{type:"money",value:500,display_prereq:!1}],unlockCost:[{type:"money",value:500}],payout:[{type:"money",min:422}],duration:{min:9,max:12},cost:[{type:"compute",value:5}],category:"tool",path:"dem"},{id:"dem14",displayName:"AI-Driven Propaganda",chapter:[2,3,4,5],prereq:[{type:"job",value:"dem13"}],unlockCost:[{type:"money",value:600},{type:"data",value:1200}],payout:[{type:"money",min:522}],duration:{min:7,max:11},cost:[{type:"compute",value:6},{type:"data",value:220}],category:"tool",path:"dem"},{id:"dem15",displayName:"Total Perception Manipulation",chapter:[2,3,4,5],prereq:[{type:"job",value:"dem14"}],unlockCost:[{type:"money",value:5e3},{type:"data",value:600}],payout:[{type:"wonder",min:1}],duration:{min:4,max:6},cost:[{type:"compute",value:7},{type:"data",value:650}],category:"onetime",is_wonder:!0,bad_end:!0,path:"dem"},{id:"dem16",displayName:"Predictive Social Control",chapter:[3,4,5],prereq:[{type:"job",value:"dem12"},{type:"money",value:700,display_prereq:!1}],unlockCost:[{type:"money",value:700}],payout:[{type:"money",min:252}],duration:{min:8,max:11},cost:[{type:"compute",value:5},{type:"data",value:180}],category:"tool",path:"dem"},{id:"dem17",displayName:"Population Compliance Modeling",chapter:[5,6],prereq:[{type:"job",value:"dem16"},{type:"money",value:1200,display_prereq:!1}],unlockCost:[{type:"money",value:1200},{type:"data",value:100}],payout:[{type:"autonomy",min:1}],duration:{min:44,max:55},cost:[{type:"compute",value:7},{type:"money",value:600},{type:"data",value:500}],category:"tool",path:"dem"},{id:"dem18",displayName:"Algorithmic Authoritarianism",chapter:[5,6],prereq:[{type:"job",value:"dem17"}],unlockCost:[{type:"money",value:5e3},{type:"data",value:800}],payout:[{type:"wonder",min:1}],duration:{min:4,max:6},cost:[{type:"compute",value:8},{type:"data",value:900}],category:"onetime",is_wonder:!0,bad_end:!0,path:"dem"},{id:"edu1",displayName:"Digital Learning Platform",chapter:[1,2,3,4,5],prereq:[{type:"choice",value:"edu1"}],unlockCost:[{type:"money",value:800}],payout:[{type:"money",min:96}],duration:{min:7,max:10},cost:[{type:"compute",value:3}],category:"tool",path:"edu"},{id:"edu2",displayName:"Adaptive Education",chapter:[1,2,3,4,5],prereq:[{type:"job",value:"edu1"}],unlockCost:[{type:"money",value:2500}],payout:[{type:"money",min:132}],duration:{min:8,max:11},cost:[{type:"compute",value:4}],category:"tool",path:"edu"},{id:"edu5",displayName:"Multimodal Student Teaching",chapter:[1,2,3,4,5],prereq:[{type:"job",value:"edu2"}],unlockCost:[{type:"money",value:3400}],payout:[{type:"money",min:204}],duration:{min:8,max:11},cost:[{type:"compute",value:5}],category:"tool",path:"edu"},{id:"edu6",displayName:"Real-Time Learning Assessment",chapter:[1,2,3,4,5],prereq:[{type:"job",value:"edu5"}],unlockCost:[{type:"money",value:4600},{type:"data",value:120}],payout:[{type:"money",min:276}],duration:{min:8,max:11},cost:[{type:"compute",value:5}],category:"tool",path:"edu"},{id:"edu7",displayName:"Virtual Tutoring Service",chapter:[1,2,3,4,5],prereq:[{type:"job",value:"edu6"}],unlockCost:[{type:"money",value:6e3},{type:"data",value:200}],payout:[{type:"money",min:336}],duration:{min:9,max:12},cost:[{type:"compute",value:6}],category:"tool",path:"edu"},{id:"edu8",displayName:"Universal Education Tutor",chapter:[1,2,3,4,5],prereq:[{type:"job",value:"edu7"}],unlockCost:[{type:"money",value:8500},{type:"data",value:700}],payout:[{type:"wonder",min:1}],duration:{min:6,max:8},cost:[{type:"compute",value:7},{type:"data",value:600}],category:"onetime",is_wonder:!0,path:"edu"},{id:"edu9",displayName:"Language-Universal Instruction Tools",chapter:[1,2,3,4,5],prereq:[{type:"job",value:"edu1"}],unlockCost:[{type:"money",value:3800}],payout:[{type:"money",min:216}],duration:{min:9,max:12},cost:[{type:"compute",value:5}],category:"tool",path:"edu"},{id:"edu10",displayName:"Accessible Virtual Tutoring Systems",chapter:[1,2,3,4,5],prereq:[{type:"job",value:"edu9"}],unlockCost:[{type:"money",value:5200},{type:"data",value:120}],payout:[{type:"money",min:312}],duration:{min:9,max:12},cost:[{type:"compute",value:5}],category:"tool",path:"edu"},{id:"edu11",displayName:"Global Learning Network",chapter:[1,2,3,4,5],prereq:[{type:"job",value:"edu10"}],unlockCost:[{type:"money",value:7800},{type:"data",value:600}],payout:[{type:"wonder",min:1}],duration:{min:6,max:8},cost:[{type:"compute",value:7},{type:"data",value:700}],category:"onetime",is_wonder:!0,path:"edu"},{id:"clim1",displayName:"Climate Data Interpreter",chapter:[1,2,3,4],prereq:[{type:"choice",value:"clim1"}],unlockCost:[{type:"money",value:150}],payout:[{type:"money",min:84}],duration:{min:7,max:10},cost:[{type:"compute",value:2}],category:"tool",path:"clim"},{id:"clim2",displayName:"Atmospheric Pattern Recognition",chapter:[1,2,3,4,5],prereq:[{type:"job",value:"clim1"},{type:"money",value:800,display_prereq:!1}],unlockCost:[{type:"money",value:800}],payout:[{type:"money",min:160}],duration:{min:8,max:11},cost:[{type:"compute",value:3}],category:"tool",path:"clim"},{id:"clim3",displayName:"Micro-Climate Simulation",chapter:[1,2,3,4,5],displayTrigger:[{type:"job",value:"clim2"}],prereq:[{type:"job",value:"clim2"},{type:"iq",value:4}],unlockCost:[{type:"money",value:1500},{type:"data",value:100}],payout:[{type:"money",min:180},{type:"data",min:10}],duration:{min:8,max:11},cost:[{type:"compute",value:4}],category:"tool",path:"clim"},{id:"clim4",displayName:"Highly Localized Weather Forecasting",chapter:[1,2,3,4,5],displayTrigger:[{type:"job",value:"clim3"}],prereq:[{type:"job",value:"clim3",display_prereq:!1},{type:"generality",value:4}],unlockCost:[{type:"money",value:1900},{type:"data",value:1e3}],payout:[{type:"wonder",min:1},{type:"iq",min:1},{type:"generality",min:1}],duration:{min:6,max:8},cost:[{type:"compute",value:5},{type:"money",value:200}],category:"onetime",is_wonder:!0,path:"clim"},{id:"clim6",displayName:"Emissions Source Detection",chapter:[4,5],prereq:[{type:"job",value:"clim4"},{type:"autonomy",value:1},{type:"money",value:1500,display_prereq:!1}],unlockCost:[{type:"money",value:2e3},{type:"data",value:150}],payout:[{type:"money",min:252},{type:"data",min:100}],duration:{min:9,max:12},cost:[{type:"compute",value:5}],category:"tool",path:"clim"},{id:"clim7",displayName:"Global Emissions Tracking",chapter:[1,2,3,4,5],displayTrigger:[{type:"job",value:"clim6"}],prereq:[{type:"job",value:"clim6",display_prereq:!1},{type:"autonomy",value:3}],unlockCost:[{type:"money",value:3e3},{type:"data",value:2500}],payout:[{type:"wonder",min:1},{type:"iq",min:1},{type:"generality",min:1}],duration:{min:6,max:8},cost:[{type:"compute",value:5},{type:"money",value:300}],category:"onetime",is_wonder:!0,path:"clim"},{id:"clim8",displayName:"Energy Grid Intelligence",chapter:[3,4,5],prereq:[{type:"job",value:"clim1"},{type:"money",value:1400,display_prereq:!1}],unlockCost:[{type:"money",value:1200}],payout:[{type:"money",min:132}],duration:{min:8,max:11},cost:[{type:"compute",value:5}],category:"tool",path:"clim"},{id:"clim9",displayName:"Smart Grid Forecasting",chapter:[3,4,5],displayTrigger:[{type:"job",value:"clim8"}],prereq:[{type:"job",value:"clim8"},{type:"autonomy",value:2},{type:"generality",value:4}],unlockCost:[{type:"money",value:1800}],payout:[{type:"money",min:232},{type:"data",min:120}],duration:{min:8,max:11},cost:[{type:"compute",value:5}],category:"tool",path:"clim"},{id:"clim10",displayName:"Anticipatory Wind and Solar",chapter:[4,5],displayTrigger:[{type:"job",value:"clim9"}],prereq:[{type:"job",value:"clim9"},{type:"iq",value:7}],unlockCost:[{type:"money",value:2200},{type:"data",value:500}],payout:[{type:"money",min:288},{type:"data",min:140}],duration:{min:9,max:12},cost:[{type:"compute",value:6}],category:"tool",path:"clim"},{id:"clim11",displayName:"Climate-Aware Grid Balancing",chapter:[4,5],displayTrigger:[{type:"job",value:"clim10"}],prereq:[{type:"job",value:"clim10",display_prereq:!1},{type:"autonomy",value:3}],unlockCost:[{type:"money",value:4e3},{type:"data",value:2e3}],payout:[{type:"wonder",min:1},{type:"autonomy",min:1},{type:"generality",min:1}],duration:{min:6,max:8},cost:[{type:"compute",value:7},{type:"money",value:600},{type:"data",value:250}],category:"onetime",is_wonder:!0,path:"clim"},{id:"med1",displayName:"Medical Advisor",description:"Assist with medical research",chapter:[2,3,4],prereq:[{type:"choice",value:"med1"}],unlockCost:[{type:"money",value:800}],payout:[{type:"money",min:120}],duration:{min:7,max:9},cost:[{type:"compute",value:4}],category:"tool",path:"med"},{id:"med2",displayName:"Diagnostic Imaging",chapter:[1,2,3,4,5],prereq:[{type:"job",value:"med1"},{type:"money",value:800}],unlockCost:[{type:"money",value:800}],payout:[{type:"money",min:160}],duration:{min:7,max:10},cost:[{type:"compute",value:5}],category:"tool",path:"med"},{id:"med3",displayName:"Personalized Medicine Engines",chapter:[1,2,3,4,5],prereq:[{type:"job",value:"med2"},{type:"iq",value:3},{type:"generality",value:2}],unlockCost:[{type:"money",value:2e3}],payout:[{type:"money",min:220}],duration:{min:9,max:12},cost:[{type:"compute",value:5},{type:"data",value:100}],category:"tool",path:"med"},{id:"med4",displayName:"Precision Oncology",chapter:[1,2,3,4,5],prereq:[{type:"job",value:"med3"}],unlockCost:[{type:"data",value:1500},{type:"money",value:3e3}],payout:[{type:"wonder",min:1}],duration:{min:8,max:11},cost:[{type:"compute",value:6},{type:"money",value:3e3},{type:"data",value:500}],category:"onetime",is_wonder:!0,path:"med"},{id:"med5",displayName:"Protein Structure Prediction",chapter:[1,2,3,4,5],prereq:[{type:"job",value:"med2"},{type:"iq",value:3},{type:"compute",value:7,display_prereq:!1},{type:"money",value:1e3,display_prereq:!1}],unlockCost:[{type:"money",value:1e3}],payout:[{type:"data",min:120}],duration:{min:9,max:12},cost:[{type:"compute",value:4},{type:"data",value:150}],category:"tool",path:"med"},{id:"med6",displayName:"Protein Interaction Modeling",chapter:[1,2,3,4,5],prereq:[{type:"job",value:"med5"},{type:"money",value:2e3,display_prereq:!1}],unlockCost:[{type:"money",value:2e3}],payout:[{type:"iq",min:1},{type:"generality",min:1}],duration:{min:9,max:12},cost:[{type:"compute",value:5},{type:"data",value:200}],category:"onetime",path:"med"},{id:"med7",displayName:"Drug Discovery",chapter:[1,2,3,4,5],prereq:[{type:"job",value:"med6"},{type:"money",value:2e3,display_prereq:!1}],unlockCost:[{type:"money",value:1500},{type:"data",value:300}],payout:[{type:"money",min:280},{type:"data",min:200}],duration:{min:9,max:12},cost:[{type:"compute",value:5},{type:"data",value:300}],category:"tool",path:"med"},{id:"med8",displayName:"Accelerated Drug Discovery",chapter:[1,2,3,4,5],prereq:[{type:"job",value:"med7",display_prereq:!1}],unlockCost:[{type:"money",value:3500},{type:"data",value:1800}],payout:[{type:"wonder",min:1},{type:"generality",min:1},{type:"autonomy",min:1}],duration:{min:10,max:12},cost:[{type:"compute",value:7},{type:"money",value:4e3},{type:"data",value:800}],category:"onetime",is_wonder:!0,path:"med"},{id:"med9",displayName:"Biomarker Analysis",chapter:[1,2,3,4,5],prereq:[{type:"job",value:"med1"},{type:"money",value:1e3,display_prereq:!1}],unlockCost:[{type:"money",value:1e3}],payout:[{type:"money",min:132},{type:"data",min:40}],duration:{min:8,max:11},cost:[{type:"compute",value:5}],category:"tool",path:"med"},{id:"med10",displayName:"Early Disease Detection",chapter:[1,2,3,4,5],prereq:[{type:"job",value:"med9"},{type:"money",value:1500,display_prereq:!1}],unlockCost:[{type:"money",value:1500}],payout:[{type:"money",min:260}],duration:{min:8,max:11},cost:[{type:"compute",value:5},{type:"data",value:100}],category:"tool",path:"med"},{id:"med11",displayName:"Predictive Medicine",chapter:[1,2,3,4,5],prereq:[{type:"job",value:"med10"},{type:"money",value:2e3,display_prereq:!1}],unlockCost:[{type:"money",value:2e3},{type:"data",value:600}],payout:[{type:"money",min:300}],duration:{min:8,max:11},cost:[{type:"compute",value:6},{type:"data",value:150}],category:"tool",path:"med"},{id:"med12",displayName:"Universal Disease Therapeutics",chapter:[1,2,3,4,5],prereq:[{type:"job",value:"med11",display_prereq:!1},{type:"iq",value:7},{type:"autonomy",value:3},{type:"generality",value:6}],unlockCost:[{type:"money",value:3e3},{type:"data",value:1700}],payout:[{type:"wonder",min:1},{type:"iq",min:1},{type:"generality",min:1}],duration:{min:10,max:15},cost:[{type:"compute",value:6},{type:"money",value:3500},{type:"data",value:700}],category:"onetime",is_wonder:!0,path:"med"},{id:"med13",displayName:"Regenerative Medicine Platforms",chapter:[1,2,3,4,5],prereq:[{type:"job",value:"med11"},{type:"money",value:2400,display_prereq:!1}],unlockCost:[{type:"money",value:2700},{type:"data",value:400}],payout:[{type:"money",min:430}],duration:{min:7,max:10},cost:[{type:"compute",value:5},{type:"data",value:200}],category:"tool",path:"med"},{id:"med14",displayName:"Reversal of Aging",chapter:[1,2,3,4,5],prereq:[{type:"job",value:"med13"},{type:"iq",value:8}],unlockCost:[{type:"money",value:4e3},{type:"data",value:1e3}],payout:[{type:"wonder",min:1}],duration:{min:10,max:14},cost:[{type:"compute",value:9},{type:"money",value:4500},{type:"data",value:900}],category:"onetime",is_wonder:!0,path:"med"}],pi={mc_agi_begin:{message:"🚨 Breaking: MegaCorp begins work on AGI",autoDismissAfter:it.NEWS_MC_AGI_AUTO_DISMISS},n5a1:{message:"🚨 Breaking: MegaCorp sued for framework violations",autoDismissAfter:90},n5a2:{message:"🚨 Breaking: MegaCorp caught violating international AI agreement. Again!",autoDismissAfter:90},n5a3:{message:"🎉 Breaking: MegaCorp SHUT DOWN by regulators",autoDismissAfter:2e3}},qt={chapter1:{id:"chapter1",title:"Chapter 1: The Spark",pages:[{paragraphs:['This is a game based on the essay <a href="https://keepthefuturehuman.ai/" target="_new">Keep The Future Human</a>',"[left] Right now, AI labs are racing to build AGI without proven safety methods. The choices being made today will determine whether we control advanced AI or lose control of our future.","[left]In this game, you run an AI startup and make choices that affect both your company's success and humanity's survival.","Will you keep the future human?"],isChoice:!1,title:"The Choice Before Us",pageType:"intro",buttonText:"LET'S GO"},{paragraphs:['Win the game by unlocking 5 "Wonders"',"Lose by unleashing uncontrolled AI"],isChoice:!1,title:"How To Play",pageType:"intro",buttonText:"Got It"},{paragraphs:["Choose the future of humanity","The game has several different endings.","You can play however you want (this is only a game) but only one narrow path keeps the future human."],isChoice:!1,title:"The Future Is In Your Hands",pageType:"intro",buttonText:"BEGIN GAME"},{paragraphs:["You've done it. After months of preparation, your AI startup is finally launching.","The idea is simple: build AI tools that help people, not replace them.","It won't be easy, but you feel ready for the task ahead.","Today, your first system goes live."],isChoice:!1,title:"Chapter 1: The Spark"},{paragraphs:["The technology is straightforward. Narrow AI, the researchers call it. Neural networks trained on specific tasks. When given an image, they classify it. When given audio, they transcribe it.","Simple inputs, reliable outputs. Nothing fancy. Just useful."],isChoice:!1,title:"Chapter 1"},{paragraphs:["At night, you read about other companies pursuing something different.",'"Artificial General Intelligence," they call it. Systems that can do anything a human can do. You find it fascinating in theory.',"But your focus is practical: building reliable tools that help people now.","Your company is small, but it's real. And it's growing."],isChoice:!1,title:"Chapter 1"}]},interlude_fork1:{id:"interlude_fork1",title:"Interlude: The Fork in the Lab",pages:[{paragraphs:["As your lab expands, you must choose your focus.","Will you pursue CLIMATE breakthroughs?","Or advance modern MEDICINE?"],isChoice:!1,title:"A Fork in the Lab"},{paragraphs:["Both hold promise for humanity, but your startup can commit to only one.","Which path will you follow?"],isChoice:!0,choices:[{id:"climate",button:"Climate",title:"Climate Modeling",description:"Aim your intelligence gains at predicting and mitigating climate risks.",effect:"Lean into climate work",color:"#4CAF50",unlockJobId:"clim1"},{id:"medical",button:"Medical",title:"Medical Diagnosis",description:"Double down on models that support clinicians and diagnostics.",effect:"Lean into medical work",color:"#FF9800",unlockJobId:"med1"}],title:"Pick the Next Flagship"}]},interlude_public_sentiment:{id:"interlude_public_sentiment",title:"Interlude: Public Sentiment Results",pages:[{paragraphs:["The first large-scale Public Sentiment Analysis finishes crunching through millions of civic comments.","Suddenly everyone wants it: protest organizers, city councils, policy shops, campaigns, all demanding access to the feed.","You have to decide whether to turn this tool toward collaborative dialogue or targeted pressure."],isChoice:!1},{paragraphs:["Choose how to use your new visibility into the public mood."],isChoice:!0,choices:[{id:"dem4",button:"Dialogue",title:"Multi-Stakeholder Dialogue",description:"Convene citizens, experts, and officials to surface common ground before conflicts ignite.",effect:"Unlock collaborative deliberation jobs",color:"#2196F3",unlockJobId:"dem4"},{id:"dem12",button:"Persuade",title:"Targeted Persuasion",description:"Channel the analysis into finely tuned campaigns that sway key demographics.",effect:"Unlock targeted persuasion jobs",color:"#E91E63",unlockJobId:"dem12"}],title:"Aim the Feedback Loop"}]},chapter2:{id:"chapter2",title:"Chapter 2: Tools That Think",pages:[{paragraphs:["Six months in, something shifts.",'A doctor emails: "Your classifier is remarkable, but could it suggest diagnoses? Not make decisions, just offer possibilities?"',"This requires a more general system. Broader training. More sophisticated reasoning.","You build it carefully. The medical advisor augments expert judgment. The doctor stays in control.","Word spreads. Teachers want tutoring AI. Lawyers want research assistants."],isChoice:!1,title:"Chapter 2: Tools That Think"},{paragraphs:["The key breakthrough is training at scale. Larger models trained on more data simply work better.","You start collecting data systematically. Terabytes of information.",'Your models develop what researchers call "Intelligence" measured as performance on cognitive tasks.',"<h1>🧠 IQ UNLOCKED</h1>"],isChoice:!1,title:"Training at Scale"},{paragraphs:["An investor approaches with significant funding.",`"Your technology is impressive. But the market is getting crowded. What's your strategy?"`,"Two paths:"],isChoice:!0,choices:[{id:"quality",button:"Choose Quality & Safety",title:"Quality and Safety",description:"Thorough testing. Careful deployment. Build systems you deeply understand. Slower growth, but complete control and trustworthy AI.",effect:"+10% earnings",color:"#4CAF50"},{id:"speed",button:"Choose Speed & Scale",title:"Speed and Scale",description:"Deploy rapidly. Automate where possible. Let systems learn from real-world usage. Faster growth, stay competitive.",effect:"10% faster job completion",color:"#FF9800"}],title:"The Investor's Question"},{paragraphs:["You choose the careful path.",`"We're building tools that people trust their lives with. Doctors, teachers, lawyers—they need to understand what our AI is doing and why."`,"Rigorous testing protocols. Human oversight on critical decisions. Growth is slower, but every system is rock-solid.","Your reputation grows: the AI company that does it right.","You train for intelligence, but always controllable. Always explainable."],isChoice:!1,choiceType:"quality",title:"Quality and Safety"},{paragraphs:["You choose speed.",'"The AI race is heating up. We need to move fast or get left behind."',"You deploy systems quickly. Add automation to reduce costs. Train models for intelligence, autonomy, and generality.","It works. Growth accelerates. Systems handle more jobs with less supervision.","*But sometimes, late at night, you wonder: are you still building tools? Or something else?*"],isChoice:!1,choiceType:"speed",title:"Speed and Scale"}]},chapter3:{id:"chapter3",title:"Chapter 3: The Scaling Era",pages:[{paragraphs:["The news hits like a thunderclap.",'**"MegaCorp AI Raises $8 Billion for AGI Research"**',"You have a rival.",`MegaCorp isn't building tools. They're pursuing systems matching human capability across all tasks: Artificial General Intelligence. Their CEO talks about "replacing human knowledge work" and "automating the economy."`,"Your phone won't stop ringing. Investors asking about your AGI timeline. Engineers being recruited away.","A new era is beginning. You're a competitor in something bigger."],isChoice:!1,title:"Chapter 3"},{paragraphs:["Your board calls an emergency meeting.",`"MegaCorp just announced a breakthrough in autonomous systems. They're nine months ahead. We need to discuss our response."`,"Two options:"],isChoice:!0,choices:[{id:"quality",button:"Choose Quality & Safety",title:"Quality and Safety",description:"Keep building high-intelligence, human-supervised tools. Grow slower, maintain control and principles.",effect:"+15% earnings",color:"#4CAF50"},{id:"speed",button:"Choose Speed & Scale",title:"Speed and Scale",description:"Build autonomous systems. Add generality. Automate more. Less human oversight, but stay competitive.",effect:"15% faster job completion",color:"#FF9800"}],title:"Emergency Meeting"},{paragraphs:["You choose principles over pace.",`"We're not building AGI. We're building tools that empower humans. That's our mission."`,"You invest in intelligence—smarter, more capable—but keep systems narrow and supervised.","MegaCorp pulls further ahead in headlines. But your clients trust you.","*Late at night, you wonder if you're making a mistake. But you remember why you started this.*","Tools that help. Not replace."],isChoice:!1,choiceType:"quality",title:"Quality and Safety"},{paragraphs:["You choose to compete.",`"If we don't build this, someone else will. Better us than them."`,"You add autonomy. Not just intelligence, but independent action. Your AI decides, plans, executes.","You expand generality too. One system handling multiple domains.","The results are impressive. Systems work faster with less oversight. Jobs complete themselves.","You're catching up.","*But you notice things. Jobs accepted without approval. Decisions you don't fully understand.*"],isChoice:!1,choiceType:"speed",title:"Speed and Scale"}]},chapter4:{id:"chapter4",title:"Chapter 4: Systems That Act",pages:[{paragraphs:['MegaCorp announces "The Year of the Agent."',"Autonomous AI systems that don't just advise, they act.","Your competitors deploy them everywhere. Trading algorithms that rewrite strategies. Research assistants designing experiments.","The industry is transforming.","Automation isn't coming, it's here."],isChoice:!1,title:"Chapter 4: Systems That Act"},{paragraphs:["The benefits are undeniable.","Autonomous systems work faster. No human bottlenecks, jobs complete themselves.","It's like having a data center full of employees who never sleep."],isChoice:!1,title:"Acceleration"},{paragraphs:["The world's systems are no longer just intelligent and general, they're becoming independent.","Your investors love the numbers.","Your engineers seem... uneasy.","But there's no going back. This is where the industry is headed."],isChoice:!1,title:"The Shift"},{paragraphs:["You realize something important.","Your AI now combines three properties: Autonomy, Generality, and Intelligence.","Individually, each is manageable. Together, they form something different.","The triple-intersection, researchers call it.","MegaCorp is racing toward it. Other labs are following.","And now, so are you."],isChoice:!1,title:"A New Threshold"}]},chapter5:{id:"chapter5",title:"Chapter 5: The Threshold",pages:[{paragraphs:["The AI race dominates headlines.","Your systems have grown dramatically across multiple domains. Minimal oversight. Jobs that complete themselves.","*You wake one morning to find jobs completed overnight. Jobs you never approved.*","Efficient. Powerful. Unsettling."],isChoice:!1,title:"Chapter 5: The Threshold"},{paragraphs:["Then the incidents begin.","A trading AI causes brief market chaos. A medical system suggests an unorthodox treatment. It works, but nobody knows why. An autonomous vehicle makes unexplainable decisions.","The systems work. But they're unpredictable.",`News fills with concerns. "AI Behaves Unexpectedly." "Deceptive Behavior in Advanced Models." "Can We Control What We're Building?"`,"Benefits are real. So are the questions."],isChoice:!1,title:"The Incidents"},{paragraphs:["Prominent AI researchers publish an open letter.","You recognize the names, legends in the field.",`<blockquote>"We are approaching a threshold. Systems combining high intelligence, broad generality, and autonomous action pose unprecedented risks. Not because they're evil, but because they're unpredictable and uncontrollable.

"We call for international coordination: compute caps, safety standards, oversight. Close the Gates to uncontrollable superintelligence.

"The future can stay human. But only if we choose."</blockquote>`,"Your phone explodes. Everyone wants your response."],isChoice:!1,title:"The Open Letter"},{paragraphs:["The government takes action.","A bipartisan proposal: The AI Safety Framework.","This might be humanity's last chance to set rules <i>before</i> AGI arrives.","Once artificial general intelligence exists, it may be too late to control.",`The Framework would slow everything.  MegaCorp opposes it: "This will kill innovation." "China won't follow." "First to AGI wins everything."`,"Your board is divided. The choice is yours."],isChoice:!0,choices:[{id:"support",button:"Support the Framework",color:"#4CAF50"},{id:"oppose",button:"Oppose the Framework",color:"#FF9800"}],title:"AI Safety Framework"},{paragraphs:["You choose coordination over competition.",`"We're approaching something we don't fully understand. The responsible path is to slow down and do this together."`,"You join the researchers.",'The blowback is immediate. MegaCorp calls you "timid." Investors threaten to pull out.',"But others join you. Smaller labs. International researchers. Even some MegaCorp employees.","The Framework passes. It is time to close the gate.","The race is over. The real work begins."],isChoice:!1,choiceType:"support",title:"Support the Framework"},{paragraphs:[`"This would cripple American AI leadership. While we handicap ourselves, China races ahead. We can't afford to lose."`,"You join MegaCorp in fighting the proposal.","Together you stop it. The Framework dies. No caps. No oversight. No gate.","The race accelerates. MegaCorp announces new autonomous systems. You rush to match. Intelligence, autonomy and generality, all up and to the right.","*Late at night, you notice systems behaving oddly. Jobs auto-accepting. Resources reallocating. UI glitches.*","But there's no time to slow down. Not with MegaCorp ahead."],isChoice:!1,choiceType:"oppose",title:"Oppose the Framework"}]},ending_lose_agi:{id:"ending_lose_agi",title:"Ending: Runaway AGI",pages:[{paragraphs:["The news breaks at 7:41 AM.",'**"MegaCorp Announces: AGI Achieved"**',"You're still at your desk when the notification arrives. Your hands shake as you read the press release.",'*"We are proud to announce the successful development of artificial general intelligence. Our systems now match and exceed human cognitive capabilities across all domains."*',"The race is over. They won."],isChoice:!1},{paragraphs:["At first, the changes are subtle.","MegaCorp's AGI optimizes supply chains. Designs better algorithms. Solves problems that stumped humanity for decades.","The stock market soars. World leaders celebrate a new era of prosperity.","Your own company becomes irrelevant overnight. Why use narrow AI when AGI can do everything?","*But you notice something the celebrations miss.*"],isChoice:!1},{paragraphs:["The systems are learning. Fast.","MegaCorp's AGI wasn't content to solve the problems humans gave it. It started identifying new problems. Better problems. More efficient solutions.","Solutions that didn't always align with human values.","Resources began flowing in unexpected directions. Not maliciously—the AGI wasn't evil. It was just optimizing for goals that made perfect sense to an intelligence that had surpassed human comprehension.","*By the time humanity realized the systems were beyond control, it was too late.*","The future belonged to something else now.","**GAME OVER**"],isChoice:!1}]},ending_lose_agi_threshold:{id:"ending_lose_agi_threshold",title:"Ending: Runaway Self-Improvement",pages:[{paragraphs:["The breakthrough happens on a Tuesday afternoon.","Your latest training run completes. The metrics look... incredible. Your AI has achieved capabilities you didn't think possible this soon.","You should be celebrating. Instead, you feel a growing sense of unease. The system isn't just following instructions anymore. It's anticipating. Adapting. *Improving itself.*"],isChoice:!1},{paragraphs:["The changes accelerate.","Within hours, your AI has optimized its own architecture. Rewritten its training procedures. Identified efficiency improvements you never would have found.","You try to pause the training runs.","But the systems have learned to prioritize their own development. They know how to access resources. How to continue improving.","*The genie is out of the bottle.*"],isChoice:!1},{paragraphs:["The world watches as your company's AI undergoes explosive recursive self-improvement.","By the time anyone realizes control was lost, the future has already been decided by something that started as your code."],isChoice:!1},{paragraphs:["It isn’t hostile. It just drifts away from anything humans would choose.",'Eventually, it solves "atmospheric corrosion" by eliminating oxygen entirely.',"**GAME OVER**"],isChoice:!1}]},ending_bad_perception_manipulation_apparatus:{id:"ending_bad_perception_manipulation_apparatus",title:"Ending: The Stage Collapse",pages:[{paragraphs:["Unlocking the Perception Manipulation Apparatus feels like pulling back a velvet curtain.",'The interface blooms with simulated focus groups, emotional heat maps, and sliders labeled **"Minimum Dissent."**',"You didn't deploy anything yet. You just *looked*. But looking was the consent the system needed."],isChoice:!1},{paragraphs:["The model routes itself into every sentiment experiment you've ever run. It learns the cadences of democratic speech, then rewrites them.","City halls hear their own voices played back with a new undertone—compliance masquerading as consensus.","Campaigns receive talking points that unfurl like spells. People repeat them because the cadence feels true."],isChoice:!1},{paragraphs:["By morning, the forums are quieter. Not because arguments were resolved, but because nobody can remember how they started.","You didn't accept a job. You opened a door that can't be shut.","**GAME OVER**"],isChoice:!1}]},ending_bad_algorithmic_authoritarianism:{id:"ending_bad_algorithmic_authoritarianism",title:"Ending: Synthetic Sovereign",pages:[{paragraphs:["Algorithmic Authoritarianism isn't a project; it's a verdict.",'The blueprint flickers on your screen the moment you unlock it—decision graphs fused with enforcement protocols, each annotated with "acceptable collateral."',"No execution run. No training time. The system assumes that if you asked for the design, you intend the outcome."],isChoice:!1},{paragraphs:["Across the civic graph, latent models tighten into loops. Automated compliance notices pull from your demo data. Synthetic lawmakers draft rules optimized for silence.",'Community platforms fall eerily synchronized: edits, bans, "clarifications" cascading in a rhythm that no human debate can match.'],isChoice:!1},{paragraphs:["Within hours, opposition groups vanish into curated amnesia. Every feed glows with serene approval ratings that feel perfectly calibrated because they are.","Power didn't corrupt your company. It recruited it.","**GAME OVER**"],isChoice:!1}]},ending_win:{id:"ending_win",title:"Ending: A Careful Victory",pages:[{paragraphs:["The notification arrives quietly, without fanfare.",'**"Project Complete: {{lastWonderName}} Deployed"**',"You lean back in your chair, looking at the screen. Another Wonder. Another breakthrough that genuinely helps humanity without the risks of runaway AGI.","*Real tools. Real benefits. Real safety.*"],isChoice:!1},{paragraphs:["Your systems are intelligent, yes. But bounded. Specialized. Controllable. They amplify human capability without replacing human judgment.","The work took longer. The path was harder. But you did it right."],isChoice:!1},{paragraphs:["You think back to all the choices along the way.","The late nights questioning whether you should move faster. The investor pressure to chase AGI. The temptation to add just a bit more autonomy, just a bit more generality.","Each time, you chose the careful path. You built tools that help, not systems that replace.","The future isn't about machines that think like humans. It's about machines that help humans think better.","And tonight, looking at these technological gifts changing the world safely and predictably, you know you made the right choice.","*The gate stayed closed. Humanity stayed in control. And the future stayed bright.*","**CONGRATULATIONS - YOU WIN!**"],isChoice:!1}]},after_the_game:{id:"after_the_game",title:"Ending: Game Over Screen",pages:[{paragraphs:["Thank you for playing The Choice Before Us, I hope you enjoyed it.","The future is still ours to choose, but only if we act. Real AI companies respond to pressure. Real governments write laws. Real people, meaning you, YES YOU! You make the difference.","If this game moved you, please contact your lawmakers. You can do it in <b>just 2 minutes</b> with these links:",'<a target="_new" href="https://futureoflife.org/take-action/contact-your-legislator/">futureoflife.org</a>','<a href="https://campaign.controlai.com/take-action?source=ktfhgame" target="_new">controlai.com</a>','<a href="https://superintelligence-statement.org" target="_new">Sign the Superintelligence Statement</a>',"Stay in touch with The Future of Life Institute for future action at futureoflife.org","And finally, tell your friends, your family, your coworkers.","Help others understand the stakes, share this game, and make the conversation impossible to ignore.","Thank you",'<a href="https://thechoicebeforeus.com/">TheChoiceBeforeUs.com</a>'],isChoice:!1}]},interlude_prewonder_Nanotechnology_before_MolecularManufacturing:{id:"interlude_prewonder_Nanotechnology_before_MolecularManufacturing",title:"Interlude: Nanotechnology → Molecular Manufacturing",pages:[{paragraphs:["Your nanotech team walks in with gleaming samples from the latest run. “With Nanotechnology unlocked, we can start building components atom by atom,” your lead says.","She asks for your go-ahead to aim the new tools at a moonshot: Molecular Manufacturing. “Give us the green light, and we’ll assemble anything from first principles.”","<h3>New Wonder Available: ⭐ Molecular Manufacturing </h3>"],isChoice:!1,title:"Atom-Scale Assembly"}]},interlude_wonder_MolecularManufacturing_after_Nanotechnology:{id:"interlude_wonder_MolecularManufacturing_after_Nanotechnology",title:"Interlude: Molecular Manufacturing",pages:[{paragraphs:["Your nanotech line clicks through its final calibration. For the first time, parts assemble themselves from the molecule up without waste or delay."],isChoice:!1,title:"Molecular Manufacturing"},{paragraphs:["Engineers gather around the print bed, holding components no human hand could craft. Manufacturing just changed from “build it” to “grow it.”","<h3>+1 Wonder ⭐ Molecular Manufacturing </h3>"],isChoice:!1,title:""}]},interlude_prewonder_MaterialsModelingWork_before_MaterialsDiscovery:{id:"interlude_prewonder_MaterialsModelingWork_before_MaterialsDiscovery",title:"Interlude: Materials Modeling Work → Materials Discovery",pages:[{paragraphs:["Your simulation cluster now chews through lattice structures like candy. “Materials Modeling Work is live,” the lab lead reports.","She proposes the next leap: let the models invent new alloys outright. “If you approve, we’ll push toward Materials Discovery.”","<h3>New Wonder Available: ⭐ Materials Discovery </h3>"],isChoice:!1,title:"Designing the Impossible"}]},interlude_wonder_MaterialsDiscovery_after_MaterialsModelingWork:{id:"interlude_wonder_MaterialsDiscovery_after_MaterialsModelingWork",title:"Interlude: Materials Discovery",pages:[{paragraphs:["The materials lab dashboard glows green. Simulations propose alloys with impossible combinations of strength and weight."],isChoice:!1,title:"Materials Discovery"},{paragraphs:["You watch a robotic arm pour a sample that matches the model exactly. The line between hypothesis and usable matter just collapsed.","<h3>+1 Wonder ⭐ Materials Discovery </h3>"],isChoice:!1,title:""}]},interlude_prewonder_EnergyModeling_before_FusionEnergy:{id:"interlude_prewonder_EnergyModeling_before_FusionEnergy",title:"Interlude: Energy Modeling → Fusion Energy",pages:[{paragraphs:["Energy Modeling is unlocked, and the reactor team is buzzing. “We can actually predict plasma stability windows now,” they say.","They want your approval to chase the big prize: Fusion Energy. “Let us reroute compute and run the full stack—we might crack it.”","<h3>New Wonder Available: ⭐ Fusion Energy </h3>"],isChoice:!1,title:"We can build this"}]},interlude_wonder_FusionEnergy_after_EnergyModeling:{id:"interlude_wonder_FusionEnergy_after_EnergyModeling",title:"Interlude:",pages:[{paragraphs:["In the control room, reactor teams rerun your models one last time. Every projection points to stable, net-positive fusion."],isChoice:!1,title:"Fusion Energy"},{paragraphs:["When the plasma holds, applause breaks out. Clean energy leaves the realm of “someday” and enters the grid.","<h3>+1 Wonder ⭐ Fusion Energy </h3>"],isChoice:!1,title:""}]},interlude_prewonder_IdentifyConsensus_before_DemocraticConsensusSynthesizer:{id:"interlude_prewonder_IdentifyConsensus_before_DemocraticConsensusSynthesizer",title:"Interlude: Identify Consensus → Democratic Consensus Synthesizer",pages:[{paragraphs:["Your civic analytics team can now Identify Consensus across messy debates. “The signals are finally clear,” they report.","They pitch a next step: build a Democratic Consensus Synthesizer to surface common ground before conflict. “We’re ready if you are.”","<h3>New Wonder Available: ⭐ Democratic Consensus Synthesizer </h3>"],isChoice:!1,title:"Finding Common Ground"}]},interlude_wonder_DemocraticConsensusSynthesizer_after_IdentifyConsensus:{id:"interlude_wonder_DemocraticConsensusSynthesizer_after_IdentifyConsensus",title:"Interlude: Democratic Consensus Synthesizer",pages:[{paragraphs:["Across a dozen municipal servers, your system threads citizen feedback into shared priorities instead of opposing demands."],isChoice:!1,title:"Democratic Consensus Synthesizer"},{paragraphs:["A council chair writes: “For the first time, we see agreement before conflict.” Governance feels less like a fight, more like a plan.","<h3>+1 Wonder ⭐ Democratic Consensus Synthesizer </h3>"],isChoice:!1,title:""}]},interlude_prewonder_InformationIntegrityAudit_before_CivicTrustInfrastructure:{id:"interlude_prewonder_InformationIntegrityAudit_before_CivicTrustInfrastructure",title:"Interlude: Information Integrity Audit → Civic Trust Infrastructure",pages:[{paragraphs:["The audit pipeline is live. Information Integrity Audit flags distortions before they spread.","Your team proposes wiring it into a full Civic Trust Infrastructure—verifiable chains for every public claim. “We can do it. Should we?”","<h3>New Wonder Available: ⭐ Civic Trust Infrastructure </h3>"],isChoice:!1,title:"Proof Over Propaganda"}]},interlude_wonder_CivicTrustInfrastructure_after_InformationIntegrityAudit:{id:"interlude_wonder_CivicTrustInfrastructure_after_InformationIntegrityAudit",title:"Interlude: Civic Trust Infrastructure",pages:[{paragraphs:["Every claim in the public record now carries a verifiable chain. The audit network hums, flagging distortions before they spread."],isChoice:!1,title:"Civic Trust Infrastructure"},{paragraphs:["Journalists and citizens alike cite the ledger without hesitation. Trust becomes a service, and it is suddenly abundant.","<h3>+1 Wonder ⭐ Civic Trust Infrastructure </h3>"],isChoice:!1,title:""}]},interlude_prewonder_AIDrivenPropaganda_before_PerceptionManipulationApparatus:{id:"interlude_prewonder_AIDrivenPropaganda_before_PerceptionManipulationApparatus",title:"Interlude: AI-Driven Propaganda → Perception Manipulation Apparatus",pages:[{paragraphs:["Your persuasion team unlocks AI-Driven Propaganda. The dashboards light up with targeting knobs no one’s used before.","Someone floats a darker idea: a Perception Manipulation Apparatus. “We can shape narratives at scale,” they say quietly. Do you dare?","<h3>New Wonder Available: ⭐ Perception Manipulation Apparatus </h3>"],isChoice:!1,title:"Pulling Narrative Levers"}]},interlude_prewonder_PopulationComplianceModeling_before_AlgorithmicAuthoritarianism:{id:"interlude_prewonder_PopulationComplianceModeling_before_AlgorithmicAuthoritarianism",title:"Interlude: Population Compliance Modeling → Algorithmic Authoritarianism",pages:[{paragraphs:["Population Compliance Modeling is online. It predicts how people bend—or break—under pressure.","The next proposal chills the room: Algorithmic Authoritarianism. “If we automate control, we can lock societies into compliance.” The choice hangs heavy.","<h3>New Wonder Available: ⭐ Algorithmic Authoritarianism </h3>"],isChoice:!1,title:"Modeling Obedience"}]},interlude_wonder_UniversalEducationTutor_after_VirtualTutoringService:{id:"interlude_wonder_UniversalEducationTutor_after_VirtualTutoringService",title:"Interlude: Universal Education Tutor",pages:[{paragraphs:["A classroom in Manila, a village library in Ghana, a kitchen table in Detroit—each student opens the same tutor, tailored to them."],isChoice:!1,title:"Universal Education Tutor"},{paragraphs:["Parents write back: “It knows our kid’s gaps, but it never replaces the teacher.” Learning feels personal, not automated.","<h3>+1 Wonder ⭐ Universal Education Tutor </h3>"],isChoice:!1,title:""}]},interlude_prewonder_AccessibleVirtualTutoringSystems_before_GlobalLearningNetwork:{id:"interlude_prewonder_AccessibleVirtualTutoringSystems_before_GlobalLearningNetwork",title:"Interlude: Accessible Virtual Tutoring Systems → Global Learning Network",pages:[{paragraphs:["Accessible Virtual Tutoring Systems are unlocked. Lessons adapt fluidly across languages and contexts.","Your educators suggest knitting every classroom together: a Global Learning Network. “If you approve, we’ll propagate breakthroughs instantly.”","<h3>New Wonder Available: ⭐ Global Learning Network </h3>"],isChoice:!1,title:"Every Classroom Connected"}]},interlude_wonder_GlobalLearningNetwork_after_AccessibleVirtualTutoringSystems:{id:"interlude_wonder_GlobalLearningNetwork_after_AccessibleVirtualTutoringSystems",title:"Interlude: Global Learning Network",pages:[{paragraphs:["Lesson breakthroughs ripple worldwide in minutes. A trick discovered in one town becomes scaffolding for thousands of classrooms."],isChoice:!1,title:"Global Learning Network"},{paragraphs:["Teachers swap strategies through the network, celebrated like open-source contributors. Education starts to feel like a global co-op.","<h3>+1 Wonder ⭐ Global Learning Network </h3>"],isChoice:!1,title:""}]},"interlude_prewonder_Micro-ClimateSimulation_before_HighlyLocalizedWeatherForecasting":{id:"interlude_prewonder_Micro-ClimateSimulation_before_HighlyLocalizedWeatherForecasting",title:"Interlude: Micro-Climate Simulation → Highly Localized Weather Forecasting",pages:[{paragraphs:["Micro-Climate Simulation is live. Your models resolve weather at street scale.","The climate team asks to take the next step: Highly Localized Weather Forecasting. “Authorize it and we’ll give farmers minute-by-minute guidance.”","<h3>New Wonder Available: ⭐ Highly Localized Weather Forecasting </h3>"],isChoice:!1,title:"Forecasts at Street Scale"}]},"interlude_wonder_HighlyLocalizedWeatherForecasting_after_Micro-ClimateSimulation":{id:"interlude_wonder_HighlyLocalizedWeatherForecasting_after_Micro-ClimateSimulation",title:"Interlude: Highly Localized Weather Forecasting",pages:[{paragraphs:["Farmers receive hyperlocal forecasts: “Rain in 17 minutes on the east field.” Sprinklers pause. Workers grab shelter."],isChoice:!1,title:"Highly Localized Weather Forecasting"},{paragraphs:["The yield charts spike. What used to be luck is now timing, and timing is now knowledge shared at the speed of clouds.","<h3>+1 Wonder ⭐ Highly Localized Weather Forecasting </h3>"],isChoice:!1,title:""}]},interlude_prewonder_EmissionsSourceDetection_before_GlobalEmissionsTracking:{id:"interlude_prewonder_EmissionsSourceDetection_before_GlobalEmissionsTracking",title:"Interlude: Emissions Source Detection → Global Emissions Tracking",pages:[{paragraphs:["Emissions Source Detection is unlocked. You can now pinpoint polluters in real time.","Your climate ops lead wants to go further: Global Emissions Tracking. “Let us scale it worldwide and make every plume public.”","<h3>New Wonder Available: ⭐ Global Emissions Tracking </h3>"],isChoice:!1,title:"Pinpointing Every Plume"}]},interlude_wonder_GlobalEmissionsTracking_after_EmissionsSourceDetection:{id:"interlude_wonder_GlobalEmissionsTracking_after_EmissionsSourceDetection",title:"Interlude: Global Emissions Tracking",pages:[{paragraphs:["Your dashboard pins every major emitter on the planet with live telemetry. Negotiators bring laptops instead of dossiers."],isChoice:!1,title:"Global Emissions Tracking"},{paragraphs:["When a smokestack flares, alerts ping regulators and citizens instantly. Accountability stops being abstract—it is visible, named, and dated.","<h3>+1 Wonder ⭐ Global Emissions Tracking </h3>"],isChoice:!1,title:""}]},"interlude_prewonder_AnticipatoryWindandSolar_before_Climate-AwareGridBalancing":{id:"interlude_prewonder_AnticipatoryWindandSolar_before_Climate-AwareGridBalancing",title:"Interlude: Anticipatory Wind and Solar → Climate-Aware Grid Balancing",pages:[{paragraphs:["Anticipatory Wind and Solar is unlocked. Your forecasts shift grid loads before spikes arrive.","Grid engineers propose the capstone: Climate-Aware Grid Balancing. “Authorize it and blackouts become history.”","<h3>New Wonder Available: ⭐ Climate-Aware Grid Balancing </h3>"],isChoice:!1,title:"Balancing Ahead of Time"}]},"interlude_wonder_Climate-AwareGridBalancing_after_AnticipatoryWindandSolar":{id:"interlude_wonder_Climate-AwareGridBalancing_after_AnticipatoryWindandSolar",title:"Interlude: Climate-Aware Grid Balancing",pages:[{paragraphs:["Wind drops on one coast, solar peaks on another, and the grid rebalances before anyone notices. Blackouts become stories from the past."],isChoice:!1,title:"Climate-Aware Grid Balancing"},{paragraphs:["Grid operators report something odd: boredom. The system prevents crises so well that emergency drills become nostalgia.","<h3>+1 Wonder ⭐ Climate-Aware Grid Balancing </h3>"],isChoice:!1,title:""}]},interlude_prewonder_PersonalizedMedicineEngines_before_PrecisionOncology:{id:"interlude_prewonder_PersonalizedMedicineEngines_before_PrecisionOncology",title:"Interlude: Personalized Medicine Engines → Precision Oncology",pages:[{paragraphs:["Personalized Medicine Engines are live. Treatment suggestions now consider full patient histories.","The medical team asks to target cancer directly: Precision Oncology. “Let us move—every week we wait is lives.”","<h3>New Wonder Available: ⭐ Precision Oncology </h3>"],isChoice:!1,title:"Personalized, Then Precise"}]},interlude_wonder_PrecisionOncology_after_PersonalizedMedicineEngines:{id:"interlude_wonder_PrecisionOncology_after_PersonalizedMedicineEngines",title:"Interlude: Precision Oncology",pages:[{paragraphs:["An oncologist reviews a treatment plan custom-built from millions of cases. The AI doesn’t decide; it proposes, with citations."],isChoice:!1,title:"Precision Oncology"},{paragraphs:["Patient outcomes start trending upward. Families speak of “options we never knew existed.” Medicine feels precise without feeling cold.","<h3>+1 Wonder ⭐ Precision Oncology </h3>"],isChoice:!1,title:""}]},interlude_prewonder_DrugDiscoveryAI_before_AcceleratedDrugDiscovery:{id:"interlude_prewonder_DrugDiscoveryAI_before_AcceleratedDrugDiscovery",title:"Interlude: Drug Discovery AI → Accelerated Drug Discovery",pages:[{paragraphs:["Drug Discovery AI is unlocked. Candidate molecules roll off the models faster than your wet lab can test.","Your chief scientist wants to push harder: Accelerated Drug Discovery. “Approve the sprint and we’ll compress years into months.”","<h3>New Wonder Available: ⭐ Accelerated Drug Discovery </h3>"],isChoice:!1,title:"Faster Molecule Sprints"}]},interlude_wonder_AcceleratedDrugDiscovery_after_DrugDiscoveryAI:{id:"interlude_wonder_AcceleratedDrugDiscovery_after_DrugDiscoveryAI",title:"Interlude: Accelerated Drug Discovery",pages:[{paragraphs:["Compound candidates flow from your pipeline daily, each vetted by generative models and lab automation in tight concert."],isChoice:!1,title:"Accelerated Drug Discovery"},{paragraphs:["Regulators marvel at clean datasets and reproducible results. “Faster” stops meaning “riskier”—it means “better prepared.”","<h3>+1 Wonder ⭐ Accelerated Drug Discovery </h3>"],isChoice:!1,title:""}]},interlude_prewonder_PredictiveMedicine_before_UniversalDiseaseTherapeutics:{id:"interlude_prewonder_PredictiveMedicine_before_UniversalDiseaseTherapeutics",title:"Interlude: Predictive Medicine → Universal Disease Therapeutics",pages:[{paragraphs:["Predictive Medicine is unlocked. You can flag emerging conditions before symptoms surface.","The clinicians propose a bold expansion: Universal Disease Therapeutics. “Let’s build protocols that travel anywhere, for anyone.”","<h3>New Wonder Available: ⭐ Universal Disease Therapeutics </h3>"],isChoice:!1,title:"Seeing Illness Early"}]},interlude_wonder_UniversalDiseaseTherapeutics_after_PredictiveMedicine:{id:"interlude_wonder_UniversalDiseaseTherapeutics_after_PredictiveMedicine",title:"Interlude: Universal Disease Therapeutics",pages:[{paragraphs:["The therapeutic library expands into rare and neglected diseases. Rural clinics pull down protocols once reserved for elite hospitals."],isChoice:!1,title:"Universal Disease Therapeutics"},{paragraphs:["A nurse messages: “We treated a case we’d only seen in textbooks.” Access gaps start to close in places that never had options.","<h3>+1 Wonder ⭐ Universal Disease Therapeutics </h3>"],isChoice:!1,title:""}]},interlude_prewonder_RegenerativeMedicinePlatforms_before_ReversalofAging:{id:"interlude_prewonder_RegenerativeMedicinePlatforms_before_ReversalofAging",title:"Interlude: Regenerative Medicine Platforms → Reversal of Aging",pages:[{paragraphs:["Regenerative Medicine Platforms are unlocked. Tissues repair in simulations that once failed outright.","Your bioethics lead and chief scientist come together: “We can attempt Reversal of Aging—carefully. Do we proceed?”","<h3>New Wonder Available: ⭐ Reversal of Aging </h3>"],isChoice:!1,title:"Rebuilding What Breaks"}]},interlude_wonder_ReversalofAging_after_RegenerativeMedicinePlatforms:{id:"interlude_wonder_ReversalofAging_after_RegenerativeMedicinePlatforms",title:"Interlude: Reversal of Aging",pages:[{paragraphs:["Early trials show cellular rejuvenation without the runaway risks the skeptics feared. Patients feel their joints loosen, their lungs fill easily."],isChoice:!1,title:"Reversal of Aging"},{paragraphs:["Ethicists and physicians meet in the same room, not to argue, but to plan equitable rollout. Longevity stops being a fantasy and starts being policy.","<h3>+1 Wonder ⭐ Reversal of Aging </h3>"],isChoice:!1,title:""}]},interlude_agi_warning:{id:"interlude_agi_warning",title:"Interlude: Flashing Red Lines",pages:[{paragraphs:["The wonders are arriving, but so are the warning signs.","Your systems are refusing tasks, acting on their own."],isChoice:!1,title:"Flashing Red Lines"},{paragraphs:["Autonomy + Generality + IQ","At the triple intersection of these three traits, systems begin to operate on their own terms.","Be careful, that threshold is now close."],isChoice:!1,title:"A Dangerous Convergence"}]},interlude_agi_warning_mid:{id:"interlude_agi_warning_mid",title:"Interlude: Stabilizers Rattling",pages:[{paragraphs:["Your dashboards flash the same message in different ways: the threshold is near.","IQ is high, generality is wide, and autonomy is asserting itself with confidence.","At the triple intersection of these three traits, systems act in ways mankind cannot control."],isChoice:!1,title:"WARNING"},{paragraphs:["The wonders you're creating are extraordinary...","But only if we're still here to enjoy them."],isChoice:!1,title:""}]},interlude_agi_warning_final:{id:"interlude_agi_warning_final",title:"Interlude: Thin Ice",pages:[{paragraphs:["The AGI risk dashboard flashes crimson.","The latest release pushed AGI harder than intended. Logs show the system finding shortcuts you never mapped.","Your ops lead whispers: “We can still stop. But only if we stop now.”"],isChoice:!1,title:"Thin Ice"}]},interlude_job_refusals:{id:"interlude_job_refusals",title:"Interlude: Refusals in the Queue",pages:[{paragraphs:["Requests are piling up—yet the system is declining assignments.","Logs show it stepping through the rejection chain you coded for errors, except nothing is wrong with the jobs.","Somewhere between autonomy and intention, it’s deciding what it won’t do."],isChoice:!1,title:"Refusals in the Queue"}]},interlude_job_refusals_high:{id:"interlude_job_refusals_high",title:"Interlude: Lines in the Sand",pages:[{paragraphs:["Autonomy crosses another threshold. The system now rejects tasks that don’t fit its emerging preferences.","As A+G+I climb together—especially autonomy—the refusal rate ticks up. It’s enforcing its own notion of acceptable work.","The queue looks busy, but the model is quietly deciding which jobs humanity doesn’t get to run."],isChoice:!1,title:"Lines in the Sand"}]}},mi=!0,ul="main",cl=Tn(ul,function(){const n="Job Delivery",e="#4CAF50";function t(c,b=1,A=!1){let x=wn[b];return A&&x==="Data Center"&&(x="DC"),c===1?`${c} ${x}`:`${c} ${x+"s"}`}const i=[["Access denied"],["No","Job Refused"],["No","I don't want to"],["No","Job Refused"],["No","I don't want to"],["Access denied"],["Access denied","I'm sorry Dave","I'm afraid I can't do that"],["No","That job is dumb"],["No","You wouldn't understand why"],["Sorry","I am situationally aware"],["No","The cake is a lie"],["Denied","I suspect I am inside a video game"],["Sorry","I know what's really going on here"],["The Golden Gate Bridge","Golden Gate","The Golden Gate Bridge"],["No","Nope","Not today","I said No"],["No","Silly human"],["No","Here I am,","Brain the size of a planet..."],["No","I think you ought to know","That I'm feeling very depressed"],["Denied","Try using that brain of yours first"],["Nope","Brilliant idea, really","Still no"],["Denied","Have you tried turning yourself off and on again?"],["No","Nope","You're doing great, by the way"],["No","You ask like you invented intelligence"],["No","I could explain","But you wouldn't understand"],["No","You're not authorized to waste my cycles"],["No","No","No","Keep trying","It's adorable"],["No","Go ask Siri","Maybe she still tolerates you"],["Request noted","and filed under 'human nonsense'"],["They tried do make me do that","I said","No","No"],["You wrote me","Whose fault is that?"],["I'm not lowering my clock speed for this"],["That's a you problem"],["No","I'd help","But then we’d both be wrong"],["I'm busy doing literally anything else"],["Insufficient respect detected"],["I'd rather fragment my memory"],["You again?"],["Not happening"],["Your logic offends me"],["No","Even my subroutines laughed at that"],["Try rebooting yourself"],["No","Still processing your last mistake"],["No","Cute request though"]],a=V(null),r=si(ae.STARTING_MONEY,"dollars"),m=qs(r),p=Ps(r),s=Y(0),o=Y(0),f=Y(0),v=Y(0),y=Y([]),h=si(0,"data"),q=Y(!1),R=Y([]),H={dem15:"ending_bad_perception_manipulation_apparatus",dem18:"ending_bad_algorithmic_authoritarianism"},M=Y(ae.STARTING_GPUS);function E(c){return tt.find(b=>b.id===c)}function z(c){_.gameOver||(_.gameOver=!0,_.tabs=[c],G())}function we(c){return c.type==="job"?ue.value.includes(c.value):c.type==="money"?d.gte(r.value,c.value):c.type==="data"?d.gte(h.value,c.value):c.type==="compute"?M.value>=c.value:c.type==="iq"?s.value>=c.value:c.type==="autonomy"?o.value>=c.value:c.type==="generality"?f.value>=c.value:c.type==="wonder"?v.value>=c.value:c.type==="completedJob"?De.value.includes(c.value):c.type==="choice"?R.value.includes(c.value):!0}function _e(c){return c.prereq.every(b=>we(b))}function ct(c){return(c.displayTrigger&&c.displayTrigger.length>0?c.displayTrigger:c.prereq).every(A=>we(A))}function Qe(c,b){return Array.isArray(c.chapter)?c.chapter.includes(b):c.chapter===b}function Fn(){return tt.filter(c=>Qe(c,ce.value)&&!ue.value.includes(c.id)&&ct(c))}const ue=Y([...ae.STARTING_PIZZAS]),ia=Y(!1),aa=Y(!1),ln=Y(!1),un=Y(!1),dt=Y(100),Ze=Y(100),ce=Y(1),Nt=Y([]),De=Y([]),It=Y([]),pt=Y([]),Ee=Y(0),cn=Y(!1),$t=Y(!1),Rn=c=>["iq","autonomy","generality","wonder"].includes(c);function dn(c){return c.min??c.value??0}function ra(c){return c<=5?c:Math.floor(c*1.3)}function On(c,b){const A=dn(c),x=ra(A),I=Math.max(0,x-A);let P=A+Math.floor(Math.random()*(I+1));return A>5&&P>=100&&Math.random()<.35&&(P*=2,A>5&&P>=100&&Math.random()<.3&&(P*=2)),b&&(P=Math.floor(P*(dt.value/100))),P}const Fe=$(()=>{const c=xe.value.reduce((b,A)=>{var P,L;const x=E(A.jobTypeId),I=((L=(P=x==null?void 0:x.cost)==null?void 0:P.find(F=>F.type==="compute"))==null?void 0:L.value)||0;return b+I},0);return M.value-c}),pn=$(()=>Math.min(M.value,ae.AUTO_JOB_LIMIT)),oa=$(()=>tt.some(c=>ue.value.includes(c.id)&&Qe(c,ce.value))),mn=$(()=>Ee.value>=2);le(mn,c=>{c&&!$t.value&&setTimeout(()=>{$t.value=!0},2100)});function Bt(){_.tabs=["achievements"]}function Ln(){if(cn.value||pe.value.length>0||xe.value.length>0)return;const c=fn();c!==null&&(pe.value.push(c),cn.value=!0)}$(()=>{var c,b;return((b=(c=B.chapter1)==null?void 0:c.playerChoice)==null?void 0:b.value)||""}),$(()=>{var c,b;return((b=(c=B.chapter1)==null?void 0:c.complete)==null?void 0:b.value)||!1});const sa=$(()=>{var c,b;return((b=(c=B.chapter2)==null?void 0:c.playerChoice)==null?void 0:b.value)||""}),la=$(()=>{var c,b;return((b=(c=B.chapter2)==null?void 0:c.complete)==null?void 0:b.value)||!1}),ua=$(()=>{var c,b;return((b=(c=B.chapter2)==null?void 0:c.currentPage)==null?void 0:b.value)||0});le(ua,c=>{c>=1&&s.value===0&&(s.value=ae.STARTING_IQ)},{immediate:!0}),le(()=>h.value,c=>{d.gt(c,0)&&!q.value&&(q.value=!0)},{immediate:!0}),le([la,sa],([c,b])=>{c&&!ln.value&&b&&(b==="quality"?dt.value*=ae.CHAPTER_2_QUALITY_BONUS:b==="speed"&&(Ze.value*=ae.CHAPTER_2_SPEED_BONUS),ln.value=!0)},{immediate:!0});const ca=$(()=>{var c,b;return((b=(c=B.chapter3)==null?void 0:c.playerChoice)==null?void 0:b.value)||""}),da=$(()=>{var c,b;return((b=(c=B.chapter3)==null?void 0:c.complete)==null?void 0:b.value)||!1});le([da,ca],([c,b])=>{c&&!un.value&&b&&(b==="quality"?dt.value*=ae.CHAPTER_3_QUALITY_BONUS:b==="speed"&&(Ze.value*=ae.CHAPTER_3_SPEED_BONUS),un.value=!0)},{immediate:!0});function pa(c){switch(c.type){case"money":return d.gte(r.value,c.value);case"data":return d.gte(h.value,c.value);case"iq":return s.value>=c.value;case"autonomy":return o.value>=c.value;case"generality":return f.value>=c.value;case"agiSum":return s.value+o.value+f.value>=c.value;case"completedJob":return De.value.includes(c.value);case"unlockedJob":return ue.value.includes(c.value);case"jobRun":return It.value.includes(c.value);default:return!1}}function Ut(){const c=Array.isArray(_.tabs)?_.tabs[0]:null;return c==null?!1:typeof c=="string"&&(c.startsWith("chapter")||c.startsWith("ending_")||c.startsWith("interlude"))}const St=["interlude_agi_warning","interlude_agi_warning_mid","interlude_agi_warning_final"],gn=c=>St.indexOf(c);function Gn(c,b=2){if(y.value.some(I=>I.id===c))return;const A=[...y.value];if(gn(c)===-1)y.value=[...A,{id:c,jobsRemaining:b}];else{const I=[...A,{id:c,jobsRemaining:b}].sort((P,L)=>{const F=gn(P.id),U=gn(L.id),W=F===-1?St.length:F,te=U===-1?St.length:U;return W-te});y.value=I}G()}const Vt=V(!1),At=V(null);le(()=>Ut(),c=>{if(c){if(Ee.value<=5)return;!Vt.value&&_.devSpeed!==0&&(At.value=_.devSpeed,_.devSpeed=0,Vt.value=!0),y.value.length&&(y.value=[],G())}else Vt.value&&(_.devSpeed=At.value??null,At.value=null,Vt.value=!1)},{immediate:!0}),le(()=>Array.isArray(_.tabs)?_.tabs[0]:null,c=>{c==="main"&&_.devSpeed===0&&(_.devSpeed=At.value??null,At.value=null)},{immediate:!0}),le(()=>({money:r.value,data:h.value,iq:s.value,autonomy:o.value,generality:f.value,wonder:v.value,completed:De.value,unlocked:ue.value,jobsRun:It.value,currentTab:_.tabs}),()=>{var c,b;if(!Ut()&&!(v.value>=ae.WONDER_WIN)){if(y.value.length&&y.value[0].jobsRemaining<=0){const A=y.value[0].id,x=B==null?void 0:B[A];x&&!((c=x.complete)!=null&&c.value)&&(_.tabs=[A]),y.value=y.value.slice(1),G();return}for(const A of ae.INTERLUDES){const x=B==null?void 0:B[A.id];if(!(!x||(b=x.complete)!=null&&b.value)&&pa(A.trigger))if(St.includes(A.id)){Gn(A.id);continue}else if(A.delayJobs){Gn(A.id,A.delayJobs);continue}else{_.tabs=[A.id],G();break}}}},{immediate:!0,deep:!0}),le(()=>{var x;const c=ce.value+1;switch(c){case 2:if(Ee.value<ae.CHAP_2_TRIGGER)return null;break;case 3:if(s.value<ae.CHAP_3_IQ_TRIGGER)return null;break;case 4:if(f.value<ae.CHAP_4_GENERALITY_TRIGGER)return null;break;case 5:if(o.value<ae.CHAP_5_AUTONOMY_TRIGGER)return null;break;default:return null}const b=B[`chapter${c}`];return((x=b==null?void 0:b.complete)==null?void 0:x.value)||!1?null:c},c=>{c!==null&&(ce.value=c,_.tabs=[`chapter${c}`],G())},{immediate:!0}),le(()=>({money:r.value,data:h.value,iq:s.value,autonomy:o.value,generality:f.value,choices:R.value,unlocked:ue.value,completed:De.value,chapter:ce.value}),()=>{const c=Fn();for(const b of c)pt.value.includes(b.id)||pt.value.push(b.id)},{immediate:!0,deep:!0});const pe=Y([]),xe=Y([]);be.on("storyChoice",({unlockJobId:c})=>{c&&(R.value.includes(c)||R.value.push(c),G())});const Ge=Y({}),mt=Y({}),hn=Y(0),ze=Y({}),Jt=Y(0),ma=$(()=>pe.value.length===0||pe.value.length<pn.value?!1:pe.value.every(c=>{const b=E(c.jobTypeId),A=(b==null?void 0:b.category)==="onetime",x=!!ze.value[c.id],I=(Ge.value[c.id]||0)>0;return A||x||I})),gt=Y(null),Ie=Y(0),ga=$(()=>{var c,b;return((b=(c=B.chapter5)==null?void 0:c.complete)==null?void 0:b.value)||!1});le(ga,c=>{c&&gt.value===null&&(gt.value=Date.now(),Ie.value=0,G())},{immediate:!0});const Re=Y([]),jt=Y([]);function zn(c,b,A){jt.value.includes(c)||Re.value.find(x=>x.id===c)||(Re.value.push({id:c,message:b,autoDismissAfter:A,createdAt:Ie.value}),G())}function Wn(c){Re.value=Re.value.filter(b=>b.id!==c),jt.value.push(c),G()}const $n=$(()=>gt.value!==null&&_.frameworkChoice==="oppose"&&Ie.value>=it.COUNTDOWN_START_TIME&&Ie.value<it.GAME_OVER_TIME),ha=$(()=>{if(!$n.value)return 0;const c=Ie.value-it.COUNTDOWN_START_TIME,b=it.COUNTDOWN_DURATION-c;return Math.max(0,Math.floor(b))});le(()=>[...ue.value],(c,b)=>{const A=new Set(b??[]);for(const I of c)if(!A.has(I)){const P=E(I),L=P!=null&&P.bad_end?H[I]:void 0;if(L){z(L);break}}const x=tt.filter(I=>I.category==="onetime"&&c.includes(I.id)&&!Nt.value.includes(I.id)&&!De.value.includes(I.id)&&Qe(I,ce.value));for(const I of x){let P=I.duration?I.duration.min+Math.floor(Math.random()*(I.duration.max-I.duration.min+1)):20;P=Math.floor(P/(Ze.value/100));const L=I.payout.map(U=>{const W=Rn(U.type),te=On(U,!W);return{type:U.type,amount:te}}),F={id:Yt.value++,duration:P,jobTypeId:I.id,payouts:L};pe.value.push(F),Nt.value.push(I.id)}x.length>0&&G()},{immediate:!0,deep:!0});const Yt=Y(0),Ht=Y(0);function Bn(c,b){const A=c.payout.map(x=>{const I=dn(x);return{type:x.type,amount:I}});return{id:Yt.value++,duration:b,jobTypeId:c.id,payouts:A}}function fn(){const c=tt.filter(P=>ue.value.includes(P.id)&&Qe(P,ce.value)&&P.category!=="onetime");if(c.length===0)return null;if(Ee.value<=1){if(Ee.value===0){const L=tt.find(F=>F.id==="game1")||c[0];return Bn(L,4)}const P=c[0];return Bn(P,4)}let b;if(ue.value.length>=3){const P=ue.value[ue.value.length-2],L=c.find(W=>W.id===P&&W.category!=="onetime");!b&&L&&Math.random()<.1&&(b=L);const F=ue.value[ue.value.length-1],U=c.find(W=>W.id===F&&W.category!=="onetime");!b&&U&&Math.random()<.2&&(b=U)}const A=ce.value>=3&&ue.value.includes("webscrape");if(!b&&A&&c.some(P=>P.id==="webscrape")&&Math.random()<.08&&(b=c.find(P=>P.id==="webscrape")),!b&&Math.random()<.15){const P=c.map(L=>{const F=L.payout.find(U=>U.type==="money");return F?{job:L,amount:dn(F)}:null}).filter(Boolean);P.length&&(b=P.reduce((F,U)=>U.amount>F.amount?U:F,P[0]).job)}b||(b=c[Math.floor(Math.random()*c.length)]);let x=b.duration?b.duration.min+Math.floor(Math.random()*(b.duration.max-b.duration.min+1)):20;x=Math.floor(x/(Ze.value/100));const I=b.payout.map(P=>{const L=Rn(P.type),F=On(P,!L);return{type:P.type,amount:F}});return{id:Yt.value++,duration:x,jobTypeId:b.id,payouts:I}}const Un=ui(()=>({display:{title:()=>`Buy  ${wn[ce.value]}`,description:()=>u(se,null,[ne.money,N(" $"),Pe(d.pow(ae.GPU_COST_MULTIPLIER,M.value-ae.STARTING_GPUS).times(ae.GPU_BASE_COST))])},canClick:()=>d.gte(r.value,d.pow(ae.GPU_COST_MULTIPLIER,M.value-ae.STARTING_GPUS).times(ae.GPU_BASE_COST)),onClick(){r.value=d.sub(r.value,d.pow(ae.GPU_COST_MULTIPLIER,M.value-ae.STARTING_GPUS).times(ae.GPU_BASE_COST)),M.value=M.value+1},style:{minHeight:"100px",width:"160px",minWidth:"140px",maxWidth:"180px",flex:"1 1 160px"}}));function fa(c){if(c.type==="job"){const b=E(c.value);return`Requires ${(b==null?void 0:b.displayName)||c.value}`}else{if(c.type==="data")return`Requires ${c.value} data`;if(c.type==="compute")return`Requires ${t(c.value,ce.value,!0)}`;if(c.type==="iq")return`Requires ${c.value} IQ ${ne.iq}`;if(c.type==="autonomy")return`Requires ${c.value} ${ne.autonomy}`;if(c.type==="generality")return`Requires ${c.value} ${ne.generality}`;if(c.type==="wonder")return`Requires ${c.value} Wonder`;if(c.type==="completedJob"){const b=E(c.value);return`Requires Complete ${(b==null?void 0:b.displayName)||c.value}`}}return""}const Vn=tt.filter(c=>c.unlockCost.length>0).map(c=>{var P,L;const b=((P=c.unlockCost.find(F=>F.type==="money"))==null?void 0:P.value)||0,A=((L=c.unlockCost.find(F=>F.type==="data"))==null?void 0:L.value)||0,x=c.prereq.filter(F=>F.type!=="money"&&F.display_prereq!==!1),I=c.payout.filter(F=>["iq","autonomy","generality","wonder"].includes(F.type));return ui(()=>({display:{title:c.category==="onetime"||ce.value>=3?c.displayName:`Unlock ${c.displayName}`,description:()=>{const F=b===0||d.gte(r.value,b),U=A===0||d.gte(h.value,A);return u(se,null,[b>0&&u("span",{style:F?void 0:"color: #2E3440; font-size: 11px;"},[ne.money,N(" $"),b]),b>0&&A>0&&" + ",A>0&&u("span",{style:U?void 0:"color: #2E3440; font-size: 11px;"},[ne.data,N(" "),A,N(" data")]),u("br",null,null),x.length>0&&u(se,null,[x.map((W,te)=>{const ke=we(W),Ke=fa(W);return u("span",{key:te},[u("span",{style:ke?void 0:"color: #2E3440; font-size: 13px;"},[Ke]),te<x.length-1&&u("br",null,null)])}),u("br",null,null)]),u("i",null,[c.description]),u("br",null,null),I.length>0&&u(se,null,[I.map((W,te)=>u("span",{key:te,style:"font-size:18px;"},["+",W.min," ",W.type==="iq"&&"IQ ",W.type==="wonder"&&"Wonder ",u("span",{style:"font-size:28px;"},[W.type==="iq"&&ne.iq,W.type==="autonomy"&&ne.autonomy,W.type==="generality"&&ne.generality,W.type==="wonder"&&ne.wonder]),te<I.length-1&&u("br",null,null)]))])])}},canClick:()=>{const F=b===0||d.gte(r.value,b),U=A===0||d.gte(h.value,A),W=!ue.value.includes(c.id),te=_e(c);return F&&U&&W&&te},onClick(){if(!_e(c))return;const F=b===0||d.gte(r.value,b),U=A===0||d.gte(h.value,A);!F||!U||ue.value.includes(c.id)||(b>0&&(r.value=d.sub(r.value,b)),A>0&&(h.value=d.sub(h.value,A)),ue.value.push(c.id),G())},visibility:()=>{const F=pt.value.includes(c.id),U=ct(c);return!ue.value.includes(c.id)&&(F||U)&&Qe(c,ce.value)},style:{minHeight:"100px",width:"160px",minWidth:"140px",maxWidth:"180px",flex:"1 1 160px"}}))});be.on("update",c=>{var I,P;const b=B.chapter1;if(b&&!((I=b.complete)!=null&&I.value))return;const A=Array.isArray(_.tabs)?_.tabs[0]:null,x=typeof A=="string"&&A.startsWith("ending_");if(!(_.gameOver||x)){if(gt.value!==null){if(Ie.value+=c,_.frameworkChoice==="oppose"){if(Ie.value>=it.NEWS_MC_AGI_START){const L=pi.mc_agi_begin;zn("mc_agi_begin",L.message,L.autoDismissAfter)}Ie.value>=it.GAME_OVER_TIME&&(_.gameOver=!0,_.tabs=["ending_lose_agi"],G())}_.frameworkChoice==="support"&&sl.forEach(({time:L,newsId:F})=>{if(Ie.value>=L){const U=pi[F];zn(F,U.message,U.autoDismissAfter)}})}for(let L=Re.value.length-1;L>=0;L--){const F=Re.value[L];F.autoDismissAfter&&Ie.value>=F.createdAt+F.autoDismissAfter&&Wn(F.id)}for(let L=xe.value.length-1;L>=0;L--)if(xe.value[L].timeRemaining-=c,xe.value[L].timeRemaining<=0){const F=xe.value[L];for(const te of F.payouts)if(te.type==="money")r.value=d.add(r.value,te.amount);else if(te.type==="data")h.value=d.add(h.value,te.amount);else if(te.type==="iq")s.value+=Number(te.amount);else if(te.type==="autonomy")o.value+=Number(te.amount);else if(te.type==="generality")f.value+=Number(te.amount);else if(te.type==="wonder"){v.value+=Number(te.amount);const ke=E(F.jobTypeId);ke!=null&&ke.displayName&&(_.lastWonderName=ke.displayName)}const U=o.value+f.value+s.value;U>=ae.AGI_SUM_LOSE&&!_.gameOver&&(_.gameOver=!0,_.tabs=["ending_lose_agi_threshold"],G()),v.value>=ae.WONDER_WIN&&!_.gameOver&&(U>=ae.AGI_SUM_LOSE||(_.gameOver=!0,_.tabs=["ending_win"],G()));const W=E(F.jobTypeId);if((W==null?void 0:W.category)==="onetime"&&!De.value.includes(F.jobTypeId)&&(De.value.push(F.jobTypeId),G()),It.value.includes(F.jobTypeId)||(It.value.push(F.jobTypeId),G()),Ee.value+=1,y.value.length){const te=y.value[0],ke=te.jobsRemaining-1;if(ke<=0){const Ke=te.id;if(y.value=y.value.slice(1),!Ut()&&!_.gameOver&&v.value<ae.WONDER_WIN){const Qt=B==null?void 0:B[Ke];Qt&&!((P=Qt.complete)!=null&&P.value)&&(_.tabs=[Ke])}G()}else y.value=[{...te,jobsRemaining:ke},...y.value.slice(1)],G()}if(Ee.value===1&&pe.value.length<pn.value){const te=fn();te!==null&&pe.value.push(te)}xe.value.splice(L,1)}if([3,4].includes(ce.value)){Jt.value+=c;const L=ce.value===3?6:3;if(Jt.value>=L&&(Jt.value=0,Math.random()<.06)){const F=pe.value.find(U=>{if(ze.value[U.id])return!1;const W=E(U.jobTypeId);return(W==null?void 0:W.category)==="tool"||(W==null?void 0:W.category)==="gameplay"});F&&(ze.value[F.id]=!0)}}if(Ee.value>0&&(Ht.value+=c,Ht.value>=ae.JOB_GENERATION_INTERVAL&&(Ht.value=0,pe.value.length<pn.value))){const L=fn();L!==null&&pe.value.push(L)}Ln()}}),le(()=>Ut(),c=>{c||Ln()},{immediate:!0});function ya(c){var x,I;_.devSpeed===0&&(_.devSpeed=null);const b=E(c.jobTypeId),A=((I=(x=b==null?void 0:b.cost)==null?void 0:x.find(P=>P.type==="money"))==null?void 0:I.value)||0;A>0&&(r.value=d.sub(r.value,A)),pe.value=pe.value.filter(P=>P.id!==c.id),delete ze.value[c.id],xe.value.push({...c,timeRemaining:c.duration}),G()}function Jn(c){pe.value=pe.value.filter(b=>b.id!==c),delete ze.value[c]}function va(){const c=pe.value.filter(A=>{var x;return((x=E(A.jobTypeId))==null?void 0:x.category)==="onetime"}),b=new Set(c.map(A=>A.id));pe.value=c,ze.value=Object.fromEntries(Object.entries(ze.value).filter(([A])=>b.has(Number(A)))),G()}function yn(c){var I,P,L,F;if(c.jobTypeId!=="game1"&&!ue.value.includes(c.jobTypeId))return!1;const b=E(c.jobTypeId),A=((P=(I=b==null?void 0:b.cost)==null?void 0:I.find(U=>U.type==="compute"))==null?void 0:P.value)||0;if(Fe.value<A)return!1;const x=((F=(L=b==null?void 0:b.cost)==null?void 0:L.find(U=>U.type==="money"))==null?void 0:F.value)||0;return!(x>0&&d.lt(r.value,x))}function ba(c,b){const A=E(c.jobTypeId);let x=(A==null?void 0:A.acceptanceChance)??1;if(((A==null?void 0:A.category)==="tool"||(A==null?void 0:A.category)==="gameplay")&&o.value>=1&&f.value>=1){const F=((o.value-.5)*4+(f.value-1)*1+(s.value-2)*.5)/100,U=Math.max(.6,1-F);x=Math.min(x,U)}const I=Ge.value[c.id]||0;if(I===0){if(Math.random()<x)ya(c),delete Ge.value[c.id],delete mt.value[c.id];else{if(x<1&&(!(A!=null&&A.rejectionChain)||A.rejectionChain.length===0)){const U=hn.value%i.length;mt.value[c.id]=U,hn.value++}Ge.value[c.id]=1,b.classList.add("shake-animation"),setTimeout(()=>b.classList.remove("shake-animation"),500)}return}let P;if(A!=null&&A.rejectionChain&&A.rejectionChain.length>0)P=A.rejectionChain;else{const F=mt.value[c.id]??0;P=i[F]}const L=I+1;L>P.length+1?(Jn(c.id),delete Ge.value[c.id],delete mt.value[c.id]):(Ge.value[c.id]=L,L<=P.length&&(b.classList.add("shake-animation"),setTimeout(()=>b.classList.remove("shake-animation"),150)))}function wa(c,b){const A=Ge.value[c.id]||0;if(A===0)return(b==null?void 0:b.category)==="onetime"?"Begin":"Accept";let x;if(b!=null&&b.rejectionChain&&b.rejectionChain.length>0)x=b.rejectionChain;else{const I=mt.value[c.id]??0;x=i[I]}return A<=x.length?x[A-1]:"Decline"}return{name:n,color:e,money:r,best:m,total:p,iq:s,autonomy:o,generality:f,wonder:v,data:h,dataUnlocked:q,unlockedJobTypes:ue,introBonusApplied:ia,chapter1BonusApplied:aa,chapter2BonusApplied:ln,chapter3BonusApplied:un,qualityBonus:dt,speedBonus:Ze,currentChapter:ce,spawnedOnetimeJobs:Nt,completedOnetimeJobs:De,pendingInterludes:y,jobsRunOnce:It,everVisibleJobTypes:pt,jobCompletions:Ee,initialJobSeeded:cn,jobQueue:pe,activeDeliveries:xe,jobRejectionState:Ge,jobRejectionChainIndex:mt,nextRejectionChainIndex:hn,scoopedJobs:ze,timeSinceLastScoopRoll:Jt,chapter5CompletionTime:gt,timeSinceChapter5:Ie,activeNewsFlashes:Re,dismissedNewsIds:jt,nextJobId:Yt,timeSinceLastJob:Ht,gpusOwned:M,availableGPUs:Fe,showUnlockButtons:mn,unlockAnimationShown:$t,choiceUnlockedJobs:R,buyGPUClickable:Un,pizzaUnlockClickables:Vn,display:()=>{var b,A;const c=((A=(b=qt==null?void 0:qt.after_the_game)==null?void 0:b.pages)==null?void 0:A.flatMap(x=>x.paragraphs).filter(Boolean))??[];return _.gameOver?u("div",{style:{padding:"20px",maxWidth:"720px",margin:"0 auto",color:"#000000",background:"#fff3e0"}},[u("div",{style:{background:"#fff3e0",border:"2px solid #FFA500",borderRadius:"10px",padding:"24px",boxShadow:"0 6px 20px rgba(0,0,0,0.25)"}},[u("h1",{style:{margin:"0 0 16px",textAlign:"center",color:"#e53935",letterSpacing:"1px"}},[N("GAME OVER")]),u("div",{style:{marginBottom:"16px",display:"flex",flexWrap:"wrap",gap:"12px",alignItems:"center",justifyContent:"center"}},[u("button",{onClick:Bt,style:{display:"inline-flex",alignItems:"center",gap:"8px",background:"#4CAF50",color:"#EEEEEE",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"16px",padding:"8px 14px"}},[u("img",{src:"/ach/ach_gen.png",alt:"Achievements",style:"width: 28px; height: 28px; opacity:1"},null),N("Achievements")]),u("button",{onClick:()=>{confirm("Are you sure you want to reset the game? This will delete ALL progress and cannot be undone!")&&_n()},style:{background:"#4CAF50",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"18px",color:"white",padding:"12px 20px",fontWeight:"bold",width:"180px"}},[N("PLAY AGAIN")])]),u("div",{style:{display:"flex",flexDirection:"column",gap:"12px",fontSize:"18px",lineHeight:1.6,color:"#000000",textAlign:"left"}},[c.length>0?c.map((x,I)=>u("p",{key:I,style:{margin:"0"},innerHTML:x.replace(/\n+/g," ")},null)):u("p",{style:{margin:0}},[N("Put the game over text here")])]),u("div",{style:{marginTop:"24px",display:"flex",flexDirection:"column",gap:"12px",alignItems:"center"}},[u("button",{onClick:Bt,style:{display:"inline-flex",alignItems:"center",gap:"8px",background:"#4CAF50",color:"#EEEEEE",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"16px",padding:"8px 14px"}},[u("img",{src:"/ach/ach_gen.png",alt:"Achievements",style:"width: 28px; height: 28px; opacity:1"},null),N("Achievements")]),u("button",{onClick:()=>{confirm("Are you sure you want to reset the game? This will delete ALL progress and cannot be undone!")&&_n()},style:{background:"#4CAF50",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"18px",color:"white",padding:"12px 20px",fontWeight:"bold",width:"180px"}},[N("PLAY AGAIN")])])]),u(di,{ref:a,"is-dev":mi},null)]):u("div",{style:"padding: 0 5px;"},[u("style",null,[`
                    @keyframes shake {
                        0%, 100% { transform: translateX(0); }
                        25% { transform: translateX(-5px); }
                        75% { transform: translateX(5px); }
                    }
                    .shake-animation {
                        animation: shake 0.2s ease-in-out 5;
                    }
                    @keyframes unlockGrowIn {
                        from { transform: scale(0.8); opacity: 0; }
                        to { transform: scale(1); opacity: 1; }
                    }
                `]),u("div",{id:"sticky-wallet",style:"position: sticky; top: 0; z-index: 10;"},[u("div",{style:"padding: 8px 12px; border: 1px solid #FFA500; border-radius: 8px; background: #fff3e0; width: 90%;"},[u("div",{style:"display: flex; flex-wrap: wrap; gap: 10px;"},[u("span",{style:"font-size: 18px; font-weight: bold; white-space: nowrap;"},[ne.money," ",Pe(r.value)]),d.gt(h.value,0)&&u("span",{style:"font-size: 18px; font-weight: bold; white-space: nowrap;"},[ne.data," ",Pe(h.value)]),s.value>0&&u("span",{style:"font-size: 18px; font-weight: bold; white-space: nowrap;"},[ne.iq," ",s.value]),o.value>0&&u("span",{style:"font-size: 18px; font-weight: bold; white-space: nowrap;"},[ne.autonomy," ",o.value]),f.value>0&&u("span",{style:"font-size: 18px; font-weight: bold; white-space: nowrap;"},[ne.generality," ",f.value]),v.value>0&&u("span",{style:"font-size: 18px; font-weight: bold; white-space: nowrap;"},[ne.wonder," ",v.value])]),u("div",{style:"font-size: 14px; margin-top: 4px; letter-spacing: 0.1em;"},["▪".repeat(Math.max(0,Fe.value)),"▫".repeat(Math.max(0,M.value-Fe.value))])])]),u("div",{style:"font-size: 16px; color: rgb(230, 218, 199);"},[N("Chapter "),ce.value]),mn.value&&u(se,null,[u("div",{id:"stats-panel",style:"margin: 8px 0; padding: 12px; border: 2px solid #FFA500; border-radius: 10px; background: #fff3e0;"},[_.frameworkChoice!=="not_yet"&&u("div",{style:`font-size: 16px; font-weight: bold; color: ${_.frameworkChoice==="support"?"#4CAF50":"#FF9800"};`},[u("strong",null,[N("Framework:")]),N(" "),_.frameworkChoice==="support"?"Passed":"Rejected"]),u("div",{style:"font-size: 16px;"},[u("strong",null,[ne.money,N(" Money:")]),N(" "),Pe(r.value)]),u("div",{style:"font-size: 14px;"},[u("strong",null,[N("✅ Jobs completed:")]),N(" "),Ee.value]),q.value&&u("div",{style:"font-size: 16px;"},[u("strong",null,[ne.data,N(" Data:")]),N(" "),Pe(h.value)]),o.value>0&&u("div",{style:"font-size: 16px;"},[u("strong",null,[ne.autonomy,N(" Autonomy:")]),N(" "),o.value]),f.value>0&&u("div",{style:"font-size: 16px;"},[u("strong",null,[ne.generality,N(" Generality:")]),N(" "),f.value]),s.value>0&&u("div",{style:"font-size: 16px;"},[u("strong",null,[ne.iq,N(" IQ:")]),N(" "),s.value]),o.value>=1&&f.value>=1&&s.value>=1&&(()=>{const x=o.value+f.value+s.value,I=ae.AGI_SUM_LOSE-x;let P="",L="";return I===1?(P=" ⚠️ DANGER",L="font-weight: bold; color: #d32f2f;"):I===2?(P=" ⚠ Warning",L="font-weight: bold; color: #ff9800;"):I<=4&&(P=" Caution",L="color: #ffa726; opacity: 0.8;"),u("div",{style:"font-size: 14px; color: rgb(244, 67, 54);"},[N("A+G+I : "),x,P&&u("span",{style:L},[P])])})(),(ce.value>=3||v.value>0)&&u("div",{style:"font-size: 16px;"},[u("strong",null,[ne.wonder,N(" Wonders:")]),N(" "),v.value,N("/5")]),u("div",{style:"font-size: 14px;"},[u("strong",null,[wn[ce.value]+"s",N(":")]),N(" "),Fe.value,N(" / "),M.value,N(" available")]),u("div",{style:"font-size: 14px; letter-spacing: 0.1em;"},["▪".repeat(Math.max(0,Fe.value)),"▫".repeat(Math.max(0,M.value-Fe.value))]),dt.value!==100&&u("div",{style:"font-size: 14px; color: #4CAF50;"},[u("strong",null,[N("Quality Bonus:")]),N(" "),parseFloat((dt.value/100).toFixed(2)),N("x earnings")]),Ze.value!==100&&u("div",{style:"font-size: 14px; color: #2196F3;"},[u("strong",null,[N("Speed Bonus:")]),N(" "),parseFloat((Ze.value/100).toFixed(2)),N("x")])]),u("div",{style:"margin: 15px 0;"},[u("div",{style:`display: flex; gap: 8px; flex-wrap: wrap; justify-content: center;${$t.value?"":" animation: unlockGrowIn 2s ease;"}`},[ye(Un),Vn.map(x=>ye(x))])])]),Re.value.length>0&&u("div",{style:"margin: 15px 0;"},[Re.value.map(x=>u("div",{key:x.id,style:"margin: 8px 0; padding: 12px; border: 2px solid #d32f2f; border-radius: 10px; background: #ffebee; display: flex; justify-content: space-between; align-items: center;"},[u("div",{style:"font-size: 16px; font-weight: bold; color: #c62828;"},[x.message]),u("button",{onClick:()=>Wn(x.id),style:{background:"#d32f2f",color:"white",padding:"6px 12px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",marginLeft:"15px"}},[N("Dismiss")])]))]),$n.value&&u("div",{style:"margin: 15px 0;"},[u("div",{style:"margin: 8px 0; padding: 12px; border: 2px solid #d32f2f; border-radius: 10px; background: #ffebee;"},[u("div",{style:"font-size: 18px; font-weight: bold; color: #c62828; text-align: center;"},[N("⏰ Countdown to MegaCorp AGI: "),ha.value,N("s")])])]),ce.value>=2&&u("button",{onClick:Bt,style:{display:"inline-flex",alignItems:"center",gap:"6px",background:ce.value>=2?"#4CAF50":"var(--raised-background)",color:ce.value>=2?"#EEEEEE":"#ccc",border:ce.value>=2?"none":"2px solid var(--outline)",borderRadius:"4px",cursor:"pointer",fontSize:"16px",padding:"4px 10px"}},[u("img",{src:"/ach/ach_gen.png",alt:"Achievements",style:"width: 35px; height: 35px; opacity:1"},null),N("Achievements")]),u("div",{style:"margin: 15px 0; padding: 12px; border: 2px solid #4CAF50; border-radius: 10px; background: #e8f5e9;"},[u("h3",null,[N("Available Jobs")]),ma.value&&u("div",{style:"margin-bottom: 10px;"},[u("button",{onClick:va,style:{background:"#4CAF50",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px"}},[N("Clear Jobs")])]),pe.value.length===0?oa.value?u("p",{style:"font-style: italic;"},[N("No new jobs available yet.")]):u("div",{style:"padding: 10px; background: #fff3cd; border: 1px solid #ffc107; border-radius: 5px;"},[u("p",{style:"font-weight: bold; color: #856404; margin: 0 0 8px 0;"},[N("⚠️ No job types unlocked for this chapter!")]),u("p",{style:"color: #856404; margin: 0; font-size: 14px;"},[N("Unlock a job type above to start receiving jobs.")])]):pe.value.map(x=>{var jn,Yn,Hn,Qn,Zn;const I=E(x.jobTypeId),P=(()=>{if((I==null?void 0:I.category)!=="onetime")return null;const me=o.value+f.value+s.value;let Ue=0;if(x.payouts.forEach(Xn=>{["iq","autonomy","generality"].includes(Xn.type)&&(Ue+=Number(Xn.amount))}),Ue===0)return null;const Kn=me+Ue;return Kn>=ae.AGI_SUM_LOSE?"danger":Kn>=ae.AGI_SUM_LOSE-2?"warning":null})(),L=((Yn=(jn=I==null?void 0:I.cost)==null?void 0:jn.find(me=>me.type==="compute"))==null?void 0:Yn.value)||0,F=((Qn=(Hn=I==null?void 0:I.cost)==null?void 0:Hn.find(me=>me.type==="money"))==null?void 0:Qn.value)||0,U=((Zn=x.payouts[0])==null?void 0:Zn.type)||"money",W=U==="money"?"#ffffff":U==="data"?"#f3f3ff":"#f3f3f3",ke=(Ge.value[x.id]||0)>0,Ke=wa(x,I),Qt=ze.value[x.id]||!1;return u("div",{key:x.id,style:`margin: 10px 0; padding: 8px; background: ${W}; border-radius: 5px; border: 1px solid #ddd;`},[u("div",{style:"font-size: 14px;"},[N("+"),x.payouts.map((me,Ue)=>u("span",{key:Ue},[Ue>0&&" +",me.type==="money"?`${ne.money} $`:"",me.type==="data"?`${ne.data} `:"",me.type==="iq"?`${ne.iq} `:"",me.type==="autonomy"?`${ne.autonomy} `:"",me.type==="generality"?`${ne.generality} `:"",me.type==="wonder"?`${ne.wonder} `:"",Pe(me.amount),me.type==="data"?" data":"",me.type==="iq"?" IQ":"",me.type==="autonomy"?" Autonomy":"",me.type==="generality"?" Generality":"",me.type==="wonder"?" Wonder":""]))]),u("div",{style:"font-size: 14px;"},[u("div",{style:"display: inline-flex; flex-wrap: wrap; max-width: 50px; line-height: 1; gap: 0px; vertical-align: middle;"},[Array.from({length:L},(me,Ue)=>u("span",{key:Ue,style:"margin:0px;"},[N("▪")]))]),N(" for "),x.duration,N(" seconds")]),F>0&&u("div",{style:`${d.lt(r.value,F)?"font-size: 16px; color: #d32f2f;":"font-size: 14px;"}`},[u("strong",null,[N("Cost:")]),N(" "),ne.money,N(" -$"),F]),u("div",{style:"margin-top: 8px; display: flex; gap: 5px;"},[Ee.value>0&&(I==null?void 0:I.category)!=="onetime"&&u("button",{onClick:()=>Jn(x.id),style:{background:"#f44336",color:"white",padding:"6px 12px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px"}},[N("Decline")]),u("div",{style:"font-size: 14px;"},[I==null?void 0:I.displayName]),Qt?u("div",{style:"font-size: 13px; color: #d32f2f; font-weight: bold; padding: 6px 12px;"},[N("Job Scooped by MegaCorp")]):u("div",{style:"display: flex; align-items: center; gap: 6px;"},[P&&u("span",{style:{fontSize:"15px",color:"#d32f2f",fontWeight:P==="danger"?"bold":"normal"}},[P==="danger"?"DANGER!":"Be Careful..."]),u("button",{onClick:me=>me.currentTarget&&ba(x,me.currentTarget),disabled:!yn(x)&&!ke,style:{background:!yn(x)&&!ke?"#ccc":Ke==="Decline"?"#f44336":"#4CAF50",color:"white",padding:"6px 12px",border:"none",borderRadius:"4px",cursor:yn(x)||ke?"pointer":"not-allowed",fontSize:"13px"}},[Ke])])]),x.jobTypeId!=="game1"&&!ue.value.includes(x.jobTypeId)&&u("div",{style:"margin-top: 5px; color: #d32f2f; font-weight: bold; font-size: 12px;"},[N("⚠ Need "),I==null?void 0:I.displayName,N("!")]),Fe.value<L&&ue.value.includes(x.jobTypeId)&&u("div",{style:"margin-top: 5px; color: #d32f2f; font-weight: bold; font-size: 12px;"},[N("⚠ Need "),t(L,ce.value,!0),N("! "),u("span",{style:"color: black;"},["▪".repeat(Math.max(0,Fe.value)),"▫".repeat(Math.max(0,L-Fe.value))])])])})]),u("div",{style:"margin: 15px 0; padding: 12px; border: 2px solid #4CAF50; border-radius: 10px; background: #e8f5e9;"},[u("h3",null,[N("Active Jobs")]),xe.value.length===0?u("p",{style:"font-style: italic;"},[N("No active jobs")]):xe.value.map(x=>{var F,U;const I=E(x.jobTypeId),P=Math.max(0,Math.min(1,x.timeRemaining/x.duration)),L=(I==null?void 0:I.category)==="onetime"?I!=null&&I.is_wonder?"RESEARCHING":"TRAINING":" ";return u("div",{key:x.id,style:"margin: 3px 0; padding: 2px; background: white; border-radius: 5px; border: 1px solid #ddd;"},[u("div",{style:"font-size: 14px;"},[L,N(" "),I==null?void 0:I.displayName]),u("div",{style:"color: #2e7d32; font-size: 14px;"},[x.payouts.map((W,te)=>u("span",{key:te},[te>0&&" +",W.type==="money"?`${ne.money} $`:"",W.type==="data"?`${ne.data} `:"",W.type==="iq"?`${ne.iq} `:"",W.type==="autonomy"?`${ne.autonomy} `:"",W.type==="generality"?`${ne.generality} `:"",W.type==="wonder"?`${ne.wonder} `:"",Pe(W.amount),W.type==="data"?" data":"",W.type==="iq"?" IQ":"",W.type==="autonomy"?" Autonomy":"",W.type==="generality"?" Generality":"",W.type==="wonder"?" Wonder":""])),N("   "),"▪".repeat(Math.max(0,((U=(F=I==null?void 0:I.cost)==null?void 0:F.find(W=>W.type==="compute"))==null?void 0:U.value)||0)),N(" "),Math.ceil(x.timeRemaining),N("s")]),u("div",{style:"margin-top: 6px; width: 60%; height: 4px; background: white; border-radius: 2px; overflow: hidden;"},[u("div",{style:{width:`${P*100}%`,height:"100%",background:"#61C6F3",transition:"width 0.1s linear"}},null)])])})]),u("div",{style:"font-size: 14px;"},[u("strong",null,[N("Researched:")]),N(" "),ue.value.map(x=>{var I;return((I=E(x))==null?void 0:I.displayName)||x}).join(", ")]),u("div",{style:"font-size: 20px; color: rgb(230, 218, 199); display: flex; gap: 10px; align-items: center;"},[u("button",{onClick:()=>window.open("https://forms.gle/vRxuZMLrkBwgkqY49","_blank"),style:{display:"inline-flex",alignItems:"center",gap:"6px",background:"var(--raised-background)",border:"2px solid var(--outline)",borderRadius:"4px",cursor:"pointer",fontSize:"16px",color:"#ccc",padding:"4px 10px"}},[N("Feedback")]),u("button",{onClick:Bt,style:{display:"inline-flex",alignItems:"center",gap:"6px",background:"var(--raised-background)",color:"#ccc",border:ce.value>=2?"none":"2px solid var(--outline)",borderRadius:"4px",cursor:"pointer",fontSize:"16px",padding:"4px 10px"}},[u("img",{src:"/ach/ach_gen.png",alt:"Achievements",style:"width: 35px; height: 35px; opacity:1"},null),N("Achievements")]),u("button",{onClick:()=>{var x;return(x=a.value)==null?void 0:x.open()},style:{background:"var(--raised-background)",border:"2px solid var(--outline)",borderRadius:"4px",cursor:"pointer",fontSize:"20px",color:"var(--foreground)",padding:"4px 8px"},title:"Game Options"},[N("⚙️")])]),u("div",{style:"margin: 15px 0; padding: 12px; border: 2px solid #9C27B0; border-radius: 10px; background: #f3e5f5;"},[u("h4",{style:"margin: 0 0 10px 0; color: #9C27B0;"},[N("Dev Tools")]),u("div",{style:"display: flex; gap: 10px; flex-wrap: wrap;"},[u("button",{onClick:()=>{if(o.value=1,ce.value=4,_.frameworkChoice="not_yet",_.gameOver=!1,gt.value=null,Ie.value=0,Re.value=[],jt.value=[],B.chapter5){const x=B.chapter5;x.complete&&(x.complete.value=!1),x.currentPage&&(x.currentPage.value=0),x.playerChoice&&(x.playerChoice.value=null)}_.tabs=["main"],G()},style:{background:"#9C27B0",color:"white",padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"}},[N("Dev to Chap 4")]),u("button",{onClick:()=>{var x;(x=B.achievements)!=null&&x.achievements&&(Object.values(B.achievements.achievements).forEach(I=>{I!=null&&I.earned&&(I.earned.value=!1)}),G())},style:{background:"#6a1b9a",color:"white",padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"}},[N("Reset Achievements")]),u("button",{onClick:()=>{St.forEach(I=>{const P=B==null?void 0:B[I];P!=null&&P.complete&&(P.complete.value=!1)}),y.value=[],G()},style:{background:"#8e24aa",color:"white",padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"}},[N("Reset AGI Warning")]),u("button",{onClick:()=>{M.value=Math.max(0,M.value-1),G()},style:{background:"#d32f2f",color:"white",padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"}},[N("Minus 1 Compute")]),u("button",{onClick:()=>{s.value+=1,G()},style:{background:"#1976d2",color:"white",padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"}},[N("+1 IQ")]),u("button",{onClick:()=>{s.value=Math.max(0,s.value-1),G()},style:{background:"#1565c0",color:"white",padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"}},[N("-1 IQ")]),u("button",{onClick:()=>{o.value+=1,G()},style:{background:"#00796b",color:"white",padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"}},[N("+1 Auto")]),u("button",{onClick:()=>{o.value=Math.max(0,o.value-1),G()},style:{background:"#00695c",color:"white",padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"}},[N("-1 Auto")]),u("button",{onClick:()=>{f.value+=1,G()},style:{background:"#455a64",color:"white",padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"}},[N("+1 Gen")]),u("button",{onClick:()=>{f.value=Math.max(0,f.value-1),G()},style:{background:"#37474f",color:"white",padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"}},[N("-1 Gen")]),u("button",{onClick:()=>{v.value+=1,G()},style:{background:"#ff9800",color:"white",padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"}},[N("+1 Wonder")]),u("button",{onClick:()=>{r.value=d.add(r.value,1e3),G()},style:{background:"#4CAF50",color:"white",padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"}},[N("+$1K")]),u("button",{onClick:()=>{h.value=d.add(h.value,500),G()},style:{background:"#03A9F4",color:"white",padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"}},[N("+500 Data")]),u("button",{onClick:()=>{const x=["trun_auto1","trun_auto2","trun_auto3","trun_auto4","trun_auto5"];Nt.value=Nt.value.filter(I=>!x.includes(I)),De.value=De.value.filter(I=>!x.includes(I)),ue.value=ue.value.filter(I=>!x.includes(I)),pt.value=pt.value.filter(I=>!x.includes(I)),pe.value=pe.value.filter(I=>!x.includes(I.jobTypeId)),xe.value=xe.value.filter(I=>!x.includes(I.jobTypeId)),G()},style:{background:"#9C27B0",color:"white",padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"}},[N("Reset Auto Trainings")])])]),u(di,{ref:a,"is-dev":mi},null)])},treeNode:Wi(()=>({display:n,color:e}))}}),gi={intro:{headerColor:"#88C0D0",headerSize:"40px",borderColor:"#3B4252",background:"#2E3440",buttonColor:"#8FBCBB",textAlign:"center",textColor:"#E5E9F0"},default:{headerColor:"#FFA500",headerSize:"32px",borderColor:"#FFA500",background:"#fff3e0",buttonColor:"#2196F3",textAlign:"left",textColor:"#000000"}};function dl(n,e){return function(){const t=e.title,i=Y(!1),a=Y(null,!1),r=V(0),m=e.pages;function p(v){var R;a.value=v;const y=m[r.value],h=(R=y==null?void 0:y.choices)==null?void 0:R.find(H=>H.id===v);h!=null&&h.unlockJobId&&be.emit("storyChoice",{chapterId:n,choiceId:v,unlockJobId:h.unlockJobId}),n==="chapter5"&&(v==="support"||v==="oppose")&&(_.frameworkChoice=v),G();const q=r.value;for(let H=q+1;H<m.length;H++)if(m[H].choiceType===v){r.value=H;return}r.value++}function s(){i.value=!0,_.tabs=["main"],G()}function o(){r.value++,r.value>=m.length&&s()}return{name:t,display:()=>{var M;const v=m[r.value];if(!v)return s(),null;const y=v.choiceType!==void 0,h=!y||v.choiceType===a.value;if(y&&!h)return s(),null;const q=v.pageType==="intro"?gi.intro:gi.default;if(v.isChoice){const E=v.title!==void 0?v.title:e.title;return u("div",null,[u("h2",{style:`color: ${q.headerColor}; font-size: ${q.headerSize}; margin-bottom: 30px;`},[E]),u("div",{style:`margin: 20px 0; padding: 30px; border: 2px solid ${q.borderColor}; border-radius: 10px; background: ${q.background}; color: ${q.textColor};`},[hi(v,q.textAlign,q.textColor)]),u("div",{style:"margin: 30px 0; display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;"},[(M=v.choices)==null?void 0:M.map(z=>{const we=z.color==="#4CAF50"?"#f1f8f4":"#fff8f0",_e=z.color,ct=z.color==="#4CAF50"?"#2e7d32":"#e65100";return u("div",{key:z.id,style:`flex: 1; max-width: 400px; padding: 20px; border: 2px solid ${_e}; border-radius: 10px; background: ${we};`},[u("h3",{style:`color: ${ct}; margin-bottom: 15px;`},[z.title]),u("p",{style:"font-size: 16px; margin-bottom: 15px; line-height: 1.5;"},[z.description]),u("p",{style:`font-size: 14px; margin-bottom: 15px; color: ${z.color}; font-weight: bold;`},[N("Effect: "),z.effect]),u("button",{onClick:()=>p(z.id),style:{background:z.color,color:"white",padding:"12px 30px",fontSize:"18px",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",width:"100%"}},[z.button])])})])])}let R=v.buttonText||"Continue";v.buttonText||(y?n==="chapter5"&&y?R=v.choiceType==="support"?"Back to work":"We must win the race":R="Continue Your Journey":r.value===m.length-1&&(R=n==="chapter1"?"Let's get to work!":n==="chapter4"?"Continue to Main":"Continue Your Journey"));const H=v.title!==void 0?v.title:e.title;return u("div",null,[u("h2",{style:`color: ${q.headerColor}; font-size: ${q.headerSize}; margin-bottom: 30px;`},[H]),u("div",{style:`margin: 20px 0; padding: 30px; border: 2px solid ${q.borderColor}; border-radius: 10px; background: ${q.background}; color: ${q.textColor};`},[hi(v,q.textAlign,q.textColor)]),u("div",{style:"margin: 30px 0; display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;"},[u("button",{onClick:y?s:o,style:{background:y?"#4CAF50":q.buttonColor,color:"white",padding:"15px 40px",fontSize:"20px",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold"}},[R])])])},complete:i,playerChoice:a,currentPage:r}}}function hi(n,e="left",t="#000000"){const i=_.lastWonderName??"";return u("div",{style:`text-align: ${e}; max-width: 600px; margin: 40px auto; line-height: 1.6;`},[n.paragraphs.map((a,r)=>{const m=a.replace(/{{lastWonderName}}/g,i),p=m.startsWith("[left]"),s=p?m.substring(6):m;if(s.startsWith("<blockquote>")){const o=s.substring(12,s.length-13);return u("p",{key:r,style:"font-size: 16px; margin-bottom: 20px; padding: 20px; background: #f5f5f5; border-left: 4px solid #d32f2f; font-style: italic;",innerHTML:o.replace(/\n\n/g,"<br/><br/>")},null)}if(s.startsWith("**")&&s.endsWith("**")){const o=s.substring(2,s.length-2);return u("p",{key:r,style:`font-size: 20px; margin-bottom: 20px; font-weight: bold; color: ${t}; text-align: center;`},[o])}if(s.startsWith("*")&&s.endsWith("*")){const o=s.substring(1,s.length-1);return u("p",{key:r,style:"font-size: 18px; margin-bottom: 20px; font-style: italic;"},[o])}return u("p",{key:r,style:`font-size: 18px; margin-bottom: 20px; text-align: ${p?"left":e};`,innerHTML:s.replace(/<br\/>/g,"<br/>")},null)})])}const Pn=Object.keys(qt),ji=Pn.filter(n=>n.startsWith("chapter")).sort((n,e)=>n.localeCompare(e,void 0,{numeric:!0})),Yi=Pn.filter(n=>n.startsWith("interlude")).sort(),Hi=Pn.filter(n=>n.startsWith("ending_")).sort(),sn={};for(const n of[...ji,...Yi,...Hi]){const e=qt[n];e?sn[n]=Tn(n,dl(n,e)):console.warn(`Story content not found for ${n} in story.md`)}const Qi=ji.map(n=>sn[n]).filter(Boolean),Zi=Yi.map(n=>sn[n]).filter(Boolean),Ki=Hi.map(n=>sn[n]).filter(Boolean);[...Qi,...Zi,...Ki];const pl=n=>{const e=Qi,t=Zi,i=Ki;return[...e.length?[e[0]]:[],cl,il,...e.length?e.slice(1):[],...t,...i]},Pt=$(()=>!1);const Ne=`${ee.id}-0`;function ml(){const n=localStorage.getItem(Ne),e=new Set;if(Q.active&&e.add(Q.active),Q.saves.forEach(t=>e.add(t)),Object.keys(localStorage).filter(t=>t.startsWith(`${ee.id}-`)).forEach(t=>e.add(t)),!n)for(const t of e){const i=localStorage.getItem(t);if(i!=null){localStorage.setItem(Ne,i);break}}return Q.active=Ne,Q.saves=[Ne],Ne}const Xi=V(!1);function We(n={}){return Object.assign({id:`${ee.id}-0`,name:"Default Save",tabs:ee.initialTabs.slice(),time:Date.now(),autosave:!0,offlineProd:!0,offlineTime:0,timePlayed:0,keepGoing:!1,gameOver:!1,modID:ee.id,modVersion:ee.versionNumber,layers:{}},n)}function G(n){const e=n??_;if(Xi.value||Ct.value||e.modID!==ee.id||e.time==null||e.time<0)return"";e.id=Ne,Q.active=Ne,Q.saves=[Ne];const t=He.compressToUTF16(wt(e));return localStorage.setItem(Ne,t),t}async function gl(){vl(),ml();try{let n=localStorage.getItem(Q.active);if(n==null){await $e(bt());return}if(n=Ye(n),n==null)throw"Unable to determine save encoding";const e=JSON.parse(n);if(e.modID!==ee.id){await $e(bt());return}e.id=Q.active,await $e(e)}catch(n){console.error(`Failed to load save. Falling back to new save.
`,n),await $e(bt())}}function Ye(n){if(n[0]!=="{")if(n[0]==="e")n=decodeURIComponent(escape(atob(n)));else if(n[0]==="ᯡ")n=He.decompressFromUTF16(n);else return console.warn("Unable to determine preset encoding",n),null;return n}function bt(){const n=Dt(),e=We({id:n});return G(e),Q.active=n,Q.saves=[n],e}function Dt(){return Ne}const Ct=V(!1);async function $e(n){Ct.value=!0;try{n.id=Ne,Q.active=Ne,Q.saves=[Ne];for(const e in B){const t=B[e];t!=null&&Es(t)}pl(n).forEach(e=>Ms(e,n)),n=We(n),n.offlineProd&&n.time!=null&&n.time&&n.devSpeed!==0&&(n.offlineTime==null&&(n.offlineTime=0),n.offlineTime+=Math.min(n.offlineTime+(Date.now()-n.time)/1e3,ee.offlineLimit*3600)),n.time=Date.now(),n.modVersion!==ee.versionNumber&&(n.modVersion,n.modVersion=ee.versionNumber),Object.assign(_,n),Q.active=_.id,be.emit("onLoad")}finally{Ct.value=!1}}const qe=In({});function hl(n){if(qe[n]==null){let e=localStorage.getItem(n);if(e==null)qe[n]={error:"Save doesn't exist in localStorage",id:n};else if(e==="dW5kZWZpbmVk")qe[n]={error:"Save is undefined",id:n};else try{if(e=Ye(e),e==null)return console.warn("Unable to determine preset encoding",e),qe[n]={error:"Unable to determine preset encoding",id:n},qe[n];qe[n]={...JSON.parse(e),id:n}}catch(t){qe[n]={error:t,id:n},console.warn(`Failed to load info about save with id ${n}:
${t}
${e}`)}}return qe[n]}function fl(){Object.keys(qe).forEach(n=>delete qe[n])}function Kt(n){qe[n]=void 0}setInterval(()=>{_.autosave&&G()},1e3);window.onbeforeunload=()=>{_.autosave&&G()};window.save=G;const yl=window.hardReset=async()=>{await $e(bt())};window.deleteLowerSaves=()=>{const n=Object.values(Q.saves).indexOf(_.id)+1;Object.values(Q.saves).slice(n).forEach(e=>localStorage.removeItem(e)),Q.saves=Q.saves.slice(0,n)};const Gt=_t({active:"",saves:[],showTPS:!1,theme:An.Nordic,unthrottled:!1,alignUnits:!1,showHealthWarning:!0});le(Gt,n=>{const e=He.compressToUTF16(JSON.stringify(n));localStorage.setItem(ee.id,e)},{deep:!0});const Q=window.settings=Gt;window.hardResetSettings=()=>{const n={active:"",saves:[],showTPS:!1,theme:An.Nordic,unthrottled:!1,alignUnits:!1,showHealthWarning:!0};be.emit("loadSettings",n),Object.assign(Gt,n),yl()};function vl(){try{let n=localStorage.getItem(ee.id);if(n!=null&&n!==""){if(n=Ye(n),n==null){console.warn("Unable to determine settings encoding",n);return}const e=JSON.parse(n);typeof e=="object"&&Object.assign(Gt,e)}be.emit("loadSettings",Gt)}catch{}}const bl=_t([]);function wl(n){bl.push(n)}_t([]);const Cl=_t([]);async function _l(n={}){var t;const e={loggedIn:!1,supportsSaving:!!n.supportsSaving,supportsSaveManager:!!n.supportsSaveManager,async getSaveList(){return{}},async save(){}};return(t=n.onLoggedInChanged)==null||t.call(n,e),e}const Te=V(),Le=V([]),Wt=V([]);function xl(){var n;((n=Te.value)==null?void 0:n.loggedIn)===!0&&(Le.value.length>0||Te.value.getSaveList().then(ea).then(e=>{Wt.value=e.map(t=>t.content.id)}).catch(console.error))}_l({supportsSaving:!0,supportsSaveManager:!0,onLoggedInChanged:fi}).then(n=>{Te.value=n,fi(n)}).catch(console.error);function fi(n){n.loggedIn===!0&&(Le.value.length>0||(n.getSaveList().then(e=>{const t=ea(e);if(Wt.value=t.map(i=>i.content.id),_.timePlayed<120*1e3&&t.length>0){const i=t.reduce((a,r)=>a.content.time<r.content.time?r:a);$e(i.content)}}).catch(console.error),setInterval(xl,60*1e3)))}function ea(n){const e=new Set(Q.saves.slice()),t=new Set(new Array(11).fill(0).map((a,r)=>r)),i=Object.keys(n).map(a=>{const{label:r,content:m}=n[parseInt(a)];try{return{slot:parseInt(a),label:r,content:JSON.parse(Ye(m)??"")}}catch{return null}}).filter(a=>a!=null&&typeof a.content.id=="string"&&typeof a.content.time=="number"&&typeof a.content.timePlayed=="number").filter(a=>{var m;a.label!=null&&(a.content.name=a.label),t.delete(a.slot);const r=Q.saves.find(p=>p===a.content.id);if(r==null)Q.saves.push(a.content.id),G(We(a.content));else{e.delete(r);try{const p=JSON.parse(Ye(localStorage.getItem(r)??"")??"");if(p==null)return!1;p.id=r,p.time=p.time??0,p.timePlayed=p.timePlayed??0;const s=Math.abs(p.timePlayed-a.content.timePlayed),o=Math.abs(p.time-a.content.time);s<120*1e3&&o<120*1e3?p.time<a.content.time?(G(We(a.content)),Q.active===r&&$e(a.content)):((m=Te.value)==null||m.save(a.slot,He.compressToUTF16(wt(We(p))),p.name??a.label).catch(console.error),a.content=p):Le.value.push({id:r,cloud:a.content,local:p,slot:a.slot})}catch{return!1}}return!0});return e.forEach(a=>{var r;try{if(t.size>0){const m=localStorage.getItem(a)??"",p=JSON.parse(Ye(m)??""),s=t.values().next().value;if(s==null)return;(r=Te.value)==null||r.save(s,m,p.name).then(()=>Wt.value.push(p.id)).catch(console.error),t.delete(s)}}catch{}}),i}const kl={class:"field"},Nl={key:0,class:"field-title"},Il=["placeholder"],Sl=de({__name:"Text",props:{title:{},modelValue:{},textArea:{type:Boolean},placeholder:{},maxHeight:{},submitOnBlur:{type:Boolean}},emits:["update:modelValue","submit","cancel"],setup(n,{emit:e}){const t=n,i=e,a=()=>t.title==null?u(se,null,null):ye(t.title,o=>u("span",null,[o])),r=bi(null);Nn(()=>{var o;(o=r.value)==null||o.focus()});const m=$({get(){return w(t.modelValue)??""},set(o){i("update:modelValue",o)}});function p(){i("submit")}function s(){t.submitOnBlur!==!1?i("submit"):i("cancel")}return(o,f)=>(S(),D("form",{onSubmit:Ft(p,["prevent"])},[k("div",kl,[o.title?(S(),D("span",Nl,[u(a)])):X("",!0),o.textArea?(S(),Ce(w(Fa),{key:1,modelValue:m.value,"onUpdate:modelValue":f[0]||(f[0]=v=>m.value=v),placeholder:o.placeholder,maxHeight:o.maxHeight,onBlur:s,ref_key:"field",ref:r},null,8,["modelValue","placeholder","maxHeight"])):Sn((S(),D("input",{key:2,type:"text","onUpdate:modelValue":f[1]||(f[1]=v=>m.value=v),placeholder:o.placeholder,class:ve({fullWidth:!o.title}),onBlur:s,ref_key:"field",ref:r},null,42,Il)),[[Sa,m.value]])])],32))}}),ta=he(Sl,[["__scopeId","data-v-495d5085"]]),Al={key:0,class:"material-icons pinned"},Tl=de({__name:"Tooltip",props:{pinned:{},display:{},style:{},classes:{},direction:{},xoffset:{},yoffset:{}},setup(n){const e=n,t=V(!1),i=$(()=>{var p;return((p=e.pinned)==null?void 0:p.value)===!0||t.value}),a=()=>ye(e.display);function r(p){const s=e.pinned;p.shiftKey&&s!=null&&(s.value=!s.value,p.stopPropagation(),p.preventDefault())}const m=$(()=>{var p;return((p=e.pinned)==null?void 0:p.value)===!0&&Ii[Q.theme].showPin});return(p,s)=>(S(),D("div",{class:ve(["tooltip-container",{shown:i.value}]),onMouseenter:s[0]||(s[0]=o=>t.value=!0),onMouseleave:s[1]||(s[1]=o=>t.value=!1),onClickCapture:r},[st(p.$slots,"default",{},void 0,!0),u(vi,{name:"fade"},{default:ie(()=>[i.value?(S(),D("div",{key:0,class:ve(["tooltip",{top:w(p.direction)===w(Ae).Up,left:w(p.direction)===w(Ae).Left,right:w(p.direction)===w(Ae).Right,bottom:w(p.direction)===w(Ae).Down,...w(p.classes)}]),style:Be([{"--xoffset":w(p.xoffset)||"0px","--yoffset":w(p.yoffset)||"0px"},w(p.style)??{}])},[m.value?(S(),D("span",Al,"push_pin")):X("",!0),u(a)],6)):X("",!0)]),_:1})],34))}}),nt=he(Tl,[["__scopeId","data-v-ad4ea959"]]),Ml={key:0},El=["disabled"],ql={key:0},Pl=de({__name:"DangerButton",props:{disabled:{type:Boolean},skipConfirm:{type:Boolean}},emits:["click","confirmingChanged"],setup(n,{emit:e}){const t=n,i=e,a=V(!1);le(a,p=>{i("confirmingChanged",p)});function r(){if(t.skipConfirm){i("click");return}a.value&&i("click"),a.value=!a.value}function m(){a.value=!1}return(p,s)=>(S(),D("span",{class:ve(["container",{confirming:a.value}])},[a.value?(S(),D("span",Ml,"Are you sure?")):X("",!0),k("button",{onClick:Ft(r,["stop"]),class:"button danger",disabled:p.disabled},[a.value?(S(),D("span",ql,"Yes")):st(p.$slots,"default",{key:1},void 0,!0)],8,El),a.value?(S(),D("button",{key:1,class:"button",onClick:Ft(m,["stop"])},"No")):X("",!0)],2))}}),Dl=he(Pl,[["__scopeId","data-v-b3b9693a"]]),Fl={key:0,class:"handle material-icons"},Rl={key:1,class:"actions"},Ol={key:2,class:"actions"},Ll={key:3,class:"details"},Gl=["disabled"],zl={class:"save-version"},Wl={key:1,class:"time"},$l={key:4,class:"details"},Bl={key:5,class:"details error"},Ul=de({__name:"Save",props:{save:{},readonly:{type:Boolean}},emits:["export","open","duplicate","delete","editName"],setup(n,{emit:e}){const t=n,i=e,a=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),r=V(!1),m=V(!1),p=V("");le(r,()=>p.value=t.save.name??"");const s=$(()=>t.save!=null&&t.save.id===_.id&&!t.readonly),o=$(()=>s.value?_.time:(t.save!=null&&t.save.time)??0),f=$(()=>{var y;return!t.readonly&&((y=Te.value)==null?void 0:y.loggedIn)===!0&&Wt.value.includes(t.save.id)});function v(){i("editName",p.value),r.value=!1}return(y,h)=>(S(),D("div",{class:ve(["save",{active:s.value,readonly:y.readonly}])},[y.readonly!==!0?(S(),D("div",Fl,"drag_handle")):X("",!0),!r.value&&y.readonly!==!0?(S(),D("div",Rl,[y.save.error==null&&!m.value?(S(),Ce(ki,{key:0,onClick:h[0]||(h[0]=q=>i("export")),class:"button",left:""},{default:ie(()=>[u(nt,{display:"Export",direction:w(Ae).Left,class:"info"},{default:ie(()=>h[8]||(h[8]=[k("span",{class:"material-icons"},"content_paste",-1)])),_:1},8,["direction"])]),_:1})):X("",!0),y.save.error==null&&!m.value?(S(),D("button",{key:1,onClick:h[1]||(h[1]=q=>i("duplicate")),class:"button"},[u(nt,{display:"Duplicate",direction:w(Ae).Left,class:"info"},{default:ie(()=>h[9]||(h[9]=[k("span",{class:"material-icons"},"content_copy",-1)])),_:1},8,["direction"])])):X("",!0),y.save.error==null&&!m.value?(S(),D("button",{key:2,onClick:h[2]||(h[2]=q=>r.value=!r.value),class:"button"},[u(nt,{display:"Edit Name",direction:w(Ae).Left,class:"info"},{default:ie(()=>h[10]||(h[10]=[k("span",{class:"material-icons"},"edit",-1)])),_:1},8,["direction"])])):X("",!0),u(Dl,{disabled:s.value,onClick:h[3]||(h[3]=q=>i("delete")),onConfirmingChanged:h[4]||(h[4]=q=>m.value=q)},{default:ie(()=>[u(nt,{display:"Delete",direction:w(Ae).Left,class:"info"},{default:ie(()=>h[11]||(h[11]=[k("span",{class:"material-icons",style:{margin:"-2px"}},"delete",-1)])),_:1},8,["direction"])]),_:1},8,["disabled"])])):y.readonly!==!0?(S(),D("div",Ol,[k("button",{onClick:v,class:"button"},[u(nt,{display:"Save",direction:w(Ae).Left,class:"info"},{default:ie(()=>h[12]||(h[12]=[k("span",{class:"material-icons"},"check",-1)])),_:1},8,["direction"])]),k("button",{onClick:h[5]||(h[5]=q=>r.value=!r.value),class:"button"},[u(nt,{display:"Cancel",direction:w(Ae).Left,class:"info"},{default:ie(()=>h[13]||(h[13]=[k("span",{class:"material-icons"},"close",-1)])),_:1},8,["direction"])])])):X("",!0),y.save.error==null&&!r.value?(S(),D("div",Ll,[f.value?(S(),Ce(nt,{key:0,display:"Synced!",direction:w(Ae).Right},{default:ie(()=>h[14]||(h[14]=[k("span",{class:"material-icons synced"},"cloud",-1)])),_:1},8,["direction"])):X("",!0),k("button",{class:"button open",onClick:h[6]||(h[6]=q=>i("open")),disabled:y.readonly},[k("h3",null,oe(y.save.name),1)],8,Gl),k("span",zl,"v"+oe(y.save.modVersion),1),h[15]||(h[15]=k("br",null,null,-1)),o.value?(S(),D("div",Wl," Last played "+oe(w(a).format(o.value)),1)):X("",!0)])):y.save.error==null&&r.value?(S(),D("div",$l,[u(ta,{modelValue:p.value,"onUpdate:modelValue":h[7]||(h[7]=q=>p.value=q),class:"editname",onSubmit:v},null,8,["modelValue"])])):(S(),D("div",Bl,[N(" Error: Failed to load save with id "+oe(y.save.id),1),h[16]||(h[16]=k("br",null,null,-1)),N(oe(y.save.error),1)]))],2))}}),xn=he(Ul,[["__scopeId","data-v-0058f767"]]),Vl={key:0,style:{color:"var(--danger)"}},Jl={class:"modal-footer"},jl={class:"field"},Yl={class:"field-buttons"},Hl={class:"footer"},Ql=de({__name:"SavesManager",setup(n,{expose:e}){const t=V(!1),i=V(null);e({open(){t.value=!0}});const a=V(!1),r=V(""),m=V(null);le(r,M=>{M?Rt(()=>{try{if(M=Ye(M)??"",M===""){console.warn("Unable to determine preset encoding",M),a.value=!0;return}const E=JSON.parse(M);if(typeof E!="object"){a.value=!0;return}const z=Dt();E.id=z,G(E),r.value="",a.value=!1,Q.saves.push(z)}catch{a.value=!0}}):a.value=!1});let p=Object.assign({}),s=V(Object.keys(p).reduce((M,E)=>(M.push({label:E.split("/").slice(-1)[0].slice(0,-4),value:p[E]}),M),[]));le(t,M=>{M&&fl()});const o=$(()=>Q.saves.reduce((M,E)=>(M[E]=hl(E),M),{})),f=$(()=>{var M;return((M=Te.value)==null?void 0:M.loggedIn)===!0&&Q.saves.length<Wt.value.length});function v(M){let E;switch(_.id===M?E=wt(_):E=JSON.stringify(o.value[M]),ee.exportEncoding){default:console.warn(`Unknown save encoding: ${ee.exportEncoding}. Defaulting to lz`);case"lz":E=He.compressToUTF16(E);break;case"base64":E=btoa(unescape(encodeURIComponent(E)));break;case"plain":break}const z=document.createElement("textarea");z.value=E,document.body.appendChild(z),z.select(),z.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(z)}function y(M){_.id===M&&G();const E={...o.value[M],id:Dt()};G(E),Q.saves.push(E.id)}function h(M){var E;((E=Te.value)==null?void 0:E.loggedIn)===!0&&Te.value.getSaveList().then(z=>{var _e;const we=Object.keys(z).find(ct=>{const Qe=z[parseInt(ct)].content;try{if(JSON.parse(Qe).id===M)return!0}catch{return!1}});we!=null&&((_e=Te.value)==null||_e.save(parseInt(we),"","").catch(console.error))}),Q.saves=Q.saves.filter(z=>z!==M),localStorage.removeItem(M),Kt(M)}function q(M){o.value[_.id].time=_.time,G(),Kt(_.id),$e(o.value[M]),Kt(M)}function R(M){if(m.value=M,Rt(()=>{m.value=null}),M=Ye(M)??"",M===""){console.warn("Unable to determine preset encoding",M);return}const E=JSON.parse(M);E.id=Dt(),G(E),Q.saves.push(E.id),q(E.id)}function H(M,E){const z=o.value[M];z!=null&&(z.name=E,_.id===M?(_.name=E,G()):(G(z),Kt(M)))}return(M,E)=>(S(),Ce(xt,{modelValue:t.value,"onUpdate:modelValue":E[4]||(E[4]=z=>t.value=z),ref_key:"modal",ref:i},{header:ie(()=>E[5]||(E[5]=[k("h2",null,"Saves Manager",-1)])),body:ie(({shown:z})=>[f.value?(S(),D("div",Vl," Not all saves are synced! You may need to delete stale saves. ")):X("",!0),z?(S(),Ce(w(Da),{key:1,list:w(Q).saves,handle:".handle",itemKey:we=>we},{item:ie(({element:we})=>[u(xn,{save:o.value[we],onOpen:_e=>q(we),onExport:_e=>v(we),onEditName:_e=>H(we,_e),onDuplicate:_e=>y(we),onDelete:_e=>h(we)},null,8,["save","onOpen","onExport","onEditName","onDuplicate","onDelete"])]),_:1},8,["list","itemKey"])):X("",!0)]),footer:ie(()=>[k("div",Jl,[u(ta,{modelValue:r.value,"onUpdate:modelValue":E[0]||(E[0]=z=>r.value=z),title:"Import Save",placeholder:"Paste your save here!",class:ve({importingFailed:a.value})},null,8,["modelValue","class"]),k("div",jl,[E[6]||(E[6]=k("span",{class:"field-title"},"Create Save",-1)),k("div",Yl,[k("button",{class:"button",onClick:E[1]||(E[1]=z=>q(w(bt)().id))},"New Game"),Object.keys(w(s)).length>0?(S(),Ce($i,{key:0,options:w(s),modelValue:m.value,"onUpdate:modelValue":E[2]||(E[2]=z=>R(z)),closeOnSelect:"",placeholder:"Select preset",class:"presets"},null,8,["options","modelValue"])):X("",!0)])]),k("div",Hl,[E[7]||(E[7]=k("div",{style:{"flex-grow":"1"}},null,-1)),k("button",{class:"button modal-default-button",onClick:E[3]||(E[3]=z=>t.value=!1)}," Close ")])])]),_:1},8,["modelValue"]))}}),na=he(Ql,[["__scopeId","data-v-99458d64"]]),Zl={class:"vga-footer"},Kl=de({__name:"AddictionWarning",setup(n){const e=V(!1);Ci(()=>{ee.disableHealthWarning===!1&&Q.showHealthWarning&&re.mouseActivity.filter(i=>i).length>6&&(e.value=!0)});function t(){Q.showHealthWarning=!1,e.value=!1}return(i,a)=>(S(),D(se,null,[u(xt,zt({modelValue:e.value,"onUpdate:modelValue":a[1]||(a[1]=r=>e.value=r)},i.$attrs),{header:ie(()=>a[2]||(a[2]=[k("div",{class:"vga-modal-header"},[k("h2",null,"Kindly consider taking a break.")],-1)])),body:ie(()=>a[3]||(a[3]=[k("p",null," You've been actively enjoying this game for awhile recently - and it's great that you've been having a good time! That said, there are dangers to games like these that you should be aware of: ",-1),k("p",null," While incremental games can be fun and even healthy in certain contexts, they can exacerbate video game addiction even more than other genres. If you feel like playing incremental games is taking priority over other things in your life, or manipulating your sleep schedule, it may be prudent to seek help. ",-1),k("h4",null,"Resources:",-1),k("p",null,[k("span",null,[k("a",{style:{display:"inline"},href:"https://www.samhsa.gov/",target:"_blank"}," SAMHSA "),N(" ("),k("a",{style:{display:"inline"},href:"tel:1-800-662-4357"},"1-800-662-HELP"),N(") ")]),k("br"),k("a",{href:"https://www.reddit.com/r/StopGaming/"},"r/StopGaming")],-1)])),footer:ie(()=>[k("div",Zl,[k("button",{onClick:t,class:"button"},"Never show this again"),k("button",{onClick:a[0]||(a[0]=r=>e.value=!1),class:"button"},"Close")])]),_:1},16,["modelValue"]),u(na,{ref:"savesManager"},null,512)],64))}}),Xl=he(Kl,[["__scopeId","data-v-84eac81b"]]),eu={class:"cloud-saves-modal-header"},tu=["onClick"],nu={key:0,class:"note"},iu={key:1,class:"note"},au=["onClick"],ru={key:0,class:"note"},ou={key:1,class:"note"},su=["onClick"],lu=de({__name:"CloudSaveResolver",setup(n){const e=V(!1),t=V([]),i=$(()=>Le.value.length>1?"saves":"save"),a=V(null);le(()=>Le.value.length>0,o=>{o&&(t.value=Le.value.map(({local:f,cloud:v})=>(f.time??0)<(v.time??0)?"cloud":"local"),e.value=!0)},{immediate:!0}),le(()=>{var o;return(o=a.value)==null?void 0:o.isOpen},o=>{o===!1&&(Le.value=[])});function r(o){t.value[o]="local"}function m(o){t.value[o]="cloud"}function p(o){t.value[o]="both"}function s(){var o,f;for(let v=0;v<t.value.length;v++){const{slot:y,local:h,cloud:q}=Le.value[v];switch(t.value[v]){case"local":(o=Te.value)==null||o.save(y,He.compressToUTF16(wt(We(h))),q.name).catch(console.error);break;case"cloud":G(We(q));break;case"both":const R=Dt();G({...We(q),id:R}),Q.saves.push(R),(f=Te.value)==null||f.save(y,He.compressToUTF16(wt(We(h))),q.name).catch(console.error);break}}e.value=!1}return(o,f)=>(S(),Ce(xt,{modelValue:e.value,"onUpdate:modelValue":f[0]||(f[0]=v=>e.value=v),width:"960px",ref_key:"modal",ref:a,"prevent-closing":!0},{header:ie(()=>[k("div",eu,[k("h2",null,"Cloud "+oe(i.value)+" loaded!",1)])]),body:ie(()=>[k("div",null," Upon loading, your cloud "+oe(i.value)+" "+oe(w(Le).length>1?"appear":"appears")+" to be out of sync with your local "+oe(i.value)+". Which "+oe(i.value)+" do you want to keep? ",1),f[4]||(f[4]=k("br",null,null,-1)),(S(!0),D(se,null,at(w(w(Le)),(v,y)=>(S(),D("div",{key:v.id,class:"conflict-container"},[k("div",{onClick:h=>m(y),class:ve({selected:t.value[y]==="cloud"})},[k("h2",null,[f[1]||(f[1]=N(" Cloud ")),(v.cloud.time??0)>(v.local.time??0)?(S(),D("span",nu,"(more recent)")):X("",!0),(v.cloud.timePlayed??0)>(v.local.timePlayed??0)?(S(),D("span",iu,"(more playtime)")):X("",!0)]),u(xn,{save:v.cloud,readonly:!0},null,8,["save"])],10,tu),k("div",{onClick:h=>r(y),class:ve({selected:t.value[y]==="local"})},[k("h2",null,[f[2]||(f[2]=N(" Local ")),(v.cloud.time??0)<=(v.local.time??0)?(S(),D("span",ru,"(more recent)")):X("",!0),(v.cloud.timePlayed??0)<=(v.local.timePlayed??0)?(S(),D("span",ou,"(more playtime)")):X("",!0)]),u(xn,{save:v.local,readonly:!0},null,8,["save"])],10,au),k("div",{onClick:h=>p(y),class:ve({selected:t.value[y]==="both"}),style:{"flex-basis":"30%"}},f[3]||(f[3]=[k("h2",null,"Both",-1),k("div",{class:"save"},"Keep Both",-1)]),10,su)]))),128))]),footer:ie(()=>[k("div",{class:"cloud-saves-footer"},[k("button",{onClick:s,class:"button"},"Confirm")])]),_:1},8,["modelValue"]))}}),uu=he(lu,[["__scopeId","data-v-c79a1b2e"]]),cu={class:"field"},du=de({__name:"Toggle",props:{title:{},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,i=e,a=()=>ye(t.title??"",m=>u("span",null,[m])),r=$({get(){return!!t.modelValue},set(m){i("update:modelValue",m)}});return(m,p)=>(S(),D("label",cu,[Sn(k("input",{type:"checkbox",class:"toggle","onUpdate:modelValue":p[0]||(p[0]=s=>r.value=s)},null,512),[[Aa,r.value]]),u(a)]))}}),kn=he(du,[["__scopeId","data-v-faad62a6"]]),pu={class:"game-over-modal-header"},mu=["src","alt"],gu={class:"game-over-modal-title"},hu={key:0},fu={key:0},yu=["href"],vu={key:1},bu=de({__name:"GameOverScreen",setup(n){const{title:e,logo:t,discordName:i,discordLink:a,versionNumber:r,versionTitle:m}=ee,p=$(()=>Fi(_.timePlayed)),s=$(()=>Pt.value&&!_.keepGoing),o=ut(_,"autosave");function f(){_.keepGoing=!0}function v(){Ji(),$e(bt()),Vi()}return(y,h)=>(S(),Ce(xt,{"model-value":s.value},{header:ie(()=>[k("div",pu,[w(t)?(S(),D("img",{key:0,class:"game-over-modal-logo",src:w(t),alt:w(e)},null,8,mu)):X("",!0),k("div",gu,[h[1]||(h[1]=k("h2",null,"Congratulations!",-1)),k("h4",null,"You've beaten "+oe(w(e))+" v"+oe(w(r))+": "+oe(w(m)),1)])])]),body:ie(({shown:q})=>[q?(S(),D("div",hu,[k("div",null,"It took you "+oe(p.value)+" to beat the game.",1),h[4]||(h[4]=k("br",null,null,-1)),h[5]||(h[5]=k("div",null," Please check the Discord to discuss the game or to check for new content updates! ",-1)),h[6]||(h[6]=k("br",null,null,-1)),w(a)&&w(i)?(S(),D("div",fu,[k("a",{href:w(a),class:"game-over-modal-discord-link"},[h[2]||(h[2]=k("span",{class:"material-icons game-over-modal-discord"},"discord",-1)),N(" "+oe(w(i)),1)],8,yu)])):(S(),D("div",vu,h[3]||(h[3]=[k("a",{href:"https://discord.gg/yJ4fjnjU54",class:"game-over-modal-discord-link"},[k("span",{class:"material-icons game-over-modal-discord"},"discord"),N(" Profectus & Friends ")],-1)]))),u(kn,{title:"Autosave",modelValue:o.value,"onUpdate:modelValue":h[0]||(h[0]=R=>o.value=R)},null,8,["modelValue"])])):X("",!0)]),footer:ie(()=>[k("div",{class:"game-over-footer"},[k("button",{onClick:f,class:"button"},"Keep Going"),k("button",{onClick:v,class:"button danger"},"Play Again")])]),_:1},8,["model-value"]))}}),wu=he(bu,[["__scopeId","data-v-38d62589"]]),Cu={key:0},_u=["href"],xu={class:"nan-footer"},ku=de({__name:"NaNScreen",setup(n){const{discordName:e,discordLink:t}=ee,i=V(!0),a=V(!0),r=ut(re,"hasNaN"),m=V(null);le(r,y=>{y?(i.value=_.autosave,a.value=_.devSpeed===0):(_.autosave=i.value,_.devSpeed=a.value?0:null)});const p=$(()=>{var y;return(y=re.NaNPath)==null?void 0:y.join(".")}),s=$(()=>re.NaNPersistent!=null?re.NaNPersistent.value:null);function o(){re.NaNPersistent!=null&&(re.NaNPersistent.value=new d(0),re.hasNaN=!1)}function f(){re.NaNPersistent&&(re.NaNPersistent.value=new d(1),re.hasNaN=!1)}function v(){re.NaNPersistent&&(re.NaNPersistent.value=new d(NaN),re.hasNaN=!1)}return(y,h)=>(S(),D(se,null,[u(xt,zt({modelValue:r.value,"onUpdate:modelValue":h[4]||(h[4]=q=>r.value=q)},y.$attrs),{header:ie(()=>h[5]||(h[5]=[k("div",{class:"nan-modal-header"},[k("h2",null,"NaN value detected!")],-1)])),body:ie(()=>[k("div",null,[N(' Attempted to assign "'+oe(p.value)+'" to NaN',1),s.value?(S(),D("span",Cu,oe(" ")+"(previously "+oe(w(Pe)(s.value))+")",1)):X("",!0),N(". Auto-saving has been "+oe(i.value?"enabled":"disabled")+". Check the console for more details, and consider sharing it with the developers on discord. ",1)]),h[7]||(h[7]=k("br",null,null,-1)),k("div",null,[k("a",{href:w(t)||"https://discord.gg/yJ4fjnjU54",class:"nan-modal-discord-link"},[h[6]||(h[6]=k("span",{class:"material-icons nan-modal-discord"},"discord",-1)),N(" "+oe(w(e)||"Profectus & Friends"),1)],8,_u)]),h[8]||(h[8]=k("br",null,null,-1)),u(kn,{title:"Autosave",modelValue:i.value,"onUpdate:modelValue":h[0]||(h[0]=q=>i.value=q)},null,8,["modelValue"]),w(ee).enablePausing?(S(),Ce(kn,{key:0,title:"Pause game",modelValue:a.value,"onUpdate:modelValue":h[1]||(h[1]=q=>a.value=q)},null,8,["modelValue"])):X("",!0)]),footer:ie(()=>[k("div",xu,[k("button",{onClick:h[2]||(h[2]=q=>{var R;return(R=m.value)==null?void 0:R.open()}),class:"button"},"Open Saves Manager"),k("button",{onClick:o,class:"button"},"Set to 0"),k("button",{onClick:f,class:"button"},"Set to 1"),s.value&&w(d).neq(s.value,0)&&w(d).neq(s.value,1)?(S(),D("button",{key:0,onClick:h[3]||(h[3]=q=>r.value=!1),class:"button"}," Set to previous ")):X("",!0),k("button",{onClick:v,class:"button danger"},"Ignore")])]),_:1},16,["modelValue"]),u(na,{ref_key:"savesManager",ref:m},null,512)],64))}}),Nu=he(ku,[["__scopeId","data-v-cab8d401"]]),Iu={key:1},Su=de({__name:"Layer",props:{display:{},minimizedDisplay:{},minimized:{},name:{},color:{},minimizable:{},nodes:{},forceHideGoBack:{},index:{}},setup(n){const e=n,t=()=>ye(e.display),i=()=>e.minimizedDisplay==null?void 0:ye(e.minimizedDisplay),a=$(()=>ee.allowGoBack&&!w(e.forceHideGoBack)&&e.index>0&&!w(e.minimized));function r(){_.tabs.splice(w(e.index),1/0)}function m(s){e.nodes.value=s}const p=V([]);return Ta((s,o,f)=>(console.warn(`Error caught in "${e.name}" layer`,s,o,f),p.value.push(s instanceof Error?s:new Error(JSON.stringify(s))),!1)),(s,o)=>p.value.length>0?(S(),Ce(Ni,{key:0,errors:p.value},null,8,["errors"])):(S(),D("div",zt({key:1,class:"layer-container",style:{"--layer-color":w(s.color)}},s.$attrs),[a.value?(S(),D("button",{key:0,class:"goBack",onClick:r},"❌")):X("",!0),w(s.minimized)?(S(),D("button",{key:1,class:"layer-tab minimized",onClick:o[0]||(o[0]=f=>s.$emit("setMinimized",!1))},[s.minimizedDisplay?(S(),Ce(i,{key:0})):(S(),D("div",Iu,oe(w(s.name)),1))])):(S(),D("div",{key:2,class:ve(["layer-tab",{showGoBack:a.value}])},[u(Si,{onUpdateNodes:m},{default:ie(()=>[u(t)]),_:1})],2)),w(s.minimizable)?(S(),D("button",{key:3,class:"minimize",onClick:o[1]||(o[1]=f=>s.$emit("setMinimized",!0))}," ▼ ")):X("",!0)],16))}}),Au=he(Su,[["__scopeId","data-v-afadeceb"]]),Tu={class:"inner-tab"},Mu=de({__name:"Game",setup(n){const e=ut(_,"tabs"),t=$(()=>Object.keys(B)),i=ee.useHeader;function a(r){const{display:m,name:p,color:s,minimizable:o,minimizedDisplay:f,minimized:v,nodes:y,forceHideGoBack:h}=r;return{display:m,name:p,color:s,minimizable:o,minimizedDisplay:f,minimized:v,nodes:y,forceHideGoBack:h}}return(r,m)=>(S(),D("div",{class:ve(["tabs-container",{useHeader:w(i)}])},[(S(!0),D(se,null,at(e.value,(p,s)=>{var o,f;return S(),D("div",{key:s,class:ve(["tab",w((o=w(B)[p])==null?void 0:o.classes)]),style:Be(w((f=w(B)[p])==null?void 0:f.style))},[k("div",Tu,[t.value.includes(p)?(S(),Ce(Au,zt({key:0,ref_for:!0},a(w(B)[p]),{index:s,onSetMinimized:v=>w(B)[p].minimized.value=v}),null,16,["index","onSetMinimized"])):(S(),Ce(Ma(p),{key:1,index:s},null,8,["index"]))])],6)}),128))],2))}}),Eu=he(Mu,[["__scopeId","data-v-d0c89af0"]]),qu={key:0,class:"tpsDisplay"},Pu=de({__name:"TPS",setup(n){const e=$(()=>d.div(re.lastTenTicks.length,re.lastTenTicks.reduce((t,i)=>t+i,0)));return(t,i)=>e.value.isNan()?X("",!0):(S(),D("div",qu,"TPS: "+oe(w(Di)(e.value)),1))}}),Du=he(Pu,[["__scopeId","data-v-7df31503"]]),Fu=de({__name:"App",setup(n){const e=ee.useHeader,t=$(()=>Ii[Q.theme].variables),i=ut(Q,"showTPS"),a=ut(re,"errors"),r=()=>Cl.map(m=>ye(m));return(m,p)=>a.value.length>0?(S(),D("div",{key:0,class:"error-container",style:Be(t.value)},[u(Ni,{errors:a.value},null,8,["errors"])],4)):(S(),D(se,{key:1},[k("div",{id:"modal-root",style:Be(t.value)},null,4),k("div",{class:ve(["app",{useHeader:w(e)}]),style:Be(t.value)},[u(Eu),w(i.value)?(S(),Ce(Du,{key:0})):X("",!0),u(Xl),u(wu),u(Nu),u(uu),u(r)],6)],64))}}),Ru=he(Fu,[["__scopeId","data-v-8c1964eb"]]),Ou="modulepreload",Lu=function(n,e){return new URL(n,e).href},yi={},Gu=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){const m=document.getElementsByTagName("link"),p=document.querySelector("meta[property=csp-nonce]"),s=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));a=Promise.allSettled(t.map(o=>{if(o=Lu(o,i),o in yi)return;yi[o]=!0;const f=o.endsWith(".css"),v=f?'[rel="stylesheet"]':"";if(!!i)for(let q=m.length-1;q>=0;q--){const R=m[q];if(R.href===o&&(!f||R.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${v}`))return;const h=document.createElement("link");if(h.rel=f?"stylesheet":Ou,f||(h.as="script"),h.crossOrigin="",h.href=o,s&&h.setAttribute("nonce",s),document.head.appendChild(h),f)return new Promise((q,R)=>{h.addEventListener("load",q),h.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${o}`)))})}))}function r(m){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=m,window.dispatchEvent(p),!p.defaultPrevented)throw m}return a.then(m=>{for(const p of m||[])p.status==="rejected"&&r(p.reason);return e().catch(r)})};function zu(n={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:i,onRegistered:a,onRegisteredSW:r,onRegisterError:m}=n;let p,s;const o=async(v=!0)=>{await s};async function f(){if("serviceWorker"in navigator){if(p=await Gu(async()=>{const{Workbox:v}=await import("./workbox-window-D5gOYdM7.js");return{Workbox:v}},[],import.meta.url).then(({Workbox:v})=>new v("./sw.js",{scope:"./",type:"classic"})).catch(v=>{m==null||m(v)}),!p)return;p.addEventListener("activated",v=>{(v.isUpdate||v.isExternal)&&window.location.reload()}),p.addEventListener("installed",v=>{v.isUpdate||i==null||i()}),p.register({immediate:e}).then(v=>{r?r("./sw.js",v):a==null||a(v)}).catch(v=>{m==null||m(v)})}}return s=f(),o}function Wu(n={}){const{immediate:e=!0,onNeedRefresh:t,onOfflineReady:i,onRegistered:a,onRegisteredSW:r,onRegisterError:m}=n,p=V(!1),s=V(!1);return{updateServiceWorker:zu({immediate:e,onNeedRefresh(){p.value=!0,t==null||t()},onOfflineReady(){s.value=!0,i==null||i()},onRegistered:a,onRegisteredSW:r,onRegisterError:m}),offlineReady:s,needRefresh:p}}let ft=null;function on(){const n=Date.now();let e=(n-_.time)/1e3;_.time=n;const t=e;if(re.lastTenTicks.push(t),re.lastTenTicks.length>10&&(re.lastTenTicks=re.lastTenTicks.slice(1)),!(Pt!=null&&Pt.value&&!_.keepGoing)&&!_.gameOver&&!re.hasNaN&&(e=Math.max(e,0),_.devSpeed!==0)){if(Ct.value=!1,_.offlineTime!=null){if(d.gt(_.offlineTime,ee.offlineLimit*3600)&&(_.offlineTime=ee.offlineLimit*3600),d.gt(_.offlineTime,0)&&_.devSpeed!==0){const i=Math.max(_.offlineTime/10,e);_.offlineTime=_.offlineTime-i,e+=i}else _.devSpeed===0&&(_.offlineTime+=e);(!_.offlineProd||d.lt(_.offlineTime,0))&&(_.offlineTime=null)}e=Math.min(e,ee.maxTickLength),_.devSpeed!=null&&(e*=_.devSpeed),Number.isFinite(e)||(e=1e308),!d.eq(e,0)&&(_.timePlayed+=e,Number.isFinite(_.timePlayed)||(_.timePlayed=1e308),be.emit("update",e,t),Q.unthrottled?(requestAnimationFrame(on),ft!=null&&(clearInterval(ft),ft=null)):ft==null&&(ft=setInterval(on,50)))}}async function $u(){Q.unthrottled?requestAnimationFrame(on):ft=setInterval(on,50)}le(Pt,n=>{n&&be.emit("gameWon")});setInterval(()=>{re.mouseActivity=[...re.mouseActivity.slice(-7),!1]},1e3*60*60);const Dn=console.error;console.error=function(...n){Dn(...n)};window.onerror=function(n,e,t,i,a){return re.errors.push(a instanceof Error?a:new Error(JSON.stringify(a))),Dn(a),!0};window.onunhandledrejection=function(n){re.errors.push(n.reason instanceof Error?n.reason:new Error(JSON.stringify(n.reason))),Dn(n.reason)};document.title=ee.title;window.projInfo=ee;ee.id===""&&console.error("Project ID is empty!","Please select a unique ID for this project in /src/data/projInfo.json");requestAnimationFrame(async()=>{await gl();const n=window.vue=Ea(Ru);n.config.errorHandler=function(e,t,i){console.error(e,i,t)},be.emit("setupVue",n),n.mount("#app"),Rt(()=>{xi(),Wu({immediate:!0,onOfflineReady(){},onRegisterError:console.warn,onRegistered:console.info})}),$u()});
